function iR(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();function Ry(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var zm={exports:{}},tc={};var yS;function sR(){if(yS)return tc;yS=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,s,a){var l=null;if(a!==void 0&&(l=""+a),s.key!==void 0&&(l=""+s.key),"key"in s){a={};for(var u in s)u!=="key"&&(a[u]=s[u])}else a=s;return s=a.ref,{$$typeof:t,type:r,key:l,ref:s!==void 0?s:null,props:a}}return tc.Fragment=e,tc.jsx=n,tc.jsxs=n,tc}var vS;function aR(){return vS||(vS=1,zm.exports=sR()),zm.exports}var A=aR(),Im={exports:{}},Pe={};var bS;function oR(){if(bS)return Pe;bS=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),v=Symbol.iterator;function b(j){return j===null||typeof j!="object"?null:(j=v&&j[v]||j["@@iterator"],typeof j=="function"?j:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,S={};function T(j,J,W){this.props=j,this.context=J,this.refs=S,this.updater=W||w}T.prototype.isReactComponent={},T.prototype.setState=function(j,J){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,J,"setState")},T.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function O(){}O.prototype=T.prototype;function M(j,J,W){this.props=j,this.context=J,this.refs=S,this.updater=W||w}var P=M.prototype=new O;P.constructor=M,x(P,T.prototype),P.isPureReactComponent=!0;var C=Array.isArray;function R(){}var k={H:null,A:null,T:null,S:null},z=Object.prototype.hasOwnProperty;function G(j,J,W){var te=W.ref;return{$$typeof:t,type:j,key:J,ref:te!==void 0?te:null,props:W}}function le(j,J){return G(j.type,J,j.props)}function he(j){return typeof j=="object"&&j!==null&&j.$$typeof===t}function ye(j){var J={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(W){return J[W]})}var Ue=/\/+/g;function ue(j,J){return typeof j=="object"&&j!==null&&j.key!=null?ye(""+j.key):J.toString(36)}function re(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(R,R):(j.status="pending",j.then(function(J){j.status==="pending"&&(j.status="fulfilled",j.value=J)},function(J){j.status==="pending"&&(j.status="rejected",j.reason=J)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function I(j,J,W,te,ce){var we=typeof j;(we==="undefined"||we==="boolean")&&(j=null);var Se=!1;if(j===null)Se=!0;else switch(we){case"bigint":case"string":case"number":Se=!0;break;case"object":switch(j.$$typeof){case t:case e:Se=!0;break;case p:return Se=j._init,I(Se(j._payload),J,W,te,ce)}}if(Se)return ce=ce(j),Se=te===""?"."+ue(j,0):te,C(ce)?(W="",Se!=null&&(W=Se.replace(Ue,"$&/")+"/"),I(ce,J,W,"",function(cn){return cn})):ce!=null&&(he(ce)&&(ce=le(ce,W+(ce.key==null||j&&j.key===ce.key?"":(""+ce.key).replace(Ue,"$&/")+"/")+Se)),J.push(ce)),1;Se=0;var Le=te===""?".":te+":";if(C(j))for(var Qe=0;Qe<j.length;Qe++)te=j[Qe],we=Le+ue(te,Qe),Se+=I(te,J,W,we,ce);else if(Qe=b(j),typeof Qe=="function")for(j=Qe.call(j),Qe=0;!(te=j.next()).done;)te=te.value,we=Le+ue(te,Qe++),Se+=I(te,J,W,we,ce);else if(we==="object"){if(typeof j.then=="function")return I(re(j),J,W,te,ce);throw J=String(j),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return Se}function Q(j,J,W){if(j==null)return j;var te=[],ce=0;return I(j,te,"","",function(we){return J.call(W,we,ce++)}),te}function Y(j){if(j._status===-1){var J=j._result;J=J(),J.then(function(W){(j._status===0||j._status===-1)&&(j._status=1,j._result=W)},function(W){(j._status===0||j._status===-1)&&(j._status=2,j._result=W)}),j._status===-1&&(j._status=0,j._result=J)}if(j._status===1)return j._result.default;throw j._result}var _e=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)},Ce={map:Q,forEach:function(j,J,W){Q(j,function(){J.apply(this,arguments)},W)},count:function(j){var J=0;return Q(j,function(){J++}),J},toArray:function(j){return Q(j,function(J){return J})||[]},only:function(j){if(!he(j))throw Error("React.Children.only expected to receive a single React element child.");return j}};return Pe.Activity=m,Pe.Children=Ce,Pe.Component=T,Pe.Fragment=n,Pe.Profiler=s,Pe.PureComponent=M,Pe.StrictMode=r,Pe.Suspense=d,Pe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,Pe.__COMPILER_RUNTIME={__proto__:null,c:function(j){return k.H.useMemoCache(j)}},Pe.cache=function(j){return function(){return j.apply(null,arguments)}},Pe.cacheSignal=function(){return null},Pe.cloneElement=function(j,J,W){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var te=x({},j.props),ce=j.key;if(J!=null)for(we in J.key!==void 0&&(ce=""+J.key),J)!z.call(J,we)||we==="key"||we==="__self"||we==="__source"||we==="ref"&&J.ref===void 0||(te[we]=J[we]);var we=arguments.length-2;if(we===1)te.children=W;else if(1<we){for(var Se=Array(we),Le=0;Le<we;Le++)Se[Le]=arguments[Le+2];te.children=Se}return G(j.type,ce,te)},Pe.createContext=function(j){return j={$$typeof:l,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:a,_context:j},j},Pe.createElement=function(j,J,W){var te,ce={},we=null;if(J!=null)for(te in J.key!==void 0&&(we=""+J.key),J)z.call(J,te)&&te!=="key"&&te!=="__self"&&te!=="__source"&&(ce[te]=J[te]);var Se=arguments.length-2;if(Se===1)ce.children=W;else if(1<Se){for(var Le=Array(Se),Qe=0;Qe<Se;Qe++)Le[Qe]=arguments[Qe+2];ce.children=Le}if(j&&j.defaultProps)for(te in Se=j.defaultProps,Se)ce[te]===void 0&&(ce[te]=Se[te]);return G(j,we,ce)},Pe.createRef=function(){return{current:null}},Pe.forwardRef=function(j){return{$$typeof:u,render:j}},Pe.isValidElement=he,Pe.lazy=function(j){return{$$typeof:p,_payload:{_status:-1,_result:j},_init:Y}},Pe.memo=function(j,J){return{$$typeof:f,type:j,compare:J===void 0?null:J}},Pe.startTransition=function(j){var J=k.T,W={};k.T=W;try{var te=j(),ce=k.S;ce!==null&&ce(W,te),typeof te=="object"&&te!==null&&typeof te.then=="function"&&te.then(R,_e)}catch(we){_e(we)}finally{J!==null&&W.types!==null&&(J.types=W.types),k.T=J}},Pe.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},Pe.use=function(j){return k.H.use(j)},Pe.useActionState=function(j,J,W){return k.H.useActionState(j,J,W)},Pe.useCallback=function(j,J){return k.H.useCallback(j,J)},Pe.useContext=function(j){return k.H.useContext(j)},Pe.useDebugValue=function(){},Pe.useDeferredValue=function(j,J){return k.H.useDeferredValue(j,J)},Pe.useEffect=function(j,J){return k.H.useEffect(j,J)},Pe.useEffectEvent=function(j){return k.H.useEffectEvent(j)},Pe.useId=function(){return k.H.useId()},Pe.useImperativeHandle=function(j,J,W){return k.H.useImperativeHandle(j,J,W)},Pe.useInsertionEffect=function(j,J){return k.H.useInsertionEffect(j,J)},Pe.useLayoutEffect=function(j,J){return k.H.useLayoutEffect(j,J)},Pe.useMemo=function(j,J){return k.H.useMemo(j,J)},Pe.useOptimistic=function(j,J){return k.H.useOptimistic(j,J)},Pe.useReducer=function(j,J,W){return k.H.useReducer(j,J,W)},Pe.useRef=function(j){return k.H.useRef(j)},Pe.useState=function(j){return k.H.useState(j)},Pe.useSyncExternalStore=function(j,J,W){return k.H.useSyncExternalStore(j,J,W)},Pe.useTransition=function(){return k.H.useTransition()},Pe.version="19.2.4",Pe}var wS;function $a(){return wS||(wS=1,Im.exports=oR()),Im.exports}var L=$a();const ae=Ry(L),lR=iR({__proto__:null,default:ae},[L]);var Bm={exports:{}},nc={},Um={exports:{}},Pm={};var SS;function cR(){return SS||(SS=1,(function(t){function e(I,Q){var Y=I.length;I.push(Q);e:for(;0<Y;){var _e=Y-1>>>1,Ce=I[_e];if(0<s(Ce,Q))I[_e]=Q,I[Y]=Ce,Y=_e;else break e}}function n(I){return I.length===0?null:I[0]}function r(I){if(I.length===0)return null;var Q=I[0],Y=I.pop();if(Y!==Q){I[0]=Y;e:for(var _e=0,Ce=I.length,j=Ce>>>1;_e<j;){var J=2*(_e+1)-1,W=I[J],te=J+1,ce=I[te];if(0>s(W,Y))te<Ce&&0>s(ce,W)?(I[_e]=ce,I[te]=Y,_e=te):(I[_e]=W,I[J]=Y,_e=J);else if(te<Ce&&0>s(ce,Y))I[_e]=ce,I[te]=Y,_e=te;else break e}}return Q}function s(I,Q){var Y=I.sortIndex-Q.sortIndex;return Y!==0?Y:I.id-Q.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}var d=[],f=[],p=1,m=null,v=3,b=!1,w=!1,x=!1,S=!1,T=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function P(I){for(var Q=n(f);Q!==null;){if(Q.callback===null)r(f);else if(Q.startTime<=I)r(f),Q.sortIndex=Q.expirationTime,e(d,Q);else break;Q=n(f)}}function C(I){if(x=!1,P(I),!w)if(n(d)!==null)w=!0,R||(R=!0,ye());else{var Q=n(f);Q!==null&&re(C,Q.startTime-I)}}var R=!1,k=-1,z=5,G=-1;function le(){return S?!0:!(t.unstable_now()-G<z)}function he(){if(S=!1,R){var I=t.unstable_now();G=I;var Q=!0;try{e:{w=!1,x&&(x=!1,O(k),k=-1),b=!0;var Y=v;try{t:{for(P(I),m=n(d);m!==null&&!(m.expirationTime>I&&le());){var _e=m.callback;if(typeof _e=="function"){m.callback=null,v=m.priorityLevel;var Ce=_e(m.expirationTime<=I);if(I=t.unstable_now(),typeof Ce=="function"){m.callback=Ce,P(I),Q=!0;break t}m===n(d)&&r(d),P(I)}else r(d);m=n(d)}if(m!==null)Q=!0;else{var j=n(f);j!==null&&re(C,j.startTime-I),Q=!1}}break e}finally{m=null,v=Y,b=!1}Q=void 0}}finally{Q?ye():R=!1}}}var ye;if(typeof M=="function")ye=function(){M(he)};else if(typeof MessageChannel<"u"){var Ue=new MessageChannel,ue=Ue.port2;Ue.port1.onmessage=he,ye=function(){ue.postMessage(null)}}else ye=function(){T(he,0)};function re(I,Q){k=T(function(){I(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(I){I.callback=null},t.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<I?Math.floor(1e3/I):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_next=function(I){switch(v){case 1:case 2:case 3:var Q=3;break;default:Q=v}var Y=v;v=Q;try{return I()}finally{v=Y}},t.unstable_requestPaint=function(){S=!0},t.unstable_runWithPriority=function(I,Q){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var Y=v;v=I;try{return Q()}finally{v=Y}},t.unstable_scheduleCallback=function(I,Q,Y){var _e=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?_e+Y:_e):Y=_e,I){case 1:var Ce=-1;break;case 2:Ce=250;break;case 5:Ce=1073741823;break;case 4:Ce=1e4;break;default:Ce=5e3}return Ce=Y+Ce,I={id:p++,callback:Q,priorityLevel:I,startTime:Y,expirationTime:Ce,sortIndex:-1},Y>_e?(I.sortIndex=Y,e(f,I),n(d)===null&&I===n(f)&&(x?(O(k),k=-1):x=!0,re(C,Y-_e))):(I.sortIndex=Ce,e(d,I),w||b||(w=!0,R||(R=!0,ye()))),I},t.unstable_shouldYield=le,t.unstable_wrapCallback=function(I){var Q=v;return function(){var Y=v;v=Q;try{return I.apply(this,arguments)}finally{v=Y}}}})(Pm)),Pm}var xS;function uR(){return xS||(xS=1,Um.exports=cR()),Um.exports}var Hm={exports:{}},kn={};var ES;function dR(){if(ES)return kn;ES=1;var t=$a();function e(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(d,f,p){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:m==null?null:""+m,children:d,containerInfo:f,implementation:p}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return kn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,kn.createPortal=function(d,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return a(d,f,null,p)},kn.flushSync=function(d){var f=l.T,p=r.p;try{if(l.T=null,r.p=2,d)return d()}finally{l.T=f,r.p=p,r.d.f()}},kn.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(d,f))},kn.prefetchDNS=function(d){typeof d=="string"&&r.d.D(d)},kn.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var p=f.as,m=u(p,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,b=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?r.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:m,integrity:v,fetchPriority:b}):p==="script"&&r.d.X(d,{crossOrigin:m,integrity:v,fetchPriority:b,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},kn.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=u(f.as,f.crossOrigin);r.d.M(d,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(d)},kn.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,m=u(p,f.crossOrigin);r.d.L(d,p,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},kn.preloadModule=function(d,f){if(typeof d=="string")if(f){var p=u(f.as,f.crossOrigin);r.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(d)},kn.requestFormReset=function(d){r.d.r(d)},kn.unstable_batchedUpdates=function(d,f){return d(f)},kn.useFormState=function(d,f,p){return l.H.useFormState(d,f,p)},kn.useFormStatus=function(){return l.H.useHostTransitionStatus()},kn.version="19.2.4",kn}var TS;function IE(){if(TS)return Hm.exports;TS=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Hm.exports=dR(),Hm.exports}var kS;function fR(){if(kS)return nc;kS=1;var t=uR(),e=$a(),n=IE();function r(i){var o="https://react.dev/errors/"+i;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function a(i){var o=i,c=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(c=o.return),i=o.return;while(i)}return o.tag===3?c:null}function l(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function u(i){if(i.tag===31){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function d(i){if(a(i)!==i)throw Error(r(188))}function f(i){var o=i.alternate;if(!o){if(o=a(i),o===null)throw Error(r(188));return o!==i?null:i}for(var c=i,h=o;;){var g=c.return;if(g===null)break;var y=g.alternate;if(y===null){if(h=g.return,h!==null){c=h;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===c)return d(g),i;if(y===h)return d(g),o;y=y.sibling}throw Error(r(188))}if(c.return!==h.return)c=g,h=y;else{for(var E=!1,_=g.child;_;){if(_===c){E=!0,c=g,h=y;break}if(_===h){E=!0,h=g,c=y;break}_=_.sibling}if(!E){for(_=y.child;_;){if(_===c){E=!0,c=y,h=g;break}if(_===h){E=!0,h=y,c=g;break}_=_.sibling}if(!E)throw Error(r(189))}}if(c.alternate!==h)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?i:o}function p(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i;for(i=i.child;i!==null;){if(o=p(i),o!==null)return o;i=i.sibling}return null}var m=Object.assign,v=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),O=Symbol.for("react.consumer"),M=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),G=Symbol.for("react.activity"),le=Symbol.for("react.memo_cache_sentinel"),he=Symbol.iterator;function ye(i){return i===null||typeof i!="object"?null:(i=he&&i[he]||i["@@iterator"],typeof i=="function"?i:null)}var Ue=Symbol.for("react.client.reference");function ue(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===Ue?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case x:return"Fragment";case T:return"Profiler";case S:return"StrictMode";case C:return"Suspense";case R:return"SuspenseList";case G:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case w:return"Portal";case M:return i.displayName||"Context";case O:return(i._context.displayName||"Context")+".Consumer";case P:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case k:return o=i.displayName||null,o!==null?o:ue(i.type)||"Memo";case z:o=i._payload,i=i._init;try{return ue(i(o))}catch{}}return null}var re=Array.isArray,I=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},_e=[],Ce=-1;function j(i){return{current:i}}function J(i){0>Ce||(i.current=_e[Ce],_e[Ce]=null,Ce--)}function W(i,o){Ce++,_e[Ce]=i.current,i.current=o}var te=j(null),ce=j(null),we=j(null),Se=j(null);function Le(i,o){switch(W(we,o),W(ce,i),W(te,null),o.nodeType){case 9:case 11:i=(i=o.documentElement)&&(i=i.namespaceURI)?Pw(i):0;break;default:if(i=o.tagName,o=o.namespaceURI)o=Pw(o),i=Hw(o,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}J(te),W(te,i)}function Qe(){J(te),J(ce),J(we)}function cn(i){i.memoizedState!==null&&W(Se,i);var o=te.current,c=Hw(o,i.type);o!==c&&(W(ce,i),W(te,c))}function Rn(i){ce.current===i&&(J(te),J(ce)),Se.current===i&&(J(Se),Xl._currentValue=Y)}var st,zr;function zn(i){if(st===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);st=o&&o[1]||"",zr=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+st+i+zr}var Ks=!1;function In(i,o){if(!i||Ks)return"";Ks=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(o){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch(K){var V=K}Reflect.construct(i,[],ee)}else{try{ee.call()}catch(K){V=K}i.call(ee.prototype)}}else{try{throw Error()}catch(K){V=K}(ee=i())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch(K){if(K&&V&&typeof K.stack=="string")return[K.stack,V.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=h.DetermineComponentFrameRoot(),E=y[0],_=y[1];if(E&&_){var D=E.split(`
`),q=_.split(`
`);for(g=h=0;h<D.length&&!D[h].includes("DetermineComponentFrameRoot");)h++;for(;g<q.length&&!q[g].includes("DetermineComponentFrameRoot");)g++;if(h===D.length||g===q.length)for(h=D.length-1,g=q.length-1;1<=h&&0<=g&&D[h]!==q[g];)g--;for(;1<=h&&0<=g;h--,g--)if(D[h]!==q[g]){if(h!==1||g!==1)do if(h--,g--,0>g||D[h]!==q[g]){var X=`
`+D[h].replace(" at new "," at ");return i.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",i.displayName)),X}while(1<=h&&0<=g);break}}}finally{Ks=!1,Error.prepareStackTrace=c}return(c=i?i.displayName||i.name:"")?zn(c):""}function fi(i,o){switch(i.tag){case 26:case 27:case 5:return zn(i.type);case 16:return zn("Lazy");case 13:return i.child!==o&&o!==null?zn("Suspense Fallback"):zn("Suspense");case 19:return zn("SuspenseList");case 0:case 15:return In(i.type,!1);case 11:return In(i.type.render,!1);case 1:return In(i.type,!0);case 31:return zn("Activity");default:return""}}function Ws(i){try{var o="",c=null;do o+=fi(i,c),c=i,i=i.return;while(i);return o}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var En=Object.prototype.hasOwnProperty,Ys=t.unstable_scheduleCallback,Js=t.unstable_cancelCallback,un=t.unstable_shouldYield,Xr=t.unstable_requestPaint,_t=t.unstable_now,hi=t.unstable_getCurrentPriorityLevel,Qr=t.unstable_ImmediatePriority,Yi=t.unstable_UserBlockingPriority,dn=t.unstable_NormalPriority,Mn=t.unstable_LowPriority,fr=t.unstable_IdlePriority,Ja=t.log,hr=t.unstable_setDisableYieldValue,pi=null,wt=null;function Bn(i){if(typeof Ja=="function"&&hr(i),wt&&typeof wt.setStrictMode=="function")try{wt.setStrictMode(pi,i)}catch{}}var Qt=Math.clz32?Math.clz32:Yn,Xa=Math.log,Xs=Math.LN2;function Yn(i){return i>>>=0,i===0?32:31-(Xa(i)/Xs|0)|0}var Ir=256,mi=262144,Br=4194304;function pr(i){var o=i&42;if(o!==0)return o;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function ze(i,o,c){var h=i.pendingLanes;if(h===0)return 0;var g=0,y=i.suspendedLanes,E=i.pingedLanes;i=i.warmLanes;var _=h&134217727;return _!==0?(h=_&~y,h!==0?g=pr(h):(E&=_,E!==0?g=pr(E):c||(c=_&~i,c!==0&&(g=pr(c))))):(_=h&~y,_!==0?g=pr(_):E!==0?g=pr(E):c||(c=h&~i,c!==0&&(g=pr(c)))),g===0?0:o!==0&&o!==g&&(o&y)===0&&(y=g&-g,c=o&-o,y>=c||y===32&&(c&4194048)!==0)?o:g}function yt(i,o){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&o)===0}function It(i,o){switch(i){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bt(){var i=Br;return Br<<=1,(Br&62914560)===0&&(Br=4194304),i}function Jn(i){for(var o=[],c=0;31>c;c++)o.push(i);return o}function vt(i,o){i.pendingLanes|=o,o!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Tn(i,o,c,h,g,y){var E=i.pendingLanes;i.pendingLanes=c,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=c,i.entangledLanes&=c,i.errorRecoveryDisabledLanes&=c,i.shellSuspendCounter=0;var _=i.entanglements,D=i.expirationTimes,q=i.hiddenUpdates;for(c=E&~c;0<c;){var X=31-Qt(c),ee=1<<X;_[X]=0,D[X]=-1;var V=q[X];if(V!==null)for(q[X]=null,X=0;X<V.length;X++){var K=V[X];K!==null&&(K.lane&=-536870913)}c&=~ee}h!==0&&gi(i,h,0),y!==0&&g===0&&i.tag!==0&&(i.suspendedLanes|=y&~(E&~o))}function gi(i,o,c){i.pendingLanes|=o,i.suspendedLanes&=~o;var h=31-Qt(o);i.entangledLanes|=o,i.entanglements[h]=i.entanglements[h]|1073741824|c&261930}function N(i,o){var c=i.entangledLanes|=o;for(i=i.entanglements;c;){var h=31-Qt(c),g=1<<h;g&o|i[h]&o&&(i[h]|=o),c&=~g}}function U(i,o){var c=o&-o;return c=(c&42)!==0?1:F(c),(c&(i.suspendedLanes|o))!==0?0:c}function F(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function ne(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function oe(){var i=Q.p;return i!==0?i:(i=window.event,i===void 0?32:uS(i.type))}function Te(i,o){var c=Q.p;try{return Q.p=i,o()}finally{Q.p=c}}var fe=Math.random().toString(36).slice(2),de="__reactFiber$"+fe,pe="__reactProps$"+fe,Ee="__reactContainer$"+fe,Ne="__reactEvents$"+fe,Ae="__reactListeners$"+fe,it="__reactHandles$"+fe,Ze="__reactResources$"+fe,Ct="__reactMarker$"+fe;function Rt(i){delete i[de],delete i[pe],delete i[Ne],delete i[Ae],delete i[it]}function Mt(i){var o=i[de];if(o)return o;for(var c=i.parentNode;c;){if(o=c[Ee]||c[de]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(i=Ww(i);i!==null;){if(c=i[de])return c;i=Ww(i)}return o}i=c,c=i.parentNode}return null}function et(i){if(i=i[de]||i[Ee]){var o=i.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return i}return null}function rn(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i.stateNode;throw Error(r(33))}function Un(i){var o=i[Ze];return o||(o=i[Ze]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Tt(i){i[Ct]=!0}var Ur=new Set,Xn={};function Pr(i,o){mr(i,o),mr(i+"Capture",o)}function mr(i,o){for(Xn[i]=o,i=0;i<o.length;i++)Ur.add(o[i])}var yi=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Qs={},Zs={};function tt(i){return En.call(Zs,i)?!0:En.call(Qs,i)?!1:yi.test(i)?Zs[i]=!0:(Qs[i]=!0,!1)}function Ut(i,o,c){if(tt(o))if(c===null)i.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":i.removeAttribute(o);return;case"boolean":var h=o.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){i.removeAttribute(o);return}}i.setAttribute(o,""+c)}}function Hr(i,o,c){if(c===null)i.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttribute(o,""+c)}}function fn(i,o,c,h){if(h===null)i.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(c);return}i.setAttributeNS(o,c,""+h)}}function nt(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function ea(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function mu(i,o,c){var h=Object.getOwnPropertyDescriptor(i.constructor.prototype,o);if(!i.hasOwnProperty(o)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var g=h.get,y=h.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return g.call(this)},set:function(E){c=""+E,y.call(this,E)}}),Object.defineProperty(i,o,{enumerable:h.enumerable}),{getValue:function(){return c},setValue:function(E){c=""+E},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function hl(i){if(!i._valueTracker){var o=ea(i)?"checked":"value";i._valueTracker=mu(i,o,""+i[o])}}function D0(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var c=o.getValue(),h="";return i&&(h=ea(i)?i.checked?"true":"false":i.value),i=h,i!==c?(o.setValue(i),!0):!1}function gu(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var QC=/[\n"\\]/g;function gr(i){return i.replace(QC,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Rh(i,o,c,h,g,y,E,_){i.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?i.type=E:i.removeAttribute("type"),o!=null?E==="number"?(o===0&&i.value===""||i.value!=o)&&(i.value=""+nt(o)):i.value!==""+nt(o)&&(i.value=""+nt(o)):E!=="submit"&&E!=="reset"||i.removeAttribute("value"),o!=null?Mh(i,E,nt(o)):c!=null?Mh(i,E,nt(c)):h!=null&&i.removeAttribute("value"),g==null&&y!=null&&(i.defaultChecked=!!y),g!=null&&(i.checked=g&&typeof g!="function"&&typeof g!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?i.name=""+nt(_):i.removeAttribute("name")}function j0(i,o,c,h,g,y,E,_){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(i.type=y),o!=null||c!=null){if(!(y!=="submit"&&y!=="reset"||o!=null)){hl(i);return}c=c!=null?""+nt(c):"",o=o!=null?""+nt(o):c,_||o===i.value||(i.value=o),i.defaultValue=o}h=h??g,h=typeof h!="function"&&typeof h!="symbol"&&!!h,i.checked=_?i.checked:!!h,i.defaultChecked=!!h,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(i.name=E),hl(i)}function Mh(i,o,c){o==="number"&&gu(i.ownerDocument)===i||i.defaultValue===""+c||(i.defaultValue=""+c)}function Qa(i,o,c,h){if(i=i.options,o){o={};for(var g=0;g<c.length;g++)o["$"+c[g]]=!0;for(c=0;c<i.length;c++)g=o.hasOwnProperty("$"+i[c].value),i[c].selected!==g&&(i[c].selected=g),g&&h&&(i[c].defaultSelected=!0)}else{for(c=""+nt(c),o=null,g=0;g<i.length;g++){if(i[g].value===c){i[g].selected=!0,h&&(i[g].defaultSelected=!0);return}o!==null||i[g].disabled||(o=i[g])}o!==null&&(o.selected=!0)}}function L0(i,o,c){if(o!=null&&(o=""+nt(o),o!==i.value&&(i.value=o),c==null)){i.defaultValue!==o&&(i.defaultValue=o);return}i.defaultValue=c!=null?""+nt(c):""}function z0(i,o,c,h){if(o==null){if(h!=null){if(c!=null)throw Error(r(92));if(re(h)){if(1<h.length)throw Error(r(93));h=h[0]}c=h}c==null&&(c=""),o=c}c=nt(o),i.defaultValue=c,h=i.textContent,h===c&&h!==""&&h!==null&&(i.value=h),hl(i)}function Za(i,o){if(o){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=o;return}}i.textContent=o}var ZC=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function I0(i,o,c){var h=o.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?h?i.setProperty(o,""):o==="float"?i.cssFloat="":i[o]="":h?i.setProperty(o,c):typeof c!="number"||c===0||ZC.has(o)?o==="float"?i.cssFloat=c:i[o]=(""+c).trim():i[o]=c+"px"}function B0(i,o,c){if(o!=null&&typeof o!="object")throw Error(r(62));if(i=i.style,c!=null){for(var h in c)!c.hasOwnProperty(h)||o!=null&&o.hasOwnProperty(h)||(h.indexOf("--")===0?i.setProperty(h,""):h==="float"?i.cssFloat="":i[h]="");for(var g in o)h=o[g],o.hasOwnProperty(g)&&c[g]!==h&&I0(i,g,h)}else for(var y in o)o.hasOwnProperty(y)&&I0(i,y,o[y])}function Nh(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eA=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),tA=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function yu(i){return tA.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function vi(){}var Dh=null;function jh(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var eo=null,to=null;function U0(i){var o=et(i);if(o&&(i=o.stateNode)){var c=i[pe]||null;e:switch(i=o.stateNode,o.type){case"input":if(Rh(i,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),o=c.name,c.type==="radio"&&o!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+gr(""+o)+'"][type="radio"]'),o=0;o<c.length;o++){var h=c[o];if(h!==i&&h.form===i.form){var g=h[pe]||null;if(!g)throw Error(r(90));Rh(h,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(o=0;o<c.length;o++)h=c[o],h.form===i.form&&D0(h)}break e;case"textarea":L0(i,c.value,c.defaultValue);break e;case"select":o=c.value,o!=null&&Qa(i,!!c.multiple,o,!1)}}}var Lh=!1;function P0(i,o,c){if(Lh)return i(o,c);Lh=!0;try{var h=i(o);return h}finally{if(Lh=!1,(eo!==null||to!==null)&&(id(),eo&&(o=eo,i=to,to=eo=null,U0(o),i)))for(o=0;o<i.length;o++)U0(i[o])}}function pl(i,o){var c=i.stateNode;if(c===null)return null;var h=c[pe]||null;if(h===null)return null;c=h[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(i=i.type,h=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!h;break e;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(r(231,o,typeof c));return c}var bi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zh=!1;if(bi)try{var ml={};Object.defineProperty(ml,"passive",{get:function(){zh=!0}}),window.addEventListener("test",ml,ml),window.removeEventListener("test",ml,ml)}catch{zh=!1}var Ji=null,Ih=null,vu=null;function H0(){if(vu)return vu;var i,o=Ih,c=o.length,h,g="value"in Ji?Ji.value:Ji.textContent,y=g.length;for(i=0;i<c&&o[i]===g[i];i++);var E=c-i;for(h=1;h<=E&&o[c-h]===g[y-h];h++);return vu=g.slice(i,1<h?1-h:void 0)}function bu(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function wu(){return!0}function $0(){return!1}function Pn(i){function o(c,h,g,y,E){this._reactName=c,this._targetInst=g,this.type=h,this.nativeEvent=y,this.target=E,this.currentTarget=null;for(var _ in i)i.hasOwnProperty(_)&&(c=i[_],this[_]=c?c(y):y[_]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?wu:$0,this.isPropagationStopped=$0,this}return m(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=wu)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=wu)},persist:function(){},isPersistent:wu}),o}var ta={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Su=Pn(ta),gl=m({},ta,{view:0,detail:0}),nA=Pn(gl),Bh,Uh,yl,xu=m({},gl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hh,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==yl&&(yl&&i.type==="mousemove"?(Bh=i.screenX-yl.screenX,Uh=i.screenY-yl.screenY):Uh=Bh=0,yl=i),Bh)},movementY:function(i){return"movementY"in i?i.movementY:Uh}}),q0=Pn(xu),rA=m({},xu,{dataTransfer:0}),iA=Pn(rA),sA=m({},gl,{relatedTarget:0}),Ph=Pn(sA),aA=m({},ta,{animationName:0,elapsedTime:0,pseudoElement:0}),oA=Pn(aA),lA=m({},ta,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),cA=Pn(lA),uA=m({},ta,{data:0}),V0=Pn(uA),dA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pA(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=hA[i])?!!o[i]:!1}function Hh(){return pA}var mA=m({},gl,{key:function(i){if(i.key){var o=dA[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=bu(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?fA[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hh,charCode:function(i){return i.type==="keypress"?bu(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?bu(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),gA=Pn(mA),yA=m({},xu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),F0=Pn(yA),vA=m({},gl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hh}),bA=Pn(vA),wA=m({},ta,{propertyName:0,elapsedTime:0,pseudoElement:0}),SA=Pn(wA),xA=m({},xu,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),EA=Pn(xA),TA=m({},ta,{newState:0,oldState:0}),kA=Pn(TA),_A=[9,13,27,32],$h=bi&&"CompositionEvent"in window,vl=null;bi&&"documentMode"in document&&(vl=document.documentMode);var CA=bi&&"TextEvent"in window&&!vl,G0=bi&&(!$h||vl&&8<vl&&11>=vl),K0=" ",W0=!1;function Y0(i,o){switch(i){case"keyup":return _A.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function J0(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var no=!1;function AA(i,o){switch(i){case"compositionend":return J0(o);case"keypress":return o.which!==32?null:(W0=!0,K0);case"textInput":return i=o.data,i===K0&&W0?null:i;default:return null}}function OA(i,o){if(no)return i==="compositionend"||!$h&&Y0(i,o)?(i=H0(),vu=Ih=Ji=null,no=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return G0&&o.locale!=="ko"?null:o.data;default:return null}}var RA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function X0(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!RA[i.type]:o==="textarea"}function Q0(i,o,c,h){eo?to?to.push(h):to=[h]:eo=h,o=dd(o,"onChange"),0<o.length&&(c=new Su("onChange","change",null,c,h),i.push({event:c,listeners:o}))}var bl=null,wl=null;function MA(i){jw(i,0)}function Eu(i){var o=rn(i);if(D0(o))return i}function Z0(i,o){if(i==="change")return o}var ev=!1;if(bi){var qh;if(bi){var Vh="oninput"in document;if(!Vh){var tv=document.createElement("div");tv.setAttribute("oninput","return;"),Vh=typeof tv.oninput=="function"}qh=Vh}else qh=!1;ev=qh&&(!document.documentMode||9<document.documentMode)}function nv(){bl&&(bl.detachEvent("onpropertychange",rv),wl=bl=null)}function rv(i){if(i.propertyName==="value"&&Eu(wl)){var o=[];Q0(o,wl,i,jh(i)),P0(MA,o)}}function NA(i,o,c){i==="focusin"?(nv(),bl=o,wl=c,bl.attachEvent("onpropertychange",rv)):i==="focusout"&&nv()}function DA(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Eu(wl)}function jA(i,o){if(i==="click")return Eu(o)}function LA(i,o){if(i==="input"||i==="change")return Eu(o)}function zA(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var Qn=typeof Object.is=="function"?Object.is:zA;function Sl(i,o){if(Qn(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var c=Object.keys(i),h=Object.keys(o);if(c.length!==h.length)return!1;for(h=0;h<c.length;h++){var g=c[h];if(!En.call(o,g)||!Qn(i[g],o[g]))return!1}return!0}function iv(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function sv(i,o){var c=iv(i);i=0;for(var h;c;){if(c.nodeType===3){if(h=i+c.textContent.length,i<=o&&h>=o)return{node:c,offset:o-i};i=h}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=iv(c)}}function av(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?av(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function ov(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var o=gu(i.document);o instanceof i.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)i=o.contentWindow;else break;o=gu(i.document)}return o}function Fh(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}var IA=bi&&"documentMode"in document&&11>=document.documentMode,ro=null,Gh=null,xl=null,Kh=!1;function lv(i,o,c){var h=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Kh||ro==null||ro!==gu(h)||(h=ro,"selectionStart"in h&&Fh(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),xl&&Sl(xl,h)||(xl=h,h=dd(Gh,"onSelect"),0<h.length&&(o=new Su("onSelect","select",null,o,c),i.push({event:o,listeners:h}),o.target=ro)))}function na(i,o){var c={};return c[i.toLowerCase()]=o.toLowerCase(),c["Webkit"+i]="webkit"+o,c["Moz"+i]="moz"+o,c}var io={animationend:na("Animation","AnimationEnd"),animationiteration:na("Animation","AnimationIteration"),animationstart:na("Animation","AnimationStart"),transitionrun:na("Transition","TransitionRun"),transitionstart:na("Transition","TransitionStart"),transitioncancel:na("Transition","TransitionCancel"),transitionend:na("Transition","TransitionEnd")},Wh={},cv={};bi&&(cv=document.createElement("div").style,"AnimationEvent"in window||(delete io.animationend.animation,delete io.animationiteration.animation,delete io.animationstart.animation),"TransitionEvent"in window||delete io.transitionend.transition);function ra(i){if(Wh[i])return Wh[i];if(!io[i])return i;var o=io[i],c;for(c in o)if(o.hasOwnProperty(c)&&c in cv)return Wh[i]=o[c];return i}var uv=ra("animationend"),dv=ra("animationiteration"),fv=ra("animationstart"),BA=ra("transitionrun"),UA=ra("transitionstart"),PA=ra("transitioncancel"),hv=ra("transitionend"),pv=new Map,Yh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Yh.push("scrollEnd");function $r(i,o){pv.set(i,o),Pr(o,[i])}var Tu=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},yr=[],so=0,Jh=0;function ku(){for(var i=so,o=Jh=so=0;o<i;){var c=yr[o];yr[o++]=null;var h=yr[o];yr[o++]=null;var g=yr[o];yr[o++]=null;var y=yr[o];if(yr[o++]=null,h!==null&&g!==null){var E=h.pending;E===null?g.next=g:(g.next=E.next,E.next=g),h.pending=g}y!==0&&mv(c,g,y)}}function _u(i,o,c,h){yr[so++]=i,yr[so++]=o,yr[so++]=c,yr[so++]=h,Jh|=h,i.lanes|=h,i=i.alternate,i!==null&&(i.lanes|=h)}function Xh(i,o,c,h){return _u(i,o,c,h),Cu(i)}function ia(i,o){return _u(i,null,null,o),Cu(i)}function mv(i,o,c){i.lanes|=c;var h=i.alternate;h!==null&&(h.lanes|=c);for(var g=!1,y=i.return;y!==null;)y.childLanes|=c,h=y.alternate,h!==null&&(h.childLanes|=c),y.tag===22&&(i=y.stateNode,i===null||i._visibility&1||(g=!0)),i=y,y=y.return;return i.tag===3?(y=i.stateNode,g&&o!==null&&(g=31-Qt(c),i=y.hiddenUpdates,h=i[g],h===null?i[g]=[o]:h.push(o),o.lane=c|536870912),y):null}function Cu(i){if(50<Vl)throw Vl=0,am=null,Error(r(185));for(var o=i.return;o!==null;)i=o,o=i.return;return i.tag===3?i.stateNode:null}var ao={};function HA(i,o,c,h){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zn(i,o,c,h){return new HA(i,o,c,h)}function Qh(i){return i=i.prototype,!(!i||!i.isReactComponent)}function wi(i,o){var c=i.alternate;return c===null?(c=Zn(i.tag,o,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=o,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&65011712,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,o=i.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c.refCleanup=i.refCleanup,c}function gv(i,o){i.flags&=65011714;var c=i.alternate;return c===null?(i.childLanes=0,i.lanes=o,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=c.childLanes,i.lanes=c.lanes,i.child=c.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=c.memoizedProps,i.memoizedState=c.memoizedState,i.updateQueue=c.updateQueue,i.type=c.type,o=c.dependencies,i.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),i}function Au(i,o,c,h,g,y){var E=0;if(h=i,typeof i=="function")Qh(i)&&(E=1);else if(typeof i=="string")E=GO(i,c,te.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case G:return i=Zn(31,c,o,g),i.elementType=G,i.lanes=y,i;case x:return sa(c.children,g,y,o);case S:E=8,g|=24;break;case T:return i=Zn(12,c,o,g|2),i.elementType=T,i.lanes=y,i;case C:return i=Zn(13,c,o,g),i.elementType=C,i.lanes=y,i;case R:return i=Zn(19,c,o,g),i.elementType=R,i.lanes=y,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case M:E=10;break e;case O:E=9;break e;case P:E=11;break e;case k:E=14;break e;case z:E=16,h=null;break e}E=29,c=Error(r(130,i===null?"null":typeof i,"")),h=null}return o=Zn(E,c,o,g),o.elementType=i,o.type=h,o.lanes=y,o}function sa(i,o,c,h){return i=Zn(7,i,h,o),i.lanes=c,i}function Zh(i,o,c){return i=Zn(6,i,null,o),i.lanes=c,i}function yv(i){var o=Zn(18,null,null,0);return o.stateNode=i,o}function ep(i,o,c){return o=Zn(4,i.children!==null?i.children:[],i.key,o),o.lanes=c,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}var vv=new WeakMap;function vr(i,o){if(typeof i=="object"&&i!==null){var c=vv.get(i);return c!==void 0?c:(o={value:i,source:o,stack:Ws(o)},vv.set(i,o),o)}return{value:i,source:o,stack:Ws(o)}}var oo=[],lo=0,Ou=null,El=0,br=[],wr=0,Xi=null,Zr=1,ei="";function Si(i,o){oo[lo++]=El,oo[lo++]=Ou,Ou=i,El=o}function bv(i,o,c){br[wr++]=Zr,br[wr++]=ei,br[wr++]=Xi,Xi=i;var h=Zr;i=ei;var g=32-Qt(h)-1;h&=~(1<<g),c+=1;var y=32-Qt(o)+g;if(30<y){var E=g-g%5;y=(h&(1<<E)-1).toString(32),h>>=E,g-=E,Zr=1<<32-Qt(o)+g|c<<g|h,ei=y+i}else Zr=1<<y|c<<g|h,ei=i}function tp(i){i.return!==null&&(Si(i,1),bv(i,1,0))}function np(i){for(;i===Ou;)Ou=oo[--lo],oo[lo]=null,El=oo[--lo],oo[lo]=null;for(;i===Xi;)Xi=br[--wr],br[wr]=null,ei=br[--wr],br[wr]=null,Zr=br[--wr],br[wr]=null}function wv(i,o){br[wr++]=Zr,br[wr++]=ei,br[wr++]=Xi,Zr=o.id,ei=o.overflow,Xi=i}var hn=null,St=null,rt=!1,Qi=null,Sr=!1,rp=Error(r(519));function Zi(i){var o=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Tl(vr(o,i)),rp}function Sv(i){var o=i.stateNode,c=i.type,h=i.memoizedProps;switch(o[de]=i,o[pe]=h,c){case"dialog":Ye("cancel",o),Ye("close",o);break;case"iframe":case"object":case"embed":Ye("load",o);break;case"video":case"audio":for(c=0;c<Gl.length;c++)Ye(Gl[c],o);break;case"source":Ye("error",o);break;case"img":case"image":case"link":Ye("error",o),Ye("load",o);break;case"details":Ye("toggle",o);break;case"input":Ye("invalid",o),j0(o,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":Ye("invalid",o);break;case"textarea":Ye("invalid",o),z0(o,h.value,h.defaultValue,h.children)}c=h.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||o.textContent===""+c||h.suppressHydrationWarning===!0||Bw(o.textContent,c)?(h.popover!=null&&(Ye("beforetoggle",o),Ye("toggle",o)),h.onScroll!=null&&Ye("scroll",o),h.onScrollEnd!=null&&Ye("scrollend",o),h.onClick!=null&&(o.onclick=vi),o=!0):o=!1,o||Zi(i,!0)}function xv(i){for(hn=i.return;hn;)switch(hn.tag){case 5:case 31:case 13:Sr=!1;return;case 27:case 3:Sr=!0;return;default:hn=hn.return}}function co(i){if(i!==hn)return!1;if(!rt)return xv(i),rt=!0,!1;var o=i.tag,c;if((c=o!==3&&o!==27)&&((c=o===5)&&(c=i.type,c=!(c!=="form"&&c!=="button")||Sm(i.type,i.memoizedProps)),c=!c),c&&St&&Zi(i),xv(i),o===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));St=Kw(i)}else if(o===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));St=Kw(i)}else o===27?(o=St,ps(i.type)?(i=_m,_m=null,St=i):St=o):St=hn?Er(i.stateNode.nextSibling):null;return!0}function aa(){St=hn=null,rt=!1}function ip(){var i=Qi;return i!==null&&(Vn===null?Vn=i:Vn.push.apply(Vn,i),Qi=null),i}function Tl(i){Qi===null?Qi=[i]:Qi.push(i)}var sp=j(null),oa=null,xi=null;function es(i,o,c){W(sp,o._currentValue),o._currentValue=c}function Ei(i){i._currentValue=sp.current,J(sp)}function ap(i,o,c){for(;i!==null;){var h=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,h!==null&&(h.childLanes|=o)):h!==null&&(h.childLanes&o)!==o&&(h.childLanes|=o),i===c)break;i=i.return}}function op(i,o,c,h){var g=i.child;for(g!==null&&(g.return=i);g!==null;){var y=g.dependencies;if(y!==null){var E=g.child;y=y.firstContext;e:for(;y!==null;){var _=y;y=g;for(var D=0;D<o.length;D++)if(_.context===o[D]){y.lanes|=c,_=y.alternate,_!==null&&(_.lanes|=c),ap(y.return,c,i),h||(E=null);break e}y=_.next}}else if(g.tag===18){if(E=g.return,E===null)throw Error(r(341));E.lanes|=c,y=E.alternate,y!==null&&(y.lanes|=c),ap(E,c,i),E=null}else E=g.child;if(E!==null)E.return=g;else for(E=g;E!==null;){if(E===i){E=null;break}if(g=E.sibling,g!==null){g.return=E.return,E=g;break}E=E.return}g=E}}function uo(i,o,c,h){i=null;for(var g=o,y=!1;g!==null;){if(!y){if((g.flags&524288)!==0)y=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var E=g.alternate;if(E===null)throw Error(r(387));if(E=E.memoizedProps,E!==null){var _=g.type;Qn(g.pendingProps.value,E.value)||(i!==null?i.push(_):i=[_])}}else if(g===Se.current){if(E=g.alternate,E===null)throw Error(r(387));E.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(i!==null?i.push(Xl):i=[Xl])}g=g.return}i!==null&&op(o,i,c,h),o.flags|=262144}function Ru(i){for(i=i.firstContext;i!==null;){if(!Qn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function la(i){oa=i,xi=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function pn(i){return Ev(oa,i)}function Mu(i,o){return oa===null&&la(i),Ev(i,o)}function Ev(i,o){var c=o._currentValue;if(o={context:o,memoizedValue:c,next:null},xi===null){if(i===null)throw Error(r(308));xi=o,i.dependencies={lanes:0,firstContext:o},i.flags|=524288}else xi=xi.next=o;return c}var $A=typeof AbortController<"u"?AbortController:function(){var i=[],o=this.signal={aborted:!1,addEventListener:function(c,h){i.push(h)}};this.abort=function(){o.aborted=!0,i.forEach(function(c){return c()})}},qA=t.unstable_scheduleCallback,VA=t.unstable_NormalPriority,Vt={$$typeof:M,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function lp(){return{controller:new $A,data:new Map,refCount:0}}function kl(i){i.refCount--,i.refCount===0&&qA(VA,function(){i.controller.abort()})}var _l=null,cp=0,fo=0,ho=null;function FA(i,o){if(_l===null){var c=_l=[];cp=0,fo=fm(),ho={status:"pending",value:void 0,then:function(h){c.push(h)}}}return cp++,o.then(Tv,Tv),o}function Tv(){if(--cp===0&&_l!==null){ho!==null&&(ho.status="fulfilled");var i=_l;_l=null,fo=0,ho=null;for(var o=0;o<i.length;o++)(0,i[o])()}}function GA(i,o){var c=[],h={status:"pending",value:null,reason:null,then:function(g){c.push(g)}};return i.then(function(){h.status="fulfilled",h.value=o;for(var g=0;g<c.length;g++)(0,c[g])(o)},function(g){for(h.status="rejected",h.reason=g,g=0;g<c.length;g++)(0,c[g])(void 0)}),h}var kv=I.S;I.S=function(i,o){lw=_t(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&FA(i,o),kv!==null&&kv(i,o)};var ca=j(null);function up(){var i=ca.current;return i!==null?i:mt.pooledCache}function Nu(i,o){o===null?W(ca,ca.current):W(ca,o.pool)}function _v(){var i=up();return i===null?null:{parent:Vt._currentValue,pool:i}}var po=Error(r(460)),dp=Error(r(474)),Du=Error(r(542)),ju={then:function(){}};function Cv(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Av(i,o,c){switch(c=i[c],c===void 0?i.push(o):c!==o&&(o.then(vi,vi),o=c),o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,Rv(i),i;default:if(typeof o.status=="string")o.then(vi,vi);else{if(i=mt,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=o,i.status="pending",i.then(function(h){if(o.status==="pending"){var g=o;g.status="fulfilled",g.value=h}},function(h){if(o.status==="pending"){var g=o;g.status="rejected",g.reason=h}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,Rv(i),i}throw da=o,po}}function ua(i){try{var o=i._init;return o(i._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(da=c,po):c}}var da=null;function Ov(){if(da===null)throw Error(r(459));var i=da;return da=null,i}function Rv(i){if(i===po||i===Du)throw Error(r(483))}var mo=null,Cl=0;function Lu(i){var o=Cl;return Cl+=1,mo===null&&(mo=[]),Av(mo,i,o)}function Al(i,o){o=o.props.ref,i.ref=o!==void 0?o:null}function zu(i,o){throw o.$$typeof===v?Error(r(525)):(i=Object.prototype.toString.call(o),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i)))}function Mv(i){function o(H,B){if(i){var $=H.deletions;$===null?(H.deletions=[B],H.flags|=16):$.push(B)}}function c(H,B){if(!i)return null;for(;B!==null;)o(H,B),B=B.sibling;return null}function h(H){for(var B=new Map;H!==null;)H.key!==null?B.set(H.key,H):B.set(H.index,H),H=H.sibling;return B}function g(H,B){return H=wi(H,B),H.index=0,H.sibling=null,H}function y(H,B,$){return H.index=$,i?($=H.alternate,$!==null?($=$.index,$<B?(H.flags|=67108866,B):$):(H.flags|=67108866,B)):(H.flags|=1048576,B)}function E(H){return i&&H.alternate===null&&(H.flags|=67108866),H}function _(H,B,$,Z){return B===null||B.tag!==6?(B=Zh($,H.mode,Z),B.return=H,B):(B=g(B,$),B.return=H,B)}function D(H,B,$,Z){var Re=$.type;return Re===x?X(H,B,$.props.children,Z,$.key):B!==null&&(B.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===z&&ua(Re)===B.type)?(B=g(B,$.props),Al(B,$),B.return=H,B):(B=Au($.type,$.key,$.props,null,H.mode,Z),Al(B,$),B.return=H,B)}function q(H,B,$,Z){return B===null||B.tag!==4||B.stateNode.containerInfo!==$.containerInfo||B.stateNode.implementation!==$.implementation?(B=ep($,H.mode,Z),B.return=H,B):(B=g(B,$.children||[]),B.return=H,B)}function X(H,B,$,Z,Re){return B===null||B.tag!==7?(B=sa($,H.mode,Z,Re),B.return=H,B):(B=g(B,$),B.return=H,B)}function ee(H,B,$){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=Zh(""+B,H.mode,$),B.return=H,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case b:return $=Au(B.type,B.key,B.props,null,H.mode,$),Al($,B),$.return=H,$;case w:return B=ep(B,H.mode,$),B.return=H,B;case z:return B=ua(B),ee(H,B,$)}if(re(B)||ye(B))return B=sa(B,H.mode,$,null),B.return=H,B;if(typeof B.then=="function")return ee(H,Lu(B),$);if(B.$$typeof===M)return ee(H,Mu(H,B),$);zu(H,B)}return null}function V(H,B,$,Z){var Re=B!==null?B.key:null;if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return Re!==null?null:_(H,B,""+$,Z);if(typeof $=="object"&&$!==null){switch($.$$typeof){case b:return $.key===Re?D(H,B,$,Z):null;case w:return $.key===Re?q(H,B,$,Z):null;case z:return $=ua($),V(H,B,$,Z)}if(re($)||ye($))return Re!==null?null:X(H,B,$,Z,null);if(typeof $.then=="function")return V(H,B,Lu($),Z);if($.$$typeof===M)return V(H,B,Mu(H,$),Z);zu(H,$)}return null}function K(H,B,$,Z,Re){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return H=H.get($)||null,_(B,H,""+Z,Re);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case b:return H=H.get(Z.key===null?$:Z.key)||null,D(B,H,Z,Re);case w:return H=H.get(Z.key===null?$:Z.key)||null,q(B,H,Z,Re);case z:return Z=ua(Z),K(H,B,$,Z,Re)}if(re(Z)||ye(Z))return H=H.get($)||null,X(B,H,Z,Re,null);if(typeof Z.then=="function")return K(H,B,$,Lu(Z),Re);if(Z.$$typeof===M)return K(H,B,$,Mu(B,Z),Re);zu(B,Z)}return null}function ge(H,B,$,Z){for(var Re=null,at=null,xe=B,$e=B=0,Xe=null;xe!==null&&$e<$.length;$e++){xe.index>$e?(Xe=xe,xe=null):Xe=xe.sibling;var ot=V(H,xe,$[$e],Z);if(ot===null){xe===null&&(xe=Xe);break}i&&xe&&ot.alternate===null&&o(H,xe),B=y(ot,B,$e),at===null?Re=ot:at.sibling=ot,at=ot,xe=Xe}if($e===$.length)return c(H,xe),rt&&Si(H,$e),Re;if(xe===null){for(;$e<$.length;$e++)xe=ee(H,$[$e],Z),xe!==null&&(B=y(xe,B,$e),at===null?Re=xe:at.sibling=xe,at=xe);return rt&&Si(H,$e),Re}for(xe=h(xe);$e<$.length;$e++)Xe=K(xe,H,$e,$[$e],Z),Xe!==null&&(i&&Xe.alternate!==null&&xe.delete(Xe.key===null?$e:Xe.key),B=y(Xe,B,$e),at===null?Re=Xe:at.sibling=Xe,at=Xe);return i&&xe.forEach(function(bs){return o(H,bs)}),rt&&Si(H,$e),Re}function De(H,B,$,Z){if($==null)throw Error(r(151));for(var Re=null,at=null,xe=B,$e=B=0,Xe=null,ot=$.next();xe!==null&&!ot.done;$e++,ot=$.next()){xe.index>$e?(Xe=xe,xe=null):Xe=xe.sibling;var bs=V(H,xe,ot.value,Z);if(bs===null){xe===null&&(xe=Xe);break}i&&xe&&bs.alternate===null&&o(H,xe),B=y(bs,B,$e),at===null?Re=bs:at.sibling=bs,at=bs,xe=Xe}if(ot.done)return c(H,xe),rt&&Si(H,$e),Re;if(xe===null){for(;!ot.done;$e++,ot=$.next())ot=ee(H,ot.value,Z),ot!==null&&(B=y(ot,B,$e),at===null?Re=ot:at.sibling=ot,at=ot);return rt&&Si(H,$e),Re}for(xe=h(xe);!ot.done;$e++,ot=$.next())ot=K(xe,H,$e,ot.value,Z),ot!==null&&(i&&ot.alternate!==null&&xe.delete(ot.key===null?$e:ot.key),B=y(ot,B,$e),at===null?Re=ot:at.sibling=ot,at=ot);return i&&xe.forEach(function(rR){return o(H,rR)}),rt&&Si(H,$e),Re}function pt(H,B,$,Z){if(typeof $=="object"&&$!==null&&$.type===x&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case b:e:{for(var Re=$.key;B!==null;){if(B.key===Re){if(Re=$.type,Re===x){if(B.tag===7){c(H,B.sibling),Z=g(B,$.props.children),Z.return=H,H=Z;break e}}else if(B.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===z&&ua(Re)===B.type){c(H,B.sibling),Z=g(B,$.props),Al(Z,$),Z.return=H,H=Z;break e}c(H,B);break}else o(H,B);B=B.sibling}$.type===x?(Z=sa($.props.children,H.mode,Z,$.key),Z.return=H,H=Z):(Z=Au($.type,$.key,$.props,null,H.mode,Z),Al(Z,$),Z.return=H,H=Z)}return E(H);case w:e:{for(Re=$.key;B!==null;){if(B.key===Re)if(B.tag===4&&B.stateNode.containerInfo===$.containerInfo&&B.stateNode.implementation===$.implementation){c(H,B.sibling),Z=g(B,$.children||[]),Z.return=H,H=Z;break e}else{c(H,B);break}else o(H,B);B=B.sibling}Z=ep($,H.mode,Z),Z.return=H,H=Z}return E(H);case z:return $=ua($),pt(H,B,$,Z)}if(re($))return ge(H,B,$,Z);if(ye($)){if(Re=ye($),typeof Re!="function")throw Error(r(150));return $=Re.call($),De(H,B,$,Z)}if(typeof $.then=="function")return pt(H,B,Lu($),Z);if($.$$typeof===M)return pt(H,B,Mu(H,$),Z);zu(H,$)}return typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint"?($=""+$,B!==null&&B.tag===6?(c(H,B.sibling),Z=g(B,$),Z.return=H,H=Z):(c(H,B),Z=Zh($,H.mode,Z),Z.return=H,H=Z),E(H)):c(H,B)}return function(H,B,$,Z){try{Cl=0;var Re=pt(H,B,$,Z);return mo=null,Re}catch(xe){if(xe===po||xe===Du)throw xe;var at=Zn(29,xe,null,H.mode);return at.lanes=Z,at.return=H,at}}}var fa=Mv(!0),Nv=Mv(!1),ts=!1;function fp(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function hp(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function ns(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function rs(i,o,c){var h=i.updateQueue;if(h===null)return null;if(h=h.shared,(lt&2)!==0){var g=h.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),h.pending=o,o=Cu(i),mv(i,null,c),o}return _u(i,h,o,c),Cu(i)}function Ol(i,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194048)!==0)){var h=o.lanes;h&=i.pendingLanes,c|=h,o.lanes=c,N(i,c)}}function pp(i,o){var c=i.updateQueue,h=i.alternate;if(h!==null&&(h=h.updateQueue,c===h)){var g=null,y=null;if(c=c.firstBaseUpdate,c!==null){do{var E={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};y===null?g=y=E:y=y.next=E,c=c.next}while(c!==null);y===null?g=y=o:y=y.next=o}else g=y=o;c={baseState:h.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:h.shared,callbacks:h.callbacks},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=o:i.next=o,c.lastBaseUpdate=o}var mp=!1;function Rl(){if(mp){var i=ho;if(i!==null)throw i}}function Ml(i,o,c,h){mp=!1;var g=i.updateQueue;ts=!1;var y=g.firstBaseUpdate,E=g.lastBaseUpdate,_=g.shared.pending;if(_!==null){g.shared.pending=null;var D=_,q=D.next;D.next=null,E===null?y=q:E.next=q,E=D;var X=i.alternate;X!==null&&(X=X.updateQueue,_=X.lastBaseUpdate,_!==E&&(_===null?X.firstBaseUpdate=q:_.next=q,X.lastBaseUpdate=D))}if(y!==null){var ee=g.baseState;E=0,X=q=D=null,_=y;do{var V=_.lane&-536870913,K=V!==_.lane;if(K?(Je&V)===V:(h&V)===V){V!==0&&V===fo&&(mp=!0),X!==null&&(X=X.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});e:{var ge=i,De=_;V=o;var pt=c;switch(De.tag){case 1:if(ge=De.payload,typeof ge=="function"){ee=ge.call(pt,ee,V);break e}ee=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=De.payload,V=typeof ge=="function"?ge.call(pt,ee,V):ge,V==null)break e;ee=m({},ee,V);break e;case 2:ts=!0}}V=_.callback,V!==null&&(i.flags|=64,K&&(i.flags|=8192),K=g.callbacks,K===null?g.callbacks=[V]:K.push(V))}else K={lane:V,tag:_.tag,payload:_.payload,callback:_.callback,next:null},X===null?(q=X=K,D=ee):X=X.next=K,E|=V;if(_=_.next,_===null){if(_=g.shared.pending,_===null)break;K=_,_=K.next,K.next=null,g.lastBaseUpdate=K,g.shared.pending=null}}while(!0);X===null&&(D=ee),g.baseState=D,g.firstBaseUpdate=q,g.lastBaseUpdate=X,y===null&&(g.shared.lanes=0),cs|=E,i.lanes=E,i.memoizedState=ee}}function Dv(i,o){if(typeof i!="function")throw Error(r(191,i));i.call(o)}function jv(i,o){var c=i.callbacks;if(c!==null)for(i.callbacks=null,i=0;i<c.length;i++)Dv(c[i],o)}var go=j(null),Iu=j(0);function Lv(i,o){i=Ni,W(Iu,i),W(go,o),Ni=i|o.baseLanes}function gp(){W(Iu,Ni),W(go,go.current)}function yp(){Ni=Iu.current,J(go),J(Iu)}var er=j(null),xr=null;function is(i){var o=i.alternate;W(Pt,Pt.current&1),W(er,i),xr===null&&(o===null||go.current!==null||o.memoizedState!==null)&&(xr=i)}function vp(i){W(Pt,Pt.current),W(er,i),xr===null&&(xr=i)}function zv(i){i.tag===22?(W(Pt,Pt.current),W(er,i),xr===null&&(xr=i)):ss()}function ss(){W(Pt,Pt.current),W(er,er.current)}function tr(i){J(er),xr===i&&(xr=null),J(Pt)}var Pt=j(0);function Bu(i){for(var o=i;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||Tm(c)||km(c)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Ti=0,He=null,ft=null,Ft=null,Uu=!1,yo=!1,ha=!1,Pu=0,Nl=0,vo=null,KA=0;function Nt(){throw Error(r(321))}function bp(i,o){if(o===null)return!1;for(var c=0;c<o.length&&c<i.length;c++)if(!Qn(i[c],o[c]))return!1;return!0}function wp(i,o,c,h,g,y){return Ti=y,He=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,I.H=i===null||i.memoizedState===null?bb:Lp,ha=!1,y=c(h,g),ha=!1,yo&&(y=Bv(o,c,h,g)),Iv(i),y}function Iv(i){I.H=Ll;var o=ft!==null&&ft.next!==null;if(Ti=0,Ft=ft=He=null,Uu=!1,Nl=0,vo=null,o)throw Error(r(300));i===null||Gt||(i=i.dependencies,i!==null&&Ru(i)&&(Gt=!0))}function Bv(i,o,c,h){He=i;var g=0;do{if(yo&&(vo=null),Nl=0,yo=!1,25<=g)throw Error(r(301));if(g+=1,Ft=ft=null,i.updateQueue!=null){var y=i.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}I.H=wb,y=o(c,h)}while(yo);return y}function WA(){var i=I.H,o=i.useState()[0];return o=typeof o.then=="function"?Dl(o):o,i=i.useState()[0],(ft!==null?ft.memoizedState:null)!==i&&(He.flags|=1024),o}function Sp(){var i=Pu!==0;return Pu=0,i}function xp(i,o,c){o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~c}function Ep(i){if(Uu){for(i=i.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}Uu=!1}Ti=0,Ft=ft=He=null,yo=!1,Nl=Pu=0,vo=null}function Nn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ft===null?He.memoizedState=Ft=i:Ft=Ft.next=i,Ft}function Ht(){if(ft===null){var i=He.alternate;i=i!==null?i.memoizedState:null}else i=ft.next;var o=Ft===null?He.memoizedState:Ft.next;if(o!==null)Ft=o,ft=i;else{if(i===null)throw He.alternate===null?Error(r(467)):Error(r(310));ft=i,i={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},Ft===null?He.memoizedState=Ft=i:Ft=Ft.next=i}return Ft}function Hu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Dl(i){var o=Nl;return Nl+=1,vo===null&&(vo=[]),i=Av(vo,i,o),o=He,(Ft===null?o.memoizedState:Ft.next)===null&&(o=o.alternate,I.H=o===null||o.memoizedState===null?bb:Lp),i}function $u(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Dl(i);if(i.$$typeof===M)return pn(i)}throw Error(r(438,String(i)))}function Tp(i){var o=null,c=He.updateQueue;if(c!==null&&(o=c.memoCache),o==null){var h=He.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(o={data:h.data.map(function(g){return g.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),c===null&&(c=Hu(),He.updateQueue=c),c.memoCache=o,c=o.data[o.index],c===void 0)for(c=o.data[o.index]=Array(i),h=0;h<i;h++)c[h]=le;return o.index++,c}function ki(i,o){return typeof o=="function"?o(i):o}function qu(i){var o=Ht();return kp(o,ft,i)}function kp(i,o,c){var h=i.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=c;var g=i.baseQueue,y=h.pending;if(y!==null){if(g!==null){var E=g.next;g.next=y.next,y.next=E}o.baseQueue=g=y,h.pending=null}if(y=i.baseState,g===null)i.memoizedState=y;else{o=g.next;var _=E=null,D=null,q=o,X=!1;do{var ee=q.lane&-536870913;if(ee!==q.lane?(Je&ee)===ee:(Ti&ee)===ee){var V=q.revertLane;if(V===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),ee===fo&&(X=!0);else if((Ti&V)===V){q=q.next,V===fo&&(X=!0);continue}else ee={lane:0,revertLane:q.revertLane,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},D===null?(_=D=ee,E=y):D=D.next=ee,He.lanes|=V,cs|=V;ee=q.action,ha&&c(y,ee),y=q.hasEagerState?q.eagerState:c(y,ee)}else V={lane:ee,revertLane:q.revertLane,gesture:q.gesture,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},D===null?(_=D=V,E=y):D=D.next=V,He.lanes|=ee,cs|=ee;q=q.next}while(q!==null&&q!==o);if(D===null?E=y:D.next=_,!Qn(y,i.memoizedState)&&(Gt=!0,X&&(c=ho,c!==null)))throw c;i.memoizedState=y,i.baseState=E,i.baseQueue=D,h.lastRenderedState=y}return g===null&&(h.lanes=0),[i.memoizedState,h.dispatch]}function _p(i){var o=Ht(),c=o.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=i;var h=c.dispatch,g=c.pending,y=o.memoizedState;if(g!==null){c.pending=null;var E=g=g.next;do y=i(y,E.action),E=E.next;while(E!==g);Qn(y,o.memoizedState)||(Gt=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),c.lastRenderedState=y}return[y,h]}function Uv(i,o,c){var h=He,g=Ht(),y=rt;if(y){if(c===void 0)throw Error(r(407));c=c()}else c=o();var E=!Qn((ft||g).memoizedState,c);if(E&&(g.memoizedState=c,Gt=!0),g=g.queue,Op($v.bind(null,h,g,i),[i]),g.getSnapshot!==o||E||Ft!==null&&Ft.memoizedState.tag&1){if(h.flags|=2048,bo(9,{destroy:void 0},Hv.bind(null,h,g,c,o),null),mt===null)throw Error(r(349));y||(Ti&127)!==0||Pv(h,o,c)}return c}function Pv(i,o,c){i.flags|=16384,i={getSnapshot:o,value:c},o=He.updateQueue,o===null?(o=Hu(),He.updateQueue=o,o.stores=[i]):(c=o.stores,c===null?o.stores=[i]:c.push(i))}function Hv(i,o,c,h){o.value=c,o.getSnapshot=h,qv(o)&&Vv(i)}function $v(i,o,c){return c(function(){qv(o)&&Vv(i)})}function qv(i){var o=i.getSnapshot;i=i.value;try{var c=o();return!Qn(i,c)}catch{return!0}}function Vv(i){var o=ia(i,2);o!==null&&Fn(o,i,2)}function Cp(i){var o=Nn();if(typeof i=="function"){var c=i;if(i=c(),ha){Bn(!0);try{c()}finally{Bn(!1)}}}return o.memoizedState=o.baseState=i,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ki,lastRenderedState:i},o}function Fv(i,o,c,h){return i.baseState=c,kp(i,ft,typeof h=="function"?h:ki)}function YA(i,o,c,h,g){if(Gu(i))throw Error(r(485));if(i=o.action,i!==null){var y={payload:g,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){y.listeners.push(E)}};I.T!==null?c(!0):y.isTransition=!1,h(y),c=o.pending,c===null?(y.next=o.pending=y,Gv(o,y)):(y.next=c.next,o.pending=c.next=y)}}function Gv(i,o){var c=o.action,h=o.payload,g=i.state;if(o.isTransition){var y=I.T,E={};I.T=E;try{var _=c(g,h),D=I.S;D!==null&&D(E,_),Kv(i,o,_)}catch(q){Ap(i,o,q)}finally{y!==null&&E.types!==null&&(y.types=E.types),I.T=y}}else try{y=c(g,h),Kv(i,o,y)}catch(q){Ap(i,o,q)}}function Kv(i,o,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(h){Wv(i,o,h)},function(h){return Ap(i,o,h)}):Wv(i,o,c)}function Wv(i,o,c){o.status="fulfilled",o.value=c,Yv(o),i.state=c,o=i.pending,o!==null&&(c=o.next,c===o?i.pending=null:(c=c.next,o.next=c,Gv(i,c)))}function Ap(i,o,c){var h=i.pending;if(i.pending=null,h!==null){h=h.next;do o.status="rejected",o.reason=c,Yv(o),o=o.next;while(o!==h)}i.action=null}function Yv(i){i=i.listeners;for(var o=0;o<i.length;o++)(0,i[o])()}function Jv(i,o){return o}function Xv(i,o){if(rt){var c=mt.formState;if(c!==null){e:{var h=He;if(rt){if(St){t:{for(var g=St,y=Sr;g.nodeType!==8;){if(!y){g=null;break t}if(g=Er(g.nextSibling),g===null){g=null;break t}}y=g.data,g=y==="F!"||y==="F"?g:null}if(g){St=Er(g.nextSibling),h=g.data==="F!";break e}}Zi(h)}h=!1}h&&(o=c[0])}}return c=Nn(),c.memoizedState=c.baseState=o,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jv,lastRenderedState:o},c.queue=h,c=gb.bind(null,He,h),h.dispatch=c,h=Cp(!1),y=jp.bind(null,He,!1,h.queue),h=Nn(),g={state:o,dispatch:null,action:i,pending:null},h.queue=g,c=YA.bind(null,He,g,y,c),g.dispatch=c,h.memoizedState=i,[o,c,!1]}function Qv(i){var o=Ht();return Zv(o,ft,i)}function Zv(i,o,c){if(o=kp(i,o,Jv)[0],i=qu(ki)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var h=Dl(o)}catch(E){throw E===po?Du:E}else h=o;o=Ht();var g=o.queue,y=g.dispatch;return c!==o.memoizedState&&(He.flags|=2048,bo(9,{destroy:void 0},JA.bind(null,g,c),null)),[h,y,i]}function JA(i,o){i.action=o}function eb(i){var o=Ht(),c=ft;if(c!==null)return Zv(o,c,i);Ht(),o=o.memoizedState,c=Ht();var h=c.queue.dispatch;return c.memoizedState=i,[o,h,!1]}function bo(i,o,c,h){return i={tag:i,create:c,deps:h,inst:o,next:null},o=He.updateQueue,o===null&&(o=Hu(),He.updateQueue=o),c=o.lastEffect,c===null?o.lastEffect=i.next=i:(h=c.next,c.next=i,i.next=h,o.lastEffect=i),i}function tb(){return Ht().memoizedState}function Vu(i,o,c,h){var g=Nn();He.flags|=i,g.memoizedState=bo(1|o,{destroy:void 0},c,h===void 0?null:h)}function Fu(i,o,c,h){var g=Ht();h=h===void 0?null:h;var y=g.memoizedState.inst;ft!==null&&h!==null&&bp(h,ft.memoizedState.deps)?g.memoizedState=bo(o,y,c,h):(He.flags|=i,g.memoizedState=bo(1|o,y,c,h))}function nb(i,o){Vu(8390656,8,i,o)}function Op(i,o){Fu(2048,8,i,o)}function XA(i){He.flags|=4;var o=He.updateQueue;if(o===null)o=Hu(),He.updateQueue=o,o.events=[i];else{var c=o.events;c===null?o.events=[i]:c.push(i)}}function rb(i){var o=Ht().memoizedState;return XA({ref:o,nextImpl:i}),function(){if((lt&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}function ib(i,o){return Fu(4,2,i,o)}function sb(i,o){return Fu(4,4,i,o)}function ab(i,o){if(typeof o=="function"){i=i();var c=o(i);return function(){typeof c=="function"?c():o(null)}}if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function ob(i,o,c){c=c!=null?c.concat([i]):null,Fu(4,4,ab.bind(null,o,i),c)}function Rp(){}function lb(i,o){var c=Ht();o=o===void 0?null:o;var h=c.memoizedState;return o!==null&&bp(o,h[1])?h[0]:(c.memoizedState=[i,o],i)}function cb(i,o){var c=Ht();o=o===void 0?null:o;var h=c.memoizedState;if(o!==null&&bp(o,h[1]))return h[0];if(h=i(),ha){Bn(!0);try{i()}finally{Bn(!1)}}return c.memoizedState=[h,o],h}function Mp(i,o,c){return c===void 0||(Ti&1073741824)!==0&&(Je&261930)===0?i.memoizedState=o:(i.memoizedState=c,i=uw(),He.lanes|=i,cs|=i,c)}function ub(i,o,c,h){return Qn(c,o)?c:go.current!==null?(i=Mp(i,c,h),Qn(i,o)||(Gt=!0),i):(Ti&42)===0||(Ti&1073741824)!==0&&(Je&261930)===0?(Gt=!0,i.memoizedState=c):(i=uw(),He.lanes|=i,cs|=i,o)}function db(i,o,c,h,g){var y=Q.p;Q.p=y!==0&&8>y?y:8;var E=I.T,_={};I.T=_,jp(i,!1,o,c);try{var D=g(),q=I.S;if(q!==null&&q(_,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var X=GA(D,h);jl(i,o,X,ir(i))}else jl(i,o,h,ir(i))}catch(ee){jl(i,o,{then:function(){},status:"rejected",reason:ee},ir())}finally{Q.p=y,E!==null&&_.types!==null&&(E.types=_.types),I.T=E}}function QA(){}function Np(i,o,c,h){if(i.tag!==5)throw Error(r(476));var g=fb(i).queue;db(i,g,o,Y,c===null?QA:function(){return hb(i),c(h)})}function fb(i){var o=i.memoizedState;if(o!==null)return o;o={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ki,lastRenderedState:Y},next:null};var c={};return o.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ki,lastRenderedState:c},next:null},i.memoizedState=o,i=i.alternate,i!==null&&(i.memoizedState=o),o}function hb(i){var o=fb(i);o.next===null&&(o=i.alternate.memoizedState),jl(i,o.next.queue,{},ir())}function Dp(){return pn(Xl)}function pb(){return Ht().memoizedState}function mb(){return Ht().memoizedState}function ZA(i){for(var o=i.return;o!==null;){switch(o.tag){case 24:case 3:var c=ir();i=ns(c);var h=rs(o,i,c);h!==null&&(Fn(h,o,c),Ol(h,o,c)),o={cache:lp()},i.payload=o;return}o=o.return}}function eO(i,o,c){var h=ir();c={lane:h,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Gu(i)?yb(o,c):(c=Xh(i,o,c,h),c!==null&&(Fn(c,i,h),vb(c,o,h)))}function gb(i,o,c){var h=ir();jl(i,o,c,h)}function jl(i,o,c,h){var g={lane:h,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(Gu(i))yb(o,g);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var E=o.lastRenderedState,_=y(E,c);if(g.hasEagerState=!0,g.eagerState=_,Qn(_,E))return _u(i,o,g,0),mt===null&&ku(),!1}catch{}if(c=Xh(i,o,g,h),c!==null)return Fn(c,i,h),vb(c,o,h),!0}return!1}function jp(i,o,c,h){if(h={lane:2,revertLane:fm(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},Gu(i)){if(o)throw Error(r(479))}else o=Xh(i,c,h,2),o!==null&&Fn(o,i,2)}function Gu(i){var o=i.alternate;return i===He||o!==null&&o===He}function yb(i,o){yo=Uu=!0;var c=i.pending;c===null?o.next=o:(o.next=c.next,c.next=o),i.pending=o}function vb(i,o,c){if((c&4194048)!==0){var h=o.lanes;h&=i.pendingLanes,c|=h,o.lanes=c,N(i,c)}}var Ll={readContext:pn,use:$u,useCallback:Nt,useContext:Nt,useEffect:Nt,useImperativeHandle:Nt,useLayoutEffect:Nt,useInsertionEffect:Nt,useMemo:Nt,useReducer:Nt,useRef:Nt,useState:Nt,useDebugValue:Nt,useDeferredValue:Nt,useTransition:Nt,useSyncExternalStore:Nt,useId:Nt,useHostTransitionStatus:Nt,useFormState:Nt,useActionState:Nt,useOptimistic:Nt,useMemoCache:Nt,useCacheRefresh:Nt};Ll.useEffectEvent=Nt;var bb={readContext:pn,use:$u,useCallback:function(i,o){return Nn().memoizedState=[i,o===void 0?null:o],i},useContext:pn,useEffect:nb,useImperativeHandle:function(i,o,c){c=c!=null?c.concat([i]):null,Vu(4194308,4,ab.bind(null,o,i),c)},useLayoutEffect:function(i,o){return Vu(4194308,4,i,o)},useInsertionEffect:function(i,o){Vu(4,2,i,o)},useMemo:function(i,o){var c=Nn();o=o===void 0?null:o;var h=i();if(ha){Bn(!0);try{i()}finally{Bn(!1)}}return c.memoizedState=[h,o],h},useReducer:function(i,o,c){var h=Nn();if(c!==void 0){var g=c(o);if(ha){Bn(!0);try{c(o)}finally{Bn(!1)}}}else g=o;return h.memoizedState=h.baseState=g,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:g},h.queue=i,i=i.dispatch=eO.bind(null,He,i),[h.memoizedState,i]},useRef:function(i){var o=Nn();return i={current:i},o.memoizedState=i},useState:function(i){i=Cp(i);var o=i.queue,c=gb.bind(null,He,o);return o.dispatch=c,[i.memoizedState,c]},useDebugValue:Rp,useDeferredValue:function(i,o){var c=Nn();return Mp(c,i,o)},useTransition:function(){var i=Cp(!1);return i=db.bind(null,He,i.queue,!0,!1),Nn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,o,c){var h=He,g=Nn();if(rt){if(c===void 0)throw Error(r(407));c=c()}else{if(c=o(),mt===null)throw Error(r(349));(Je&127)!==0||Pv(h,o,c)}g.memoizedState=c;var y={value:c,getSnapshot:o};return g.queue=y,nb($v.bind(null,h,y,i),[i]),h.flags|=2048,bo(9,{destroy:void 0},Hv.bind(null,h,y,c,o),null),c},useId:function(){var i=Nn(),o=mt.identifierPrefix;if(rt){var c=ei,h=Zr;c=(h&~(1<<32-Qt(h)-1)).toString(32)+c,o="_"+o+"R_"+c,c=Pu++,0<c&&(o+="H"+c.toString(32)),o+="_"}else c=KA++,o="_"+o+"r_"+c.toString(32)+"_";return i.memoizedState=o},useHostTransitionStatus:Dp,useFormState:Xv,useActionState:Xv,useOptimistic:function(i){var o=Nn();o.memoizedState=o.baseState=i;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=c,o=jp.bind(null,He,!0,c),c.dispatch=o,[i,o]},useMemoCache:Tp,useCacheRefresh:function(){return Nn().memoizedState=ZA.bind(null,He)},useEffectEvent:function(i){var o=Nn(),c={impl:i};return o.memoizedState=c,function(){if((lt&2)!==0)throw Error(r(440));return c.impl.apply(void 0,arguments)}}},Lp={readContext:pn,use:$u,useCallback:lb,useContext:pn,useEffect:Op,useImperativeHandle:ob,useInsertionEffect:ib,useLayoutEffect:sb,useMemo:cb,useReducer:qu,useRef:tb,useState:function(){return qu(ki)},useDebugValue:Rp,useDeferredValue:function(i,o){var c=Ht();return ub(c,ft.memoizedState,i,o)},useTransition:function(){var i=qu(ki)[0],o=Ht().memoizedState;return[typeof i=="boolean"?i:Dl(i),o]},useSyncExternalStore:Uv,useId:pb,useHostTransitionStatus:Dp,useFormState:Qv,useActionState:Qv,useOptimistic:function(i,o){var c=Ht();return Fv(c,ft,i,o)},useMemoCache:Tp,useCacheRefresh:mb};Lp.useEffectEvent=rb;var wb={readContext:pn,use:$u,useCallback:lb,useContext:pn,useEffect:Op,useImperativeHandle:ob,useInsertionEffect:ib,useLayoutEffect:sb,useMemo:cb,useReducer:_p,useRef:tb,useState:function(){return _p(ki)},useDebugValue:Rp,useDeferredValue:function(i,o){var c=Ht();return ft===null?Mp(c,i,o):ub(c,ft.memoizedState,i,o)},useTransition:function(){var i=_p(ki)[0],o=Ht().memoizedState;return[typeof i=="boolean"?i:Dl(i),o]},useSyncExternalStore:Uv,useId:pb,useHostTransitionStatus:Dp,useFormState:eb,useActionState:eb,useOptimistic:function(i,o){var c=Ht();return ft!==null?Fv(c,ft,i,o):(c.baseState=i,[i,c.queue.dispatch])},useMemoCache:Tp,useCacheRefresh:mb};wb.useEffectEvent=rb;function zp(i,o,c,h){o=i.memoizedState,c=c(h,o),c=c==null?o:m({},o,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var Ip={enqueueSetState:function(i,o,c){i=i._reactInternals;var h=ir(),g=ns(h);g.payload=o,c!=null&&(g.callback=c),o=rs(i,g,h),o!==null&&(Fn(o,i,h),Ol(o,i,h))},enqueueReplaceState:function(i,o,c){i=i._reactInternals;var h=ir(),g=ns(h);g.tag=1,g.payload=o,c!=null&&(g.callback=c),o=rs(i,g,h),o!==null&&(Fn(o,i,h),Ol(o,i,h))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var c=ir(),h=ns(c);h.tag=2,o!=null&&(h.callback=o),o=rs(i,h,c),o!==null&&(Fn(o,i,c),Ol(o,i,c))}};function Sb(i,o,c,h,g,y,E){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(h,y,E):o.prototype&&o.prototype.isPureReactComponent?!Sl(c,h)||!Sl(g,y):!0}function xb(i,o,c,h){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,h),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,h),o.state!==i&&Ip.enqueueReplaceState(o,o.state,null)}function pa(i,o){var c=o;if("ref"in o){c={};for(var h in o)h!=="ref"&&(c[h]=o[h])}if(i=i.defaultProps){c===o&&(c=m({},c));for(var g in i)c[g]===void 0&&(c[g]=i[g])}return c}function Eb(i){Tu(i)}function Tb(i){console.error(i)}function kb(i){Tu(i)}function Ku(i,o){try{var c=i.onUncaughtError;c(o.value,{componentStack:o.stack})}catch(h){setTimeout(function(){throw h})}}function _b(i,o,c){try{var h=i.onCaughtError;h(c.value,{componentStack:c.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Bp(i,o,c){return c=ns(c),c.tag=3,c.payload={element:null},c.callback=function(){Ku(i,o)},c}function Cb(i){return i=ns(i),i.tag=3,i}function Ab(i,o,c,h){var g=c.type.getDerivedStateFromError;if(typeof g=="function"){var y=h.value;i.payload=function(){return g(y)},i.callback=function(){_b(o,c,h)}}var E=c.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(i.callback=function(){_b(o,c,h),typeof g!="function"&&(us===null?us=new Set([this]):us.add(this));var _=h.stack;this.componentDidCatch(h.value,{componentStack:_!==null?_:""})})}function tO(i,o,c,h,g){if(c.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(o=c.alternate,o!==null&&uo(o,c,g,!0),c=er.current,c!==null){switch(c.tag){case 31:case 13:return xr===null?sd():c.alternate===null&&Dt===0&&(Dt=3),c.flags&=-257,c.flags|=65536,c.lanes=g,h===ju?c.flags|=16384:(o=c.updateQueue,o===null?c.updateQueue=new Set([h]):o.add(h),cm(i,h,g)),!1;case 22:return c.flags|=65536,h===ju?c.flags|=16384:(o=c.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([h])},c.updateQueue=o):(c=o.retryQueue,c===null?o.retryQueue=new Set([h]):c.add(h)),cm(i,h,g)),!1}throw Error(r(435,c.tag))}return cm(i,h,g),sd(),!1}if(rt)return o=er.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=g,h!==rp&&(i=Error(r(422),{cause:h}),Tl(vr(i,c)))):(h!==rp&&(o=Error(r(423),{cause:h}),Tl(vr(o,c))),i=i.current.alternate,i.flags|=65536,g&=-g,i.lanes|=g,h=vr(h,c),g=Bp(i.stateNode,h,g),pp(i,g),Dt!==4&&(Dt=2)),!1;var y=Error(r(520),{cause:h});if(y=vr(y,c),ql===null?ql=[y]:ql.push(y),Dt!==4&&(Dt=2),o===null)return!0;h=vr(h,c),c=o;do{switch(c.tag){case 3:return c.flags|=65536,i=g&-g,c.lanes|=i,i=Bp(c.stateNode,h,i),pp(c,i),!1;case 1:if(o=c.type,y=c.stateNode,(c.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(us===null||!us.has(y))))return c.flags|=65536,g&=-g,c.lanes|=g,g=Cb(g),Ab(g,i,c,h),pp(c,g),!1}c=c.return}while(c!==null);return!1}var Up=Error(r(461)),Gt=!1;function mn(i,o,c,h){o.child=i===null?Nv(o,null,c,h):fa(o,i.child,c,h)}function Ob(i,o,c,h,g){c=c.render;var y=o.ref;if("ref"in h){var E={};for(var _ in h)_!=="ref"&&(E[_]=h[_])}else E=h;return la(o),h=wp(i,o,c,E,y,g),_=Sp(),i!==null&&!Gt?(xp(i,o,g),_i(i,o,g)):(rt&&_&&tp(o),o.flags|=1,mn(i,o,h,g),o.child)}function Rb(i,o,c,h,g){if(i===null){var y=c.type;return typeof y=="function"&&!Qh(y)&&y.defaultProps===void 0&&c.compare===null?(o.tag=15,o.type=y,Mb(i,o,y,h,g)):(i=Au(c.type,null,h,o,o.mode,g),i.ref=o.ref,i.return=o,o.child=i)}if(y=i.child,!Kp(i,g)){var E=y.memoizedProps;if(c=c.compare,c=c!==null?c:Sl,c(E,h)&&i.ref===o.ref)return _i(i,o,g)}return o.flags|=1,i=wi(y,h),i.ref=o.ref,i.return=o,o.child=i}function Mb(i,o,c,h,g){if(i!==null){var y=i.memoizedProps;if(Sl(y,h)&&i.ref===o.ref)if(Gt=!1,o.pendingProps=h=y,Kp(i,g))(i.flags&131072)!==0&&(Gt=!0);else return o.lanes=i.lanes,_i(i,o,g)}return Pp(i,o,c,h,g)}function Nb(i,o,c,h){var g=h.children,y=i!==null?i.memoizedState:null;if(i===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((o.flags&128)!==0){if(y=y!==null?y.baseLanes|c:c,i!==null){for(h=o.child=i.child,g=0;h!==null;)g=g|h.lanes|h.childLanes,h=h.sibling;h=g&~y}else h=0,o.child=null;return Db(i,o,y,c,h)}if((c&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},i!==null&&Nu(o,y!==null?y.cachePool:null),y!==null?Lv(o,y):gp(),zv(o);else return h=o.lanes=536870912,Db(i,o,y!==null?y.baseLanes|c:c,c,h)}else y!==null?(Nu(o,y.cachePool),Lv(o,y),ss(),o.memoizedState=null):(i!==null&&Nu(o,null),gp(),ss());return mn(i,o,g,c),o.child}function zl(i,o){return i!==null&&i.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function Db(i,o,c,h,g){var y=up();return y=y===null?null:{parent:Vt._currentValue,pool:y},o.memoizedState={baseLanes:c,cachePool:y},i!==null&&Nu(o,null),gp(),zv(o),i!==null&&uo(i,o,h,!0),o.childLanes=g,null}function Wu(i,o){return o=Ju({mode:o.mode,children:o.children},i.mode),o.ref=i.ref,i.child=o,o.return=i,o}function jb(i,o,c){return fa(o,i.child,null,c),i=Wu(o,o.pendingProps),i.flags|=2,tr(o),o.memoizedState=null,i}function nO(i,o,c){var h=o.pendingProps,g=(o.flags&128)!==0;if(o.flags&=-129,i===null){if(rt){if(h.mode==="hidden")return i=Wu(o,h),o.lanes=536870912,zl(null,i);if(vp(o),(i=St)?(i=Gw(i,Sr),i=i!==null&&i.data==="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:Xi!==null?{id:Zr,overflow:ei}:null,retryLane:536870912,hydrationErrors:null},c=yv(i),c.return=o,o.child=c,hn=o,St=null)):i=null,i===null)throw Zi(o);return o.lanes=536870912,null}return Wu(o,h)}var y=i.memoizedState;if(y!==null){var E=y.dehydrated;if(vp(o),g)if(o.flags&256)o.flags&=-257,o=jb(i,o,c);else if(o.memoizedState!==null)o.child=i.child,o.flags|=128,o=null;else throw Error(r(558));else if(Gt||uo(i,o,c,!1),g=(c&i.childLanes)!==0,Gt||g){if(h=mt,h!==null&&(E=U(h,c),E!==0&&E!==y.retryLane))throw y.retryLane=E,ia(i,E),Fn(h,i,E),Up;sd(),o=jb(i,o,c)}else i=y.treeContext,St=Er(E.nextSibling),hn=o,rt=!0,Qi=null,Sr=!1,i!==null&&wv(o,i),o=Wu(o,h),o.flags|=4096;return o}return i=wi(i.child,{mode:h.mode,children:h.children}),i.ref=o.ref,o.child=i,i.return=o,i}function Yu(i,o){var c=o.ref;if(c===null)i!==null&&i.ref!==null&&(o.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(r(284));(i===null||i.ref!==c)&&(o.flags|=4194816)}}function Pp(i,o,c,h,g){return la(o),c=wp(i,o,c,h,void 0,g),h=Sp(),i!==null&&!Gt?(xp(i,o,g),_i(i,o,g)):(rt&&h&&tp(o),o.flags|=1,mn(i,o,c,g),o.child)}function Lb(i,o,c,h,g,y){return la(o),o.updateQueue=null,c=Bv(o,h,c,g),Iv(i),h=Sp(),i!==null&&!Gt?(xp(i,o,y),_i(i,o,y)):(rt&&h&&tp(o),o.flags|=1,mn(i,o,c,y),o.child)}function zb(i,o,c,h,g){if(la(o),o.stateNode===null){var y=ao,E=c.contextType;typeof E=="object"&&E!==null&&(y=pn(E)),y=new c(h,y),o.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Ip,o.stateNode=y,y._reactInternals=o,y=o.stateNode,y.props=h,y.state=o.memoizedState,y.refs={},fp(o),E=c.contextType,y.context=typeof E=="object"&&E!==null?pn(E):ao,y.state=o.memoizedState,E=c.getDerivedStateFromProps,typeof E=="function"&&(zp(o,c,E,h),y.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(E=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),E!==y.state&&Ip.enqueueReplaceState(y,y.state,null),Ml(o,h,y,g),Rl(),y.state=o.memoizedState),typeof y.componentDidMount=="function"&&(o.flags|=4194308),h=!0}else if(i===null){y=o.stateNode;var _=o.memoizedProps,D=pa(c,_);y.props=D;var q=y.context,X=c.contextType;E=ao,typeof X=="object"&&X!==null&&(E=pn(X));var ee=c.getDerivedStateFromProps;X=typeof ee=="function"||typeof y.getSnapshotBeforeUpdate=="function",_=o.pendingProps!==_,X||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(_||q!==E)&&xb(o,y,h,E),ts=!1;var V=o.memoizedState;y.state=V,Ml(o,h,y,g),Rl(),q=o.memoizedState,_||V!==q||ts?(typeof ee=="function"&&(zp(o,c,ee,h),q=o.memoizedState),(D=ts||Sb(o,c,D,h,V,q,E))?(X||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(o.flags|=4194308)):(typeof y.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=h,o.memoizedState=q),y.props=h,y.state=q,y.context=E,h=D):(typeof y.componentDidMount=="function"&&(o.flags|=4194308),h=!1)}else{y=o.stateNode,hp(i,o),E=o.memoizedProps,X=pa(c,E),y.props=X,ee=o.pendingProps,V=y.context,q=c.contextType,D=ao,typeof q=="object"&&q!==null&&(D=pn(q)),_=c.getDerivedStateFromProps,(q=typeof _=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(E!==ee||V!==D)&&xb(o,y,h,D),ts=!1,V=o.memoizedState,y.state=V,Ml(o,h,y,g),Rl();var K=o.memoizedState;E!==ee||V!==K||ts||i!==null&&i.dependencies!==null&&Ru(i.dependencies)?(typeof _=="function"&&(zp(o,c,_,h),K=o.memoizedState),(X=ts||Sb(o,c,X,h,V,K,D)||i!==null&&i.dependencies!==null&&Ru(i.dependencies))?(q||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(h,K,D),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(h,K,D)),typeof y.componentDidUpdate=="function"&&(o.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof y.componentDidUpdate!="function"||E===i.memoizedProps&&V===i.memoizedState||(o.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||E===i.memoizedProps&&V===i.memoizedState||(o.flags|=1024),o.memoizedProps=h,o.memoizedState=K),y.props=h,y.state=K,y.context=D,h=X):(typeof y.componentDidUpdate!="function"||E===i.memoizedProps&&V===i.memoizedState||(o.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||E===i.memoizedProps&&V===i.memoizedState||(o.flags|=1024),h=!1)}return y=h,Yu(i,o),h=(o.flags&128)!==0,y||h?(y=o.stateNode,c=h&&typeof c.getDerivedStateFromError!="function"?null:y.render(),o.flags|=1,i!==null&&h?(o.child=fa(o,i.child,null,g),o.child=fa(o,null,c,g)):mn(i,o,c,g),o.memoizedState=y.state,i=o.child):i=_i(i,o,g),i}function Ib(i,o,c,h){return aa(),o.flags|=256,mn(i,o,c,h),o.child}var Hp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function $p(i){return{baseLanes:i,cachePool:_v()}}function qp(i,o,c){return i=i!==null?i.childLanes&~c:0,o&&(i|=rr),i}function Bb(i,o,c){var h=o.pendingProps,g=!1,y=(o.flags&128)!==0,E;if((E=y)||(E=i!==null&&i.memoizedState===null?!1:(Pt.current&2)!==0),E&&(g=!0,o.flags&=-129),E=(o.flags&32)!==0,o.flags&=-33,i===null){if(rt){if(g?is(o):ss(),(i=St)?(i=Gw(i,Sr),i=i!==null&&i.data!=="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:Xi!==null?{id:Zr,overflow:ei}:null,retryLane:536870912,hydrationErrors:null},c=yv(i),c.return=o,o.child=c,hn=o,St=null)):i=null,i===null)throw Zi(o);return km(i)?o.lanes=32:o.lanes=536870912,null}var _=h.children;return h=h.fallback,g?(ss(),g=o.mode,_=Ju({mode:"hidden",children:_},g),h=sa(h,g,c,null),_.return=o,h.return=o,_.sibling=h,o.child=_,h=o.child,h.memoizedState=$p(c),h.childLanes=qp(i,E,c),o.memoizedState=Hp,zl(null,h)):(is(o),Vp(o,_))}var D=i.memoizedState;if(D!==null&&(_=D.dehydrated,_!==null)){if(y)o.flags&256?(is(o),o.flags&=-257,o=Fp(i,o,c)):o.memoizedState!==null?(ss(),o.child=i.child,o.flags|=128,o=null):(ss(),_=h.fallback,g=o.mode,h=Ju({mode:"visible",children:h.children},g),_=sa(_,g,c,null),_.flags|=2,h.return=o,_.return=o,h.sibling=_,o.child=h,fa(o,i.child,null,c),h=o.child,h.memoizedState=$p(c),h.childLanes=qp(i,E,c),o.memoizedState=Hp,o=zl(null,h));else if(is(o),km(_)){if(E=_.nextSibling&&_.nextSibling.dataset,E)var q=E.dgst;E=q,h=Error(r(419)),h.stack="",h.digest=E,Tl({value:h,source:null,stack:null}),o=Fp(i,o,c)}else if(Gt||uo(i,o,c,!1),E=(c&i.childLanes)!==0,Gt||E){if(E=mt,E!==null&&(h=U(E,c),h!==0&&h!==D.retryLane))throw D.retryLane=h,ia(i,h),Fn(E,i,h),Up;Tm(_)||sd(),o=Fp(i,o,c)}else Tm(_)?(o.flags|=192,o.child=i.child,o=null):(i=D.treeContext,St=Er(_.nextSibling),hn=o,rt=!0,Qi=null,Sr=!1,i!==null&&wv(o,i),o=Vp(o,h.children),o.flags|=4096);return o}return g?(ss(),_=h.fallback,g=o.mode,D=i.child,q=D.sibling,h=wi(D,{mode:"hidden",children:h.children}),h.subtreeFlags=D.subtreeFlags&65011712,q!==null?_=wi(q,_):(_=sa(_,g,c,null),_.flags|=2),_.return=o,h.return=o,h.sibling=_,o.child=h,zl(null,h),h=o.child,_=i.child.memoizedState,_===null?_=$p(c):(g=_.cachePool,g!==null?(D=Vt._currentValue,g=g.parent!==D?{parent:D,pool:D}:g):g=_v(),_={baseLanes:_.baseLanes|c,cachePool:g}),h.memoizedState=_,h.childLanes=qp(i,E,c),o.memoizedState=Hp,zl(i.child,h)):(is(o),c=i.child,i=c.sibling,c=wi(c,{mode:"visible",children:h.children}),c.return=o,c.sibling=null,i!==null&&(E=o.deletions,E===null?(o.deletions=[i],o.flags|=16):E.push(i)),o.child=c,o.memoizedState=null,c)}function Vp(i,o){return o=Ju({mode:"visible",children:o},i.mode),o.return=i,i.child=o}function Ju(i,o){return i=Zn(22,i,null,o),i.lanes=0,i}function Fp(i,o,c){return fa(o,i.child,null,c),i=Vp(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function Ub(i,o,c){i.lanes|=o;var h=i.alternate;h!==null&&(h.lanes|=o),ap(i.return,o,c)}function Gp(i,o,c,h,g,y){var E=i.memoizedState;E===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:h,tail:c,tailMode:g,treeForkCount:y}:(E.isBackwards=o,E.rendering=null,E.renderingStartTime=0,E.last=h,E.tail=c,E.tailMode=g,E.treeForkCount=y)}function Pb(i,o,c){var h=o.pendingProps,g=h.revealOrder,y=h.tail;h=h.children;var E=Pt.current,_=(E&2)!==0;if(_?(E=E&1|2,o.flags|=128):E&=1,W(Pt,E),mn(i,o,h,c),h=rt?El:0,!_&&i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Ub(i,c,o);else if(i.tag===19)Ub(i,c,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(g){case"forwards":for(c=o.child,g=null;c!==null;)i=c.alternate,i!==null&&Bu(i)===null&&(g=c),c=c.sibling;c=g,c===null?(g=o.child,o.child=null):(g=c.sibling,c.sibling=null),Gp(o,!1,g,c,y,h);break;case"backwards":case"unstable_legacy-backwards":for(c=null,g=o.child,o.child=null;g!==null;){if(i=g.alternate,i!==null&&Bu(i)===null){o.child=g;break}i=g.sibling,g.sibling=c,c=g,g=i}Gp(o,!0,c,null,y,h);break;case"together":Gp(o,!1,null,null,void 0,h);break;default:o.memoizedState=null}return o.child}function _i(i,o,c){if(i!==null&&(o.dependencies=i.dependencies),cs|=o.lanes,(c&o.childLanes)===0)if(i!==null){if(uo(i,o,c,!1),(c&o.childLanes)===0)return null}else return null;if(i!==null&&o.child!==i.child)throw Error(r(153));if(o.child!==null){for(i=o.child,c=wi(i,i.pendingProps),o.child=c,c.return=o;i.sibling!==null;)i=i.sibling,c=c.sibling=wi(i,i.pendingProps),c.return=o;c.sibling=null}return o.child}function Kp(i,o){return(i.lanes&o)!==0?!0:(i=i.dependencies,!!(i!==null&&Ru(i)))}function rO(i,o,c){switch(o.tag){case 3:Le(o,o.stateNode.containerInfo),es(o,Vt,i.memoizedState.cache),aa();break;case 27:case 5:cn(o);break;case 4:Le(o,o.stateNode.containerInfo);break;case 10:es(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,vp(o),null;break;case 13:var h=o.memoizedState;if(h!==null)return h.dehydrated!==null?(is(o),o.flags|=128,null):(c&o.child.childLanes)!==0?Bb(i,o,c):(is(o),i=_i(i,o,c),i!==null?i.sibling:null);is(o);break;case 19:var g=(i.flags&128)!==0;if(h=(c&o.childLanes)!==0,h||(uo(i,o,c,!1),h=(c&o.childLanes)!==0),g){if(h)return Pb(i,o,c);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),W(Pt,Pt.current),h)break;return null;case 22:return o.lanes=0,Nb(i,o,c,o.pendingProps);case 24:es(o,Vt,i.memoizedState.cache)}return _i(i,o,c)}function Hb(i,o,c){if(i!==null)if(i.memoizedProps!==o.pendingProps)Gt=!0;else{if(!Kp(i,c)&&(o.flags&128)===0)return Gt=!1,rO(i,o,c);Gt=(i.flags&131072)!==0}else Gt=!1,rt&&(o.flags&1048576)!==0&&bv(o,El,o.index);switch(o.lanes=0,o.tag){case 16:e:{var h=o.pendingProps;if(i=ua(o.elementType),o.type=i,typeof i=="function")Qh(i)?(h=pa(i,h),o.tag=1,o=zb(null,o,i,h,c)):(o.tag=0,o=Pp(null,o,i,h,c));else{if(i!=null){var g=i.$$typeof;if(g===P){o.tag=11,o=Ob(null,o,i,h,c);break e}else if(g===k){o.tag=14,o=Rb(null,o,i,h,c);break e}}throw o=ue(i)||i,Error(r(306,o,""))}}return o;case 0:return Pp(i,o,o.type,o.pendingProps,c);case 1:return h=o.type,g=pa(h,o.pendingProps),zb(i,o,h,g,c);case 3:e:{if(Le(o,o.stateNode.containerInfo),i===null)throw Error(r(387));h=o.pendingProps;var y=o.memoizedState;g=y.element,hp(i,o),Ml(o,h,null,c);var E=o.memoizedState;if(h=E.cache,es(o,Vt,h),h!==y.cache&&op(o,[Vt],c,!0),Rl(),h=E.element,y.isDehydrated)if(y={element:h,isDehydrated:!1,cache:E.cache},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){o=Ib(i,o,h,c);break e}else if(h!==g){g=vr(Error(r(424)),o),Tl(g),o=Ib(i,o,h,c);break e}else for(i=o.stateNode.containerInfo,i.nodeType===9?i=i.body:i=i.nodeName==="HTML"?i.ownerDocument.body:i,St=Er(i.firstChild),hn=o,rt=!0,Qi=null,Sr=!0,c=Nv(o,null,h,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(aa(),h===g){o=_i(i,o,c);break e}mn(i,o,h,c)}o=o.child}return o;case 26:return Yu(i,o),i===null?(c=Qw(o.type,null,o.pendingProps,null))?o.memoizedState=c:rt||(c=o.type,i=o.pendingProps,h=fd(we.current).createElement(c),h[de]=o,h[pe]=i,gn(h,c,i),Tt(h),o.stateNode=h):o.memoizedState=Qw(o.type,i.memoizedProps,o.pendingProps,i.memoizedState),null;case 27:return cn(o),i===null&&rt&&(h=o.stateNode=Yw(o.type,o.pendingProps,we.current),hn=o,Sr=!0,g=St,ps(o.type)?(_m=g,St=Er(h.firstChild)):St=g),mn(i,o,o.pendingProps.children,c),Yu(i,o),i===null&&(o.flags|=4194304),o.child;case 5:return i===null&&rt&&((g=h=St)&&(h=DO(h,o.type,o.pendingProps,Sr),h!==null?(o.stateNode=h,hn=o,St=Er(h.firstChild),Sr=!1,g=!0):g=!1),g||Zi(o)),cn(o),g=o.type,y=o.pendingProps,E=i!==null?i.memoizedProps:null,h=y.children,Sm(g,y)?h=null:E!==null&&Sm(g,E)&&(o.flags|=32),o.memoizedState!==null&&(g=wp(i,o,WA,null,null,c),Xl._currentValue=g),Yu(i,o),mn(i,o,h,c),o.child;case 6:return i===null&&rt&&((i=c=St)&&(c=jO(c,o.pendingProps,Sr),c!==null?(o.stateNode=c,hn=o,St=null,i=!0):i=!1),i||Zi(o)),null;case 13:return Bb(i,o,c);case 4:return Le(o,o.stateNode.containerInfo),h=o.pendingProps,i===null?o.child=fa(o,null,h,c):mn(i,o,h,c),o.child;case 11:return Ob(i,o,o.type,o.pendingProps,c);case 7:return mn(i,o,o.pendingProps,c),o.child;case 8:return mn(i,o,o.pendingProps.children,c),o.child;case 12:return mn(i,o,o.pendingProps.children,c),o.child;case 10:return h=o.pendingProps,es(o,o.type,h.value),mn(i,o,h.children,c),o.child;case 9:return g=o.type._context,h=o.pendingProps.children,la(o),g=pn(g),h=h(g),o.flags|=1,mn(i,o,h,c),o.child;case 14:return Rb(i,o,o.type,o.pendingProps,c);case 15:return Mb(i,o,o.type,o.pendingProps,c);case 19:return Pb(i,o,c);case 31:return nO(i,o,c);case 22:return Nb(i,o,c,o.pendingProps);case 24:return la(o),h=pn(Vt),i===null?(g=up(),g===null&&(g=mt,y=lp(),g.pooledCache=y,y.refCount++,y!==null&&(g.pooledCacheLanes|=c),g=y),o.memoizedState={parent:h,cache:g},fp(o),es(o,Vt,g)):((i.lanes&c)!==0&&(hp(i,o),Ml(o,null,null,c),Rl()),g=i.memoizedState,y=o.memoizedState,g.parent!==h?(g={parent:h,cache:h},o.memoizedState=g,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=g),es(o,Vt,h)):(h=y.cache,es(o,Vt,h),h!==g.cache&&op(o,[Vt],c,!0))),mn(i,o,o.pendingProps.children,c),o.child;case 29:throw o.pendingProps}throw Error(r(156,o.tag))}function Ci(i){i.flags|=4}function Wp(i,o,c,h,g){if((o=(i.mode&32)!==0)&&(o=!1),o){if(i.flags|=16777216,(g&335544128)===g)if(i.stateNode.complete)i.flags|=8192;else if(pw())i.flags|=8192;else throw da=ju,dp}else i.flags&=-16777217}function $b(i,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!rS(o))if(pw())i.flags|=8192;else throw da=ju,dp}function Xu(i,o){o!==null&&(i.flags|=4),i.flags&16384&&(o=i.tag!==22?Bt():536870912,i.lanes|=o,Eo|=o)}function Il(i,o){if(!rt)switch(i.tailMode){case"hidden":o=i.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:h.sibling=null}}function xt(i){var o=i.alternate!==null&&i.alternate.child===i.child,c=0,h=0;if(o)for(var g=i.child;g!==null;)c|=g.lanes|g.childLanes,h|=g.subtreeFlags&65011712,h|=g.flags&65011712,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)c|=g.lanes|g.childLanes,h|=g.subtreeFlags,h|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=h,i.childLanes=c,o}function iO(i,o,c){var h=o.pendingProps;switch(np(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(o),null;case 1:return xt(o),null;case 3:return c=o.stateNode,h=null,i!==null&&(h=i.memoizedState.cache),o.memoizedState.cache!==h&&(o.flags|=2048),Ei(Vt),Qe(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(i===null||i.child===null)&&(co(o)?Ci(o):i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,ip())),xt(o),null;case 26:var g=o.type,y=o.memoizedState;return i===null?(Ci(o),y!==null?(xt(o),$b(o,y)):(xt(o),Wp(o,g,null,h,c))):y?y!==i.memoizedState?(Ci(o),xt(o),$b(o,y)):(xt(o),o.flags&=-16777217):(i=i.memoizedProps,i!==h&&Ci(o),xt(o),Wp(o,g,i,h,c)),null;case 27:if(Rn(o),c=we.current,g=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==h&&Ci(o);else{if(!h){if(o.stateNode===null)throw Error(r(166));return xt(o),null}i=te.current,co(o)?Sv(o):(i=Yw(g,h,c),o.stateNode=i,Ci(o))}return xt(o),null;case 5:if(Rn(o),g=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==h&&Ci(o);else{if(!h){if(o.stateNode===null)throw Error(r(166));return xt(o),null}if(y=te.current,co(o))Sv(o);else{var E=fd(we.current);switch(y){case 1:y=E.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:y=E.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":y=E.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":y=E.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":y=E.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof h.is=="string"?E.createElement("select",{is:h.is}):E.createElement("select"),h.multiple?y.multiple=!0:h.size&&(y.size=h.size);break;default:y=typeof h.is=="string"?E.createElement(g,{is:h.is}):E.createElement(g)}}y[de]=o,y[pe]=h;e:for(E=o.child;E!==null;){if(E.tag===5||E.tag===6)y.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===o)break e;for(;E.sibling===null;){if(E.return===null||E.return===o)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}o.stateNode=y;e:switch(gn(y,g,h),g){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&Ci(o)}}return xt(o),Wp(o,o.type,i===null?null:i.memoizedProps,o.pendingProps,c),null;case 6:if(i&&o.stateNode!=null)i.memoizedProps!==h&&Ci(o);else{if(typeof h!="string"&&o.stateNode===null)throw Error(r(166));if(i=we.current,co(o)){if(i=o.stateNode,c=o.memoizedProps,h=null,g=hn,g!==null)switch(g.tag){case 27:case 5:h=g.memoizedProps}i[de]=o,i=!!(i.nodeValue===c||h!==null&&h.suppressHydrationWarning===!0||Bw(i.nodeValue,c)),i||Zi(o,!0)}else i=fd(i).createTextNode(h),i[de]=o,o.stateNode=i}return xt(o),null;case 31:if(c=o.memoizedState,i===null||i.memoizedState!==null){if(h=co(o),c!==null){if(i===null){if(!h)throw Error(r(318));if(i=o.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(557));i[de]=o}else aa(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;xt(o),i=!1}else c=ip(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=c),i=!0;if(!i)return o.flags&256?(tr(o),o):(tr(o),null);if((o.flags&128)!==0)throw Error(r(558))}return xt(o),null;case 13:if(h=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(g=co(o),h!==null&&h.dehydrated!==null){if(i===null){if(!g)throw Error(r(318));if(g=o.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(r(317));g[de]=o}else aa(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;xt(o),g=!1}else g=ip(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=g),g=!0;if(!g)return o.flags&256?(tr(o),o):(tr(o),null)}return tr(o),(o.flags&128)!==0?(o.lanes=c,o):(c=h!==null,i=i!==null&&i.memoizedState!==null,c&&(h=o.child,g=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(g=h.alternate.memoizedState.cachePool.pool),y=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(y=h.memoizedState.cachePool.pool),y!==g&&(h.flags|=2048)),c!==i&&c&&(o.child.flags|=8192),Xu(o,o.updateQueue),xt(o),null);case 4:return Qe(),i===null&&gm(o.stateNode.containerInfo),xt(o),null;case 10:return Ei(o.type),xt(o),null;case 19:if(J(Pt),h=o.memoizedState,h===null)return xt(o),null;if(g=(o.flags&128)!==0,y=h.rendering,y===null)if(g)Il(h,!1);else{if(Dt!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(y=Bu(i),y!==null){for(o.flags|=128,Il(h,!1),i=y.updateQueue,o.updateQueue=i,Xu(o,i),o.subtreeFlags=0,i=c,c=o.child;c!==null;)gv(c,i),c=c.sibling;return W(Pt,Pt.current&1|2),rt&&Si(o,h.treeForkCount),o.child}i=i.sibling}h.tail!==null&&_t()>nd&&(o.flags|=128,g=!0,Il(h,!1),o.lanes=4194304)}else{if(!g)if(i=Bu(y),i!==null){if(o.flags|=128,g=!0,i=i.updateQueue,o.updateQueue=i,Xu(o,i),Il(h,!0),h.tail===null&&h.tailMode==="hidden"&&!y.alternate&&!rt)return xt(o),null}else 2*_t()-h.renderingStartTime>nd&&c!==536870912&&(o.flags|=128,g=!0,Il(h,!1),o.lanes=4194304);h.isBackwards?(y.sibling=o.child,o.child=y):(i=h.last,i!==null?i.sibling=y:o.child=y,h.last=y)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=_t(),i.sibling=null,c=Pt.current,W(Pt,g?c&1|2:c&1),rt&&Si(o,h.treeForkCount),i):(xt(o),null);case 22:case 23:return tr(o),yp(),h=o.memoizedState!==null,i!==null?i.memoizedState!==null!==h&&(o.flags|=8192):h&&(o.flags|=8192),h?(c&536870912)!==0&&(o.flags&128)===0&&(xt(o),o.subtreeFlags&6&&(o.flags|=8192)):xt(o),c=o.updateQueue,c!==null&&Xu(o,c.retryQueue),c=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),h=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),h!==c&&(o.flags|=2048),i!==null&&J(ca),null;case 24:return c=null,i!==null&&(c=i.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),Ei(Vt),xt(o),null;case 25:return null;case 30:return null}throw Error(r(156,o.tag))}function sO(i,o){switch(np(o),o.tag){case 1:return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return Ei(Vt),Qe(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 26:case 27:case 5:return Rn(o),null;case 31:if(o.memoizedState!==null){if(tr(o),o.alternate===null)throw Error(r(340));aa()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 13:if(tr(o),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(r(340));aa()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return J(Pt),null;case 4:return Qe(),null;case 10:return Ei(o.type),null;case 22:case 23:return tr(o),yp(),i!==null&&J(ca),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 24:return Ei(Vt),null;case 25:return null;default:return null}}function qb(i,o){switch(np(o),o.tag){case 3:Ei(Vt),Qe();break;case 26:case 27:case 5:Rn(o);break;case 4:Qe();break;case 31:o.memoizedState!==null&&tr(o);break;case 13:tr(o);break;case 19:J(Pt);break;case 10:Ei(o.type);break;case 22:case 23:tr(o),yp(),i!==null&&J(ca);break;case 24:Ei(Vt)}}function Bl(i,o){try{var c=o.updateQueue,h=c!==null?c.lastEffect:null;if(h!==null){var g=h.next;c=g;do{if((c.tag&i)===i){h=void 0;var y=c.create,E=c.inst;h=y(),E.destroy=h}c=c.next}while(c!==g)}}catch(_){ut(o,o.return,_)}}function as(i,o,c){try{var h=o.updateQueue,g=h!==null?h.lastEffect:null;if(g!==null){var y=g.next;h=y;do{if((h.tag&i)===i){var E=h.inst,_=E.destroy;if(_!==void 0){E.destroy=void 0,g=o;var D=c,q=_;try{q()}catch(X){ut(g,D,X)}}}h=h.next}while(h!==y)}}catch(X){ut(o,o.return,X)}}function Vb(i){var o=i.updateQueue;if(o!==null){var c=i.stateNode;try{jv(o,c)}catch(h){ut(i,i.return,h)}}}function Fb(i,o,c){c.props=pa(i.type,i.memoizedProps),c.state=i.memoizedState;try{c.componentWillUnmount()}catch(h){ut(i,o,h)}}function Ul(i,o){try{var c=i.ref;if(c!==null){switch(i.tag){case 26:case 27:case 5:var h=i.stateNode;break;case 30:h=i.stateNode;break;default:h=i.stateNode}typeof c=="function"?i.refCleanup=c(h):c.current=h}}catch(g){ut(i,o,g)}}function ti(i,o){var c=i.ref,h=i.refCleanup;if(c!==null)if(typeof h=="function")try{h()}catch(g){ut(i,o,g)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(g){ut(i,o,g)}else c.current=null}function Gb(i){var o=i.type,c=i.memoizedProps,h=i.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":c.autoFocus&&h.focus();break e;case"img":c.src?h.src=c.src:c.srcSet&&(h.srcset=c.srcSet)}}catch(g){ut(i,i.return,g)}}function Yp(i,o,c){try{var h=i.stateNode;CO(h,i.type,c,o),h[pe]=o}catch(g){ut(i,i.return,g)}}function Kb(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&ps(i.type)||i.tag===4}function Jp(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Kb(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&ps(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Xp(i,o,c){var h=i.tag;if(h===5||h===6)i=i.stateNode,o?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(i,o):(o=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,o.appendChild(i),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=vi));else if(h!==4&&(h===27&&ps(i.type)&&(c=i.stateNode,o=null),i=i.child,i!==null))for(Xp(i,o,c),i=i.sibling;i!==null;)Xp(i,o,c),i=i.sibling}function Qu(i,o,c){var h=i.tag;if(h===5||h===6)i=i.stateNode,o?c.insertBefore(i,o):c.appendChild(i);else if(h!==4&&(h===27&&ps(i.type)&&(c=i.stateNode),i=i.child,i!==null))for(Qu(i,o,c),i=i.sibling;i!==null;)Qu(i,o,c),i=i.sibling}function Wb(i){var o=i.stateNode,c=i.memoizedProps;try{for(var h=i.type,g=o.attributes;g.length;)o.removeAttributeNode(g[0]);gn(o,h,c),o[de]=i,o[pe]=c}catch(y){ut(i,i.return,y)}}var Ai=!1,Kt=!1,Qp=!1,Yb=typeof WeakSet=="function"?WeakSet:Set,sn=null;function aO(i,o){if(i=i.containerInfo,bm=bd,i=ov(i),Fh(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else e:{c=(c=i.ownerDocument)&&c.defaultView||window;var h=c.getSelection&&c.getSelection();if(h&&h.rangeCount!==0){c=h.anchorNode;var g=h.anchorOffset,y=h.focusNode;h=h.focusOffset;try{c.nodeType,y.nodeType}catch{c=null;break e}var E=0,_=-1,D=-1,q=0,X=0,ee=i,V=null;t:for(;;){for(var K;ee!==c||g!==0&&ee.nodeType!==3||(_=E+g),ee!==y||h!==0&&ee.nodeType!==3||(D=E+h),ee.nodeType===3&&(E+=ee.nodeValue.length),(K=ee.firstChild)!==null;)V=ee,ee=K;for(;;){if(ee===i)break t;if(V===c&&++q===g&&(_=E),V===y&&++X===h&&(D=E),(K=ee.nextSibling)!==null)break;ee=V,V=ee.parentNode}ee=K}c=_===-1||D===-1?null:{start:_,end:D}}else c=null}c=c||{start:0,end:0}}else c=null;for(wm={focusedElem:i,selectionRange:c},bd=!1,sn=o;sn!==null;)if(o=sn,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,sn=i;else for(;sn!==null;){switch(o=sn,y=o.alternate,i=o.flags,o.tag){case 0:if((i&4)!==0&&(i=o.updateQueue,i=i!==null?i.events:null,i!==null))for(c=0;c<i.length;c++)g=i[c],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&y!==null){i=void 0,c=o,g=y.memoizedProps,y=y.memoizedState,h=c.stateNode;try{var ge=pa(c.type,g);i=h.getSnapshotBeforeUpdate(ge,y),h.__reactInternalSnapshotBeforeUpdate=i}catch(De){ut(c,c.return,De)}}break;case 3:if((i&1024)!==0){if(i=o.stateNode.containerInfo,c=i.nodeType,c===9)Em(i);else if(c===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Em(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=o.sibling,i!==null){i.return=o.return,sn=i;break}sn=o.return}}function Jb(i,o,c){var h=c.flags;switch(c.tag){case 0:case 11:case 15:Ri(i,c),h&4&&Bl(5,c);break;case 1:if(Ri(i,c),h&4)if(i=c.stateNode,o===null)try{i.componentDidMount()}catch(E){ut(c,c.return,E)}else{var g=pa(c.type,o.memoizedProps);o=o.memoizedState;try{i.componentDidUpdate(g,o,i.__reactInternalSnapshotBeforeUpdate)}catch(E){ut(c,c.return,E)}}h&64&&Vb(c),h&512&&Ul(c,c.return);break;case 3:if(Ri(i,c),h&64&&(i=c.updateQueue,i!==null)){if(o=null,c.child!==null)switch(c.child.tag){case 27:case 5:o=c.child.stateNode;break;case 1:o=c.child.stateNode}try{jv(i,o)}catch(E){ut(c,c.return,E)}}break;case 27:o===null&&h&4&&Wb(c);case 26:case 5:Ri(i,c),o===null&&h&4&&Gb(c),h&512&&Ul(c,c.return);break;case 12:Ri(i,c);break;case 31:Ri(i,c),h&4&&Zb(i,c);break;case 13:Ri(i,c),h&4&&ew(i,c),h&64&&(i=c.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(c=mO.bind(null,c),LO(i,c))));break;case 22:if(h=c.memoizedState!==null||Ai,!h){o=o!==null&&o.memoizedState!==null||Kt,g=Ai;var y=Kt;Ai=h,(Kt=o)&&!y?Mi(i,c,(c.subtreeFlags&8772)!==0):Ri(i,c),Ai=g,Kt=y}break;case 30:break;default:Ri(i,c)}}function Xb(i){var o=i.alternate;o!==null&&(i.alternate=null,Xb(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&Rt(o)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var kt=null,Hn=!1;function Oi(i,o,c){for(c=c.child;c!==null;)Qb(i,o,c),c=c.sibling}function Qb(i,o,c){if(wt&&typeof wt.onCommitFiberUnmount=="function")try{wt.onCommitFiberUnmount(pi,c)}catch{}switch(c.tag){case 26:Kt||ti(c,o),Oi(i,o,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Kt||ti(c,o);var h=kt,g=Hn;ps(c.type)&&(kt=c.stateNode,Hn=!1),Oi(i,o,c),Wl(c.stateNode),kt=h,Hn=g;break;case 5:Kt||ti(c,o);case 6:if(h=kt,g=Hn,kt=null,Oi(i,o,c),kt=h,Hn=g,kt!==null)if(Hn)try{(kt.nodeType===9?kt.body:kt.nodeName==="HTML"?kt.ownerDocument.body:kt).removeChild(c.stateNode)}catch(y){ut(c,o,y)}else try{kt.removeChild(c.stateNode)}catch(y){ut(c,o,y)}break;case 18:kt!==null&&(Hn?(i=kt,Vw(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,c.stateNode),Mo(i)):Vw(kt,c.stateNode));break;case 4:h=kt,g=Hn,kt=c.stateNode.containerInfo,Hn=!0,Oi(i,o,c),kt=h,Hn=g;break;case 0:case 11:case 14:case 15:as(2,c,o),Kt||as(4,c,o),Oi(i,o,c);break;case 1:Kt||(ti(c,o),h=c.stateNode,typeof h.componentWillUnmount=="function"&&Fb(c,o,h)),Oi(i,o,c);break;case 21:Oi(i,o,c);break;case 22:Kt=(h=Kt)||c.memoizedState!==null,Oi(i,o,c),Kt=h;break;default:Oi(i,o,c)}}function Zb(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Mo(i)}catch(c){ut(o,o.return,c)}}}function ew(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Mo(i)}catch(c){ut(o,o.return,c)}}function oO(i){switch(i.tag){case 31:case 13:case 19:var o=i.stateNode;return o===null&&(o=i.stateNode=new Yb),o;case 22:return i=i.stateNode,o=i._retryCache,o===null&&(o=i._retryCache=new Yb),o;default:throw Error(r(435,i.tag))}}function Zu(i,o){var c=oO(i);o.forEach(function(h){if(!c.has(h)){c.add(h);var g=gO.bind(null,i,h);h.then(g,g)}})}function $n(i,o){var c=o.deletions;if(c!==null)for(var h=0;h<c.length;h++){var g=c[h],y=i,E=o,_=E;e:for(;_!==null;){switch(_.tag){case 27:if(ps(_.type)){kt=_.stateNode,Hn=!1;break e}break;case 5:kt=_.stateNode,Hn=!1;break e;case 3:case 4:kt=_.stateNode.containerInfo,Hn=!0;break e}_=_.return}if(kt===null)throw Error(r(160));Qb(y,E,g),kt=null,Hn=!1,y=g.alternate,y!==null&&(y.return=null),g.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)tw(o,i),o=o.sibling}var qr=null;function tw(i,o){var c=i.alternate,h=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:$n(o,i),qn(i),h&4&&(as(3,i,i.return),Bl(3,i),as(5,i,i.return));break;case 1:$n(o,i),qn(i),h&512&&(Kt||c===null||ti(c,c.return)),h&64&&Ai&&(i=i.updateQueue,i!==null&&(h=i.callbacks,h!==null&&(c=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=c===null?h:c.concat(h))));break;case 26:var g=qr;if($n(o,i),qn(i),h&512&&(Kt||c===null||ti(c,c.return)),h&4){var y=c!==null?c.memoizedState:null;if(h=i.memoizedState,c===null)if(h===null)if(i.stateNode===null){e:{h=i.type,c=i.memoizedProps,g=g.ownerDocument||g;t:switch(h){case"title":y=g.getElementsByTagName("title")[0],(!y||y[Ct]||y[de]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=g.createElement(h),g.head.insertBefore(y,g.querySelector("head > title"))),gn(y,h,c),y[de]=i,Tt(y),h=y;break e;case"link":var E=tS("link","href",g).get(h+(c.href||""));if(E){for(var _=0;_<E.length;_++)if(y=E[_],y.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&y.getAttribute("rel")===(c.rel==null?null:c.rel)&&y.getAttribute("title")===(c.title==null?null:c.title)&&y.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){E.splice(_,1);break t}}y=g.createElement(h),gn(y,h,c),g.head.appendChild(y);break;case"meta":if(E=tS("meta","content",g).get(h+(c.content||""))){for(_=0;_<E.length;_++)if(y=E[_],y.getAttribute("content")===(c.content==null?null:""+c.content)&&y.getAttribute("name")===(c.name==null?null:c.name)&&y.getAttribute("property")===(c.property==null?null:c.property)&&y.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&y.getAttribute("charset")===(c.charSet==null?null:c.charSet)){E.splice(_,1);break t}}y=g.createElement(h),gn(y,h,c),g.head.appendChild(y);break;default:throw Error(r(468,h))}y[de]=i,Tt(y),h=y}i.stateNode=h}else nS(g,i.type,i.stateNode);else i.stateNode=eS(g,h,i.memoizedProps);else y!==h?(y===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):y.count--,h===null?nS(g,i.type,i.stateNode):eS(g,h,i.memoizedProps)):h===null&&i.stateNode!==null&&Yp(i,i.memoizedProps,c.memoizedProps)}break;case 27:$n(o,i),qn(i),h&512&&(Kt||c===null||ti(c,c.return)),c!==null&&h&4&&Yp(i,i.memoizedProps,c.memoizedProps);break;case 5:if($n(o,i),qn(i),h&512&&(Kt||c===null||ti(c,c.return)),i.flags&32){g=i.stateNode;try{Za(g,"")}catch(ge){ut(i,i.return,ge)}}h&4&&i.stateNode!=null&&(g=i.memoizedProps,Yp(i,g,c!==null?c.memoizedProps:g)),h&1024&&(Qp=!0);break;case 6:if($n(o,i),qn(i),h&4){if(i.stateNode===null)throw Error(r(162));h=i.memoizedProps,c=i.stateNode;try{c.nodeValue=h}catch(ge){ut(i,i.return,ge)}}break;case 3:if(md=null,g=qr,qr=hd(o.containerInfo),$n(o,i),qr=g,qn(i),h&4&&c!==null&&c.memoizedState.isDehydrated)try{Mo(o.containerInfo)}catch(ge){ut(i,i.return,ge)}Qp&&(Qp=!1,nw(i));break;case 4:h=qr,qr=hd(i.stateNode.containerInfo),$n(o,i),qn(i),qr=h;break;case 12:$n(o,i),qn(i);break;case 31:$n(o,i),qn(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,Zu(i,h)));break;case 13:$n(o,i),qn(i),i.child.flags&8192&&i.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(td=_t()),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,Zu(i,h)));break;case 22:g=i.memoizedState!==null;var D=c!==null&&c.memoizedState!==null,q=Ai,X=Kt;if(Ai=q||g,Kt=X||D,$n(o,i),Kt=X,Ai=q,qn(i),h&8192)e:for(o=i.stateNode,o._visibility=g?o._visibility&-2:o._visibility|1,g&&(c===null||D||Ai||Kt||ma(i)),c=null,o=i;;){if(o.tag===5||o.tag===26){if(c===null){D=c=o;try{if(y=D.stateNode,g)E=y.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{_=D.stateNode;var ee=D.memoizedProps.style,V=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;_.style.display=V==null||typeof V=="boolean"?"":(""+V).trim()}}catch(ge){ut(D,D.return,ge)}}}else if(o.tag===6){if(c===null){D=o;try{D.stateNode.nodeValue=g?"":D.memoizedProps}catch(ge){ut(D,D.return,ge)}}}else if(o.tag===18){if(c===null){D=o;try{var K=D.stateNode;g?Fw(K,!0):Fw(D.stateNode,!1)}catch(ge){ut(D,D.return,ge)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===i)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;c===o&&(c=null),o=o.return}c===o&&(c=null),o.sibling.return=o.return,o=o.sibling}h&4&&(h=i.updateQueue,h!==null&&(c=h.retryQueue,c!==null&&(h.retryQueue=null,Zu(i,c))));break;case 19:$n(o,i),qn(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,Zu(i,h)));break;case 30:break;case 21:break;default:$n(o,i),qn(i)}}function qn(i){var o=i.flags;if(o&2){try{for(var c,h=i.return;h!==null;){if(Kb(h)){c=h;break}h=h.return}if(c==null)throw Error(r(160));switch(c.tag){case 27:var g=c.stateNode,y=Jp(i);Qu(i,y,g);break;case 5:var E=c.stateNode;c.flags&32&&(Za(E,""),c.flags&=-33);var _=Jp(i);Qu(i,_,E);break;case 3:case 4:var D=c.stateNode.containerInfo,q=Jp(i);Xp(i,q,D);break;default:throw Error(r(161))}}catch(X){ut(i,i.return,X)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function nw(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var o=i;nw(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),i=i.sibling}}function Ri(i,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)Jb(i,o.alternate,o),o=o.sibling}function ma(i){for(i=i.child;i!==null;){var o=i;switch(o.tag){case 0:case 11:case 14:case 15:as(4,o,o.return),ma(o);break;case 1:ti(o,o.return);var c=o.stateNode;typeof c.componentWillUnmount=="function"&&Fb(o,o.return,c),ma(o);break;case 27:Wl(o.stateNode);case 26:case 5:ti(o,o.return),ma(o);break;case 22:o.memoizedState===null&&ma(o);break;case 30:ma(o);break;default:ma(o)}i=i.sibling}}function Mi(i,o,c){for(c=c&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var h=o.alternate,g=i,y=o,E=y.flags;switch(y.tag){case 0:case 11:case 15:Mi(g,y,c),Bl(4,y);break;case 1:if(Mi(g,y,c),h=y,g=h.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(q){ut(h,h.return,q)}if(h=y,g=h.updateQueue,g!==null){var _=h.stateNode;try{var D=g.shared.hiddenCallbacks;if(D!==null)for(g.shared.hiddenCallbacks=null,g=0;g<D.length;g++)Dv(D[g],_)}catch(q){ut(h,h.return,q)}}c&&E&64&&Vb(y),Ul(y,y.return);break;case 27:Wb(y);case 26:case 5:Mi(g,y,c),c&&h===null&&E&4&&Gb(y),Ul(y,y.return);break;case 12:Mi(g,y,c);break;case 31:Mi(g,y,c),c&&E&4&&Zb(g,y);break;case 13:Mi(g,y,c),c&&E&4&&ew(g,y);break;case 22:y.memoizedState===null&&Mi(g,y,c),Ul(y,y.return);break;case 30:break;default:Mi(g,y,c)}o=o.sibling}}function Zp(i,o){var c=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),i=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(i=o.memoizedState.cachePool.pool),i!==c&&(i!=null&&i.refCount++,c!=null&&kl(c))}function em(i,o){i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&kl(i))}function Vr(i,o,c,h){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)rw(i,o,c,h),o=o.sibling}function rw(i,o,c,h){var g=o.flags;switch(o.tag){case 0:case 11:case 15:Vr(i,o,c,h),g&2048&&Bl(9,o);break;case 1:Vr(i,o,c,h);break;case 3:Vr(i,o,c,h),g&2048&&(i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&kl(i)));break;case 12:if(g&2048){Vr(i,o,c,h),i=o.stateNode;try{var y=o.memoizedProps,E=y.id,_=y.onPostCommit;typeof _=="function"&&_(E,o.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(D){ut(o,o.return,D)}}else Vr(i,o,c,h);break;case 31:Vr(i,o,c,h);break;case 13:Vr(i,o,c,h);break;case 23:break;case 22:y=o.stateNode,E=o.alternate,o.memoizedState!==null?y._visibility&2?Vr(i,o,c,h):Pl(i,o):y._visibility&2?Vr(i,o,c,h):(y._visibility|=2,wo(i,o,c,h,(o.subtreeFlags&10256)!==0||!1)),g&2048&&Zp(E,o);break;case 24:Vr(i,o,c,h),g&2048&&em(o.alternate,o);break;default:Vr(i,o,c,h)}}function wo(i,o,c,h,g){for(g=g&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var y=i,E=o,_=c,D=h,q=E.flags;switch(E.tag){case 0:case 11:case 15:wo(y,E,_,D,g),Bl(8,E);break;case 23:break;case 22:var X=E.stateNode;E.memoizedState!==null?X._visibility&2?wo(y,E,_,D,g):Pl(y,E):(X._visibility|=2,wo(y,E,_,D,g)),g&&q&2048&&Zp(E.alternate,E);break;case 24:wo(y,E,_,D,g),g&&q&2048&&em(E.alternate,E);break;default:wo(y,E,_,D,g)}o=o.sibling}}function Pl(i,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var c=i,h=o,g=h.flags;switch(h.tag){case 22:Pl(c,h),g&2048&&Zp(h.alternate,h);break;case 24:Pl(c,h),g&2048&&em(h.alternate,h);break;default:Pl(c,h)}o=o.sibling}}var Hl=8192;function So(i,o,c){if(i.subtreeFlags&Hl)for(i=i.child;i!==null;)iw(i,o,c),i=i.sibling}function iw(i,o,c){switch(i.tag){case 26:So(i,o,c),i.flags&Hl&&i.memoizedState!==null&&KO(c,qr,i.memoizedState,i.memoizedProps);break;case 5:So(i,o,c);break;case 3:case 4:var h=qr;qr=hd(i.stateNode.containerInfo),So(i,o,c),qr=h;break;case 22:i.memoizedState===null&&(h=i.alternate,h!==null&&h.memoizedState!==null?(h=Hl,Hl=16777216,So(i,o,c),Hl=h):So(i,o,c));break;default:So(i,o,c)}}function sw(i){var o=i.alternate;if(o!==null&&(i=o.child,i!==null)){o.child=null;do o=i.sibling,i.sibling=null,i=o;while(i!==null)}}function $l(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var h=o[c];sn=h,ow(h,i)}sw(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)aw(i),i=i.sibling}function aw(i){switch(i.tag){case 0:case 11:case 15:$l(i),i.flags&2048&&as(9,i,i.return);break;case 3:$l(i);break;case 12:$l(i);break;case 22:var o=i.stateNode;i.memoizedState!==null&&o._visibility&2&&(i.return===null||i.return.tag!==13)?(o._visibility&=-3,ed(i)):$l(i);break;default:$l(i)}}function ed(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var h=o[c];sn=h,ow(h,i)}sw(i)}for(i=i.child;i!==null;){switch(o=i,o.tag){case 0:case 11:case 15:as(8,o,o.return),ed(o);break;case 22:c=o.stateNode,c._visibility&2&&(c._visibility&=-3,ed(o));break;default:ed(o)}i=i.sibling}}function ow(i,o){for(;sn!==null;){var c=sn;switch(c.tag){case 0:case 11:case 15:as(8,c,o);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var h=c.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:kl(c.memoizedState.cache)}if(h=c.child,h!==null)h.return=c,sn=h;else e:for(c=i;sn!==null;){h=sn;var g=h.sibling,y=h.return;if(Xb(h),h===c){sn=null;break e}if(g!==null){g.return=y,sn=g;break e}sn=y}}}var lO={getCacheForType:function(i){var o=pn(Vt),c=o.data.get(i);return c===void 0&&(c=i(),o.data.set(i,c)),c},cacheSignal:function(){return pn(Vt).controller.signal}},cO=typeof WeakMap=="function"?WeakMap:Map,lt=0,mt=null,We=null,Je=0,ct=0,nr=null,ls=!1,xo=!1,tm=!1,Ni=0,Dt=0,cs=0,ga=0,nm=0,rr=0,Eo=0,ql=null,Vn=null,rm=!1,td=0,lw=0,nd=1/0,rd=null,us=null,Zt=0,ds=null,To=null,Di=0,im=0,sm=null,cw=null,Vl=0,am=null;function ir(){return(lt&2)!==0&&Je!==0?Je&-Je:I.T!==null?fm():oe()}function uw(){if(rr===0)if((Je&536870912)===0||rt){var i=mi;mi<<=1,(mi&3932160)===0&&(mi=262144),rr=i}else rr=536870912;return i=er.current,i!==null&&(i.flags|=32),rr}function Fn(i,o,c){(i===mt&&(ct===2||ct===9)||i.cancelPendingCommit!==null)&&(ko(i,0),fs(i,Je,rr,!1)),vt(i,c),((lt&2)===0||i!==mt)&&(i===mt&&((lt&2)===0&&(ga|=c),Dt===4&&fs(i,Je,rr,!1)),ni(i))}function dw(i,o,c){if((lt&6)!==0)throw Error(r(327));var h=!c&&(o&127)===0&&(o&i.expiredLanes)===0||yt(i,o),g=h?fO(i,o):lm(i,o,!0),y=h;do{if(g===0){xo&&!h&&fs(i,o,0,!1);break}else{if(c=i.current.alternate,y&&!uO(c)){g=lm(i,o,!1),y=!1;continue}if(g===2){if(y=o,i.errorRecoveryDisabledLanes&y)var E=0;else E=i.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){o=E;e:{var _=i;g=ql;var D=_.current.memoizedState.isDehydrated;if(D&&(ko(_,E).flags|=256),E=lm(_,E,!1),E!==2){if(tm&&!D){_.errorRecoveryDisabledLanes|=y,ga|=y,g=4;break e}y=Vn,Vn=g,y!==null&&(Vn===null?Vn=y:Vn.push.apply(Vn,y))}g=E}if(y=!1,g!==2)continue}}if(g===1){ko(i,0),fs(i,o,0,!0);break}e:{switch(h=i,y=g,y){case 0:case 1:throw Error(r(345));case 4:if((o&4194048)!==o)break;case 6:fs(h,o,rr,!ls);break e;case 2:Vn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((o&62914560)===o&&(g=td+300-_t(),10<g)){if(fs(h,o,rr,!ls),ze(h,0,!0)!==0)break e;Di=o,h.timeoutHandle=$w(fw.bind(null,h,c,Vn,rd,rm,o,rr,ga,Eo,ls,y,"Throttled",-0,0),g);break e}fw(h,c,Vn,rd,rm,o,rr,ga,Eo,ls,y,null,-0,0)}}break}while(!0);ni(i)}function fw(i,o,c,h,g,y,E,_,D,q,X,ee,V,K){if(i.timeoutHandle=-1,ee=o.subtreeFlags,ee&8192||(ee&16785408)===16785408){ee={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:vi},iw(o,y,ee);var ge=(y&62914560)===y?td-_t():(y&4194048)===y?lw-_t():0;if(ge=WO(ee,ge),ge!==null){Di=y,i.cancelPendingCommit=ge(ww.bind(null,i,o,y,c,h,g,E,_,D,X,ee,null,V,K)),fs(i,y,E,!q);return}}ww(i,o,y,c,h,g,E,_,D)}function uO(i){for(var o=i;;){var c=o.tag;if((c===0||c===11||c===15)&&o.flags&16384&&(c=o.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var h=0;h<c.length;h++){var g=c[h],y=g.getSnapshot;g=g.value;try{if(!Qn(y(),g))return!1}catch{return!1}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function fs(i,o,c,h){o&=~nm,o&=~ga,i.suspendedLanes|=o,i.pingedLanes&=~o,h&&(i.warmLanes|=o),h=i.expirationTimes;for(var g=o;0<g;){var y=31-Qt(g),E=1<<y;h[y]=-1,g&=~E}c!==0&&gi(i,c,o)}function id(){return(lt&6)===0?(Fl(0),!1):!0}function om(){if(We!==null){if(ct===0)var i=We.return;else i=We,xi=oa=null,Ep(i),mo=null,Cl=0,i=We;for(;i!==null;)qb(i.alternate,i),i=i.return;We=null}}function ko(i,o){var c=i.timeoutHandle;c!==-1&&(i.timeoutHandle=-1,RO(c)),c=i.cancelPendingCommit,c!==null&&(i.cancelPendingCommit=null,c()),Di=0,om(),mt=i,We=c=wi(i.current,null),Je=o,ct=0,nr=null,ls=!1,xo=yt(i,o),tm=!1,Eo=rr=nm=ga=cs=Dt=0,Vn=ql=null,rm=!1,(o&8)!==0&&(o|=o&32);var h=i.entangledLanes;if(h!==0)for(i=i.entanglements,h&=o;0<h;){var g=31-Qt(h),y=1<<g;o|=i[g],h&=~y}return Ni=o,ku(),c}function hw(i,o){He=null,I.H=Ll,o===po||o===Du?(o=Ov(),ct=3):o===dp?(o=Ov(),ct=4):ct=o===Up?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,nr=o,We===null&&(Dt=1,Ku(i,vr(o,i.current)))}function pw(){var i=er.current;return i===null?!0:(Je&4194048)===Je?xr===null:(Je&62914560)===Je||(Je&536870912)!==0?i===xr:!1}function mw(){var i=I.H;return I.H=Ll,i===null?Ll:i}function gw(){var i=I.A;return I.A=lO,i}function sd(){Dt=4,ls||(Je&4194048)!==Je&&er.current!==null||(xo=!0),(cs&134217727)===0&&(ga&134217727)===0||mt===null||fs(mt,Je,rr,!1)}function lm(i,o,c){var h=lt;lt|=2;var g=mw(),y=gw();(mt!==i||Je!==o)&&(rd=null,ko(i,o)),o=!1;var E=Dt;e:do try{if(ct!==0&&We!==null){var _=We,D=nr;switch(ct){case 8:om(),E=6;break e;case 3:case 2:case 9:case 6:er.current===null&&(o=!0);var q=ct;if(ct=0,nr=null,_o(i,_,D,q),c&&xo){E=0;break e}break;default:q=ct,ct=0,nr=null,_o(i,_,D,q)}}dO(),E=Dt;break}catch(X){hw(i,X)}while(!0);return o&&i.shellSuspendCounter++,xi=oa=null,lt=h,I.H=g,I.A=y,We===null&&(mt=null,Je=0,ku()),E}function dO(){for(;We!==null;)yw(We)}function fO(i,o){var c=lt;lt|=2;var h=mw(),g=gw();mt!==i||Je!==o?(rd=null,nd=_t()+500,ko(i,o)):xo=yt(i,o);e:do try{if(ct!==0&&We!==null){o=We;var y=nr;t:switch(ct){case 1:ct=0,nr=null,_o(i,o,y,1);break;case 2:case 9:if(Cv(y)){ct=0,nr=null,vw(o);break}o=function(){ct!==2&&ct!==9||mt!==i||(ct=7),ni(i)},y.then(o,o);break e;case 3:ct=7;break e;case 4:ct=5;break e;case 7:Cv(y)?(ct=0,nr=null,vw(o)):(ct=0,nr=null,_o(i,o,y,7));break;case 5:var E=null;switch(We.tag){case 26:E=We.memoizedState;case 5:case 27:var _=We;if(E?rS(E):_.stateNode.complete){ct=0,nr=null;var D=_.sibling;if(D!==null)We=D;else{var q=_.return;q!==null?(We=q,ad(q)):We=null}break t}}ct=0,nr=null,_o(i,o,y,5);break;case 6:ct=0,nr=null,_o(i,o,y,6);break;case 8:om(),Dt=6;break e;default:throw Error(r(462))}}hO();break}catch(X){hw(i,X)}while(!0);return xi=oa=null,I.H=h,I.A=g,lt=c,We!==null?0:(mt=null,Je=0,ku(),Dt)}function hO(){for(;We!==null&&!un();)yw(We)}function yw(i){var o=Hb(i.alternate,i,Ni);i.memoizedProps=i.pendingProps,o===null?ad(i):We=o}function vw(i){var o=i,c=o.alternate;switch(o.tag){case 15:case 0:o=Lb(c,o,o.pendingProps,o.type,void 0,Je);break;case 11:o=Lb(c,o,o.pendingProps,o.type.render,o.ref,Je);break;case 5:Ep(o);default:qb(c,o),o=We=gv(o,Ni),o=Hb(c,o,Ni)}i.memoizedProps=i.pendingProps,o===null?ad(i):We=o}function _o(i,o,c,h){xi=oa=null,Ep(o),mo=null,Cl=0;var g=o.return;try{if(tO(i,g,o,c,Je)){Dt=1,Ku(i,vr(c,i.current)),We=null;return}}catch(y){if(g!==null)throw We=g,y;Dt=1,Ku(i,vr(c,i.current)),We=null;return}o.flags&32768?(rt||h===1?i=!0:xo||(Je&536870912)!==0?i=!1:(ls=i=!0,(h===2||h===9||h===3||h===6)&&(h=er.current,h!==null&&h.tag===13&&(h.flags|=16384))),bw(o,i)):ad(o)}function ad(i){var o=i;do{if((o.flags&32768)!==0){bw(o,ls);return}i=o.return;var c=iO(o.alternate,o,Ni);if(c!==null){We=c;return}if(o=o.sibling,o!==null){We=o;return}We=o=i}while(o!==null);Dt===0&&(Dt=5)}function bw(i,o){do{var c=sO(i.alternate,i);if(c!==null){c.flags&=32767,We=c;return}if(c=i.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!o&&(i=i.sibling,i!==null)){We=i;return}We=i=c}while(i!==null);Dt=6,We=null}function ww(i,o,c,h,g,y,E,_,D){i.cancelPendingCommit=null;do od();while(Zt!==0);if((lt&6)!==0)throw Error(r(327));if(o!==null){if(o===i.current)throw Error(r(177));if(y=o.lanes|o.childLanes,y|=Jh,Tn(i,c,y,E,_,D),i===mt&&(We=mt=null,Je=0),To=o,ds=i,Di=c,im=y,sm=g,cw=h,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,yO(dn,function(){return kw(),null})):(i.callbackNode=null,i.callbackPriority=0),h=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||h){h=I.T,I.T=null,g=Q.p,Q.p=2,E=lt,lt|=4;try{aO(i,o,c)}finally{lt=E,Q.p=g,I.T=h}}Zt=1,Sw(),xw(),Ew()}}function Sw(){if(Zt===1){Zt=0;var i=ds,o=To,c=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||c){c=I.T,I.T=null;var h=Q.p;Q.p=2;var g=lt;lt|=4;try{tw(o,i);var y=wm,E=ov(i.containerInfo),_=y.focusedElem,D=y.selectionRange;if(E!==_&&_&&_.ownerDocument&&av(_.ownerDocument.documentElement,_)){if(D!==null&&Fh(_)){var q=D.start,X=D.end;if(X===void 0&&(X=q),"selectionStart"in _)_.selectionStart=q,_.selectionEnd=Math.min(X,_.value.length);else{var ee=_.ownerDocument||document,V=ee&&ee.defaultView||window;if(V.getSelection){var K=V.getSelection(),ge=_.textContent.length,De=Math.min(D.start,ge),pt=D.end===void 0?De:Math.min(D.end,ge);!K.extend&&De>pt&&(E=pt,pt=De,De=E);var H=sv(_,De),B=sv(_,pt);if(H&&B&&(K.rangeCount!==1||K.anchorNode!==H.node||K.anchorOffset!==H.offset||K.focusNode!==B.node||K.focusOffset!==B.offset)){var $=ee.createRange();$.setStart(H.node,H.offset),K.removeAllRanges(),De>pt?(K.addRange($),K.extend(B.node,B.offset)):($.setEnd(B.node,B.offset),K.addRange($))}}}}for(ee=[],K=_;K=K.parentNode;)K.nodeType===1&&ee.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<ee.length;_++){var Z=ee[_];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}bd=!!bm,wm=bm=null}finally{lt=g,Q.p=h,I.T=c}}i.current=o,Zt=2}}function xw(){if(Zt===2){Zt=0;var i=ds,o=To,c=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||c){c=I.T,I.T=null;var h=Q.p;Q.p=2;var g=lt;lt|=4;try{Jb(i,o.alternate,o)}finally{lt=g,Q.p=h,I.T=c}}Zt=3}}function Ew(){if(Zt===4||Zt===3){Zt=0,Xr();var i=ds,o=To,c=Di,h=cw;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Zt=5:(Zt=0,To=ds=null,Tw(i,i.pendingLanes));var g=i.pendingLanes;if(g===0&&(us=null),ne(c),o=o.stateNode,wt&&typeof wt.onCommitFiberRoot=="function")try{wt.onCommitFiberRoot(pi,o,void 0,(o.current.flags&128)===128)}catch{}if(h!==null){o=I.T,g=Q.p,Q.p=2,I.T=null;try{for(var y=i.onRecoverableError,E=0;E<h.length;E++){var _=h[E];y(_.value,{componentStack:_.stack})}}finally{I.T=o,Q.p=g}}(Di&3)!==0&&od(),ni(i),g=i.pendingLanes,(c&261930)!==0&&(g&42)!==0?i===am?Vl++:(Vl=0,am=i):Vl=0,Fl(0)}}function Tw(i,o){(i.pooledCacheLanes&=o)===0&&(o=i.pooledCache,o!=null&&(i.pooledCache=null,kl(o)))}function od(){return Sw(),xw(),Ew(),kw()}function kw(){if(Zt!==5)return!1;var i=ds,o=im;im=0;var c=ne(Di),h=I.T,g=Q.p;try{Q.p=32>c?32:c,I.T=null,c=sm,sm=null;var y=ds,E=Di;if(Zt=0,To=ds=null,Di=0,(lt&6)!==0)throw Error(r(331));var _=lt;if(lt|=4,aw(y.current),rw(y,y.current,E,c),lt=_,Fl(0,!1),wt&&typeof wt.onPostCommitFiberRoot=="function")try{wt.onPostCommitFiberRoot(pi,y)}catch{}return!0}finally{Q.p=g,I.T=h,Tw(i,o)}}function _w(i,o,c){o=vr(c,o),o=Bp(i.stateNode,o,2),i=rs(i,o,2),i!==null&&(vt(i,2),ni(i))}function ut(i,o,c){if(i.tag===3)_w(i,i,c);else for(;o!==null;){if(o.tag===3){_w(o,i,c);break}else if(o.tag===1){var h=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(us===null||!us.has(h))){i=vr(c,i),c=Cb(2),h=rs(o,c,2),h!==null&&(Ab(c,h,o,i),vt(h,2),ni(h));break}}o=o.return}}function cm(i,o,c){var h=i.pingCache;if(h===null){h=i.pingCache=new cO;var g=new Set;h.set(o,g)}else g=h.get(o),g===void 0&&(g=new Set,h.set(o,g));g.has(c)||(tm=!0,g.add(c),i=pO.bind(null,i,o,c),o.then(i,i))}function pO(i,o,c){var h=i.pingCache;h!==null&&h.delete(o),i.pingedLanes|=i.suspendedLanes&c,i.warmLanes&=~c,mt===i&&(Je&c)===c&&(Dt===4||Dt===3&&(Je&62914560)===Je&&300>_t()-td?(lt&2)===0&&ko(i,0):nm|=c,Eo===Je&&(Eo=0)),ni(i)}function Cw(i,o){o===0&&(o=Bt()),i=ia(i,o),i!==null&&(vt(i,o),ni(i))}function mO(i){var o=i.memoizedState,c=0;o!==null&&(c=o.retryLane),Cw(i,c)}function gO(i,o){var c=0;switch(i.tag){case 31:case 13:var h=i.stateNode,g=i.memoizedState;g!==null&&(c=g.retryLane);break;case 19:h=i.stateNode;break;case 22:h=i.stateNode._retryCache;break;default:throw Error(r(314))}h!==null&&h.delete(o),Cw(i,c)}function yO(i,o){return Ys(i,o)}var ld=null,Co=null,um=!1,cd=!1,dm=!1,hs=0;function ni(i){i!==Co&&i.next===null&&(Co===null?ld=Co=i:Co=Co.next=i),cd=!0,um||(um=!0,bO())}function Fl(i,o){if(!dm&&cd){dm=!0;do for(var c=!1,h=ld;h!==null;){if(i!==0){var g=h.pendingLanes;if(g===0)var y=0;else{var E=h.suspendedLanes,_=h.pingedLanes;y=(1<<31-Qt(42|i)+1)-1,y&=g&~(E&~_),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(c=!0,Mw(h,y))}else y=Je,y=ze(h,h===mt?y:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(y&3)===0||yt(h,y)||(c=!0,Mw(h,y));h=h.next}while(c);dm=!1}}function vO(){Aw()}function Aw(){cd=um=!1;var i=0;hs!==0&&OO()&&(i=hs);for(var o=_t(),c=null,h=ld;h!==null;){var g=h.next,y=Ow(h,o);y===0?(h.next=null,c===null?ld=g:c.next=g,g===null&&(Co=c)):(c=h,(i!==0||(y&3)!==0)&&(cd=!0)),h=g}Zt!==0&&Zt!==5||Fl(i),hs!==0&&(hs=0)}function Ow(i,o){for(var c=i.suspendedLanes,h=i.pingedLanes,g=i.expirationTimes,y=i.pendingLanes&-62914561;0<y;){var E=31-Qt(y),_=1<<E,D=g[E];D===-1?((_&c)===0||(_&h)!==0)&&(g[E]=It(_,o)):D<=o&&(i.expiredLanes|=_),y&=~_}if(o=mt,c=Je,c=ze(i,i===o?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h=i.callbackNode,c===0||i===o&&(ct===2||ct===9)||i.cancelPendingCommit!==null)return h!==null&&h!==null&&Js(h),i.callbackNode=null,i.callbackPriority=0;if((c&3)===0||yt(i,c)){if(o=c&-c,o===i.callbackPriority)return o;switch(h!==null&&Js(h),ne(c)){case 2:case 8:c=Yi;break;case 32:c=dn;break;case 268435456:c=fr;break;default:c=dn}return h=Rw.bind(null,i),c=Ys(c,h),i.callbackPriority=o,i.callbackNode=c,o}return h!==null&&h!==null&&Js(h),i.callbackPriority=2,i.callbackNode=null,2}function Rw(i,o){if(Zt!==0&&Zt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var c=i.callbackNode;if(od()&&i.callbackNode!==c)return null;var h=Je;return h=ze(i,i===mt?h:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h===0?null:(dw(i,h,o),Ow(i,_t()),i.callbackNode!=null&&i.callbackNode===c?Rw.bind(null,i):null)}function Mw(i,o){if(od())return null;dw(i,o,!0)}function bO(){MO(function(){(lt&6)!==0?Ys(Qr,vO):Aw()})}function fm(){if(hs===0){var i=fo;i===0&&(i=Ir,Ir<<=1,(Ir&261888)===0&&(Ir=256)),hs=i}return hs}function Nw(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:yu(""+i)}function Dw(i,o){var c=o.ownerDocument.createElement("input");return c.name=o.name,c.value=o.value,i.id&&c.setAttribute("form",i.id),o.parentNode.insertBefore(c,o),i=new FormData(i),c.parentNode.removeChild(c),i}function wO(i,o,c,h,g){if(o==="submit"&&c&&c.stateNode===g){var y=Nw((g[pe]||null).action),E=h.submitter;E&&(o=(o=E[pe]||null)?Nw(o.formAction):E.getAttribute("formAction"),o!==null&&(y=o,E=null));var _=new Su("action","action",null,h,g);i.push({event:_,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(hs!==0){var D=E?Dw(g,E):new FormData(g);Np(c,{pending:!0,data:D,method:g.method,action:y},null,D)}}else typeof y=="function"&&(_.preventDefault(),D=E?Dw(g,E):new FormData(g),Np(c,{pending:!0,data:D,method:g.method,action:y},y,D))},currentTarget:g}]})}}for(var hm=0;hm<Yh.length;hm++){var pm=Yh[hm],SO=pm.toLowerCase(),xO=pm[0].toUpperCase()+pm.slice(1);$r(SO,"on"+xO)}$r(uv,"onAnimationEnd"),$r(dv,"onAnimationIteration"),$r(fv,"onAnimationStart"),$r("dblclick","onDoubleClick"),$r("focusin","onFocus"),$r("focusout","onBlur"),$r(BA,"onTransitionRun"),$r(UA,"onTransitionStart"),$r(PA,"onTransitionCancel"),$r(hv,"onTransitionEnd"),mr("onMouseEnter",["mouseout","mouseover"]),mr("onMouseLeave",["mouseout","mouseover"]),mr("onPointerEnter",["pointerout","pointerover"]),mr("onPointerLeave",["pointerout","pointerover"]),Pr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Pr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Pr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Pr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Pr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Pr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),EO=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Gl));function jw(i,o){o=(o&4)!==0;for(var c=0;c<i.length;c++){var h=i[c],g=h.event;h=h.listeners;e:{var y=void 0;if(o)for(var E=h.length-1;0<=E;E--){var _=h[E],D=_.instance,q=_.currentTarget;if(_=_.listener,D!==y&&g.isPropagationStopped())break e;y=_,g.currentTarget=q;try{y(g)}catch(X){Tu(X)}g.currentTarget=null,y=D}else for(E=0;E<h.length;E++){if(_=h[E],D=_.instance,q=_.currentTarget,_=_.listener,D!==y&&g.isPropagationStopped())break e;y=_,g.currentTarget=q;try{y(g)}catch(X){Tu(X)}g.currentTarget=null,y=D}}}}function Ye(i,o){var c=o[Ne];c===void 0&&(c=o[Ne]=new Set);var h=i+"__bubble";c.has(h)||(Lw(o,i,2,!1),c.add(h))}function mm(i,o,c){var h=0;o&&(h|=4),Lw(c,i,h,o)}var ud="_reactListening"+Math.random().toString(36).slice(2);function gm(i){if(!i[ud]){i[ud]=!0,Ur.forEach(function(c){c!=="selectionchange"&&(EO.has(c)||mm(c,!1,i),mm(c,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[ud]||(o[ud]=!0,mm("selectionchange",!1,o))}}function Lw(i,o,c,h){switch(uS(o)){case 2:var g=XO;break;case 8:g=QO;break;default:g=Mm}c=g.bind(null,o,c,i),g=void 0,!zh||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),h?g!==void 0?i.addEventListener(o,c,{capture:!0,passive:g}):i.addEventListener(o,c,!0):g!==void 0?i.addEventListener(o,c,{passive:g}):i.addEventListener(o,c,!1)}function ym(i,o,c,h,g){var y=h;if((o&1)===0&&(o&2)===0&&h!==null)e:for(;;){if(h===null)return;var E=h.tag;if(E===3||E===4){var _=h.stateNode.containerInfo;if(_===g)break;if(E===4)for(E=h.return;E!==null;){var D=E.tag;if((D===3||D===4)&&E.stateNode.containerInfo===g)return;E=E.return}for(;_!==null;){if(E=Mt(_),E===null)return;if(D=E.tag,D===5||D===6||D===26||D===27){h=y=E;continue e}_=_.parentNode}}h=h.return}P0(function(){var q=y,X=jh(c),ee=[];e:{var V=pv.get(i);if(V!==void 0){var K=Su,ge=i;switch(i){case"keypress":if(bu(c)===0)break e;case"keydown":case"keyup":K=gA;break;case"focusin":ge="focus",K=Ph;break;case"focusout":ge="blur",K=Ph;break;case"beforeblur":case"afterblur":K=Ph;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=q0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=iA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=bA;break;case uv:case dv:case fv:K=oA;break;case hv:K=SA;break;case"scroll":case"scrollend":K=nA;break;case"wheel":K=EA;break;case"copy":case"cut":case"paste":K=cA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=F0;break;case"toggle":case"beforetoggle":K=kA}var De=(o&4)!==0,pt=!De&&(i==="scroll"||i==="scrollend"),H=De?V!==null?V+"Capture":null:V;De=[];for(var B=q,$;B!==null;){var Z=B;if($=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||$===null||H===null||(Z=pl(B,H),Z!=null&&De.push(Kl(B,Z,$))),pt)break;B=B.return}0<De.length&&(V=new K(V,ge,null,c,X),ee.push({event:V,listeners:De}))}}if((o&7)===0){e:{if(V=i==="mouseover"||i==="pointerover",K=i==="mouseout"||i==="pointerout",V&&c!==Dh&&(ge=c.relatedTarget||c.fromElement)&&(Mt(ge)||ge[Ee]))break e;if((K||V)&&(V=X.window===X?X:(V=X.ownerDocument)?V.defaultView||V.parentWindow:window,K?(ge=c.relatedTarget||c.toElement,K=q,ge=ge?Mt(ge):null,ge!==null&&(pt=a(ge),De=ge.tag,ge!==pt||De!==5&&De!==27&&De!==6)&&(ge=null)):(K=null,ge=q),K!==ge)){if(De=q0,Z="onMouseLeave",H="onMouseEnter",B="mouse",(i==="pointerout"||i==="pointerover")&&(De=F0,Z="onPointerLeave",H="onPointerEnter",B="pointer"),pt=K==null?V:rn(K),$=ge==null?V:rn(ge),V=new De(Z,B+"leave",K,c,X),V.target=pt,V.relatedTarget=$,Z=null,Mt(X)===q&&(De=new De(H,B+"enter",ge,c,X),De.target=$,De.relatedTarget=pt,Z=De),pt=Z,K&&ge)t:{for(De=TO,H=K,B=ge,$=0,Z=H;Z;Z=De(Z))$++;Z=0;for(var Re=B;Re;Re=De(Re))Z++;for(;0<$-Z;)H=De(H),$--;for(;0<Z-$;)B=De(B),Z--;for(;$--;){if(H===B||B!==null&&H===B.alternate){De=H;break t}H=De(H),B=De(B)}De=null}else De=null;K!==null&&zw(ee,V,K,De,!1),ge!==null&&pt!==null&&zw(ee,pt,ge,De,!0)}}e:{if(V=q?rn(q):window,K=V.nodeName&&V.nodeName.toLowerCase(),K==="select"||K==="input"&&V.type==="file")var at=Z0;else if(X0(V))if(ev)at=LA;else{at=DA;var xe=NA}else K=V.nodeName,!K||K.toLowerCase()!=="input"||V.type!=="checkbox"&&V.type!=="radio"?q&&Nh(q.elementType)&&(at=Z0):at=jA;if(at&&(at=at(i,q))){Q0(ee,at,c,X);break e}xe&&xe(i,V,q),i==="focusout"&&q&&V.type==="number"&&q.memoizedProps.value!=null&&Mh(V,"number",V.value)}switch(xe=q?rn(q):window,i){case"focusin":(X0(xe)||xe.contentEditable==="true")&&(ro=xe,Gh=q,xl=null);break;case"focusout":xl=Gh=ro=null;break;case"mousedown":Kh=!0;break;case"contextmenu":case"mouseup":case"dragend":Kh=!1,lv(ee,c,X);break;case"selectionchange":if(IA)break;case"keydown":case"keyup":lv(ee,c,X)}var $e;if($h)e:{switch(i){case"compositionstart":var Xe="onCompositionStart";break e;case"compositionend":Xe="onCompositionEnd";break e;case"compositionupdate":Xe="onCompositionUpdate";break e}Xe=void 0}else no?Y0(i,c)&&(Xe="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(Xe="onCompositionStart");Xe&&(G0&&c.locale!=="ko"&&(no||Xe!=="onCompositionStart"?Xe==="onCompositionEnd"&&no&&($e=H0()):(Ji=X,Ih="value"in Ji?Ji.value:Ji.textContent,no=!0)),xe=dd(q,Xe),0<xe.length&&(Xe=new V0(Xe,i,null,c,X),ee.push({event:Xe,listeners:xe}),$e?Xe.data=$e:($e=J0(c),$e!==null&&(Xe.data=$e)))),($e=CA?AA(i,c):OA(i,c))&&(Xe=dd(q,"onBeforeInput"),0<Xe.length&&(xe=new V0("onBeforeInput","beforeinput",null,c,X),ee.push({event:xe,listeners:Xe}),xe.data=$e)),wO(ee,i,q,c,X)}jw(ee,o)})}function Kl(i,o,c){return{instance:i,listener:o,currentTarget:c}}function dd(i,o){for(var c=o+"Capture",h=[];i!==null;){var g=i,y=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||y===null||(g=pl(i,c),g!=null&&h.unshift(Kl(i,g,y)),g=pl(i,o),g!=null&&h.push(Kl(i,g,y))),i.tag===3)return h;i=i.return}return[]}function TO(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function zw(i,o,c,h,g){for(var y=o._reactName,E=[];c!==null&&c!==h;){var _=c,D=_.alternate,q=_.stateNode;if(_=_.tag,D!==null&&D===h)break;_!==5&&_!==26&&_!==27||q===null||(D=q,g?(q=pl(c,y),q!=null&&E.unshift(Kl(c,q,D))):g||(q=pl(c,y),q!=null&&E.push(Kl(c,q,D)))),c=c.return}E.length!==0&&i.push({event:o,listeners:E})}var kO=/\r\n?/g,_O=/\u0000|\uFFFD/g;function Iw(i){return(typeof i=="string"?i:""+i).replace(kO,`
`).replace(_O,"")}function Bw(i,o){return o=Iw(o),Iw(i)===o}function ht(i,o,c,h,g,y){switch(c){case"children":typeof h=="string"?o==="body"||o==="textarea"&&h===""||Za(i,h):(typeof h=="number"||typeof h=="bigint")&&o!=="body"&&Za(i,""+h);break;case"className":Hr(i,"class",h);break;case"tabIndex":Hr(i,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Hr(i,c,h);break;case"style":B0(i,h,y);break;case"data":if(o!=="object"){Hr(i,"data",h);break}case"src":case"href":if(h===""&&(o!=="a"||c!=="href")){i.removeAttribute(c);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(c);break}h=yu(""+h),i.setAttribute(c,h);break;case"action":case"formAction":if(typeof h=="function"){i.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(c==="formAction"?(o!=="input"&&ht(i,o,"name",g.name,g,null),ht(i,o,"formEncType",g.formEncType,g,null),ht(i,o,"formMethod",g.formMethod,g,null),ht(i,o,"formTarget",g.formTarget,g,null)):(ht(i,o,"encType",g.encType,g,null),ht(i,o,"method",g.method,g,null),ht(i,o,"target",g.target,g,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(c);break}h=yu(""+h),i.setAttribute(c,h);break;case"onClick":h!=null&&(i.onclick=vi);break;case"onScroll":h!=null&&Ye("scroll",i);break;case"onScrollEnd":h!=null&&Ye("scrollend",i);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(c=h.__html,c!=null){if(g.children!=null)throw Error(r(60));i.innerHTML=c}}break;case"multiple":i.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":i.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){i.removeAttribute("xlink:href");break}c=yu(""+h),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(c,""+h):i.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(c,""):i.removeAttribute(c);break;case"capture":case"download":h===!0?i.setAttribute(c,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(c,h):i.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?i.setAttribute(c,h):i.removeAttribute(c);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?i.removeAttribute(c):i.setAttribute(c,h);break;case"popover":Ye("beforetoggle",i),Ye("toggle",i),Ut(i,"popover",h);break;case"xlinkActuate":fn(i,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":fn(i,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":fn(i,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":fn(i,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":fn(i,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":fn(i,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":fn(i,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":fn(i,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":fn(i,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":Ut(i,"is",h);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=eA.get(c)||c,Ut(i,c,h))}}function vm(i,o,c,h,g,y){switch(c){case"style":B0(i,h,y);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(c=h.__html,c!=null){if(g.children!=null)throw Error(r(60));i.innerHTML=c}}break;case"children":typeof h=="string"?Za(i,h):(typeof h=="number"||typeof h=="bigint")&&Za(i,""+h);break;case"onScroll":h!=null&&Ye("scroll",i);break;case"onScrollEnd":h!=null&&Ye("scrollend",i);break;case"onClick":h!=null&&(i.onclick=vi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Xn.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(g=c.endsWith("Capture"),o=c.slice(2,g?c.length-7:void 0),y=i[pe]||null,y=y!=null?y[c]:null,typeof y=="function"&&i.removeEventListener(o,y,g),typeof h=="function")){typeof y!="function"&&y!==null&&(c in i?i[c]=null:i.hasAttribute(c)&&i.removeAttribute(c)),i.addEventListener(o,h,g);break e}c in i?i[c]=h:h===!0?i.setAttribute(c,""):Ut(i,c,h)}}}function gn(i,o,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ye("error",i),Ye("load",i);var h=!1,g=!1,y;for(y in c)if(c.hasOwnProperty(y)){var E=c[y];if(E!=null)switch(y){case"src":h=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:ht(i,o,y,E,c,null)}}g&&ht(i,o,"srcSet",c.srcSet,c,null),h&&ht(i,o,"src",c.src,c,null);return;case"input":Ye("invalid",i);var _=y=E=g=null,D=null,q=null;for(h in c)if(c.hasOwnProperty(h)){var X=c[h];if(X!=null)switch(h){case"name":g=X;break;case"type":E=X;break;case"checked":D=X;break;case"defaultChecked":q=X;break;case"value":y=X;break;case"defaultValue":_=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(r(137,o));break;default:ht(i,o,h,X,c,null)}}j0(i,y,_,D,q,E,g,!1);return;case"select":Ye("invalid",i),h=E=y=null;for(g in c)if(c.hasOwnProperty(g)&&(_=c[g],_!=null))switch(g){case"value":y=_;break;case"defaultValue":E=_;break;case"multiple":h=_;default:ht(i,o,g,_,c,null)}o=y,c=E,i.multiple=!!h,o!=null?Qa(i,!!h,o,!1):c!=null&&Qa(i,!!h,c,!0);return;case"textarea":Ye("invalid",i),y=g=h=null;for(E in c)if(c.hasOwnProperty(E)&&(_=c[E],_!=null))switch(E){case"value":h=_;break;case"defaultValue":g=_;break;case"children":y=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(r(91));break;default:ht(i,o,E,_,c,null)}z0(i,h,g,y);return;case"option":for(D in c)c.hasOwnProperty(D)&&(h=c[D],h!=null)&&(D==="selected"?i.selected=h&&typeof h!="function"&&typeof h!="symbol":ht(i,o,D,h,c,null));return;case"dialog":Ye("beforetoggle",i),Ye("toggle",i),Ye("cancel",i),Ye("close",i);break;case"iframe":case"object":Ye("load",i);break;case"video":case"audio":for(h=0;h<Gl.length;h++)Ye(Gl[h],i);break;case"image":Ye("error",i),Ye("load",i);break;case"details":Ye("toggle",i);break;case"embed":case"source":case"link":Ye("error",i),Ye("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in c)if(c.hasOwnProperty(q)&&(h=c[q],h!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:ht(i,o,q,h,c,null)}return;default:if(Nh(o)){for(X in c)c.hasOwnProperty(X)&&(h=c[X],h!==void 0&&vm(i,o,X,h,c,void 0));return}}for(_ in c)c.hasOwnProperty(_)&&(h=c[_],h!=null&&ht(i,o,_,h,c,null))}function CO(i,o,c,h){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,y=null,E=null,_=null,D=null,q=null,X=null;for(K in c){var ee=c[K];if(c.hasOwnProperty(K)&&ee!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":D=ee;default:h.hasOwnProperty(K)||ht(i,o,K,null,h,ee)}}for(var V in h){var K=h[V];if(ee=c[V],h.hasOwnProperty(V)&&(K!=null||ee!=null))switch(V){case"type":y=K;break;case"name":g=K;break;case"checked":q=K;break;case"defaultChecked":X=K;break;case"value":E=K;break;case"defaultValue":_=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(r(137,o));break;default:K!==ee&&ht(i,o,V,K,h,ee)}}Rh(i,E,_,D,q,X,y,g);return;case"select":K=E=_=V=null;for(y in c)if(D=c[y],c.hasOwnProperty(y)&&D!=null)switch(y){case"value":break;case"multiple":K=D;default:h.hasOwnProperty(y)||ht(i,o,y,null,h,D)}for(g in h)if(y=h[g],D=c[g],h.hasOwnProperty(g)&&(y!=null||D!=null))switch(g){case"value":V=y;break;case"defaultValue":_=y;break;case"multiple":E=y;default:y!==D&&ht(i,o,g,y,h,D)}o=_,c=E,h=K,V!=null?Qa(i,!!c,V,!1):!!h!=!!c&&(o!=null?Qa(i,!!c,o,!0):Qa(i,!!c,c?[]:"",!1));return;case"textarea":K=V=null;for(_ in c)if(g=c[_],c.hasOwnProperty(_)&&g!=null&&!h.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:ht(i,o,_,null,h,g)}for(E in h)if(g=h[E],y=c[E],h.hasOwnProperty(E)&&(g!=null||y!=null))switch(E){case"value":V=g;break;case"defaultValue":K=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(r(91));break;default:g!==y&&ht(i,o,E,g,h,y)}L0(i,V,K);return;case"option":for(var ge in c)V=c[ge],c.hasOwnProperty(ge)&&V!=null&&!h.hasOwnProperty(ge)&&(ge==="selected"?i.selected=!1:ht(i,o,ge,null,h,V));for(D in h)V=h[D],K=c[D],h.hasOwnProperty(D)&&V!==K&&(V!=null||K!=null)&&(D==="selected"?i.selected=V&&typeof V!="function"&&typeof V!="symbol":ht(i,o,D,V,h,K));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var De in c)V=c[De],c.hasOwnProperty(De)&&V!=null&&!h.hasOwnProperty(De)&&ht(i,o,De,null,h,V);for(q in h)if(V=h[q],K=c[q],h.hasOwnProperty(q)&&V!==K&&(V!=null||K!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(r(137,o));break;default:ht(i,o,q,V,h,K)}return;default:if(Nh(o)){for(var pt in c)V=c[pt],c.hasOwnProperty(pt)&&V!==void 0&&!h.hasOwnProperty(pt)&&vm(i,o,pt,void 0,h,V);for(X in h)V=h[X],K=c[X],!h.hasOwnProperty(X)||V===K||V===void 0&&K===void 0||vm(i,o,X,V,h,K);return}}for(var H in c)V=c[H],c.hasOwnProperty(H)&&V!=null&&!h.hasOwnProperty(H)&&ht(i,o,H,null,h,V);for(ee in h)V=h[ee],K=c[ee],!h.hasOwnProperty(ee)||V===K||V==null&&K==null||ht(i,o,ee,V,h,K)}function Uw(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function AO(){if(typeof performance.getEntriesByType=="function"){for(var i=0,o=0,c=performance.getEntriesByType("resource"),h=0;h<c.length;h++){var g=c[h],y=g.transferSize,E=g.initiatorType,_=g.duration;if(y&&_&&Uw(E)){for(E=0,_=g.responseEnd,h+=1;h<c.length;h++){var D=c[h],q=D.startTime;if(q>_)break;var X=D.transferSize,ee=D.initiatorType;X&&Uw(ee)&&(D=D.responseEnd,E+=X*(D<_?1:(_-q)/(D-q)))}if(--h,o+=8*(y+E)/(g.duration/1e3),i++,10<i)break}}if(0<i)return o/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var bm=null,wm=null;function fd(i){return i.nodeType===9?i:i.ownerDocument}function Pw(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Hw(i,o){if(i===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&o==="foreignObject"?0:i}function Sm(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var xm=null;function OO(){var i=window.event;return i&&i.type==="popstate"?i===xm?!1:(xm=i,!0):(xm=null,!1)}var $w=typeof setTimeout=="function"?setTimeout:void 0,RO=typeof clearTimeout=="function"?clearTimeout:void 0,qw=typeof Promise=="function"?Promise:void 0,MO=typeof queueMicrotask=="function"?queueMicrotask:typeof qw<"u"?function(i){return qw.resolve(null).then(i).catch(NO)}:$w;function NO(i){setTimeout(function(){throw i})}function ps(i){return i==="head"}function Vw(i,o){var c=o,h=0;do{var g=c.nextSibling;if(i.removeChild(c),g&&g.nodeType===8)if(c=g.data,c==="/$"||c==="/&"){if(h===0){i.removeChild(g),Mo(o);return}h--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")h++;else if(c==="html")Wl(i.ownerDocument.documentElement);else if(c==="head"){c=i.ownerDocument.head,Wl(c);for(var y=c.firstChild;y;){var E=y.nextSibling,_=y.nodeName;y[Ct]||_==="SCRIPT"||_==="STYLE"||_==="LINK"&&y.rel.toLowerCase()==="stylesheet"||c.removeChild(y),y=E}}else c==="body"&&Wl(i.ownerDocument.body);c=g}while(c);Mo(o)}function Fw(i,o){var c=i;i=0;do{var h=c.nextSibling;if(c.nodeType===1?o?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(o?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),h&&h.nodeType===8)if(c=h.data,c==="/$"){if(i===0)break;i--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||i++;c=h}while(c)}function Em(i){var o=i.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var c=o;switch(o=o.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":Em(c),Rt(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}i.removeChild(c)}}function DO(i,o,c,h){for(;i.nodeType===1;){var g=c;if(i.nodeName.toLowerCase()!==o.toLowerCase()){if(!h&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(h){if(!i[Ct])switch(o){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(y=i.getAttribute("rel"),y==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(y!==g.rel||i.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||i.getAttribute("title")!==(g.title==null?null:g.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(y=i.getAttribute("src"),(y!==(g.src==null?null:g.src)||i.getAttribute("type")!==(g.type==null?null:g.type)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&y&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(o==="input"&&i.type==="hidden"){var y=g.name==null?null:""+g.name;if(g.type==="hidden"&&i.getAttribute("name")===y)return i}else return i;if(i=Er(i.nextSibling),i===null)break}return null}function jO(i,o,c){if(o==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!c||(i=Er(i.nextSibling),i===null))return null;return i}function Gw(i,o){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=Er(i.nextSibling),i===null))return null;return i}function Tm(i){return i.data==="$?"||i.data==="$~"}function km(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function LO(i,o){var c=i.ownerDocument;if(i.data==="$~")i._reactRetry=o;else if(i.data!=="$?"||c.readyState!=="loading")o();else{var h=function(){o(),c.removeEventListener("DOMContentLoaded",h)};c.addEventListener("DOMContentLoaded",h),i._reactRetry=h}}function Er(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return i}var _m=null;function Kw(i){i=i.nextSibling;for(var o=0;i;){if(i.nodeType===8){var c=i.data;if(c==="/$"||c==="/&"){if(o===0)return Er(i.nextSibling);o--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||o++}i=i.nextSibling}return null}function Ww(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(o===0)return i;o--}else c!=="/$"&&c!=="/&"||o++}i=i.previousSibling}return null}function Yw(i,o,c){switch(o=fd(c),i){case"html":if(i=o.documentElement,!i)throw Error(r(452));return i;case"head":if(i=o.head,!i)throw Error(r(453));return i;case"body":if(i=o.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function Wl(i){for(var o=i.attributes;o.length;)i.removeAttributeNode(o[0]);Rt(i)}var Tr=new Map,Jw=new Set;function hd(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var ji=Q.d;Q.d={f:zO,r:IO,D:BO,C:UO,L:PO,m:HO,X:qO,S:$O,M:VO};function zO(){var i=ji.f(),o=id();return i||o}function IO(i){var o=et(i);o!==null&&o.tag===5&&o.type==="form"?hb(o):ji.r(i)}var Ao=typeof document>"u"?null:document;function Xw(i,o,c){var h=Ao;if(h&&typeof o=="string"&&o){var g=gr(o);g='link[rel="'+i+'"][href="'+g+'"]',typeof c=="string"&&(g+='[crossorigin="'+c+'"]'),Jw.has(g)||(Jw.add(g),i={rel:i,crossOrigin:c,href:o},h.querySelector(g)===null&&(o=h.createElement("link"),gn(o,"link",i),Tt(o),h.head.appendChild(o)))}}function BO(i){ji.D(i),Xw("dns-prefetch",i,null)}function UO(i,o){ji.C(i,o),Xw("preconnect",i,o)}function PO(i,o,c){ji.L(i,o,c);var h=Ao;if(h&&i&&o){var g='link[rel="preload"][as="'+gr(o)+'"]';o==="image"&&c&&c.imageSrcSet?(g+='[imagesrcset="'+gr(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(g+='[imagesizes="'+gr(c.imageSizes)+'"]')):g+='[href="'+gr(i)+'"]';var y=g;switch(o){case"style":y=Oo(i);break;case"script":y=Ro(i)}Tr.has(y)||(i=m({rel:"preload",href:o==="image"&&c&&c.imageSrcSet?void 0:i,as:o},c),Tr.set(y,i),h.querySelector(g)!==null||o==="style"&&h.querySelector(Yl(y))||o==="script"&&h.querySelector(Jl(y))||(o=h.createElement("link"),gn(o,"link",i),Tt(o),h.head.appendChild(o)))}}function HO(i,o){ji.m(i,o);var c=Ao;if(c&&i){var h=o&&typeof o.as=="string"?o.as:"script",g='link[rel="modulepreload"][as="'+gr(h)+'"][href="'+gr(i)+'"]',y=g;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Ro(i)}if(!Tr.has(y)&&(i=m({rel:"modulepreload",href:i},o),Tr.set(y,i),c.querySelector(g)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Jl(y)))return}h=c.createElement("link"),gn(h,"link",i),Tt(h),c.head.appendChild(h)}}}function $O(i,o,c){ji.S(i,o,c);var h=Ao;if(h&&i){var g=Un(h).hoistableStyles,y=Oo(i);o=o||"default";var E=g.get(y);if(!E){var _={loading:0,preload:null};if(E=h.querySelector(Yl(y)))_.loading=5;else{i=m({rel:"stylesheet",href:i,"data-precedence":o},c),(c=Tr.get(y))&&Cm(i,c);var D=E=h.createElement("link");Tt(D),gn(D,"link",i),D._p=new Promise(function(q,X){D.onload=q,D.onerror=X}),D.addEventListener("load",function(){_.loading|=1}),D.addEventListener("error",function(){_.loading|=2}),_.loading|=4,pd(E,o,h)}E={type:"stylesheet",instance:E,count:1,state:_},g.set(y,E)}}}function qO(i,o){ji.X(i,o);var c=Ao;if(c&&i){var h=Un(c).hoistableScripts,g=Ro(i),y=h.get(g);y||(y=c.querySelector(Jl(g)),y||(i=m({src:i,async:!0},o),(o=Tr.get(g))&&Am(i,o),y=c.createElement("script"),Tt(y),gn(y,"link",i),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},h.set(g,y))}}function VO(i,o){ji.M(i,o);var c=Ao;if(c&&i){var h=Un(c).hoistableScripts,g=Ro(i),y=h.get(g);y||(y=c.querySelector(Jl(g)),y||(i=m({src:i,async:!0,type:"module"},o),(o=Tr.get(g))&&Am(i,o),y=c.createElement("script"),Tt(y),gn(y,"link",i),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},h.set(g,y))}}function Qw(i,o,c,h){var g=(g=we.current)?hd(g):null;if(!g)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(o=Oo(c.href),c=Un(g).hoistableStyles,h=c.get(o),h||(h={type:"style",instance:null,count:0,state:null},c.set(o,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){i=Oo(c.href);var y=Un(g).hoistableStyles,E=y.get(i);if(E||(g=g.ownerDocument||g,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(i,E),(y=g.querySelector(Yl(i)))&&!y._p&&(E.instance=y,E.state.loading=5),Tr.has(i)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Tr.set(i,c),y||FO(g,i,c,E.state))),o&&h===null)throw Error(r(528,""));return E}if(o&&h!==null)throw Error(r(529,""));return null;case"script":return o=c.async,c=c.src,typeof c=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Ro(c),c=Un(g).hoistableScripts,h=c.get(o),h||(h={type:"script",instance:null,count:0,state:null},c.set(o,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function Oo(i){return'href="'+gr(i)+'"'}function Yl(i){return'link[rel="stylesheet"]['+i+"]"}function Zw(i){return m({},i,{"data-precedence":i.precedence,precedence:null})}function FO(i,o,c,h){i.querySelector('link[rel="preload"][as="style"]['+o+"]")?h.loading=1:(o=i.createElement("link"),h.preload=o,o.addEventListener("load",function(){return h.loading|=1}),o.addEventListener("error",function(){return h.loading|=2}),gn(o,"link",c),Tt(o),i.head.appendChild(o))}function Ro(i){return'[src="'+gr(i)+'"]'}function Jl(i){return"script[async]"+i}function eS(i,o,c){if(o.count++,o.instance===null)switch(o.type){case"style":var h=i.querySelector('style[data-href~="'+gr(c.href)+'"]');if(h)return o.instance=h,Tt(h),h;var g=m({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return h=(i.ownerDocument||i).createElement("style"),Tt(h),gn(h,"style",g),pd(h,c.precedence,i),o.instance=h;case"stylesheet":g=Oo(c.href);var y=i.querySelector(Yl(g));if(y)return o.state.loading|=4,o.instance=y,Tt(y),y;h=Zw(c),(g=Tr.get(g))&&Cm(h,g),y=(i.ownerDocument||i).createElement("link"),Tt(y);var E=y;return E._p=new Promise(function(_,D){E.onload=_,E.onerror=D}),gn(y,"link",h),o.state.loading|=4,pd(y,c.precedence,i),o.instance=y;case"script":return y=Ro(c.src),(g=i.querySelector(Jl(y)))?(o.instance=g,Tt(g),g):(h=c,(g=Tr.get(y))&&(h=m({},c),Am(h,g)),i=i.ownerDocument||i,g=i.createElement("script"),Tt(g),gn(g,"link",h),i.head.appendChild(g),o.instance=g);case"void":return null;default:throw Error(r(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(h=o.instance,o.state.loading|=4,pd(h,c.precedence,i));return o.instance}function pd(i,o,c){for(var h=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=h.length?h[h.length-1]:null,y=g,E=0;E<h.length;E++){var _=h[E];if(_.dataset.precedence===o)y=_;else if(y!==g)break}y?y.parentNode.insertBefore(i,y.nextSibling):(o=c.nodeType===9?c.head:c,o.insertBefore(i,o.firstChild))}function Cm(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.title==null&&(i.title=o.title)}function Am(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.integrity==null&&(i.integrity=o.integrity)}var md=null;function tS(i,o,c){if(md===null){var h=new Map,g=md=new Map;g.set(c,h)}else g=md,h=g.get(c),h||(h=new Map,g.set(c,h));if(h.has(i))return h;for(h.set(i,null),c=c.getElementsByTagName(i),g=0;g<c.length;g++){var y=c[g];if(!(y[Ct]||y[de]||i==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var E=y.getAttribute(o)||"";E=i+E;var _=h.get(E);_?_.push(y):h.set(E,[y])}}return h}function nS(i,o,c){i=i.ownerDocument||i,i.head.insertBefore(c,o==="title"?i.querySelector("head > title"):null)}function GO(i,o,c){if(c===1||o.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;return o.rel==="stylesheet"?(i=o.disabled,typeof o.precedence=="string"&&i==null):!0;case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function rS(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function KO(i,o,c,h){if(c.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var g=Oo(h.href),y=o.querySelector(Yl(g));if(y){o=y._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(i.count++,i=gd.bind(i),o.then(i,i)),c.state.loading|=4,c.instance=y,Tt(y);return}y=o.ownerDocument||o,h=Zw(h),(g=Tr.get(g))&&Cm(h,g),y=y.createElement("link"),Tt(y);var E=y;E._p=new Promise(function(_,D){E.onload=_,E.onerror=D}),gn(y,"link",h),c.instance=y}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(c,o),(o=c.state.preload)&&(c.state.loading&3)===0&&(i.count++,c=gd.bind(i),o.addEventListener("load",c),o.addEventListener("error",c))}}var Om=0;function WO(i,o){return i.stylesheets&&i.count===0&&vd(i,i.stylesheets),0<i.count||0<i.imgCount?function(c){var h=setTimeout(function(){if(i.stylesheets&&vd(i,i.stylesheets),i.unsuspend){var y=i.unsuspend;i.unsuspend=null,y()}},6e4+o);0<i.imgBytes&&Om===0&&(Om=62500*AO());var g=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&vd(i,i.stylesheets),i.unsuspend)){var y=i.unsuspend;i.unsuspend=null,y()}},(i.imgBytes>Om?50:800)+o);return i.unsuspend=c,function(){i.unsuspend=null,clearTimeout(h),clearTimeout(g)}}:null}function gd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)vd(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var yd=null;function vd(i,o){i.stylesheets=null,i.unsuspend!==null&&(i.count++,yd=new Map,o.forEach(YO,i),yd=null,gd.call(i))}function YO(i,o){if(!(o.state.loading&4)){var c=yd.get(i);if(c)var h=c.get(null);else{c=new Map,yd.set(i,c);for(var g=i.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<g.length;y++){var E=g[y];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(c.set(E.dataset.precedence,E),h=E)}h&&c.set(null,h)}g=o.instance,E=g.getAttribute("data-precedence"),y=c.get(E)||h,y===h&&c.set(null,g),c.set(E,g),this.count++,h=gd.bind(this),g.addEventListener("load",h),g.addEventListener("error",h),y?y.parentNode.insertBefore(g,y.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(g,i.firstChild)),o.state.loading|=4}}var Xl={$$typeof:M,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function JO(i,o,c,h,g,y,E,_,D){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Jn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jn(0),this.hiddenUpdates=Jn(null),this.identifierPrefix=h,this.onUncaughtError=g,this.onCaughtError=y,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function iS(i,o,c,h,g,y,E,_,D,q,X,ee){return i=new JO(i,o,c,E,D,q,X,ee,_),o=1,y===!0&&(o|=24),y=Zn(3,null,null,o),i.current=y,y.stateNode=i,o=lp(),o.refCount++,i.pooledCache=o,o.refCount++,y.memoizedState={element:h,isDehydrated:c,cache:o},fp(y),i}function sS(i){return i?(i=ao,i):ao}function aS(i,o,c,h,g,y){g=sS(g),h.context===null?h.context=g:h.pendingContext=g,h=ns(o),h.payload={element:c},y=y===void 0?null:y,y!==null&&(h.callback=y),c=rs(i,h,o),c!==null&&(Fn(c,i,o),Ol(c,i,o))}function oS(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<o?c:o}}function Rm(i,o){oS(i,o),(i=i.alternate)&&oS(i,o)}function lS(i){if(i.tag===13||i.tag===31){var o=ia(i,67108864);o!==null&&Fn(o,i,67108864),Rm(i,67108864)}}function cS(i){if(i.tag===13||i.tag===31){var o=ir();o=F(o);var c=ia(i,o);c!==null&&Fn(c,i,o),Rm(i,o)}}var bd=!0;function XO(i,o,c,h){var g=I.T;I.T=null;var y=Q.p;try{Q.p=2,Mm(i,o,c,h)}finally{Q.p=y,I.T=g}}function QO(i,o,c,h){var g=I.T;I.T=null;var y=Q.p;try{Q.p=8,Mm(i,o,c,h)}finally{Q.p=y,I.T=g}}function Mm(i,o,c,h){if(bd){var g=Nm(h);if(g===null)ym(i,o,h,wd,c),dS(i,h);else if(eR(g,i,o,c,h))h.stopPropagation();else if(dS(i,h),o&4&&-1<ZO.indexOf(i)){for(;g!==null;){var y=et(g);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var E=pr(y.pendingLanes);if(E!==0){var _=y;for(_.pendingLanes|=2,_.entangledLanes|=2;E;){var D=1<<31-Qt(E);_.entanglements[1]|=D,E&=~D}ni(y),(lt&6)===0&&(nd=_t()+500,Fl(0))}}break;case 31:case 13:_=ia(y,2),_!==null&&Fn(_,y,2),id(),Rm(y,2)}if(y=Nm(h),y===null&&ym(i,o,h,wd,c),y===g)break;g=y}g!==null&&h.stopPropagation()}else ym(i,o,h,null,c)}}function Nm(i){return i=jh(i),Dm(i)}var wd=null;function Dm(i){if(wd=null,i=Mt(i),i!==null){var o=a(i);if(o===null)i=null;else{var c=o.tag;if(c===13){if(i=l(o),i!==null)return i;i=null}else if(c===31){if(i=u(o),i!==null)return i;i=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return wd=i,null}function uS(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(hi()){case Qr:return 2;case Yi:return 8;case dn:case Mn:return 32;case fr:return 268435456;default:return 32}default:return 32}}var jm=!1,ms=null,gs=null,ys=null,Ql=new Map,Zl=new Map,vs=[],ZO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function dS(i,o){switch(i){case"focusin":case"focusout":ms=null;break;case"dragenter":case"dragleave":gs=null;break;case"mouseover":case"mouseout":ys=null;break;case"pointerover":case"pointerout":Ql.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zl.delete(o.pointerId)}}function ec(i,o,c,h,g,y){return i===null||i.nativeEvent!==y?(i={blockedOn:o,domEventName:c,eventSystemFlags:h,nativeEvent:y,targetContainers:[g]},o!==null&&(o=et(o),o!==null&&lS(o)),i):(i.eventSystemFlags|=h,o=i.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),i)}function eR(i,o,c,h,g){switch(o){case"focusin":return ms=ec(ms,i,o,c,h,g),!0;case"dragenter":return gs=ec(gs,i,o,c,h,g),!0;case"mouseover":return ys=ec(ys,i,o,c,h,g),!0;case"pointerover":var y=g.pointerId;return Ql.set(y,ec(Ql.get(y)||null,i,o,c,h,g)),!0;case"gotpointercapture":return y=g.pointerId,Zl.set(y,ec(Zl.get(y)||null,i,o,c,h,g)),!0}return!1}function fS(i){var o=Mt(i.target);if(o!==null){var c=a(o);if(c!==null){if(o=c.tag,o===13){if(o=l(c),o!==null){i.blockedOn=o,Te(i.priority,function(){cS(c)});return}}else if(o===31){if(o=u(c),o!==null){i.blockedOn=o,Te(i.priority,function(){cS(c)});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Sd(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var c=Nm(i.nativeEvent);if(c===null){c=i.nativeEvent;var h=new c.constructor(c.type,c);Dh=h,c.target.dispatchEvent(h),Dh=null}else return o=et(c),o!==null&&lS(o),i.blockedOn=c,!1;o.shift()}return!0}function hS(i,o,c){Sd(i)&&c.delete(o)}function tR(){jm=!1,ms!==null&&Sd(ms)&&(ms=null),gs!==null&&Sd(gs)&&(gs=null),ys!==null&&Sd(ys)&&(ys=null),Ql.forEach(hS),Zl.forEach(hS)}function xd(i,o){i.blockedOn===o&&(i.blockedOn=null,jm||(jm=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,tR)))}var Ed=null;function pS(i){Ed!==i&&(Ed=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Ed===i&&(Ed=null);for(var o=0;o<i.length;o+=3){var c=i[o],h=i[o+1],g=i[o+2];if(typeof h!="function"){if(Dm(h||c)===null)continue;break}var y=et(c);y!==null&&(i.splice(o,3),o-=3,Np(y,{pending:!0,data:g,method:c.method,action:h},h,g))}}))}function Mo(i){function o(D){return xd(D,i)}ms!==null&&xd(ms,i),gs!==null&&xd(gs,i),ys!==null&&xd(ys,i),Ql.forEach(o),Zl.forEach(o);for(var c=0;c<vs.length;c++){var h=vs[c];h.blockedOn===i&&(h.blockedOn=null)}for(;0<vs.length&&(c=vs[0],c.blockedOn===null);)fS(c),c.blockedOn===null&&vs.shift();if(c=(i.ownerDocument||i).$$reactFormReplay,c!=null)for(h=0;h<c.length;h+=3){var g=c[h],y=c[h+1],E=g[pe]||null;if(typeof y=="function")E||pS(c);else if(E){var _=null;if(y&&y.hasAttribute("formAction")){if(g=y,E=y[pe]||null)_=E.formAction;else if(Dm(g)!==null)continue}else _=E.action;typeof _=="function"?c[h+1]=_:(c.splice(h,3),h-=3),pS(c)}}}function mS(){function i(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(E){return g=E})},focusReset:"manual",scroll:"manual"})}function o(){g!==null&&(g(),g=null),h||setTimeout(c,20)}function c(){if(!h&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,g=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(c,100),function(){h=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),g!==null&&(g(),g=null)}}}function Lm(i){this._internalRoot=i}Td.prototype.render=Lm.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(r(409));var c=o.current,h=ir();aS(c,h,i,o,null,null)},Td.prototype.unmount=Lm.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;aS(i.current,2,null,i,null,null),id(),o[Ee]=null}};function Td(i){this._internalRoot=i}Td.prototype.unstable_scheduleHydration=function(i){if(i){var o=oe();i={blockedOn:null,target:i,priority:o};for(var c=0;c<vs.length&&o!==0&&o<vs[c].priority;c++);vs.splice(c,0,i),c===0&&fS(i)}};var gS=e.version;if(gS!=="19.2.4")throw Error(r(527,gS,"19.2.4"));Q.findDOMNode=function(i){var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=f(o),i=i!==null?p(i):null,i=i===null?null:i.stateNode,i};var nR={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:I,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kd.isDisabled&&kd.supportsFiber)try{pi=kd.inject(nR),wt=kd}catch{}}return nc.createRoot=function(i,o){if(!s(i))throw Error(r(299));var c=!1,h="",g=Eb,y=Tb,E=kb;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(y=o.onCaughtError),o.onRecoverableError!==void 0&&(E=o.onRecoverableError)),o=iS(i,1,!1,null,null,c,h,null,g,y,E,mS),i[Ee]=o.current,gm(i),new Lm(o)},nc.hydrateRoot=function(i,o,c){if(!s(i))throw Error(r(299));var h=!1,g="",y=Eb,E=Tb,_=kb,D=null;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onUncaughtError!==void 0&&(y=c.onUncaughtError),c.onCaughtError!==void 0&&(E=c.onCaughtError),c.onRecoverableError!==void 0&&(_=c.onRecoverableError),c.formState!==void 0&&(D=c.formState)),o=iS(i,1,!0,o,c??null,h,g,D,y,E,_,mS),o.context=sS(null),c=o.current,h=ir(),h=F(h),g=ns(h),g.callback=null,rs(c,g,h),c=h,o.current.lanes=c,vt(o,c),ni(o),i[Ee]=o.current,gm(i),new Td(o)},nc.version="19.2.4",nc}var _S;function hR(){if(_S)return Bm.exports;_S=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Bm.exports=fR(),Bm.exports}var pR=hR();var BE=t=>{throw TypeError(t)},mR=(t,e,n)=>e.has(t)||BE("Cannot "+n),$m=(t,e,n)=>(mR(t,e,"read from private field"),n?n.call(t):e.get(t)),gR=(t,e,n)=>e.has(t)?BE("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),CS="popstate";function yR(t={}){function e(s,a){let{pathname:l="/",search:u="",hash:d=""}=Gi(s.location.hash.substring(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),Ic("",{pathname:l,search:u,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(s,a){let l=s.document.querySelector("base"),u="";if(l&&l.getAttribute("href")){let d=s.location.href,f=d.indexOf("#");u=f===-1?d:d.slice(0,f)}return u+"#"+(typeof a=="string"?a:li(a))}function r(s,a){$t(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return bR(e,n,r,t)}function Ke(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function $t(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function vR(){return Math.random().toString(36).substring(2,10)}function AS(t,e){return{usr:t.state,key:t.key,idx:e}}function Ic(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Gi(e):e,state:n,key:e&&e.key||r||vR()}}function li({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Gi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function bR(t,e,n,r={}){let{window:s=document.defaultView,v5Compat:a=!1}=r,l=s.history,u="POP",d=null,f=p();f==null&&(f=0,l.replaceState({...l.state,idx:f},""));function p(){return(l.state||{idx:null}).idx}function m(){u="POP";let S=p(),T=S==null?null:S-f;f=S,d&&d({action:u,location:x.location,delta:T})}function v(S,T){u="PUSH";let O=Ic(x.location,S,T);n&&n(O,S),f=p()+1;let M=AS(O,f),P=x.createHref(O);try{l.pushState(M,"",P)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;s.location.assign(P)}a&&d&&d({action:u,location:x.location,delta:1})}function b(S,T){u="REPLACE";let O=Ic(x.location,S,T);n&&n(O,S),f=p();let M=AS(O,f),P=x.createHref(O);l.replaceState(M,"",P),a&&d&&d({action:u,location:x.location,delta:0})}function w(S){return UE(S)}let x={get action(){return u},get location(){return t(s,l)},listen(S){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(CS,m),d=S,()=>{s.removeEventListener(CS,m),d=null}},createHref(S){return e(s,S)},createURL:w,encodeLocation(S){let T=w(S);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:v,replace:b,go(S){return l.go(S)}};return x}function UE(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Ke(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:li(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}var gc,OS=class{constructor(t){if(gR(this,gc,new Map),t)for(let[e,n]of t)this.set(e,n)}get(t){if($m(this,gc).has(t))return $m(this,gc).get(t);if(t.defaultValue!==void 0)return t.defaultValue;throw new Error("No value found for context")}set(t,e){$m(this,gc).set(t,e)}};gc=new WeakMap;var wR=new Set(["lazy","caseSensitive","path","id","index","children"]);function SR(t){return wR.has(t)}var xR=new Set(["lazy","caseSensitive","path","id","index","middleware","children"]);function ER(t){return xR.has(t)}function TR(t){return t.index===!0}function Bc(t,e,n=[],r={},s=!1){return t.map((a,l)=>{let u=[...n,String(l)],d=typeof a.id=="string"?a.id:u.join("-");if(Ke(a.index!==!0||!a.children,"Cannot specify children on an index route"),Ke(s||!r[d],`Found a route id collision on id "${d}".  Route id's must be globally unique within Data Router usages`),TR(a)){let f={...a,id:d};return r[d]=RS(f,e(f)),f}else{let f={...a,id:d,children:void 0};return r[d]=RS(f,e(f)),a.children&&(f.children=Bc(a.children,e,u,r,s)),f}})}function RS(t,e){return Object.assign(t,{...e,...typeof e.lazy=="object"&&e.lazy!=null?{lazy:{...t.lazy,...e.lazy}}:{}})}function As(t,e,n="/"){return yc(t,e,n,!1)}function yc(t,e,n,r){let s=typeof e=="string"?Gi(e):e,a=Dr(s.pathname||"/",n);if(a==null)return null;let l=PE(t);_R(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let f=IR(a);u=LR(l[d],f,r)}return u}function kR(t,e){let{route:n,pathname:r,params:s}=t;return{id:n.id,pathname:r,params:s,data:e[n.id],loaderData:e[n.id],handle:n.handle}}function PE(t,e=[],n=[],r="",s=!1){let a=(l,u,d=s,f)=>{let p={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(r)&&d)return;Ke(p.relativePath.startsWith(r),`Absolute route path "${p.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(r.length)}let m=oi([r,p.relativePath]),v=n.concat(p);l.children&&l.children.length>0&&(Ke(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),PE(l.children,e,v,m,d)),!(l.path==null&&!l.index)&&e.push({path:m,score:DR(m,l.index),routesMeta:v})};return t.forEach((l,u)=>{if(l.path===""||!l.path?.includes("?"))a(l,u);else for(let d of HE(l.path))a(l,u,!0,d)}),e}function HE(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let l=HE(r.join("/")),u=[];return u.push(...l.map(d=>d===""?a:[a,d].join("/"))),s&&u.push(...l),u.map(d=>t.startsWith("/")&&d===""?"/":d)}function _R(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:jR(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var CR=/^:[\w-]+$/,AR=3,OR=2,RR=1,MR=10,NR=-2,MS=t=>t==="*";function DR(t,e){let n=t.split("/"),r=n.length;return n.some(MS)&&(r+=NR),e&&(r+=OR),n.filter(s=>!MS(s)).reduce((s,a)=>s+(CR.test(a)?AR:a===""?RR:MR),r)}function jR(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function LR(t,e,n=!1){let{routesMeta:r}=t,s={},a="/",l=[];for(let u=0;u<r.length;++u){let d=r[u],f=u===r.length-1,p=a==="/"?e:e.slice(a.length)||"/",m=lf({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},p),v=d.route;if(!m&&f&&n&&!r[r.length-1].route.index&&(m=lf({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},p)),!m)return null;Object.assign(s,m.params),l.push({params:s,pathname:oi([a,m.pathname]),pathnameBase:PR(oi([a,m.pathnameBase])),route:v}),m.pathnameBase!=="/"&&(a=oi([a,m.pathnameBase]))}return l}function lf(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=zR(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let a=s[0],l=a.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:r.reduce((f,{paramName:p,isOptional:m},v)=>{if(p==="*"){let w=u[v]||"";l=a.slice(0,a.length-w.length).replace(/(.)\/+$/,"$1")}const b=u[v];return m&&!b?f[p]=void 0:f[p]=(b||"").replace(/%2F/g,"/"),f},{}),pathname:a,pathnameBase:l,pattern:t}}function zR(t,e=!1,n=!0){$t(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(r.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function IR(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return $t(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Dr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function BR({basename:t,pathname:e}){return e==="/"?t:oi([t,e])}var $E=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,My=t=>$E.test(t);function UR(t,e="/"){let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Gi(t):t,a;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?a=NS(n.substring(1),"/"):a=NS(n,e)):a=e,{pathname:a,search:HR(r),hash:$R(s)}}function NS(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function qm(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function qE(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Ny(t){let e=qE(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function Dy(t,e,n,r=!1){let s;typeof t=="string"?s=Gi(t):(s={...t},Ke(!s.pathname||!s.pathname.includes("?"),qm("?","pathname","search",s)),Ke(!s.pathname||!s.pathname.includes("#"),qm("#","pathname","hash",s)),Ke(!s.search||!s.search.includes("#"),qm("#","search","hash",s)));let a=t===""||s.pathname==="",l=a?"/":s.pathname,u;if(l==null)u=n;else{let m=e.length-1;if(!r&&l.startsWith("..")){let v=l.split("/");for(;v[0]==="..";)v.shift(),m-=1;s.pathname=v.join("/")}u=m>=0?e[m]:"/"}let d=UR(s,u),f=l&&l!=="/"&&l.endsWith("/"),p=(a||l===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(f||p)&&(d.pathname+="/"),d}var oi=t=>t.join("/").replace(/\/\/+/g,"/"),PR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),HR=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,$R=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,iu=class{constructor(t,e,n,r=!1){this.status=t,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function Uc(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function su(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var VE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function FE(t,e){let n=t;if(typeof n!="string"||!$E.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,s=!1;if(VE)try{let a=new URL(window.location.href),l=n.startsWith("//")?new URL(a.protocol+n):new URL(n),u=Dr(l.pathname,e);l.origin===a.origin&&u!=null?n=u+l.search+l.hash:s=!0}catch{$t(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:s,to:n}}var Ds=Symbol("Uninstrumented");function qR(t,e){let n={lazy:[],"lazy.loader":[],"lazy.action":[],"lazy.middleware":[],middleware:[],loader:[],action:[]};t.forEach(s=>s({id:e.id,index:e.index,path:e.path,instrument(a){let l=Object.keys(n);for(let u of l)a[u]&&n[u].push(a[u])}}));let r={};if(typeof e.lazy=="function"&&n.lazy.length>0){let s=Xo(n.lazy,e.lazy,()=>{});s&&(r.lazy=s)}if(typeof e.lazy=="object"){let s=e.lazy;["middleware","loader","action"].forEach(a=>{let l=s[a],u=n[`lazy.${a}`];if(typeof l=="function"&&u.length>0){let d=Xo(u,l,()=>{});d&&(r.lazy=Object.assign(r.lazy||{},{[a]:d}))}})}return["loader","action"].forEach(s=>{let a=e[s];if(typeof a=="function"&&n[s].length>0){let l=a[Ds]??a,u=Xo(n[s],l,(...d)=>DS(d[0]));u&&(s==="loader"&&l.hydrate===!0&&(u.hydrate=!0),u[Ds]=l,r[s]=u)}}),e.middleware&&e.middleware.length>0&&n.middleware.length>0&&(r.middleware=e.middleware.map(s=>{let a=s[Ds]??s,l=Xo(n.middleware,a,(...u)=>DS(u[0]));return l?(l[Ds]=a,l):s})),r}function VR(t,e){let n={navigate:[],fetch:[]};if(e.forEach(r=>r({instrument(s){let a=Object.keys(s);for(let l of a)s[l]&&n[l].push(s[l])}})),n.navigate.length>0){let r=t.navigate[Ds]??t.navigate,s=Xo(n.navigate,r,(...a)=>{let[l,u]=a;return{to:typeof l=="number"||typeof l=="string"?l:l?li(l):".",...jS(t,u??{})}});s&&(s[Ds]=r,t.navigate=s)}if(n.fetch.length>0){let r=t.fetch[Ds]??t.fetch,s=Xo(n.fetch,r,(...a)=>{let[l,,u,d]=a;return{href:u??".",fetcherKey:l,...jS(t,d??{})}});s&&(s[Ds]=r,t.fetch=s)}return t}function Xo(t,e,n){return t.length===0?null:async(...r)=>{let s=await GE(t,n(...r),()=>e(...r),t.length-1);if(s.type==="error")throw s.value;return s.value}}async function GE(t,e,n,r){let s=t[r],a;if(s){let l,u=async()=>(l?console.error("You cannot call instrumented handlers more than once"):l=GE(t,e,n,r-1),a=await l,Ke(a,"Expected a result"),a.type==="error"&&a.value instanceof Error?{status:"error",error:a.value}:{status:"success",error:void 0});try{await s(u,e)}catch(d){console.error("An instrumentation function threw an error:",d)}l||await u(),await l}else try{a={type:"success",value:await n()}}catch(l){a={type:"error",value:l}}return a||{type:"error",value:new Error("No result assigned in instrumentation chain.")}}function DS(t){let{request:e,context:n,params:r,unstable_pattern:s}=t;return{request:FR(e),params:{...r},unstable_pattern:s,context:GR(n)}}function jS(t,e){return{currentUrl:li(t.state.location),..."formMethod"in e?{formMethod:e.formMethod}:{},..."formEncType"in e?{formEncType:e.formEncType}:{},..."formData"in e?{formData:e.formData}:{},..."body"in e?{body:e.body}:{}}}function FR(t){return{method:t.method,url:t.url,headers:{get:(...e)=>t.headers.get(...e)}}}function GR(t){if(WR(t)){let e={...t};return Object.freeze(e),e}else return{get:e=>t.get(e)}}var KR=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function WR(t){if(t===null||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===Object.prototype||e===null||Object.getOwnPropertyNames(e).sort().join("\0")===KR}var KE=["POST","PUT","PATCH","DELETE"],YR=new Set(KE),JR=["GET",...KE],XR=new Set(JR),WE=new Set([301,302,303,307,308]),QR=new Set([307,308]),Vm={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},ZR={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},rc={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},eM=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),YE="remix-router-transitions",JE=Symbol("ResetLoaderData");function tM(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";Ke(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let r=t.hydrationRouteProperties||[],s=t.mapRouteProperties||eM,a=s;if(t.unstable_instrumentations){let N=t.unstable_instrumentations;a=U=>({...s(U),...qR(N.map(F=>F.route).filter(Boolean),U)})}let l={},u=Bc(t.routes,a,void 0,l),d,f=t.basename||"/";f.startsWith("/")||(f=`/${f}`);let p=t.dataStrategy||aM,m={...t.future},v=null,b=new Set,w=null,x=null,S=null,T=t.hydrationData!=null,O=As(u,t.history.location,f),M=!1,P=null,C;if(O==null&&!t.patchRoutesOnNavigation){let N=Ar(404,{pathname:t.history.location.pathname}),{matches:U,route:F}=_d(u);C=!0,O=U,P={[F.id]:N}}else if(O&&!t.hydrationData&&Bt(O,u,t.history.location.pathname).active&&(O=null),O)if(O.some(N=>N.route.lazy))C=!1;else if(!O.some(N=>jy(N.route)))C=!0;else{let N=t.hydrationData?t.hydrationData.loaderData:null,U=t.hydrationData?t.hydrationData.errors:null;if(U){let F=O.findIndex(ne=>U[ne.route.id]!==void 0);C=O.slice(0,F+1).every(ne=>!Ig(ne.route,N,U))}else C=O.every(F=>!Ig(F.route,N,U))}else{C=!1,O=[];let N=Bt(null,u,t.history.location.pathname);N.active&&N.matches&&(M=!0,O=N.matches)}let R,k={historyAction:t.history.action,location:t.history.location,matches:O,initialized:C,navigation:Vm,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||P,fetchers:new Map,blockers:new Map},z="POP",G=null,le=!1,he,ye=!1,Ue=new Map,ue=null,re=!1,I=!1,Q=new Set,Y=new Map,_e=0,Ce=-1,j=new Map,J=new Set,W=new Map,te=new Map,ce=new Set,we=new Map,Se,Le=null;function Qe(){if(v=t.history.listen(({action:N,location:U,delta:F})=>{if(Se){Se(),Se=void 0;return}$t(we.size===0||F!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let ne=mi({currentLocation:k.location,nextLocation:U,historyAction:N});if(ne&&F!=null){let oe=new Promise(Te=>{Se=Te});t.history.go(F*-1),Ir(ne,{state:"blocked",location:U,proceed(){Ir(ne,{state:"proceeding",proceed:void 0,reset:void 0,location:U}),oe.then(()=>t.history.go(F))},reset(){let Te=new Map(k.blockers);Te.set(ne,rc),st({blockers:Te})}}),G?.resolve(),G=null;return}return In(N,U)}),n){TM(e,Ue);let N=()=>kM(e,Ue);e.addEventListener("pagehide",N),ue=()=>e.removeEventListener("pagehide",N)}return k.initialized||In("POP",k.location,{initialHydration:!0}),R}function cn(){v&&v(),ue&&ue(),b.clear(),he&&he.abort(),k.fetchers.forEach((N,U)=>hr(U)),k.blockers.forEach((N,U)=>Yn(U))}function Rn(N){return b.add(N),()=>b.delete(N)}function st(N,U={}){N.matches&&(N.matches=N.matches.map(oe=>{let Te=l[oe.route.id],fe=oe.route;return fe.element!==Te.element||fe.errorElement!==Te.errorElement||fe.hydrateFallbackElement!==Te.hydrateFallbackElement?{...oe,route:Te}:oe})),k={...k,...N};let F=[],ne=[];k.fetchers.forEach((oe,Te)=>{oe.state==="idle"&&(ce.has(Te)?F.push(Te):ne.push(Te))}),ce.forEach(oe=>{!k.fetchers.has(oe)&&!Y.has(oe)&&F.push(oe)}),[...b].forEach(oe=>oe(k,{deletedFetchers:F,newErrors:N.errors??null,viewTransitionOpts:U.viewTransitionOpts,flushSync:U.flushSync===!0})),F.forEach(oe=>hr(oe)),ne.forEach(oe=>k.fetchers.delete(oe))}function zr(N,U,{flushSync:F}={}){let ne=k.actionData!=null&&k.navigation.formMethod!=null&&Cn(k.navigation.formMethod)&&k.navigation.state==="loading"&&N.state?._isRedirect!==!0,oe;U.actionData?Object.keys(U.actionData).length>0?oe=U.actionData:oe=null:ne?oe=k.actionData:oe=null;let Te=U.loaderData?VS(k.loaderData,U.loaderData,U.matches||[],U.errors):k.loaderData,fe=k.blockers;fe.size>0&&(fe=new Map(fe),fe.forEach((Ne,Ae)=>fe.set(Ae,rc)));let de=re?!1:It(N,U.matches||k.matches),pe=le===!0||k.navigation.formMethod!=null&&Cn(k.navigation.formMethod)&&N.state?._isRedirect!==!0;d&&(u=d,d=void 0),re||z==="POP"||(z==="PUSH"?t.history.push(N,N.state):z==="REPLACE"&&t.history.replace(N,N.state));let Ee;if(z==="POP"){let Ne=Ue.get(k.location.pathname);Ne&&Ne.has(N.pathname)?Ee={currentLocation:k.location,nextLocation:N}:Ue.has(N.pathname)&&(Ee={currentLocation:N,nextLocation:k.location})}else if(ye){let Ne=Ue.get(k.location.pathname);Ne?Ne.add(N.pathname):(Ne=new Set([N.pathname]),Ue.set(k.location.pathname,Ne)),Ee={currentLocation:k.location,nextLocation:N}}st({...U,actionData:oe,loaderData:Te,historyAction:z,location:N,initialized:!0,navigation:Vm,revalidation:"idle",restoreScrollPosition:de,preventScrollReset:pe,blockers:fe},{viewTransitionOpts:Ee,flushSync:F===!0}),z="POP",le=!1,ye=!1,re=!1,I=!1,G?.resolve(),G=null,Le?.resolve(),Le=null}async function zn(N,U){if(G?.resolve(),G=null,typeof N=="number"){G||(G=WS());let Ze=G.promise;return t.history.go(N),Ze}let F=zg(k.location,k.matches,f,N,U?.fromRouteId,U?.relative),{path:ne,submission:oe,error:Te}=LS(!1,F,U),fe=k.location,de=Ic(k.location,ne,U&&U.state);de={...de,...t.history.encodeLocation(de)};let pe=U&&U.replace!=null?U.replace:void 0,Ee="PUSH";pe===!0?Ee="REPLACE":pe===!1||oe!=null&&Cn(oe.formMethod)&&oe.formAction===k.location.pathname+k.location.search&&(Ee="REPLACE");let Ne=U&&"preventScrollReset"in U?U.preventScrollReset===!0:void 0,Ae=(U&&U.flushSync)===!0,it=mi({currentLocation:fe,nextLocation:de,historyAction:Ee});if(it){Ir(it,{state:"blocked",location:de,proceed(){Ir(it,{state:"proceeding",proceed:void 0,reset:void 0,location:de}),zn(N,U)},reset(){let Ze=new Map(k.blockers);Ze.set(it,rc),st({blockers:Ze})}});return}await In(Ee,de,{submission:oe,pendingError:Te,preventScrollReset:Ne,replace:U&&U.replace,enableViewTransition:U&&U.viewTransition,flushSync:Ae,callSiteDefaultShouldRevalidate:U&&U.unstable_defaultShouldRevalidate})}function Ks(){Le||(Le=WS()),Yi(),st({revalidation:"loading"});let N=Le.promise;return k.navigation.state==="submitting"?N:k.navigation.state==="idle"?(In(k.historyAction,k.location,{startUninterruptedRevalidation:!0}),N):(In(z||k.historyAction,k.navigation.location,{overrideNavigation:k.navigation,enableViewTransition:ye===!0}),N)}async function In(N,U,F){he&&he.abort(),he=null,z=N,re=(F&&F.startUninterruptedRevalidation)===!0,yt(k.location,k.matches),le=(F&&F.preventScrollReset)===!0,ye=(F&&F.enableViewTransition)===!0;let ne=d||u,oe=F&&F.overrideNavigation,Te=F?.initialHydration&&k.matches&&k.matches.length>0&&!M?k.matches:As(ne,U,f),fe=(F&&F.flushSync)===!0;if(Te&&k.initialized&&!I&&pM(k.location,U)&&!(F&&F.submission&&Cn(F.submission.formMethod))){zr(U,{matches:Te},{flushSync:fe});return}let de=Bt(Te,ne,U.pathname);if(de.active&&de.matches&&(Te=de.matches),!Te){let{error:Rt,notFoundMatches:Mt,route:et}=Br(U.pathname);zr(U,{matches:Mt,loaderData:{},errors:{[et.id]:Rt}},{flushSync:fe});return}he=new AbortController;let pe=Vo(t.history,U,he.signal,F&&F.submission),Ee=t.getContext?await t.getContext():new OS,Ne;if(F&&F.pendingError)Ne=[Os(Te).route.id,{type:"error",error:F.pendingError}];else if(F&&F.submission&&Cn(F.submission.formMethod)){let Rt=await fi(pe,U,F.submission,Te,Ee,de.active,F&&F.initialHydration===!0,{replace:F.replace,flushSync:fe});if(Rt.shortCircuited)return;if(Rt.pendingActionResult){let[Mt,et]=Rt.pendingActionResult;if(ar(et)&&Uc(et.error)&&et.error.status===404){he=null,zr(U,{matches:Rt.matches,loaderData:{},errors:{[Mt]:et.error}});return}}Te=Rt.matches||Te,Ne=Rt.pendingActionResult,oe=Fm(U,F.submission),fe=!1,de.active=!1,pe=Vo(t.history,pe.url,pe.signal)}let{shortCircuited:Ae,matches:it,loaderData:Ze,errors:Ct}=await Ws(pe,U,Te,Ee,de.active,oe,F&&F.submission,F&&F.fetcherSubmission,F&&F.replace,F&&F.initialHydration===!0,fe,Ne,F&&F.callSiteDefaultShouldRevalidate);Ae||(he=null,zr(U,{matches:it||Te,...FS(Ne),loaderData:Ze,errors:Ct}))}async function fi(N,U,F,ne,oe,Te,fe,de={}){Yi();let pe=xM(U,F);if(st({navigation:pe},{flushSync:de.flushSync===!0}),Te){let Ae=await Jn(ne,U.pathname,N.signal);if(Ae.type==="aborted")return{shortCircuited:!0};if(Ae.type==="error"){if(Ae.partialMatches.length===0){let{matches:Ze,route:Ct}=_d(u);return{matches:Ze,pendingActionResult:[Ct.id,{type:"error",error:Ae.error}]}}let it=Os(Ae.partialMatches).route.id;return{matches:Ae.partialMatches,pendingActionResult:[it,{type:"error",error:Ae.error}]}}else if(Ae.matches)ne=Ae.matches;else{let{notFoundMatches:it,error:Ze,route:Ct}=Br(U.pathname);return{matches:it,pendingActionResult:[Ct.id,{type:"error",error:Ze}]}}}let Ee,Ne=Zd(ne,U);if(!Ne.route.action&&!Ne.route.lazy)Ee={type:"error",error:Ar(405,{method:N.method,pathname:U.pathname,routeId:Ne.route.id})};else{let Ae=el(a,l,N,ne,Ne,fe?[]:r,oe),it=await hi(N,Ae,oe,null);if(Ee=it[Ne.route.id],!Ee){for(let Ze of ne)if(it[Ze.route.id]){Ee=it[Ze.route.id];break}}if(N.signal.aborted)return{shortCircuited:!0}}if(_a(Ee)){let Ae;return de&&de.replace!=null?Ae=de.replace:Ae=HS(Ee.response.headers.get("Location"),new URL(N.url),f,t.history)===k.location.pathname+k.location.search,await _t(N,Ee,!0,{submission:F,replace:Ae}),{shortCircuited:!0}}if(ar(Ee)){let Ae=Os(ne,Ne.route.id);return(de&&de.replace)!==!0&&(z="PUSH"),{matches:ne,pendingActionResult:[Ae.route.id,Ee,Ne.route.id]}}return{matches:ne,pendingActionResult:[Ne.route.id,Ee]}}async function Ws(N,U,F,ne,oe,Te,fe,de,pe,Ee,Ne,Ae,it){let Ze=Te||Fm(U,fe),Ct=fe||de||KS(Ze),Rt=!re&&!Ee;if(oe){if(Rt){let Ut=En(Ae);st({navigation:Ze,...Ut!==void 0?{actionData:Ut}:{}},{flushSync:Ne})}let tt=await Jn(F,U.pathname,N.signal);if(tt.type==="aborted")return{shortCircuited:!0};if(tt.type==="error"){if(tt.partialMatches.length===0){let{matches:Hr,route:fn}=_d(u);return{matches:Hr,loaderData:{},errors:{[fn.id]:tt.error}}}let Ut=Os(tt.partialMatches).route.id;return{matches:tt.partialMatches,loaderData:{},errors:{[Ut]:tt.error}}}else if(tt.matches)F=tt.matches;else{let{error:Ut,notFoundMatches:Hr,route:fn}=Br(U.pathname);return{matches:Hr,loaderData:{},errors:{[fn.id]:Ut}}}}let Mt=d||u,{dsMatches:et,revalidatingFetchers:rn}=zS(N,ne,a,l,t.history,k,F,Ct,U,Ee?[]:r,Ee===!0,I,Q,ce,W,J,Mt,f,t.patchRoutesOnNavigation!=null,Ae,it);if(Ce=++_e,!t.dataStrategy&&!et.some(tt=>tt.shouldLoad)&&!et.some(tt=>tt.route.middleware&&tt.route.middleware.length>0)&&rn.length===0){let tt=Qt();return zr(U,{matches:F,loaderData:{},errors:Ae&&ar(Ae[1])?{[Ae[0]]:Ae[1].error}:null,...FS(Ae),...tt?{fetchers:new Map(k.fetchers)}:{}},{flushSync:Ne}),{shortCircuited:!0}}if(Rt){let tt={};if(!oe){tt.navigation=Ze;let Ut=En(Ae);Ut!==void 0&&(tt.actionData=Ut)}rn.length>0&&(tt.fetchers=Ys(rn)),st(tt,{flushSync:Ne})}rn.forEach(tt=>{wt(tt.key),tt.controller&&Y.set(tt.key,tt.controller)});let Un=()=>rn.forEach(tt=>wt(tt.key));he&&he.signal.addEventListener("abort",Un);let{loaderResults:Tt,fetcherResults:Ur}=await Qr(et,rn,N,ne);if(N.signal.aborted)return{shortCircuited:!0};he&&he.signal.removeEventListener("abort",Un),rn.forEach(tt=>Y.delete(tt.key));let Xn=Cd(Tt);if(Xn)return await _t(N,Xn.result,!0,{replace:pe}),{shortCircuited:!0};if(Xn=Cd(Ur),Xn)return J.add(Xn.key),await _t(N,Xn.result,!0,{replace:pe}),{shortCircuited:!0};let{loaderData:Pr,errors:mr}=qS(k,F,Tt,Ae,rn,Ur);Ee&&k.errors&&(mr={...k.errors,...mr});let yi=Qt(),Qs=Xa(Ce),Zs=yi||Qs||rn.length>0;return{matches:F,loaderData:Pr,errors:mr,...Zs?{fetchers:new Map(k.fetchers)}:{}}}function En(N){if(N&&!ar(N[1]))return{[N[0]]:N[1].data};if(k.actionData)return Object.keys(k.actionData).length===0?null:k.actionData}function Ys(N){return N.forEach(U=>{let F=k.fetchers.get(U.key),ne=ic(void 0,F?F.data:void 0);k.fetchers.set(U.key,ne)}),new Map(k.fetchers)}async function Js(N,U,F,ne){wt(N);let oe=(ne&&ne.flushSync)===!0,Te=d||u,fe=zg(k.location,k.matches,f,F,U,ne?.relative),de=As(Te,fe,f),pe=Bt(de,Te,fe);if(pe.active&&pe.matches&&(de=pe.matches),!de){Mn(N,U,Ar(404,{pathname:fe}),{flushSync:oe});return}let{path:Ee,submission:Ne,error:Ae}=LS(!0,fe,ne);if(Ae){Mn(N,U,Ae,{flushSync:oe});return}let it=t.getContext?await t.getContext():new OS,Ze=(ne&&ne.preventScrollReset)===!0;if(Ne&&Cn(Ne.formMethod)){await un(N,U,Ee,de,it,pe.active,oe,Ze,Ne,ne&&ne.unstable_defaultShouldRevalidate);return}W.set(N,{routeId:U,path:Ee}),await Xr(N,U,Ee,de,it,pe.active,oe,Ze,Ne)}async function un(N,U,F,ne,oe,Te,fe,de,pe,Ee){Yi(),W.delete(N);let Ne=k.fetchers.get(N);dn(N,EM(pe,Ne),{flushSync:fe});let Ae=new AbortController,it=Vo(t.history,F,Ae.signal,pe);if(Te){let nt=await Jn(ne,new URL(it.url).pathname,it.signal,N);if(nt.type==="aborted")return;if(nt.type==="error"){Mn(N,U,nt.error,{flushSync:fe});return}else if(nt.matches)ne=nt.matches;else{Mn(N,U,Ar(404,{pathname:F}),{flushSync:fe});return}}let Ze=Zd(ne,F);if(!Ze.route.action&&!Ze.route.lazy){let nt=Ar(405,{method:pe.formMethod,pathname:F,routeId:U});Mn(N,U,nt,{flushSync:fe});return}Y.set(N,Ae);let Ct=_e,Rt=el(a,l,it,ne,Ze,r,oe),Mt=await hi(it,Rt,oe,N),et=Mt[Ze.route.id];if(!et){for(let nt of Rt)if(Mt[nt.route.id]){et=Mt[nt.route.id];break}}if(it.signal.aborted){Y.get(N)===Ae&&Y.delete(N);return}if(ce.has(N)){if(_a(et)||ar(et)){dn(N,Ui(void 0));return}}else{if(_a(et))if(Y.delete(N),Ce>Ct){dn(N,Ui(void 0));return}else return J.add(N),dn(N,ic(pe)),_t(it,et,!1,{fetcherSubmission:pe,preventScrollReset:de});if(ar(et)){Mn(N,U,et.error);return}}let rn=k.navigation.location||k.location,Un=Vo(t.history,rn,Ae.signal),Tt=d||u,Ur=k.navigation.state!=="idle"?As(Tt,k.navigation.location,f):k.matches;Ke(Ur,"Didn't find any matches after fetcher action");let Xn=++_e;j.set(N,Xn);let Pr=ic(pe,et.data);k.fetchers.set(N,Pr);let{dsMatches:mr,revalidatingFetchers:yi}=zS(Un,oe,a,l,t.history,k,Ur,pe,rn,r,!1,I,Q,ce,W,J,Tt,f,t.patchRoutesOnNavigation!=null,[Ze.route.id,et],Ee);yi.filter(nt=>nt.key!==N).forEach(nt=>{let ea=nt.key,mu=k.fetchers.get(ea),hl=ic(void 0,mu?mu.data:void 0);k.fetchers.set(ea,hl),wt(ea),nt.controller&&Y.set(ea,nt.controller)}),st({fetchers:new Map(k.fetchers)});let Qs=()=>yi.forEach(nt=>wt(nt.key));Ae.signal.addEventListener("abort",Qs);let{loaderResults:Zs,fetcherResults:tt}=await Qr(mr,yi,Un,oe);if(Ae.signal.aborted)return;if(Ae.signal.removeEventListener("abort",Qs),j.delete(N),Y.delete(N),yi.forEach(nt=>Y.delete(nt.key)),k.fetchers.has(N)){let nt=Ui(et.data);k.fetchers.set(N,nt)}let Ut=Cd(Zs);if(Ut)return _t(Un,Ut.result,!1,{preventScrollReset:de});if(Ut=Cd(tt),Ut)return J.add(Ut.key),_t(Un,Ut.result,!1,{preventScrollReset:de});let{loaderData:Hr,errors:fn}=qS(k,Ur,Zs,void 0,yi,tt);Xa(Xn),k.navigation.state==="loading"&&Xn>Ce?(Ke(z,"Expected pending action"),he&&he.abort(),zr(k.navigation.location,{matches:Ur,loaderData:Hr,errors:fn,fetchers:new Map(k.fetchers)})):(st({errors:fn,loaderData:VS(k.loaderData,Hr,Ur,fn),fetchers:new Map(k.fetchers)}),I=!1)}async function Xr(N,U,F,ne,oe,Te,fe,de,pe){let Ee=k.fetchers.get(N);dn(N,ic(pe,Ee?Ee.data:void 0),{flushSync:fe});let Ne=new AbortController,Ae=Vo(t.history,F,Ne.signal);if(Te){let et=await Jn(ne,new URL(Ae.url).pathname,Ae.signal,N);if(et.type==="aborted")return;if(et.type==="error"){Mn(N,U,et.error,{flushSync:fe});return}else if(et.matches)ne=et.matches;else{Mn(N,U,Ar(404,{pathname:F}),{flushSync:fe});return}}let it=Zd(ne,F);Y.set(N,Ne);let Ze=_e,Ct=el(a,l,Ae,ne,it,r,oe),Mt=(await hi(Ae,Ct,oe,N))[it.route.id];if(Y.get(N)===Ne&&Y.delete(N),!Ae.signal.aborted){if(ce.has(N)){dn(N,Ui(void 0));return}if(_a(Mt))if(Ce>Ze){dn(N,Ui(void 0));return}else{J.add(N),await _t(Ae,Mt,!1,{preventScrollReset:de});return}if(ar(Mt)){Mn(N,U,Mt.error);return}dn(N,Ui(Mt.data))}}async function _t(N,U,F,{submission:ne,fetcherSubmission:oe,preventScrollReset:Te,replace:fe}={}){F||(G?.resolve(),G=null),U.response.headers.has("X-Remix-Revalidate")&&(I=!0);let de=U.response.headers.get("Location");Ke(de,"Expected a Location header on the redirect Response"),de=HS(de,new URL(N.url),f,t.history);let pe=Ic(k.location,de,{_isRedirect:!0});if(n){let Ct=!1;if(U.response.headers.has("X-Remix-Reload-Document"))Ct=!0;else if(My(de)){const Rt=UE(de,!0);Ct=Rt.origin!==e.location.origin||Dr(Rt.pathname,f)==null}if(Ct){fe?e.location.replace(de):e.location.assign(de);return}}he=null;let Ee=fe===!0||U.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:Ne,formAction:Ae,formEncType:it}=k.navigation;!ne&&!oe&&Ne&&Ae&&it&&(ne=KS(k.navigation));let Ze=ne||oe;if(QR.has(U.response.status)&&Ze&&Cn(Ze.formMethod))await In(Ee,pe,{submission:{...Ze,formAction:de},preventScrollReset:Te||le,enableViewTransition:F?ye:void 0});else{let Ct=Fm(pe,ne);await In(Ee,pe,{overrideNavigation:Ct,fetcherSubmission:oe,preventScrollReset:Te||le,enableViewTransition:F?ye:void 0})}}async function hi(N,U,F,ne){let oe,Te={};try{oe=await lM(p,N,U,ne,F,!1)}catch(fe){return U.filter(de=>de.shouldLoad).forEach(de=>{Te[de.route.id]={type:"error",error:fe}}),Te}if(N.signal.aborted)return Te;if(!Cn(N.method))for(let fe of U){if(oe[fe.route.id]?.type==="error")break;!oe.hasOwnProperty(fe.route.id)&&!k.loaderData.hasOwnProperty(fe.route.id)&&(!k.errors||!k.errors.hasOwnProperty(fe.route.id))&&fe.shouldCallHandler()&&(oe[fe.route.id]={type:"error",result:new Error(`No result returned from dataStrategy for route ${fe.route.id}`)})}for(let[fe,de]of Object.entries(oe))if(vM(de)){let pe=de.result;Te[fe]={type:"redirect",response:fM(pe,N,fe,U,f)}}else Te[fe]=await dM(de);return Te}async function Qr(N,U,F,ne){let oe=hi(F,N,ne,null),Te=Promise.all(U.map(async pe=>{if(pe.matches&&pe.match&&pe.request&&pe.controller){let Ne=(await hi(pe.request,pe.matches,ne,pe.key))[pe.match.route.id];return{[pe.key]:Ne}}else return Promise.resolve({[pe.key]:{type:"error",error:Ar(404,{pathname:pe.path})}})})),fe=await oe,de=(await Te).reduce((pe,Ee)=>Object.assign(pe,Ee),{});return{loaderResults:fe,fetcherResults:de}}function Yi(){I=!0,W.forEach((N,U)=>{Y.has(U)&&Q.add(U),wt(U)})}function dn(N,U,F={}){k.fetchers.set(N,U),st({fetchers:new Map(k.fetchers)},{flushSync:(F&&F.flushSync)===!0})}function Mn(N,U,F,ne={}){let oe=Os(k.matches,U);hr(N),st({errors:{[oe.route.id]:F},fetchers:new Map(k.fetchers)},{flushSync:(ne&&ne.flushSync)===!0})}function fr(N){return te.set(N,(te.get(N)||0)+1),ce.has(N)&&ce.delete(N),k.fetchers.get(N)||ZR}function Ja(N,U){wt(N,U?.reason),dn(N,Ui(null))}function hr(N){let U=k.fetchers.get(N);Y.has(N)&&!(U&&U.state==="loading"&&j.has(N))&&wt(N),W.delete(N),j.delete(N),J.delete(N),ce.delete(N),Q.delete(N),k.fetchers.delete(N)}function pi(N){let U=(te.get(N)||0)-1;U<=0?(te.delete(N),ce.add(N)):te.set(N,U),st({fetchers:new Map(k.fetchers)})}function wt(N,U){let F=Y.get(N);F&&(F.abort(U),Y.delete(N))}function Bn(N){for(let U of N){let F=fr(U),ne=Ui(F.data);k.fetchers.set(U,ne)}}function Qt(){let N=[],U=!1;for(let F of J){let ne=k.fetchers.get(F);Ke(ne,`Expected fetcher: ${F}`),ne.state==="loading"&&(J.delete(F),N.push(F),U=!0)}return Bn(N),U}function Xa(N){let U=[];for(let[F,ne]of j)if(ne<N){let oe=k.fetchers.get(F);Ke(oe,`Expected fetcher: ${F}`),oe.state==="loading"&&(wt(F),j.delete(F),U.push(F))}return Bn(U),U.length>0}function Xs(N,U){let F=k.blockers.get(N)||rc;return we.get(N)!==U&&we.set(N,U),F}function Yn(N){k.blockers.delete(N),we.delete(N)}function Ir(N,U){let F=k.blockers.get(N)||rc;Ke(F.state==="unblocked"&&U.state==="blocked"||F.state==="blocked"&&U.state==="blocked"||F.state==="blocked"&&U.state==="proceeding"||F.state==="blocked"&&U.state==="unblocked"||F.state==="proceeding"&&U.state==="unblocked",`Invalid blocker state transition: ${F.state} -> ${U.state}`);let ne=new Map(k.blockers);ne.set(N,U),st({blockers:ne})}function mi({currentLocation:N,nextLocation:U,historyAction:F}){if(we.size===0)return;we.size>1&&$t(!1,"A router only supports one blocker at a time");let ne=Array.from(we.entries()),[oe,Te]=ne[ne.length-1],fe=k.blockers.get(oe);if(!(fe&&fe.state==="proceeding")&&Te({currentLocation:N,nextLocation:U,historyAction:F}))return oe}function Br(N){let U=Ar(404,{pathname:N}),F=d||u,{matches:ne,route:oe}=_d(F);return{notFoundMatches:ne,route:oe,error:U}}function pr(N,U,F){if(w=N,S=U,x=F||null,!T&&k.navigation===Vm){T=!0;let ne=It(k.location,k.matches);ne!=null&&st({restoreScrollPosition:ne})}return()=>{w=null,S=null,x=null}}function ze(N,U){return x&&x(N,U.map(ne=>kR(ne,k.loaderData)))||N.key}function yt(N,U){if(w&&S){let F=ze(N,U);w[F]=S()}}function It(N,U){if(w){let F=ze(N,U),ne=w[F];if(typeof ne=="number")return ne}return null}function Bt(N,U,F){if(t.patchRoutesOnNavigation)if(N){if(Object.keys(N[0].params).length>0)return{active:!0,matches:yc(U,F,f,!0)}}else return{active:!0,matches:yc(U,F,f,!0)||[]};return{active:!1,matches:null}}async function Jn(N,U,F,ne){if(!t.patchRoutesOnNavigation)return{type:"success",matches:N};let oe=N;for(;;){let Te=d==null,fe=d||u,de=l;try{await t.patchRoutesOnNavigation({signal:F,path:U,matches:oe,fetcherKey:ne,patch:(Ne,Ae)=>{F.aborted||IS(Ne,Ae,fe,de,a,!1)}})}catch(Ne){return{type:"error",error:Ne,partialMatches:oe}}finally{Te&&!F.aborted&&(u=[...u])}if(F.aborted)return{type:"aborted"};let pe=As(fe,U,f),Ee=null;if(pe){if(Object.keys(pe[0].params).length===0)return{type:"success",matches:pe};if(Ee=yc(fe,U,f,!0),!(Ee&&oe.length<Ee.length&&vt(oe,Ee.slice(0,oe.length))))return{type:"success",matches:pe}}if(Ee||(Ee=yc(fe,U,f,!0)),!Ee||vt(oe,Ee))return{type:"success",matches:null};oe=Ee}}function vt(N,U){return N.length===U.length&&N.every((F,ne)=>F.route.id===U[ne].route.id)}function Tn(N){l={},d=Bc(N,a,void 0,l)}function gi(N,U,F=!1){let ne=d==null;IS(N,U,d||u,l,a,F),ne&&(u=[...u],st({}))}return R={get basename(){return f},get future(){return m},get state(){return k},get routes(){return u},get window(){return e},initialize:Qe,subscribe:Rn,enableScrollRestoration:pr,navigate:zn,fetch:Js,revalidate:Ks,createHref:N=>t.history.createHref(N),encodeLocation:N=>t.history.encodeLocation(N),getFetcher:fr,resetFetcher:Ja,deleteFetcher:pi,dispose:cn,getBlocker:Xs,deleteBlocker:Yn,patchRoutes:gi,_internalFetchControllers:Y,_internalSetRoutes:Tn,_internalSetStateDoNotUseOrYouWillBreakYourApp(N){st(N)}},t.unstable_instrumentations&&(R=VR(R,t.unstable_instrumentations.map(N=>N.router).filter(Boolean))),R}function nM(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function zg(t,e,n,r,s,a){let l,u;if(s){l=[];for(let f of e)if(l.push(f),f.route.id===s){u=f;break}}else l=e,u=e[e.length-1];let d=Dy(r||".",Ny(l),Dr(t.pathname,n)||t.pathname,a==="path");if(r==null&&(d.search=t.search,d.hash=t.hash),(r==null||r===""||r===".")&&u){let f=zy(d.search);if(u.route.index&&!f)d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index";else if(!u.route.index&&f){let p=new URLSearchParams(d.search),m=p.getAll("index");p.delete("index"),m.filter(b=>b).forEach(b=>p.append("index",b));let v=p.toString();d.search=v?`?${v}`:""}}return n!=="/"&&(d.pathname=BR({basename:n,pathname:d.pathname})),li(d)}function LS(t,e,n){if(!n||!nM(n))return{path:e};if(n.formMethod&&!SM(n.formMethod))return{path:e,error:Ar(405,{method:n.formMethod})};let r=()=>({path:e,error:Ar(400,{type:"invalid-body"})}),a=(n.formMethod||"get").toUpperCase(),l=nT(e);if(n.body!==void 0){if(n.formEncType==="text/plain"){if(!Cn(a))return r();let m=typeof n.body=="string"?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((v,[b,w])=>`${v}${b}=${w}
`,""):String(n.body);return{path:e,submission:{formMethod:a,formAction:l,formEncType:n.formEncType,formData:void 0,json:void 0,text:m}}}else if(n.formEncType==="application/json"){if(!Cn(a))return r();try{let m=typeof n.body=="string"?JSON.parse(n.body):n.body;return{path:e,submission:{formMethod:a,formAction:l,formEncType:n.formEncType,formData:void 0,json:m,text:void 0}}}catch{return r()}}}Ke(typeof FormData=="function","FormData is not available in this environment");let u,d;if(n.formData)u=Ug(n.formData),d=n.formData;else if(n.body instanceof FormData)u=Ug(n.body),d=n.body;else if(n.body instanceof URLSearchParams)u=n.body,d=$S(u);else if(n.body==null)u=new URLSearchParams,d=new FormData;else try{u=new URLSearchParams(n.body),d=$S(u)}catch{return r()}let f={formMethod:a,formAction:l,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:d,json:void 0,text:void 0};if(Cn(f.formMethod))return{path:e,submission:f};let p=Gi(e);return t&&p.search&&zy(p.search)&&u.append("index",""),p.search=`?${u}`,{path:li(p),submission:f}}function zS(t,e,n,r,s,a,l,u,d,f,p,m,v,b,w,x,S,T,O,M,P){let C=M?ar(M[1])?M[1].error:M[1].data:void 0,R=s.createURL(a.location),k=s.createURL(d),z;if(p&&a.errors){let re=Object.keys(a.errors)[0];z=l.findIndex(I=>I.route.id===re)}else if(M&&ar(M[1])){let re=M[0];z=l.findIndex(I=>I.route.id===re)-1}let G=M?M[1].statusCode:void 0,le=G&&G>=400,he={currentUrl:R,currentParams:a.matches[0]?.params||{},nextUrl:k,nextParams:l[0].params,...u,actionResult:C,actionStatus:G},ye=su(l),Ue=l.map((re,I)=>{let{route:Q}=re,Y=null;if(z!=null&&I>z?Y=!1:Q.lazy?Y=!0:jy(Q)?p?Y=Ig(Q,a.loaderData,a.errors):rM(a.loaderData,a.matches[I],re)&&(Y=!0):Y=!1,Y!==null)return Bg(n,r,t,ye,re,f,e,Y);let _e=!1;typeof P=="boolean"?_e=P:le?_e=!1:(m||R.pathname+R.search===k.pathname+k.search||R.search!==k.search||iM(a.matches[I],re))&&(_e=!0);let Ce={...he,defaultShouldRevalidate:_e},j=Tc(re,Ce);return Bg(n,r,t,ye,re,f,e,j,Ce,P)}),ue=[];return w.forEach((re,I)=>{if(p||!l.some(te=>te.route.id===re.routeId)||b.has(I))return;let Q=a.fetchers.get(I),Y=Q&&Q.state!=="idle"&&Q.data===void 0,_e=As(S,re.path,T);if(!_e){if(O&&Y)return;ue.push({key:I,routeId:re.routeId,path:re.path,matches:null,match:null,request:null,controller:null});return}if(x.has(I))return;let Ce=Zd(_e,re.path),j=new AbortController,J=Vo(s,re.path,j.signal),W=null;if(v.has(I))v.delete(I),W=el(n,r,J,_e,Ce,f,e);else if(Y)m&&(W=el(n,r,J,_e,Ce,f,e));else{let te;typeof P=="boolean"?te=P:le?te=!1:te=m;let ce={...he,defaultShouldRevalidate:te};Tc(Ce,ce)&&(W=el(n,r,J,_e,Ce,f,e,ce))}W&&ue.push({key:I,routeId:re.routeId,path:re.path,matches:W,match:Ce,request:J,controller:j})}),{dsMatches:Ue,revalidatingFetchers:ue}}function jy(t){return t.loader!=null||t.middleware!=null&&t.middleware.length>0}function Ig(t,e,n){if(t.lazy)return!0;if(!jy(t))return!1;let r=e!=null&&t.id in e,s=n!=null&&n[t.id]!==void 0;return!r&&s?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!r&&!s}function rM(t,e,n){let r=!e||n.route.id!==e.route.id,s=!t.hasOwnProperty(n.route.id);return r||s}function iM(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function Tc(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}function IS(t,e,n,r,s,a){let l;if(t){let f=r[t];Ke(f,`No route found to patch children into: routeId = ${t}`),f.children||(f.children=[]),l=f.children}else l=n;let u=[],d=[];if(e.forEach(f=>{let p=l.find(m=>XE(f,m));p?d.push({existingRoute:p,newRoute:f}):u.push(f)}),u.length>0){let f=Bc(u,s,[t||"_","patch",String(l?.length||"0")],r);l.push(...f)}if(a&&d.length>0)for(let f=0;f<d.length;f++){let{existingRoute:p,newRoute:m}=d[f],v=p,[b]=Bc([m],s,[],{},!0);Object.assign(v,{element:b.element?b.element:v.element,errorElement:b.errorElement?b.errorElement:v.errorElement,hydrateFallbackElement:b.hydrateFallbackElement?b.hydrateFallbackElement:v.hydrateFallbackElement})}}function XE(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((n,r)=>e.children?.some(s=>XE(n,s))):!1}var BS=new WeakMap,QE=({key:t,route:e,manifest:n,mapRouteProperties:r})=>{let s=n[e.id];if(Ke(s,"No route found in manifest"),!s.lazy||typeof s.lazy!="object")return;let a=s.lazy[t];if(!a)return;let l=BS.get(s);l||(l={},BS.set(s,l));let u=l[t];if(u)return u;let d=(async()=>{let f=SR(t),m=s[t]!==void 0&&t!=="hasErrorBoundary";if(f)$t(!f,"Route property "+t+" is not a supported lazy route property. This property will be ignored."),l[t]=Promise.resolve();else if(m)$t(!1,`Route "${s.id}" has a static property "${t}" defined. The lazy property will be ignored.`);else{let v=await a();v!=null&&(Object.assign(s,{[t]:v}),Object.assign(s,r(s)))}typeof s.lazy=="object"&&(s.lazy[t]=void 0,Object.values(s.lazy).every(v=>v===void 0)&&(s.lazy=void 0))})();return l[t]=d,d},US=new WeakMap;function sM(t,e,n,r,s){let a=n[t.id];if(Ke(a,"No route found in manifest"),!t.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof t.lazy=="function"){let p=US.get(a);if(p)return{lazyRoutePromise:p,lazyHandlerPromise:p};let m=(async()=>{Ke(typeof t.lazy=="function","No lazy route function found");let v=await t.lazy(),b={};for(let w in v){let x=v[w];if(x===void 0)continue;let S=ER(w),O=a[w]!==void 0&&w!=="hasErrorBoundary";S?$t(!S,"Route property "+w+" is not a supported property to be returned from a lazy route function. This property will be ignored."):O?$t(!O,`Route "${a.id}" has a static property "${w}" defined but its lazy function is also returning a value for this property. The lazy route property "${w}" will be ignored.`):b[w]=x}Object.assign(a,b),Object.assign(a,{...r(a),lazy:void 0})})();return US.set(a,m),m.catch(()=>{}),{lazyRoutePromise:m,lazyHandlerPromise:m}}let l=Object.keys(t.lazy),u=[],d;for(let p of l){if(s&&s.includes(p))continue;let m=QE({key:p,route:t,manifest:n,mapRouteProperties:r});m&&(u.push(m),p===e&&(d=m))}let f=u.length>0?Promise.all(u).then(()=>{}):void 0;return f?.catch(()=>{}),d?.catch(()=>{}),{lazyRoutePromise:f,lazyHandlerPromise:d}}async function PS(t){let e=t.matches.filter(s=>s.shouldLoad),n={};return(await Promise.all(e.map(s=>s.resolve()))).forEach((s,a)=>{n[e[a].route.id]=s}),n}async function aM(t){return t.matches.some(e=>e.route.middleware)?ZE(t,()=>PS(t)):PS(t)}function ZE(t,e){return oM(t,e,r=>{if(wM(r))throw r;return r},gM,n);function n(r,s,a){if(a)return Promise.resolve(Object.assign(a.value,{[s]:{type:"error",result:r}}));{let{matches:l}=t,u=Math.min(Math.max(l.findIndex(f=>f.route.id===s),0),Math.max(l.findIndex(f=>f.shouldCallHandler()),0)),d=Os(l,l[u].route.id).route.id;return Promise.resolve({[d]:{type:"error",result:r}})}}}async function oM(t,e,n,r,s){let{matches:a,request:l,params:u,context:d,unstable_pattern:f}=t,p=a.flatMap(v=>v.route.middleware?v.route.middleware.map(b=>[v.route.id,b]):[]);return await eT({request:l,params:u,context:d,unstable_pattern:f},p,e,n,r,s)}async function eT(t,e,n,r,s,a,l=0){let{request:u}=t;if(u.signal.aborted)throw u.signal.reason??new Error(`Request aborted: ${u.method} ${u.url}`);let d=e[l];if(!d)return await n();let[f,p]=d,m,v=async()=>{if(m)throw new Error("You may only call `next()` once per middleware");try{return m={value:await eT(t,e,n,r,s,a,l+1)},m.value}catch(b){return m={value:await a(b,f,m)},m.value}};try{let b=await p(t,v),w=b!=null?r(b):void 0;return s(w)?w:m?w??m.value:(m={value:await v()},m.value)}catch(b){return await a(b,f,m)}}function tT(t,e,n,r,s){let a=QE({key:"middleware",route:r.route,manifest:e,mapRouteProperties:t}),l=sM(r.route,Cn(n.method)?"action":"loader",e,t,s);return{middleware:a,route:l.lazyRoutePromise,handler:l.lazyHandlerPromise}}function Bg(t,e,n,r,s,a,l,u,d=null,f){let p=!1,m=tT(t,e,n,s,a);return{...s,_lazyPromises:m,shouldLoad:u,shouldRevalidateArgs:d,shouldCallHandler(v){return p=!0,d?typeof f=="boolean"?Tc(s,{...d,defaultShouldRevalidate:f}):typeof v=="boolean"?Tc(s,{...d,defaultShouldRevalidate:v}):Tc(s,d):u},resolve(v){let{lazy:b,loader:w,middleware:x}=s.route,S=p||u||v&&!Cn(n.method)&&(b||w),T=x&&x.length>0&&!w&&!b;return S&&(Cn(n.method)||!T)?cM({request:n,unstable_pattern:r,match:s,lazyHandlerPromise:m?.handler,lazyRoutePromise:m?.route,handlerOverride:v,scopedContext:l}):Promise.resolve({type:"data",result:void 0})}}}function el(t,e,n,r,s,a,l,u=null){return r.map(d=>d.route.id!==s.route.id?{...d,shouldLoad:!1,shouldRevalidateArgs:u,shouldCallHandler:()=>!1,_lazyPromises:tT(t,e,n,d,a),resolve:()=>Promise.resolve({type:"data",result:void 0})}:Bg(t,e,n,su(r),d,a,l,!0,u))}async function lM(t,e,n,r,s,a){n.some(f=>f._lazyPromises?.middleware)&&await Promise.all(n.map(f=>f._lazyPromises?.middleware));let l={request:e,unstable_pattern:su(n),params:n[0].params,context:s,matches:n},d=await t({...l,fetcherKey:r,runClientMiddleware:f=>{let p=l;return ZE(p,()=>f({...p,fetcherKey:r,runClientMiddleware:()=>{throw new Error("Cannot call `runClientMiddleware()` from within an `runClientMiddleware` handler")}}))}});try{await Promise.all(n.flatMap(f=>[f._lazyPromises?.handler,f._lazyPromises?.route]))}catch{}return d}async function cM({request:t,unstable_pattern:e,match:n,lazyHandlerPromise:r,lazyRoutePromise:s,handlerOverride:a,scopedContext:l}){let u,d,f=Cn(t.method),p=f?"action":"loader",m=v=>{let b,w=new Promise((T,O)=>b=O);d=()=>b(),t.signal.addEventListener("abort",d);let x=T=>typeof v!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${p}" [routeId: ${n.route.id}]`)):v({request:t,unstable_pattern:e,params:n.params,context:l},...T!==void 0?[T]:[]),S=(async()=>{try{return{type:"data",result:await(a?a(O=>x(O)):x())}}catch(T){return{type:"error",result:T}}})();return Promise.race([S,w])};try{let v=f?n.route.action:n.route.loader;if(r||s)if(v){let b,[w]=await Promise.all([m(v).catch(x=>{b=x}),r,s]);if(b!==void 0)throw b;u=w}else{await r;let b=f?n.route.action:n.route.loader;if(b)[u]=await Promise.all([m(b),s]);else if(p==="action"){let w=new URL(t.url),x=w.pathname+w.search;throw Ar(405,{method:t.method,pathname:x,routeId:n.route.id})}else return{type:"data",result:void 0}}else if(v)u=await m(v);else{let b=new URL(t.url),w=b.pathname+b.search;throw Ar(404,{pathname:w})}}catch(v){return{type:"error",result:v}}finally{d&&t.signal.removeEventListener("abort",d)}return u}async function uM(t){let e=t.headers.get("Content-Type");return e&&/\bapplication\/json\b/.test(e)?t.body==null?null:t.json():t.text()}async function dM(t){let{result:e,type:n}=t;if(Ly(e)){let r;try{r=await uM(e)}catch(s){return{type:"error",error:s}}return n==="error"?{type:"error",error:new iu(e.status,e.statusText,r),statusCode:e.status,headers:e.headers}:{type:"data",data:r,statusCode:e.status,headers:e.headers}}return n==="error"?GS(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:e.init?.status,headers:e.init?.headers?new Headers(e.init.headers):void 0}:{type:"error",error:mM(e),statusCode:Uc(e)?e.status:void 0,headers:e.init?.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:Uc(e)?e.status:void 0}:GS(e)?{type:"data",data:e.data,statusCode:e.init?.status,headers:e.init?.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function fM(t,e,n,r,s){let a=t.headers.get("Location");if(Ke(a,"Redirects returned/thrown from loaders/actions must have a Location header"),!My(a)){let l=r.slice(0,r.findIndex(u=>u.route.id===n)+1);a=zg(new URL(e.url),l,s,a),t.headers.set("Location",a)}return t}function HS(t,e,n,r){let s=["about:","blob:","chrome:","chrome-untrusted:","content:","data:","devtools:","file:","filesystem:","javascript:"];if(My(t)){let a=t,l=a.startsWith("//")?new URL(e.protocol+a):new URL(a);if(s.includes(l.protocol))throw new Error("Invalid redirect location");let u=Dr(l.pathname,n)!=null;if(l.origin===e.origin&&u)return l.pathname+l.search+l.hash}try{let a=r.createURL(t);if(s.includes(a.protocol))throw new Error("Invalid redirect location")}catch{}return t}function Vo(t,e,n,r){let s=t.createURL(nT(e)).toString(),a={signal:n};if(r&&Cn(r.formMethod)){let{formMethod:l,formEncType:u}=r;a.method=l.toUpperCase(),u==="application/json"?(a.headers=new Headers({"Content-Type":u}),a.body=JSON.stringify(r.json)):u==="text/plain"?a.body=r.text:u==="application/x-www-form-urlencoded"&&r.formData?a.body=Ug(r.formData):a.body=r.formData}return new Request(s,a)}function Ug(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function $S(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function hM(t,e,n,r=!1,s=!1){let a={},l=null,u,d=!1,f={},p=n&&ar(n[1])?n[1].error:void 0;return t.forEach(m=>{if(!(m.route.id in e))return;let v=m.route.id,b=e[v];if(Ke(!_a(b),"Cannot handle redirect results in processLoaderData"),ar(b)){let w=b.error;if(p!==void 0&&(w=p,p=void 0),l=l||{},s)l[v]=w;else{let x=Os(t,v);l[x.route.id]==null&&(l[x.route.id]=w)}r||(a[v]=JE),d||(d=!0,u=Uc(b.error)?b.error.status:500),b.headers&&(f[v]=b.headers)}else a[v]=b.data,b.statusCode&&b.statusCode!==200&&!d&&(u=b.statusCode),b.headers&&(f[v]=b.headers)}),p!==void 0&&n&&(l={[n[0]]:p},n[2]&&(a[n[2]]=void 0)),{loaderData:a,errors:l,statusCode:u||200,loaderHeaders:f}}function qS(t,e,n,r,s,a){let{loaderData:l,errors:u}=hM(e,n,r);return s.filter(d=>!d.matches||d.matches.some(f=>f.shouldLoad)).forEach(d=>{let{key:f,match:p,controller:m}=d;if(m&&m.signal.aborted)return;let v=a[f];if(Ke(v,"Did not find corresponding fetcher result"),ar(v)){let b=Os(t.matches,p?.route.id);u&&u[b.route.id]||(u={...u,[b.route.id]:v.error}),t.fetchers.delete(f)}else if(_a(v))Ke(!1,"Unhandled fetcher revalidation redirect");else{let b=Ui(v.data);t.fetchers.set(f,b)}}),{loaderData:l,errors:u}}function VS(t,e,n,r){let s=Object.entries(e).filter(([,a])=>a!==JE).reduce((a,[l,u])=>(a[l]=u,a),{});for(let a of n){let l=a.route.id;if(!e.hasOwnProperty(l)&&t.hasOwnProperty(l)&&a.route.loader&&(s[l]=t[l]),r&&r.hasOwnProperty(l))break}return s}function FS(t){return t?ar(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Os(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function _d(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Ar(t,{pathname:e,routeId:n,method:r,type:s,message:a}={}){let l="Unknown Server Error",u="Unknown @remix-run/router error";return t===400?(l="Bad Request",r&&e&&n?u=`You made a ${r} request to "${e}" but did not provide a \`loader\` for route "${n}", so there is no way to handle the request.`:s==="invalid-body"&&(u="Unable to encode submission body")):t===403?(l="Forbidden",u=`Route "${n}" does not match URL "${e}"`):t===404?(l="Not Found",u=`No route matches URL "${e}"`):t===405&&(l="Method Not Allowed",r&&e&&n?u=`You made a ${r.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${n}", so there is no way to handle the request.`:r&&(u=`Invalid request method "${r.toUpperCase()}"`)),new iu(t||500,l,new Error(u),!0)}function Cd(t){let e=Object.entries(t);for(let n=e.length-1;n>=0;n--){let[r,s]=e[n];if(_a(s))return{key:r,result:s}}}function nT(t){let e=typeof t=="string"?Gi(t):t;return li({...e,hash:""})}function pM(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function mM(t){return new iu(t.init?.status??500,t.init?.statusText??"Internal Server Error",t.data)}function gM(t){return t!=null&&typeof t=="object"&&Object.entries(t).every(([e,n])=>typeof e=="string"&&yM(n))}function yM(t){return t!=null&&typeof t=="object"&&"type"in t&&"result"in t&&(t.type==="data"||t.type==="error")}function vM(t){return Ly(t.result)&&WE.has(t.result.status)}function ar(t){return t.type==="error"}function _a(t){return(t&&t.type)==="redirect"}function GS(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function Ly(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function bM(t){return WE.has(t)}function wM(t){return Ly(t)&&bM(t.status)&&t.headers.has("Location")}function SM(t){return XR.has(t.toUpperCase())}function Cn(t){return YR.has(t.toUpperCase())}function zy(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function Zd(t,e){let n=typeof e=="string"?Gi(e).search:e.search;if(t[t.length-1].route.index&&zy(n||""))return t[t.length-1];let r=qE(t);return r[r.length-1]}function KS(t){let{formMethod:e,formAction:n,formEncType:r,text:s,formData:a,json:l}=t;if(!(!e||!n||!r)){if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:s};if(a!=null)return{formMethod:e,formAction:n,formEncType:r,formData:a,json:void 0,text:void 0};if(l!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:l,text:void 0}}}function Fm(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function xM(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function ic(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function EM(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function Ui(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function TM(t,e){try{let n=t.sessionStorage.getItem(YE);if(n){let r=JSON.parse(n);for(let[s,a]of Object.entries(r||{}))a&&Array.isArray(a)&&e.set(s,new Set(a||[]))}}catch{}}function kM(t,e){if(e.size>0){let n={};for(let[r,s]of e)n[r]=[...s];try{t.sessionStorage.setItem(YE,JSON.stringify(n))}catch(r){$t(!1,`Failed to save applied view transitions in sessionStorage (${r}).`)}}}function WS(){let t,e,n=new Promise((r,s)=>{t=async a=>{r(a);try{await n}catch{}},e=async a=>{s(a);try{await n}catch{}}});return{promise:n,resolve:t,reject:e}}var qa=L.createContext(null);qa.displayName="DataRouter";var au=L.createContext(null);au.displayName="DataRouterState";var rT=L.createContext(!1);function _M(){return L.useContext(rT)}var Iy=L.createContext({isTransitioning:!1});Iy.displayName="ViewTransition";var iT=L.createContext(new Map);iT.displayName="Fetchers";var CM=L.createContext(null);CM.displayName="Await";var jr=L.createContext(null);jr.displayName="Navigation";var ah=L.createContext(null);ah.displayName="Location";var di=L.createContext({outlet:null,matches:[],isDataRoute:!1});di.displayName="Route";var By=L.createContext(null);By.displayName="RouteError";var sT="REACT_ROUTER_ERROR",AM="REDIRECT",OM="ROUTE_ERROR_RESPONSE";function RM(t){if(t.startsWith(`${sT}:${AM}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function MM(t){if(t.startsWith(`${sT}:${OM}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new iu(e.status,e.statusText,e.data)}catch{}}function NM(t,{relative:e}={}){Ke(ou(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=L.useContext(jr),{hash:s,pathname:a,search:l}=lu(t,{relative:e}),u=a;return n!=="/"&&(u=a==="/"?n:oi([n,a])),r.createHref({pathname:u,search:l,hash:s})}function ou(){return L.useContext(ah)!=null}function Va(){return Ke(ou(),"useLocation() may be used only in the context of a <Router> component."),L.useContext(ah).location}var aT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function oT(t){L.useContext(jr).static||L.useLayoutEffect(t)}function Fa(){let{isDataRoute:t}=L.useContext(di);return t?GM():DM()}function DM(){Ke(ou(),"useNavigate() may be used only in the context of a <Router> component.");let t=L.useContext(qa),{basename:e,navigator:n}=L.useContext(jr),{matches:r}=L.useContext(di),{pathname:s}=Va(),a=JSON.stringify(Ny(r)),l=L.useRef(!1);return oT(()=>{l.current=!0}),L.useCallback((d,f={})=>{if($t(l.current,aT),!l.current)return;if(typeof d=="number"){n.go(d);return}let p=Dy(d,JSON.parse(a),s,f.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:oi([e,p.pathname])),(f.replace?n.replace:n.push)(p,f.state,f)},[e,n,a,s,t])}L.createContext(null);function jM(){let{matches:t}=L.useContext(di),e=t[t.length-1];return e?e.params:{}}function lu(t,{relative:e}={}){let{matches:n}=L.useContext(di),{pathname:r}=Va(),s=JSON.stringify(Ny(n));return L.useMemo(()=>Dy(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function LM(t,e,n,r,s){Ke(ou(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=L.useContext(jr),{matches:l}=L.useContext(di),u=l[l.length-1],d=u?u.params:{},f=u?u.pathname:"/",p=u?u.pathnameBase:"/",m=u&&u.route;{let O=m&&m.path||"";cT(f,!m||O.endsWith("*")||O.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${O}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${O}"> to <Route path="${O==="/"?"*":`${O}/*`}">.`)}let v=Va(),b;b=v;let w=b.pathname||"/",x=w;if(p!=="/"){let O=p.replace(/^\//,"").split("/");x="/"+w.replace(/^\//,"").split("/").slice(O.length).join("/")}let S=As(t,{pathname:x});return $t(m||S!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),$t(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),PM(S&&S.map(O=>Object.assign({},O,{params:Object.assign({},d,O.params),pathname:oi([p,a.encodeLocation?a.encodeLocation(O.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:O.pathname]),pathnameBase:O.pathnameBase==="/"?p:oi([p,a.encodeLocation?a.encodeLocation(O.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:O.pathnameBase])})),l,n,r,s)}function zM(){let t=FM(),e=Uc(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",t),l=L.createElement(L.Fragment,null,L.createElement("p",null," Hey developer "),L.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",L.createElement("code",{style:a},"ErrorBoundary")," or"," ",L.createElement("code",{style:a},"errorElement")," prop on your route.")),L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},e),n?L.createElement("pre",{style:s},n):null,l)}var IM=L.createElement(zM,null),lT=class extends L.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=MM(t.digest);n&&(t=n)}let e=t!==void 0?L.createElement(di.Provider,{value:this.props.routeContext},L.createElement(By.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?L.createElement(BM,{error:t},e):e}};lT.contextType=rT;var Gm=new WeakMap;function BM({children:t,error:e}){let{basename:n}=L.useContext(jr);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=RM(e.digest);if(r){let s=Gm.get(e);if(s)throw s;let a=FE(r.location,n);if(VE&&!Gm.get(e))if(a.isExternal||r.reloadDocument)window.location.href=a.absoluteURL||a.to;else{const l=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:r.replace}));throw Gm.set(e,l),l}return L.createElement("meta",{httpEquiv:"refresh",content:`0;url=${a.absoluteURL||a.to}`})}}return t}function UM({routeContext:t,match:e,children:n}){let r=L.useContext(qa);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),L.createElement(di.Provider,{value:t},n)}function PM(t,e=[],n=null,r=null,s=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,l=n?.errors;if(l!=null){let p=a.findIndex(m=>m.route.id&&l?.[m.route.id]!==void 0);Ke(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,p+1))}let u=!1,d=-1;if(n)for(let p=0;p<a.length;p++){let m=a[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=p),m.route.id){let{loaderData:v,errors:b}=n,w=m.route.loader&&!v.hasOwnProperty(m.route.id)&&(!b||b[m.route.id]===void 0);if(m.route.lazy||w){u=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}let f=n&&r?(p,m)=>{r(p,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:su(n.matches),errorInfo:m})}:void 0;return a.reduceRight((p,m,v)=>{let b,w=!1,x=null,S=null;n&&(b=l&&m.route.id?l[m.route.id]:void 0,x=m.route.errorElement||IM,u&&(d<0&&v===0?(cT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,S=null):d===v&&(w=!0,S=m.route.hydrateFallbackElement||null)));let T=e.concat(a.slice(0,v+1)),O=()=>{let M;return b?M=x:w?M=S:m.route.Component?M=L.createElement(m.route.Component,null):m.route.element?M=m.route.element:M=p,L.createElement(UM,{match:m,routeContext:{outlet:p,matches:T,isDataRoute:n!=null},children:M})};return n&&(m.route.ErrorBoundary||m.route.errorElement||v===0)?L.createElement(lT,{location:n.location,revalidation:n.revalidation,component:x,error:b,children:O(),routeContext:{outlet:null,matches:T,isDataRoute:!0},onError:f}):O()},null)}function Uy(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function HM(t){let e=L.useContext(qa);return Ke(e,Uy(t)),e}function $M(t){let e=L.useContext(au);return Ke(e,Uy(t)),e}function qM(t){let e=L.useContext(di);return Ke(e,Uy(t)),e}function Py(t){let e=qM(t),n=e.matches[e.matches.length-1];return Ke(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function VM(){return Py("useRouteId")}function FM(){let t=L.useContext(By),e=$M("useRouteError"),n=Py("useRouteError");return t!==void 0?t:e.errors?.[n]}function GM(){let{router:t}=HM("useNavigate"),e=Py("useNavigate"),n=L.useRef(!1);return oT(()=>{n.current=!0}),L.useCallback(async(s,a={})=>{$t(n.current,aT),n.current&&(typeof s=="number"?await t.navigate(s):await t.navigate(s,{fromRouteId:e,...a}))},[t,e])}var YS={};function cT(t,e,n){!e&&!YS[t]&&(YS[t]=!0,$t(!1,n))}var JS={};function XS(t,e){!t&&!JS[e]&&(JS[e]=!0,console.warn(e))}var KM="useOptimistic",QS=lR[KM],WM=()=>{};function YM(t){return QS?QS(t):[t,WM]}function JM(t){let e={hasErrorBoundary:t.hasErrorBoundary||t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&(t.element&&$t(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:L.createElement(t.Component),Component:void 0})),t.HydrateFallback&&(t.hydrateFallbackElement&&$t(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:L.createElement(t.HydrateFallback),HydrateFallback:void 0})),t.ErrorBoundary&&(t.errorElement&&$t(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:L.createElement(t.ErrorBoundary),ErrorBoundary:void 0})),e}var XM=["HydrateFallback","hydrateFallbackElement"],QM=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}};function ZM({router:t,flushSync:e,onError:n,unstable_useTransitions:r}){r=_M()||r;let[a,l]=L.useState(t.state),[u,d]=YM(a),[f,p]=L.useState(),[m,v]=L.useState({isTransitioning:!1}),[b,w]=L.useState(),[x,S]=L.useState(),[T,O]=L.useState(),M=L.useRef(new Map),P=L.useCallback((z,{deletedFetchers:G,newErrors:le,flushSync:he,viewTransitionOpts:ye})=>{le&&n&&Object.values(le).forEach(ue=>n(ue,{location:z.location,params:z.matches[0]?.params??{},unstable_pattern:su(z.matches)})),z.fetchers.forEach((ue,re)=>{ue.data!==void 0&&M.current.set(re,ue.data)}),G.forEach(ue=>M.current.delete(ue)),XS(he===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let Ue=t.window!=null&&t.window.document!=null&&typeof t.window.document.startViewTransition=="function";if(XS(ye==null||Ue,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!ye||!Ue){e&&he?e(()=>l(z)):r===!1?l(z):L.startTransition(()=>{r===!0&&d(ue=>ZS(ue,z)),l(z)});return}if(e&&he){e(()=>{x&&(b?.resolve(),x.skipTransition()),v({isTransitioning:!0,flushSync:!0,currentLocation:ye.currentLocation,nextLocation:ye.nextLocation})});let ue=t.window.document.startViewTransition(()=>{e(()=>l(z))});ue.finished.finally(()=>{e(()=>{w(void 0),S(void 0),p(void 0),v({isTransitioning:!1})})}),e(()=>S(ue));return}x?(b?.resolve(),x.skipTransition(),O({state:z,currentLocation:ye.currentLocation,nextLocation:ye.nextLocation})):(p(z),v({isTransitioning:!0,flushSync:!1,currentLocation:ye.currentLocation,nextLocation:ye.nextLocation}))},[t.window,e,x,b,r,d,n]);L.useLayoutEffect(()=>t.subscribe(P),[t,P]),L.useEffect(()=>{m.isTransitioning&&!m.flushSync&&w(new QM)},[m]),L.useEffect(()=>{if(b&&f&&t.window){let z=f,G=b.promise,le=t.window.document.startViewTransition(async()=>{r===!1?l(z):L.startTransition(()=>{r===!0&&d(he=>ZS(he,z)),l(z)}),await G});le.finished.finally(()=>{w(void 0),S(void 0),p(void 0),v({isTransitioning:!1})}),S(le)}},[f,b,t.window,r,d]),L.useEffect(()=>{b&&f&&u.location.key===f.location.key&&b.resolve()},[b,x,u.location,f]),L.useEffect(()=>{!m.isTransitioning&&T&&(p(T.state),v({isTransitioning:!0,flushSync:!1,currentLocation:T.currentLocation,nextLocation:T.nextLocation}),O(void 0))},[m.isTransitioning,T]);let C=L.useMemo(()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:z=>t.navigate(z),push:(z,G,le)=>t.navigate(z,{state:G,preventScrollReset:le?.preventScrollReset}),replace:(z,G,le)=>t.navigate(z,{replace:!0,state:G,preventScrollReset:le?.preventScrollReset})}),[t]),R=t.basename||"/",k=L.useMemo(()=>({router:t,navigator:C,static:!1,basename:R,onError:n}),[t,C,R,n]);return L.createElement(L.Fragment,null,L.createElement(qa.Provider,{value:k},L.createElement(au.Provider,{value:u},L.createElement(iT.Provider,{value:M.current},L.createElement(Iy.Provider,{value:m},L.createElement(nN,{basename:R,location:u.location,navigationType:u.historyAction,navigator:C,unstable_useTransitions:r},L.createElement(eN,{routes:t.routes,future:t.future,state:u,onError:n})))))),null)}function ZS(t,e){return{...t,navigation:e.navigation.state!=="idle"?e.navigation:t.navigation,revalidation:e.revalidation!=="idle"?e.revalidation:t.revalidation,actionData:e.navigation.state!=="submitting"?e.actionData:t.actionData,fetchers:e.fetchers}}var eN=L.memo(tN);function tN({routes:t,future:e,state:n,onError:r}){return LM(t,void 0,n,r,e)}function nN({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:s,static:a=!1,unstable_useTransitions:l}){Ke(!ou(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=t.replace(/^\/*/,"/"),d=L.useMemo(()=>({basename:u,navigator:s,static:a,unstable_useTransitions:l,future:{}}),[u,s,a,l]);typeof n=="string"&&(n=Gi(n));let{pathname:f="/",search:p="",hash:m="",state:v=null,key:b="default"}=n,w=L.useMemo(()=>{let x=Dr(f,u);return x==null?null:{location:{pathname:x,search:p,hash:m,state:v,key:b},navigationType:r}},[u,f,p,m,v,b,r]);return $t(w!=null,`<Router basename="${u}"> is not able to match the URL "${f}${p}${m}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:L.createElement(jr.Provider,{value:d},L.createElement(ah.Provider,{children:e,value:w}))}var ef="get",tf="application/x-www-form-urlencoded";function oh(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function rN(t){return oh(t)&&t.tagName.toLowerCase()==="button"}function iN(t){return oh(t)&&t.tagName.toLowerCase()==="form"}function sN(t){return oh(t)&&t.tagName.toLowerCase()==="input"}function aN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function oN(t,e){return t.button===0&&(!e||e==="_self")&&!aN(t)}var Ad=null;function lN(){if(Ad===null)try{new FormData(document.createElement("form"),0),Ad=!1}catch{Ad=!0}return Ad}var cN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Km(t){return t!=null&&!cN.has(t)?($t(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${tf}"`),null):t}function uN(t,e){let n,r,s,a,l;if(iN(t)){let u=t.getAttribute("action");r=u?Dr(u,e):null,n=t.getAttribute("method")||ef,s=Km(t.getAttribute("enctype"))||tf,a=new FormData(t)}else if(rN(t)||sN(t)&&(t.type==="submit"||t.type==="image")){let u=t.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=t.getAttribute("formaction")||u.getAttribute("action");if(r=d?Dr(d,e):null,n=t.getAttribute("formmethod")||u.getAttribute("method")||ef,s=Km(t.getAttribute("formenctype"))||Km(u.getAttribute("enctype"))||tf,a=new FormData(u,t),!lN()){let{name:f,type:p,value:m}=t;if(p==="image"){let v=f?`${f}.`:"";a.append(`${v}x`,"0"),a.append(`${v}y`,"0")}else f&&a.append(f,m)}}else{if(oh(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=ef,r=null,s=tf,l=t}return a&&s==="text/plain"&&(l=a,a=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:a,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Hy(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function dN(t,e,n,r){let s=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n?s.pathname.endsWith("/")?s.pathname=`${s.pathname}_.${r}`:s.pathname=`${s.pathname}.${r}`:s.pathname==="/"?s.pathname=`_root.${r}`:e&&Dr(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${r}`,s}async function fN(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function hN(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function pN(t,e,n){let r=await Promise.all(t.map(async s=>{let a=e.routes[s.route.id];if(a){let l=await fN(a,n);return l.links?l.links():[]}return[]}));return vN(r.flat(1).filter(hN).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function ex(t,e,n,r,s,a){let l=(d,f)=>n[f]?d.route.id!==n[f].route.id:!0,u=(d,f)=>n[f].pathname!==d.pathname||n[f].route.path?.endsWith("*")&&n[f].params["*"]!==d.params["*"];return a==="assets"?e.filter((d,f)=>l(d,f)||u(d,f)):a==="data"?e.filter((d,f)=>{let p=r.routes[d.route.id];if(!p||!p.hasLoader)return!1;if(l(d,f)||u(d,f))return!0;if(d.route.shouldRevalidate){let m=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function mN(t,e,{includeHydrateFallback:n}={}){return gN(t.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let a=[s.module];return s.clientActionModule&&(a=a.concat(s.clientActionModule)),s.clientLoaderModule&&(a=a.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(a=a.concat(s.hydrateFallbackModule)),s.imports&&(a=a.concat(s.imports)),a}).flat(1))}function gN(t){return[...new Set(t)]}function yN(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function vN(t,e){let n=new Set;return new Set(e),t.reduce((r,s)=>{let a=JSON.stringify(yN(s));return n.has(a)||(n.add(a),r.push({key:a,link:s})),r},[])}function uT(){let t=L.useContext(qa);return Hy(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function bN(){let t=L.useContext(au);return Hy(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var $y=L.createContext(void 0);$y.displayName="FrameworkContext";function dT(){let t=L.useContext($y);return Hy(t,"You must render this element inside a <HydratedRouter> element"),t}function wN(t,e){let n=L.useContext($y),[r,s]=L.useState(!1),[a,l]=L.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:f,onMouseLeave:p,onTouchStart:m}=e,v=L.useRef(null);L.useEffect(()=>{if(t==="render"&&l(!0),t==="viewport"){let x=T=>{T.forEach(O=>{l(O.isIntersecting)})},S=new IntersectionObserver(x,{threshold:.5});return v.current&&S.observe(v.current),()=>{S.disconnect()}}},[t]),L.useEffect(()=>{if(r){let x=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(x)}}},[r]);let b=()=>{s(!0)},w=()=>{s(!1),l(!1)};return n?t!=="intent"?[a,v,{}]:[a,v,{onFocus:sc(u,b),onBlur:sc(d,w),onMouseEnter:sc(f,b),onMouseLeave:sc(p,w),onTouchStart:sc(m,b)}]:[!1,v,{}]}function sc(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function SN({page:t,...e}){let{router:n}=uT(),r=L.useMemo(()=>As(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?L.createElement(EN,{page:t,matches:r,...e}):null}function xN(t){let{manifest:e,routeModules:n}=dT(),[r,s]=L.useState([]);return L.useEffect(()=>{let a=!1;return pN(t,e,n).then(l=>{a||s(l)}),()=>{a=!0}},[t,e,n]),r}function EN({page:t,matches:e,...n}){let r=Va(),{future:s,manifest:a,routeModules:l}=dT(),{basename:u}=uT(),{loaderData:d,matches:f}=bN(),p=L.useMemo(()=>ex(t,e,f,a,r,"data"),[t,e,f,a,r]),m=L.useMemo(()=>ex(t,e,f,a,r,"assets"),[t,e,f,a,r]),v=L.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let x=new Set,S=!1;if(e.forEach(O=>{let M=a.routes[O.route.id];!M||!M.hasLoader||(!p.some(P=>P.route.id===O.route.id)&&O.route.id in d&&l[O.route.id]?.shouldRevalidate||M.hasClientLoader?S=!0:x.add(O.route.id))}),x.size===0)return[];let T=dN(t,u,s.unstable_trailingSlashAwareDataRequests,"data");return S&&x.size>0&&T.searchParams.set("_routes",e.filter(O=>x.has(O.route.id)).map(O=>O.route.id).join(",")),[T.pathname+T.search]},[u,s.unstable_trailingSlashAwareDataRequests,d,r,a,p,e,t,l]),b=L.useMemo(()=>mN(m,a),[m,a]),w=xN(m);return L.createElement(L.Fragment,null,v.map(x=>L.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...n})),b.map(x=>L.createElement("link",{key:x,rel:"modulepreload",href:x,...n})),w.map(({key:x,link:S})=>L.createElement("link",{key:x,nonce:n.nonce,...S,crossOrigin:S.crossOrigin??n.crossOrigin})))}function TN(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var kN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{kN&&(window.__reactRouterVersion="7.13.0")}catch{}function _N(t,e){return tM({basename:e?.basename,getContext:e?.getContext,future:e?.future,history:yR({window:e?.window}),hydrationData:CN(),routes:t,mapRouteProperties:JM,hydrationRouteProperties:XM,dataStrategy:e?.dataStrategy,patchRoutesOnNavigation:e?.patchRoutesOnNavigation,window:e?.window,unstable_instrumentations:e?.unstable_instrumentations}).initialize()}function CN(){let t=window?.__staticRouterHydrationData;return t&&t.errors&&(t={...t,errors:AN(t.errors)}),t}function AN(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,s]of e)if(s&&s.__type==="RouteErrorResponse")n[r]=new iu(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let a=window[s.__subType];if(typeof a=="function")try{let l=new a(s.message);l.stack="",n[r]=l}catch{}}if(n[r]==null){let a=new Error(s.message);a.stack="",n[r]=a}}else n[r]=s;return n}var fT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hT=L.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:s,reloadDocument:a,replace:l,state:u,target:d,to:f,preventScrollReset:p,viewTransition:m,unstable_defaultShouldRevalidate:v,...b},w){let{basename:x,unstable_useTransitions:S}=L.useContext(jr),T=typeof f=="string"&&fT.test(f),O=FE(f,x);f=O.to;let M=NM(f,{relative:s}),[P,C,R]=wN(r,b),k=MN(f,{replace:l,state:u,target:d,preventScrollReset:p,relative:s,viewTransition:m,unstable_defaultShouldRevalidate:v,unstable_useTransitions:S});function z(le){e&&e(le),le.defaultPrevented||k(le)}let G=L.createElement("a",{...b,...R,href:O.absoluteURL||M,onClick:O.isExternal||a?e:z,ref:TN(w,C),target:d,"data-discover":!T&&n==="render"?"true":void 0});return P&&!T?L.createElement(L.Fragment,null,G,L.createElement(SN,{page:M})):G});hT.displayName="Link";var pT=L.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:s=!1,style:a,to:l,viewTransition:u,children:d,...f},p){let m=lu(l,{relative:f.relative}),v=Va(),b=L.useContext(au),{navigator:w,basename:x}=L.useContext(jr),S=b!=null&&zN(m)&&u===!0,T=w.encodeLocation?w.encodeLocation(m).pathname:m.pathname,O=v.pathname,M=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;n||(O=O.toLowerCase(),M=M?M.toLowerCase():null,T=T.toLowerCase()),M&&x&&(M=Dr(M,x)||M);const P=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let C=O===T||!s&&O.startsWith(T)&&O.charAt(P)==="/",R=M!=null&&(M===T||!s&&M.startsWith(T)&&M.charAt(T.length)==="/"),k={isActive:C,isPending:R,isTransitioning:S},z=C?e:void 0,G;typeof r=="function"?G=r(k):G=[r,C?"active":null,R?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let le=typeof a=="function"?a(k):a;return L.createElement(hT,{...f,"aria-current":z,className:G,ref:p,style:le,to:l,viewTransition:u},typeof d=="function"?d(k):d)});pT.displayName="NavLink";var ON=L.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:s,state:a,method:l=ef,action:u,onSubmit:d,relative:f,preventScrollReset:p,viewTransition:m,unstable_defaultShouldRevalidate:v,...b},w)=>{let{unstable_useTransitions:x}=L.useContext(jr),S=jN(),T=LN(u,{relative:f}),O=l.toLowerCase()==="get"?"get":"post",M=typeof u=="string"&&fT.test(u),P=C=>{if(d&&d(C),C.defaultPrevented)return;C.preventDefault();let R=C.nativeEvent.submitter,k=R?.getAttribute("formmethod")||l,z=()=>S(R||C.currentTarget,{fetcherKey:e,method:k,navigate:n,replace:s,state:a,relative:f,preventScrollReset:p,viewTransition:m,unstable_defaultShouldRevalidate:v});x&&n!==!1?L.startTransition(()=>z()):z()};return L.createElement("form",{ref:w,method:O,action:T,onSubmit:r?d:P,...b,"data-discover":!M&&t==="render"?"true":void 0})});ON.displayName="Form";function RN(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function mT(t){let e=L.useContext(qa);return Ke(e,RN(t)),e}function MN(t,{target:e,replace:n,state:r,preventScrollReset:s,relative:a,viewTransition:l,unstable_defaultShouldRevalidate:u,unstable_useTransitions:d}={}){let f=Fa(),p=Va(),m=lu(t,{relative:a});return L.useCallback(v=>{if(oN(v,e)){v.preventDefault();let b=n!==void 0?n:li(p)===li(m),w=()=>f(t,{replace:b,state:r,preventScrollReset:s,relative:a,viewTransition:l,unstable_defaultShouldRevalidate:u});d?L.startTransition(()=>w()):w()}},[p,f,m,n,r,e,t,s,a,l,u,d])}var NN=0,DN=()=>`__${String(++NN)}__`;function jN(){let{router:t}=mT("useSubmit"),{basename:e}=L.useContext(jr),n=VM(),r=t.fetch,s=t.navigate;return L.useCallback(async(a,l={})=>{let{action:u,method:d,encType:f,formData:p,body:m}=uN(a,e);if(l.navigate===!1){let v=l.fetcherKey||DN();await r(v,n,l.action||u,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:p,body:m,formMethod:l.method||d,formEncType:l.encType||f,flushSync:l.flushSync})}else await s(l.action||u,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:p,body:m,formMethod:l.method||d,formEncType:l.encType||f,replace:l.replace,state:l.state,fromRouteId:n,flushSync:l.flushSync,viewTransition:l.viewTransition})},[r,s,e,n])}function LN(t,{relative:e}={}){let{basename:n}=L.useContext(jr),r=L.useContext(di);Ke(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),a={...lu(t||".",{relative:e})},l=Va();if(t==null){a.search=l.search;let u=new URLSearchParams(a.search),d=u.getAll("index");if(d.some(p=>p==="")){u.delete("index"),d.filter(m=>m).forEach(m=>u.append("index",m));let p=u.toString();a.search=p?`?${p}`:""}}return(!t||t===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:oi([n,a.pathname])),li(a)}function zN(t,{relative:e}={}){let n=L.useContext(Iy);Ke(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=mT("useViewTransitionState"),s=lu(t,{relative:e});if(!n.isTransitioning)return!1;let a=Dr(n.currentLocation.pathname,r)||n.currentLocation.pathname,l=Dr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return lf(s.pathname,l)!=null||lf(s.pathname,a)!=null}var gT=IE();const yT=Ry(gT);function IN(t){return L.createElement(ZM,{flushSync:gT.flushSync,...t})}const vT=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();const BN=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const UN=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase());const tx=t=>{const e=UN(t);return e.charAt(0).toUpperCase()+e.slice(1)};var PN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const HN=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};const $N=L.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:l,...u},d)=>L.createElement("svg",{ref:d,...PN,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:vT("lucide",s),...!a&&!HN(u)&&{"aria-hidden":"true"},...u},[...l.map(([f,p])=>L.createElement(f,p)),...Array.isArray(a)?a:[a]]));const Lr=(t,e)=>{const n=L.forwardRef(({className:r,...s},a)=>L.createElement($N,{ref:a,iconNode:e,className:vT(`lucide-${BN(tx(t))}`,`lucide-${t}`,r),...s}));return n.displayName=tx(t),n};const qN=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],VN=Lr("arrow-left",qN);const FN=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],bT=Lr("chevron-left",FN);const GN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],KN=Lr("circle-check",GN);const WN=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],YN=Lr("ellipsis",WN);const JN=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],wT=Lr("external-link",JN);const XN=[["path",{d:"M10.3 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v10l-3.1-3.1a2 2 0 0 0-2.814.014L6 21",key:"9csbqa"}],["path",{d:"m14 19.5 3-3 3 3",key:"9vmjn0"}],["path",{d:"M17 22v-5.5",key:"1aa6fl"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]],ST=Lr("image-up",XN);const QN=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],cu=Lr("loader-circle",QN);const ZN=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],cf=Lr("pencil",ZN);const eD=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],tD=Lr("trash",eD);const nD=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],rD=Lr("triangle-alert",nD);const iD=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],sD=Lr("user",iD);const aD=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],uf=Lr("x",aD);function xT(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=xT(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function ET(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=xT(t))&&(r&&(r+=" "),r+=e);return r}const oD=(t,e)=>{const n=new Array(t.length+e.length);for(let r=0;r<t.length;r++)n[r]=t[r];for(let r=0;r<e.length;r++)n[t.length+r]=e[r];return n},lD=(t,e)=>({classGroupId:t,validator:e}),TT=(t=new Map,e=null,n)=>({nextPart:t,validators:e,classGroupId:n}),df="-",nx=[],cD="arbitrary..",uD=t=>{const e=fD(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:l=>{if(l.startsWith("[")&&l.endsWith("]"))return dD(l);const u=l.split(df),d=u[0]===""&&u.length>1?1:0;return kT(u,d,e)},getConflictingClassGroupIds:(l,u)=>{if(u){const d=r[l],f=n[l];return d?f?oD(f,d):d:f||nx}return n[l]||nx}}},kT=(t,e,n)=>{if(t.length-e===0)return n.classGroupId;const s=t[e],a=n.nextPart.get(s);if(a){const f=kT(t,e+1,a);if(f)return f}const l=n.validators;if(l===null)return;const u=e===0?t.join(df):t.slice(e).join(df),d=l.length;for(let f=0;f<d;f++){const p=l[f];if(p.validator(u))return p.classGroupId}},dD=t=>t.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=t.slice(1,-1),n=e.indexOf(":"),r=e.slice(0,n);return r?cD+r:void 0})(),fD=t=>{const{theme:e,classGroups:n}=t;return hD(n,e)},hD=(t,e)=>{const n=TT();for(const r in t){const s=t[r];qy(s,n,r,e)}return n},qy=(t,e,n,r)=>{const s=t.length;for(let a=0;a<s;a++){const l=t[a];pD(l,e,n,r)}},pD=(t,e,n,r)=>{if(typeof t=="string"){mD(t,e,n);return}if(typeof t=="function"){gD(t,e,n,r);return}yD(t,e,n,r)},mD=(t,e,n)=>{const r=t===""?e:_T(e,t);r.classGroupId=n},gD=(t,e,n,r)=>{if(vD(t)){qy(t(r),e,n,r);return}e.validators===null&&(e.validators=[]),e.validators.push(lD(n,t))},yD=(t,e,n,r)=>{const s=Object.entries(t),a=s.length;for(let l=0;l<a;l++){const[u,d]=s[l];qy(d,_T(e,u),n,r)}},_T=(t,e)=>{let n=t;const r=e.split(df),s=r.length;for(let a=0;a<s;a++){const l=r[a];let u=n.nextPart.get(l);u||(u=TT(),n.nextPart.set(l,u)),n=u}return n},vD=t=>"isThemeGetter"in t&&t.isThemeGetter===!0,bD=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=Object.create(null),r=Object.create(null);const s=(a,l)=>{n[a]=l,e++,e>t&&(e=0,r=n,n=Object.create(null))};return{get(a){let l=n[a];if(l!==void 0)return l;if((l=r[a])!==void 0)return s(a,l),l},set(a,l){a in n?n[a]=l:s(a,l)}}},Pg="!",rx=":",wD=[],ix=(t,e,n,r,s)=>({modifiers:t,hasImportantModifier:e,baseClassName:n,maybePostfixModifierPosition:r,isExternal:s}),SD=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=s=>{const a=[];let l=0,u=0,d=0,f;const p=s.length;for(let x=0;x<p;x++){const S=s[x];if(l===0&&u===0){if(S===rx){a.push(s.slice(d,x)),d=x+1;continue}if(S==="/"){f=x;continue}}S==="["?l++:S==="]"?l--:S==="("?u++:S===")"&&u--}const m=a.length===0?s:s.slice(d);let v=m,b=!1;m.endsWith(Pg)?(v=m.slice(0,-1),b=!0):m.startsWith(Pg)&&(v=m.slice(1),b=!0);const w=f&&f>d?f-d:void 0;return ix(a,b,v,w)};if(e){const s=e+rx,a=r;r=l=>l.startsWith(s)?a(l.slice(s.length)):ix(wD,!1,l,void 0,!0)}if(n){const s=r;r=a=>n({className:a,parseClassName:s})}return r},xD=t=>{const e=new Map;return t.orderSensitiveModifiers.forEach((n,r)=>{e.set(n,1e6+r)}),n=>{const r=[];let s=[];for(let a=0;a<n.length;a++){const l=n[a],u=l[0]==="[",d=e.has(l);u||d?(s.length>0&&(s.sort(),r.push(...s),s=[]),r.push(l)):s.push(l)}return s.length>0&&(s.sort(),r.push(...s)),r}},ED=t=>({cache:bD(t.cacheSize),parseClassName:SD(t),sortModifiers:xD(t),...uD(t)}),TD=/\s+/,kD=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:a}=e,l=[],u=t.trim().split(TD);let d="";for(let f=u.length-1;f>=0;f-=1){const p=u[f],{isExternal:m,modifiers:v,hasImportantModifier:b,baseClassName:w,maybePostfixModifierPosition:x}=n(p);if(m){d=p+(d.length>0?" "+d:d);continue}let S=!!x,T=r(S?w.substring(0,x):w);if(!T){if(!S){d=p+(d.length>0?" "+d:d);continue}if(T=r(w),!T){d=p+(d.length>0?" "+d:d);continue}S=!1}const O=v.length===0?"":v.length===1?v[0]:a(v).join(":"),M=b?O+Pg:O,P=M+T;if(l.indexOf(P)>-1)continue;l.push(P);const C=s(T,S);for(let R=0;R<C.length;++R){const k=C[R];l.push(M+k)}d=p+(d.length>0?" "+d:d)}return d},_D=(...t)=>{let e=0,n,r,s="";for(;e<t.length;)(n=t[e++])&&(r=CT(n))&&(s&&(s+=" "),s+=r);return s},CT=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=CT(t[r]))&&(n&&(n+=" "),n+=e);return n},CD=(t,...e)=>{let n,r,s,a;const l=d=>{const f=e.reduce((p,m)=>m(p),t());return n=ED(f),r=n.cache.get,s=n.cache.set,a=u,u(d)},u=d=>{const f=r(d);if(f)return f;const p=kD(d,n);return s(d,p),p};return a=l,(...d)=>a(_D(...d))},AD=[],en=t=>{const e=n=>n[t]||AD;return e.isThemeGetter=!0,e},AT=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,OT=/^\((?:(\w[\w-]*):)?(.+)\)$/i,OD=/^\d+\/\d+$/,RD=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,MD=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,ND=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,DD=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,jD=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,No=t=>OD.test(t),Ge=t=>!!t&&!Number.isNaN(Number(t)),ws=t=>!!t&&Number.isInteger(Number(t)),Wm=t=>t.endsWith("%")&&Ge(t.slice(0,-1)),Li=t=>RD.test(t),RT=()=>!0,LD=t=>MD.test(t)&&!ND.test(t),Vy=()=>!1,zD=t=>DD.test(t),ID=t=>jD.test(t),BD=t=>!ve(t)&&!be(t),UD=t=>qs(t,DT,Vy),ve=t=>AT.test(t),ya=t=>qs(t,jT,LD),sx=t=>qs(t,KD,Ge),PD=t=>qs(t,zT,RT),HD=t=>qs(t,LT,Vy),ax=t=>qs(t,MT,Vy),$D=t=>qs(t,NT,ID),Od=t=>qs(t,IT,zD),be=t=>OT.test(t),ac=t=>Ga(t,jT),qD=t=>Ga(t,LT),ox=t=>Ga(t,MT),VD=t=>Ga(t,DT),FD=t=>Ga(t,NT),Rd=t=>Ga(t,IT,!0),GD=t=>Ga(t,zT,!0),qs=(t,e,n)=>{const r=AT.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},Ga=(t,e,n=!1)=>{const r=OT.exec(t);return r?r[1]?e(r[1]):n:!1},MT=t=>t==="position"||t==="percentage",NT=t=>t==="image"||t==="url",DT=t=>t==="length"||t==="size"||t==="bg-size",jT=t=>t==="length",KD=t=>t==="number",LT=t=>t==="family-name",zT=t=>t==="number"||t==="weight",IT=t=>t==="shadow",WD=()=>{const t=en("color"),e=en("font"),n=en("text"),r=en("font-weight"),s=en("tracking"),a=en("leading"),l=en("breakpoint"),u=en("container"),d=en("spacing"),f=en("radius"),p=en("shadow"),m=en("inset-shadow"),v=en("text-shadow"),b=en("drop-shadow"),w=en("blur"),x=en("perspective"),S=en("aspect"),T=en("ease"),O=en("animate"),M=()=>["auto","avoid","all","avoid-page","page","left","right","column"],P=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],C=()=>[...P(),be,ve],R=()=>["auto","hidden","clip","visible","scroll"],k=()=>["auto","contain","none"],z=()=>[be,ve,d],G=()=>[No,"full","auto",...z()],le=()=>[ws,"none","subgrid",be,ve],he=()=>["auto",{span:["full",ws,be,ve]},ws,be,ve],ye=()=>[ws,"auto",be,ve],Ue=()=>["auto","min","max","fr",be,ve],ue=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],re=()=>["start","end","center","stretch","center-safe","end-safe"],I=()=>["auto",...z()],Q=()=>[No,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...z()],Y=()=>[t,be,ve],_e=()=>[...P(),ox,ax,{position:[be,ve]}],Ce=()=>["no-repeat",{repeat:["","x","y","space","round"]}],j=()=>["auto","cover","contain",VD,UD,{size:[be,ve]}],J=()=>[Wm,ac,ya],W=()=>["","none","full",f,be,ve],te=()=>["",Ge,ac,ya],ce=()=>["solid","dashed","dotted","double"],we=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Se=()=>[Ge,Wm,ox,ax],Le=()=>["","none",w,be,ve],Qe=()=>["none",Ge,be,ve],cn=()=>["none",Ge,be,ve],Rn=()=>[Ge,be,ve],st=()=>[No,"full",...z()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Li],breakpoint:[Li],color:[RT],container:[Li],"drop-shadow":[Li],ease:["in","out","in-out"],font:[BD],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Li],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Li],shadow:[Li],spacing:["px",Ge],text:[Li],"text-shadow":[Li],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",No,ve,be,S]}],container:["container"],columns:[{columns:[Ge,ve,be,u]}],"break-after":[{"break-after":M()}],"break-before":[{"break-before":M()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:C()}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:G()}],"inset-x":[{"inset-x":G()}],"inset-y":[{"inset-y":G()}],start:[{start:G()}],end:[{end:G()}],top:[{top:G()}],right:[{right:G()}],bottom:[{bottom:G()}],left:[{left:G()}],visibility:["visible","invisible","collapse"],z:[{z:[ws,"auto",be,ve]}],basis:[{basis:[No,"full","auto",u,...z()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Ge,No,"auto","initial","none",ve]}],grow:[{grow:["",Ge,be,ve]}],shrink:[{shrink:["",Ge,be,ve]}],order:[{order:[ws,"first","last","none",be,ve]}],"grid-cols":[{"grid-cols":le()}],"col-start-end":[{col:he()}],"col-start":[{"col-start":ye()}],"col-end":[{"col-end":ye()}],"grid-rows":[{"grid-rows":le()}],"row-start-end":[{row:he()}],"row-start":[{"row-start":ye()}],"row-end":[{"row-end":ye()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Ue()}],"auto-rows":[{"auto-rows":Ue()}],gap:[{gap:z()}],"gap-x":[{"gap-x":z()}],"gap-y":[{"gap-y":z()}],"justify-content":[{justify:[...ue(),"normal"]}],"justify-items":[{"justify-items":[...re(),"normal"]}],"justify-self":[{"justify-self":["auto",...re()]}],"align-content":[{content:["normal",...ue()]}],"align-items":[{items:[...re(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...re(),{baseline:["","last"]}]}],"place-content":[{"place-content":ue()}],"place-items":[{"place-items":[...re(),"baseline"]}],"place-self":[{"place-self":["auto",...re()]}],p:[{p:z()}],px:[{px:z()}],py:[{py:z()}],ps:[{ps:z()}],pe:[{pe:z()}],pt:[{pt:z()}],pr:[{pr:z()}],pb:[{pb:z()}],pl:[{pl:z()}],m:[{m:I()}],mx:[{mx:I()}],my:[{my:I()}],ms:[{ms:I()}],me:[{me:I()}],mt:[{mt:I()}],mr:[{mr:I()}],mb:[{mb:I()}],ml:[{ml:I()}],"space-x":[{"space-x":z()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":z()}],"space-y-reverse":["space-y-reverse"],size:[{size:Q()}],w:[{w:[u,"screen",...Q()]}],"min-w":[{"min-w":[u,"screen","none",...Q()]}],"max-w":[{"max-w":[u,"screen","none","prose",{screen:[l]},...Q()]}],h:[{h:["screen","lh",...Q()]}],"min-h":[{"min-h":["screen","lh","none",...Q()]}],"max-h":[{"max-h":["screen","lh",...Q()]}],"font-size":[{text:["base",n,ac,ya]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,GD,PD]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Wm,ve]}],"font-family":[{font:[qD,HD,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,be,ve]}],"line-clamp":[{"line-clamp":[Ge,"none",be,sx]}],leading:[{leading:[a,...z()]}],"list-image":[{"list-image":["none",be,ve]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",be,ve]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:Y()}],"text-color":[{text:Y()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ce(),"wavy"]}],"text-decoration-thickness":[{decoration:[Ge,"from-font","auto",be,ya]}],"text-decoration-color":[{decoration:Y()}],"underline-offset":[{"underline-offset":[Ge,"auto",be,ve]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:z()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",be,ve]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",be,ve]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:_e()}],"bg-repeat":[{bg:Ce()}],"bg-size":[{bg:j()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},ws,be,ve],radial:["",be,ve],conic:[ws,be,ve]},FD,$D]}],"bg-color":[{bg:Y()}],"gradient-from-pos":[{from:J()}],"gradient-via-pos":[{via:J()}],"gradient-to-pos":[{to:J()}],"gradient-from":[{from:Y()}],"gradient-via":[{via:Y()}],"gradient-to":[{to:Y()}],rounded:[{rounded:W()}],"rounded-s":[{"rounded-s":W()}],"rounded-e":[{"rounded-e":W()}],"rounded-t":[{"rounded-t":W()}],"rounded-r":[{"rounded-r":W()}],"rounded-b":[{"rounded-b":W()}],"rounded-l":[{"rounded-l":W()}],"rounded-ss":[{"rounded-ss":W()}],"rounded-se":[{"rounded-se":W()}],"rounded-ee":[{"rounded-ee":W()}],"rounded-es":[{"rounded-es":W()}],"rounded-tl":[{"rounded-tl":W()}],"rounded-tr":[{"rounded-tr":W()}],"rounded-br":[{"rounded-br":W()}],"rounded-bl":[{"rounded-bl":W()}],"border-w":[{border:te()}],"border-w-x":[{"border-x":te()}],"border-w-y":[{"border-y":te()}],"border-w-s":[{"border-s":te()}],"border-w-e":[{"border-e":te()}],"border-w-t":[{"border-t":te()}],"border-w-r":[{"border-r":te()}],"border-w-b":[{"border-b":te()}],"border-w-l":[{"border-l":te()}],"divide-x":[{"divide-x":te()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":te()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ce(),"hidden","none"]}],"divide-style":[{divide:[...ce(),"hidden","none"]}],"border-color":[{border:Y()}],"border-color-x":[{"border-x":Y()}],"border-color-y":[{"border-y":Y()}],"border-color-s":[{"border-s":Y()}],"border-color-e":[{"border-e":Y()}],"border-color-t":[{"border-t":Y()}],"border-color-r":[{"border-r":Y()}],"border-color-b":[{"border-b":Y()}],"border-color-l":[{"border-l":Y()}],"divide-color":[{divide:Y()}],"outline-style":[{outline:[...ce(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Ge,be,ve]}],"outline-w":[{outline:["",Ge,ac,ya]}],"outline-color":[{outline:Y()}],shadow:[{shadow:["","none",p,Rd,Od]}],"shadow-color":[{shadow:Y()}],"inset-shadow":[{"inset-shadow":["none",m,Rd,Od]}],"inset-shadow-color":[{"inset-shadow":Y()}],"ring-w":[{ring:te()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:Y()}],"ring-offset-w":[{"ring-offset":[Ge,ya]}],"ring-offset-color":[{"ring-offset":Y()}],"inset-ring-w":[{"inset-ring":te()}],"inset-ring-color":[{"inset-ring":Y()}],"text-shadow":[{"text-shadow":["none",v,Rd,Od]}],"text-shadow-color":[{"text-shadow":Y()}],opacity:[{opacity:[Ge,be,ve]}],"mix-blend":[{"mix-blend":[...we(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":we()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Ge]}],"mask-image-linear-from-pos":[{"mask-linear-from":Se()}],"mask-image-linear-to-pos":[{"mask-linear-to":Se()}],"mask-image-linear-from-color":[{"mask-linear-from":Y()}],"mask-image-linear-to-color":[{"mask-linear-to":Y()}],"mask-image-t-from-pos":[{"mask-t-from":Se()}],"mask-image-t-to-pos":[{"mask-t-to":Se()}],"mask-image-t-from-color":[{"mask-t-from":Y()}],"mask-image-t-to-color":[{"mask-t-to":Y()}],"mask-image-r-from-pos":[{"mask-r-from":Se()}],"mask-image-r-to-pos":[{"mask-r-to":Se()}],"mask-image-r-from-color":[{"mask-r-from":Y()}],"mask-image-r-to-color":[{"mask-r-to":Y()}],"mask-image-b-from-pos":[{"mask-b-from":Se()}],"mask-image-b-to-pos":[{"mask-b-to":Se()}],"mask-image-b-from-color":[{"mask-b-from":Y()}],"mask-image-b-to-color":[{"mask-b-to":Y()}],"mask-image-l-from-pos":[{"mask-l-from":Se()}],"mask-image-l-to-pos":[{"mask-l-to":Se()}],"mask-image-l-from-color":[{"mask-l-from":Y()}],"mask-image-l-to-color":[{"mask-l-to":Y()}],"mask-image-x-from-pos":[{"mask-x-from":Se()}],"mask-image-x-to-pos":[{"mask-x-to":Se()}],"mask-image-x-from-color":[{"mask-x-from":Y()}],"mask-image-x-to-color":[{"mask-x-to":Y()}],"mask-image-y-from-pos":[{"mask-y-from":Se()}],"mask-image-y-to-pos":[{"mask-y-to":Se()}],"mask-image-y-from-color":[{"mask-y-from":Y()}],"mask-image-y-to-color":[{"mask-y-to":Y()}],"mask-image-radial":[{"mask-radial":[be,ve]}],"mask-image-radial-from-pos":[{"mask-radial-from":Se()}],"mask-image-radial-to-pos":[{"mask-radial-to":Se()}],"mask-image-radial-from-color":[{"mask-radial-from":Y()}],"mask-image-radial-to-color":[{"mask-radial-to":Y()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":P()}],"mask-image-conic-pos":[{"mask-conic":[Ge]}],"mask-image-conic-from-pos":[{"mask-conic-from":Se()}],"mask-image-conic-to-pos":[{"mask-conic-to":Se()}],"mask-image-conic-from-color":[{"mask-conic-from":Y()}],"mask-image-conic-to-color":[{"mask-conic-to":Y()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:_e()}],"mask-repeat":[{mask:Ce()}],"mask-size":[{mask:j()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",be,ve]}],filter:[{filter:["","none",be,ve]}],blur:[{blur:Le()}],brightness:[{brightness:[Ge,be,ve]}],contrast:[{contrast:[Ge,be,ve]}],"drop-shadow":[{"drop-shadow":["","none",b,Rd,Od]}],"drop-shadow-color":[{"drop-shadow":Y()}],grayscale:[{grayscale:["",Ge,be,ve]}],"hue-rotate":[{"hue-rotate":[Ge,be,ve]}],invert:[{invert:["",Ge,be,ve]}],saturate:[{saturate:[Ge,be,ve]}],sepia:[{sepia:["",Ge,be,ve]}],"backdrop-filter":[{"backdrop-filter":["","none",be,ve]}],"backdrop-blur":[{"backdrop-blur":Le()}],"backdrop-brightness":[{"backdrop-brightness":[Ge,be,ve]}],"backdrop-contrast":[{"backdrop-contrast":[Ge,be,ve]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Ge,be,ve]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Ge,be,ve]}],"backdrop-invert":[{"backdrop-invert":["",Ge,be,ve]}],"backdrop-opacity":[{"backdrop-opacity":[Ge,be,ve]}],"backdrop-saturate":[{"backdrop-saturate":[Ge,be,ve]}],"backdrop-sepia":[{"backdrop-sepia":["",Ge,be,ve]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":z()}],"border-spacing-x":[{"border-spacing-x":z()}],"border-spacing-y":[{"border-spacing-y":z()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",be,ve]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Ge,"initial",be,ve]}],ease:[{ease:["linear","initial",T,be,ve]}],delay:[{delay:[Ge,be,ve]}],animate:[{animate:["none",O,be,ve]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[x,be,ve]}],"perspective-origin":[{"perspective-origin":C()}],rotate:[{rotate:Qe()}],"rotate-x":[{"rotate-x":Qe()}],"rotate-y":[{"rotate-y":Qe()}],"rotate-z":[{"rotate-z":Qe()}],scale:[{scale:cn()}],"scale-x":[{"scale-x":cn()}],"scale-y":[{"scale-y":cn()}],"scale-z":[{"scale-z":cn()}],"scale-3d":["scale-3d"],skew:[{skew:Rn()}],"skew-x":[{"skew-x":Rn()}],"skew-y":[{"skew-y":Rn()}],transform:[{transform:[be,ve,"","none","gpu","cpu"]}],"transform-origin":[{origin:C()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:st()}],"translate-x":[{"translate-x":st()}],"translate-y":[{"translate-y":st()}],"translate-z":[{"translate-z":st()}],"translate-none":["translate-none"],accent:[{accent:Y()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:Y()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",be,ve]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":z()}],"scroll-mx":[{"scroll-mx":z()}],"scroll-my":[{"scroll-my":z()}],"scroll-ms":[{"scroll-ms":z()}],"scroll-me":[{"scroll-me":z()}],"scroll-mt":[{"scroll-mt":z()}],"scroll-mr":[{"scroll-mr":z()}],"scroll-mb":[{"scroll-mb":z()}],"scroll-ml":[{"scroll-ml":z()}],"scroll-p":[{"scroll-p":z()}],"scroll-px":[{"scroll-px":z()}],"scroll-py":[{"scroll-py":z()}],"scroll-ps":[{"scroll-ps":z()}],"scroll-pe":[{"scroll-pe":z()}],"scroll-pt":[{"scroll-pt":z()}],"scroll-pr":[{"scroll-pr":z()}],"scroll-pb":[{"scroll-pb":z()}],"scroll-pl":[{"scroll-pl":z()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",be,ve]}],fill:[{fill:["none",...Y()]}],"stroke-w":[{stroke:[Ge,ac,ya,sx]}],stroke:[{stroke:["none",...Y()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},YD=CD(WD);function lh(...t){return YD(ET(t))}function JD({className:t,...e}){return A.jsx(cu,{role:"status","aria-label":"Loading",className:lh("size-4 animate-spin",t),...e})}function ch(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function XD(t,e,n,r){function s(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function u(p){try{f(r.next(p))}catch(m){l(m)}}function d(p){try{f(r.throw(p))}catch(m){l(m)}}function f(p){p.done?a(p.value):s(p.value).then(u,d)}f((r=r.apply(t,e||[])).next())})}const QD=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class Fy extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class ZD extends Fy{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class lx extends Fy{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class cx extends Fy{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Hg;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Hg||(Hg={}));class e2{constructor(e,{headers:n={},customFetch:r,region:s=Hg.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=QD(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return XD(this,arguments,void 0,function*(n,r={}){var s;let a,l;try{const{headers:u,method:d,body:f,signal:p,timeout:m}=r;let v={},{region:b}=r;b||(b=this.region);const w=new URL(`${this.url}/${n}`);b&&b!=="any"&&(v["x-region"]=b,w.searchParams.set("forceFunctionRegion",b));let x;f&&(u&&!Object.prototype.hasOwnProperty.call(u,"Content-Type")||!u)?typeof Blob<"u"&&f instanceof Blob||f instanceof ArrayBuffer?(v["Content-Type"]="application/octet-stream",x=f):typeof f=="string"?(v["Content-Type"]="text/plain",x=f):typeof FormData<"u"&&f instanceof FormData?x=f:(v["Content-Type"]="application/json",x=JSON.stringify(f)):f&&typeof f!="string"&&!(typeof Blob<"u"&&f instanceof Blob)&&!(f instanceof ArrayBuffer)&&!(typeof FormData<"u"&&f instanceof FormData)?x=JSON.stringify(f):x=f;let S=p;m&&(l=new AbortController,a=setTimeout(()=>l.abort(),m),p?(S=l.signal,p.addEventListener("abort",()=>l.abort())):S=l.signal);const T=yield this.fetch(w.toString(),{method:d||"POST",headers:Object.assign(Object.assign(Object.assign({},v),this.headers),u),body:x,signal:S}).catch(C=>{throw new ZD(C)}),O=T.headers.get("x-relay-error");if(O&&O==="true")throw new lx(T);if(!T.ok)throw new cx(T);let M=((s=T.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),P;return M==="application/json"?P=yield T.json():M==="application/octet-stream"||M==="application/pdf"?P=yield T.blob():M==="text/event-stream"?P=T:M==="multipart/form-data"?P=yield T.formData():P=yield T.text(),{data:P,error:null,response:T}}catch(u){return{data:null,error:u,response:u instanceof cx||u instanceof lx?u.context:void 0}}finally{a&&clearTimeout(a)}})}}var t2=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},n2=class{constructor(t){var e,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{let l=null,u=null,d=null,f=a.status,p=a.statusText;if(a.ok){var m,v;if(n.method!=="HEAD"){var b;const T=await a.text();T===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((b=n.headers.get("Accept"))===null||b===void 0)&&b.includes("application/vnd.pgrst.plan+text"))?u=T:u=JSON.parse(T))}const x=(m=n.headers.get("Prefer"))===null||m===void 0?void 0:m.match(/count=(exact|planned|estimated)/),S=(v=a.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");x&&S&&S.length>1&&(d=parseInt(S[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(u)&&(u.length>1?(l={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,d=null,f=406,p="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{var w;const x=await a.text();try{l=JSON.parse(x),Array.isArray(l)&&a.status===404&&(u=[],l=null,f=200,p="OK")}catch{a.status===404&&x===""?(f=204,p="No Content"):l={message:x}}if(l&&n.isMaybeSingle&&(!(l==null||(w=l.details)===null||w===void 0)&&w.includes("0 rows"))&&(l=null,f=200,p="OK"),l&&n.shouldThrowOnError)throw new t2(l)}return{error:l,data:u,count:d,status:f,statusText:p}});return this.shouldThrowOnError||(s=s.catch(a=>{var l;let u="";const d=a?.cause;if(d){var f,p,m,v;const w=(f=d?.message)!==null&&f!==void 0?f:"",x=(p=d?.code)!==null&&p!==void 0?p:"";u=`${(m=a?.name)!==null&&m!==void 0?m:"FetchError"}: ${a?.message}`,u+=`

Caused by: ${(v=d?.name)!==null&&v!==void 0?v:"Error"}: ${w}`,x&&(u+=` (${x})`),d?.stack&&(u+=`
${d.stack}`)}else{var b;u=(b=a?.stack)!==null&&b!==void 0?b:""}return{error:{message:`${(l=a?.name)!==null&&l!==void 0?l:"FetchError"}: ${a?.message}`,details:u,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(t,e)}returns(){return this}overrideTypes(){return this}},r2=class extends n2{select(t){let e=!1;const n=(t??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:r,referencedTable:s=r}={}){const a=s?`${s}.order`:"order",l=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${l?`${l},`:""}${t}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"offset":`${r}.offset`,a=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${t}`),this.url.searchParams.set(a,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:r=!1,wal:s=!1,format:a="text"}={}){var l;const u=[t?"analyze":null,e?"verbose":null,n?"settings":null,r?"buffers":null,s?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${d}"; options=${u};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const ux=new RegExp("[,()]");var Fo=class extends r2{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&ux.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}notIn(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&ux.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`not.in.(${n})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:r}={}){let s="";r==="plain"?s="pl":r==="phrase"?s="ph":r==="websearch"&&(s="w");const a=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${s}fts${a}.${e}`),this}match(t){return Object.entries(t).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}},i2=class{constructor(t,{headers:e={},schema:n,fetch:r}){this.url=t,this.headers=new Headers(e),this.schema=n,this.fetch=r}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(t,e){const{head:n=!1,count:r}=e??{},s=n?"HEAD":"GET";let a=!1;const l=(t??"*").split("").map(f=>/\s/.test(f)&&!a?"":(f==='"'&&(a=!a),f)).join(""),{url:u,headers:d}=this.cloneRequestState();return u.searchParams.set("select",l),r&&d.append("Prefer",`count=${r}`),new Fo({method:s,url:u,headers:d,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:n=!0}={}){var r;const s="POST",{url:a,headers:l}=this.cloneRequestState();if(e&&l.append("Prefer",`count=${e}`),n||l.append("Prefer","missing=default"),Array.isArray(t)){const u=t.reduce((d,f)=>d.concat(Object.keys(f)),[]);if(u.length>0){const d=[...new Set(u)].map(f=>`"${f}"`);a.searchParams.set("columns",d.join(","))}}return new Fo({method:s,url:a,headers:l,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:r,defaultToNull:s=!0}={}){var a;const l="POST",{url:u,headers:d}=this.cloneRequestState();if(d.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),e!==void 0&&u.searchParams.set("on_conflict",e),r&&d.append("Prefer",`count=${r}`),s||d.append("Prefer","missing=default"),Array.isArray(t)){const f=t.reduce((p,m)=>p.concat(Object.keys(m)),[]);if(f.length>0){const p=[...new Set(f)].map(m=>`"${m}"`);u.searchParams.set("columns",p.join(","))}}return new Fo({method:l,url:u,headers:d,schema:this.schema,body:t,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(t,{count:e}={}){var n;const r="PATCH",{url:s,headers:a}=this.cloneRequestState();return e&&a.append("Prefer",`count=${e}`),new Fo({method:r,url:s,headers:a,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var e;const n="DELETE",{url:r,headers:s}=this.cloneRequestState();return t&&s.append("Prefer",`count=${t}`),new Fo({method:n,url:r,headers:s,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},s2=class BT{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=s}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new i2(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new BT(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:a}={}){var l;let u;const d=new URL(`${this.url}/rpc/${e}`);let f;const p=b=>b!==null&&typeof b=="object"&&(!Array.isArray(b)||b.some(p)),m=r&&Object.values(n).some(p);m?(u="POST",f=n):r||s?(u=r?"HEAD":"GET",Object.entries(n).filter(([b,w])=>w!==void 0).map(([b,w])=>[b,Array.isArray(w)?`{${w.join(",")}}`:`${w}`]).forEach(([b,w])=>{d.searchParams.append(b,w)})):(u="POST",f=n);const v=new Headers(this.headers);return m?v.set("Prefer",a?`count=${a},return=minimal`:"return=minimal"):a&&v.set("Prefer",`count=${a}`),new Fo({method:u,url:d,headers:v,schema:this.schemaName,body:f,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}};class a2{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const n=globalThis.process;if(n){const r=n.versions;if(r&&r.node){const s=r.node,a=parseInt(s.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const o2="2.93.3",l2=`realtime-js/${o2}`,c2="1.0.0",UT="2.0.0",dx=UT,$g=1e4,u2=1e3,d2=100;var Ts;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Ts||(Ts={}));var tn;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(tn||(tn={}));var Kr;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Kr||(Kr={}));var qg;(function(t){t.websocket="websocket"})(qg||(qg={}));var Ea;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Ea||(Ea={}));class f2{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r;const s=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(e){var n,r;const s=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},l=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,l)}_encodeUserBroadcastPush(e,n,r){var s,a;const l=e.topic,u=(s=e.ref)!==null&&s!==void 0?s:"",d=(a=e.join_ref)!==null&&a!==void 0?a:"",f=e.payload.event,p=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},m=Object.keys(p).length===0?"":JSON.stringify(p);if(d.length>255)throw new Error(`joinRef length ${d.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`ref length ${u.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`topic length ${l.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`userEvent length ${f.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`metadata length ${m.length} exceeds maximum of 255`);const v=this.USER_BROADCAST_PUSH_META_LENGTH+d.length+u.length+l.length+f.length+m.length,b=new ArrayBuffer(this.HEADER_LENGTH+v);let w=new DataView(b),x=0;w.setUint8(x++,this.KINDS.userBroadcastPush),w.setUint8(x++,d.length),w.setUint8(x++,u.length),w.setUint8(x++,l.length),w.setUint8(x++,f.length),w.setUint8(x++,m.length),w.setUint8(x++,n),Array.from(d,T=>w.setUint8(x++,T.charCodeAt(0))),Array.from(u,T=>w.setUint8(x++,T.charCodeAt(0))),Array.from(l,T=>w.setUint8(x++,T.charCodeAt(0))),Array.from(f,T=>w.setUint8(x++,T.charCodeAt(0))),Array.from(m,T=>w.setUint8(x++,T.charCodeAt(0)));var S=new Uint8Array(b.byteLength+r.byteLength);return S.set(new Uint8Array(b),0),S.set(new Uint8Array(r),b.byteLength),S.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){const r=JSON.parse(e),[s,a,l,u,d]=r;return n({join_ref:s,ref:a,topic:l,event:u,payload:d})}return n({})}_binaryDecode(e){const n=new DataView(e),r=n.getUint8(0),s=new TextDecoder;if(r===this.KINDS.userBroadcast)return this._decodeUserBroadcast(e,n,s)}_decodeUserBroadcast(e,n,r){const s=n.getUint8(1),a=n.getUint8(2),l=n.getUint8(3),u=n.getUint8(4);let d=this.HEADER_LENGTH+4;const f=r.decode(e.slice(d,d+s));d=d+s;const p=r.decode(e.slice(d,d+a));d=d+a;const m=r.decode(e.slice(d,d+l));d=d+l;const v=e.slice(d,e.byteLength),b=u===this.JSON_ENCODING?JSON.parse(r.decode(v)):v,w={type:this.BROADCAST_EVENT,event:p,payload:b};return l>0&&(w.meta=JSON.parse(m)),{join_ref:null,ref:null,topic:f,event:this.BROADCAST_EVENT,payload:w}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e?.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>n.includes(r)))}}class PT{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var bt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(bt||(bt={}));const fx=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((a,l)=>(a[l]=h2(l,t,e,s),a),{}):{}},h2=(t,e,n,r)=>{const s=e.find(u=>u.name===t),a=s?.type,l=n[t];return a&&!r.includes(a)?HT(a,l):Vg(l)},HT=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return y2(e,n)}switch(t){case bt.bool:return p2(e);case bt.float4:case bt.float8:case bt.int2:case bt.int4:case bt.int8:case bt.numeric:case bt.oid:return m2(e);case bt.json:case bt.jsonb:return g2(e);case bt.timestamp:return v2(e);case bt.abstime:case bt.date:case bt.daterange:case bt.int4range:case bt.int8range:case bt.money:case bt.reltime:case bt.text:case bt.time:case bt.timestamptz:case bt.timetz:case bt.tsrange:case bt.tstzrange:return Vg(e);default:return Vg(e)}},Vg=t=>t,p2=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},m2=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},g2=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},y2=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let a;const l=t.slice(1,n);try{a=JSON.parse("["+l+"]")}catch{a=l?l.split(","):[]}return a.map(u=>HT(e,u))}return t},v2=t=>typeof t=="string"?t.replace(" ","T"):t,$T=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Ym{constructor(e,n,r={},s=$g){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var hx;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(hx||(hx={}));class kc{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:a,onLeave:l,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=kc.syncState(this.state,s,a,l),this.pendingDiffs.forEach(d=>{this.state=kc.syncDiff(this.state,d,a,l)}),this.pendingDiffs=[],u()}),this.channel._on(r.diff,{},s=>{const{onJoin:a,onLeave:l,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=kc.syncDiff(this.state,s,a,l),u())}),this.onJoin((s,a,l)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:a,newPresences:l})}),this.onLeave((s,a,l)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:a,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const a=this.cloneDeep(e),l=this.transformState(n),u={},d={};return this.map(a,(f,p)=>{l[f]||(d[f]=p)}),this.map(l,(f,p)=>{const m=a[f];if(m){const v=p.map(S=>S.presence_ref),b=m.map(S=>S.presence_ref),w=p.filter(S=>b.indexOf(S.presence_ref)<0),x=m.filter(S=>v.indexOf(S.presence_ref)<0);w.length>0&&(u[f]=w),x.length>0&&(d[f]=x)}else u[f]=p}),this.syncDiff(a,{joins:u,leaves:d},r,s)}static syncDiff(e,n,r,s){const{joins:a,leaves:l}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(a,(u,d)=>{var f;const p=(f=e[u])!==null&&f!==void 0?f:[];if(e[u]=this.cloneDeep(d),p.length>0){const m=e[u].map(b=>b.presence_ref),v=p.filter(b=>m.indexOf(b.presence_ref)<0);e[u].unshift(...v)}r(u,p,d)}),this.map(l,(u,d)=>{let f=e[u];if(!f)return;const p=d.map(m=>m.presence_ref);f=f.filter(m=>p.indexOf(m.presence_ref)<0),e[u]=f,s(u,f,d),f.length===0&&delete e[u]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var px;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(px||(px={}));var _c;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(_c||(_c={}));var Hi;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Hi||(Hi={}));class Qo{constructor(e,n={config:{}},r){var s,a;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=tn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Ym(this,Kr.join,this.params,this.timeout),this.rejoinTimer=new PT(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=tn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=tn.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=tn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=tn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=tn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Kr.reply,{},(l,u)=>{this._trigger(this._replyEventName(u),l)}),this.presence=new kc(this),this.broadcastEndpointURL=$T(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,s,a;if(this.socket.isConnected()||this.socket.connect(),this.state==tn.closed){const{config:{broadcast:l,presence:u,private:d}}=this.params,f=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(b=>b.filter))!==null&&s!==void 0?s:[],p=!!this.bindings[_c.PRESENCE]&&this.bindings[_c.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,m={},v={broadcast:l,presence:Object.assign(Object.assign({},u),{enabled:p}),postgres_changes:f,private:d};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this._onError(b=>e?.(Hi.CHANNEL_ERROR,b)),this._onClose(()=>e?.(Hi.CLOSED)),this.updateJoinPayload(Object.assign({config:v},m)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:b})=>{var w;if(this.socket._isManualToken()||this.socket.setAuth(),b===void 0){e?.(Hi.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,S=(w=x?.length)!==null&&w!==void 0?w:0,T=[];for(let O=0;O<S;O++){const M=x[O],{filter:{event:P,schema:C,table:R,filter:k}}=M,z=b&&b[O];if(z&&z.event===P&&Qo.isFilterValueEqual(z.schema,C)&&Qo.isFilterValueEqual(z.table,R)&&Qo.isFilterValueEqual(z.filter,k))T.push(Object.assign(Object.assign({},M),{id:z.id}));else{this.unsubscribe(),this.state=tn.errored,e?.(Hi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=T,e&&e(Hi.SUBSCRIBED);return}}).receive("error",b=>{this.state=tn.errored,e?.(Hi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(b).join(", ")||"error")))}).receive("timeout",()=>{e?.(Hi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===tn.joined&&e===_c.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var s;if(n==null)return Promise.reject("Payload is required for httpSend()");const a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);if(u.status===202)return{success:!0};let d=u.statusText;try{const f=await u.json();d=f.error||f.message||d}catch{}return Promise.reject(new Error(d))}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:l}=e,u={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(u.Authorization=`Bearer ${this.socket.accessTokenValue}`);const d={method:"POST",headers:u,body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:l,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=f.body)===null||s===void 0?void 0:s.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var l,u,d;const f=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((d=(u=(l=this.params)===null||l===void 0?void 0:l.config)===null||u===void 0?void 0:u.broadcast)===null||d===void 0)&&d.ack)&&a("ok"),f.receive("ok",()=>a("ok")),f.receive("error",()=>a("error")),f.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=tn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Kr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new Ym(this,Kr.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=tn.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const s=new AbortController,a=setTimeout(()=>s.abort(),r),l=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(a),l}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Ym(this,e,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>d2){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,a;const l=e.toLocaleLowerCase(),{close:u,error:d,leave:f,join:p}=Kr;if(r&&[u,d,f,p].indexOf(l)>=0&&r!==this._joinRef())return;let v=this._onMessage(l,n,r);if(n&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(b=>{var w,x,S;return((w=b.filter)===null||w===void 0?void 0:w.event)==="*"||((S=(x=b.filter)===null||x===void 0?void 0:x.event)===null||S===void 0?void 0:S.toLocaleLowerCase())===l}).map(b=>b.callback(v,r)):(a=this.bindings[l])===null||a===void 0||a.filter(b=>{var w,x,S,T,O,M;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in b){const P=b.id,C=(w=b.filter)===null||w===void 0?void 0:w.event;return P&&((x=n.ids)===null||x===void 0?void 0:x.includes(P))&&(C==="*"||C?.toLocaleLowerCase()===((S=n.data)===null||S===void 0?void 0:S.type.toLocaleLowerCase()))}else{const P=(O=(T=b?.filter)===null||T===void 0?void 0:T.event)===null||O===void 0?void 0:O.toLocaleLowerCase();return P==="*"||P===((M=n?.event)===null||M===void 0?void 0:M.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===l}).map(b=>{if(typeof v=="object"&&"ids"in v){const w=v.data,{schema:x,table:S,commit_timestamp:T,type:O,errors:M}=w;v=Object.assign(Object.assign({},{schema:x,table:S,commit_timestamp:T,eventType:O,new:{},old:{},errors:M}),this._getPayloadRecords(w))}b.callback(v,r)})}_isClosed(){return this.state===tn.closed}_isJoined(){return this.state===tn.joined}_isJoining(){return this.state===tn.joining}_isLeaving(){return this.state===tn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),a={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var a;return!(((a=s.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&Qo.isEqual(s.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Kr.close,{},e)}_onError(e){this._on(Kr.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=tn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=fx(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=fx(e.columns,e.old_record)),n}}const Jm=()=>{},Md={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},b2=[1e3,2e3,5e3,1e4],w2=1e4,S2=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class x2{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=$g,this.transport=null,this.heartbeatIntervalMs=Md.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Jm,this.ref=0,this.reconnectTimer=null,this.vsn=dx,this.logger=Jm,this.conn=null,this.sendBuffer=[],this.serializer=new f2,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=s=>s?(...a)=>s(...a):(...a)=>fetch(...a),!(!((r=n?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${qg.websocket}`,this.httpEndpoint=$T(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=a2.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ts.connecting:return Ea.Connecting;case Ts.open:return Ea.Open;case Ts.closing:return Ea.Closing;default:return Ea.Closed}}isConnected(){return this.connectionState()===Ea.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(a=>a.topic===r);if(s)return s;{const a=new Qo(`realtime:${e}`,n,this);return this.channels.push(a),a}}push(e){const{topic:n,event:r,payload:s,ref:a}=e,l=()=>{this.encode(e,u=>{var d;(d=this.conn)===null||d===void 0||d.send(u)})};this.log("push",`${n} ${r} (${a})`,s),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(u2,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Md.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){const f=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",f)}catch(p){this.log("error","error in heartbeat callback",p)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:r,event:s,payload:a,ref:l}=n,u=l?`(${l})`:"",d=a.status||"";this.log("receive",`${d} ${r} ${s} ${u}`.trim(),a),this.channels.filter(f=>f._isMember(r)).forEach(f=>f._trigger(s,a,l)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===Ts.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Ts.open||this.conn.readyState===Ts.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e);try{this.heartbeatCallback("error")}catch(n){this.log("error","error in heartbeat callback",n)}}_triggerChanError(){this.channels.forEach(e=>e._trigger(Kr.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([S2],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,r=!1;if(e)n=e,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(s=>{const a={access_token:n,version:l2};n&&s.updateJoinPayload(a),s.joinedOnce&&s._isJoined()&&s._push(Kr.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new PT(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Md.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,s,a,l,u,d,f,p,m,v,b;switch(this.transport=(n=e?.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e?.timeout)!==null&&r!==void 0?r:$g,this.heartbeatIntervalMs=(s=e?.heartbeatIntervalMs)!==null&&s!==void 0?s:Md.HEARTBEAT_INTERVAL,this.worker=(a=e?.worker)!==null&&a!==void 0?a:!1,this.accessToken=(l=e?.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(u=e?.heartbeatCallback)!==null&&u!==void 0?u:Jm,this.vsn=(d=e?.vsn)!==null&&d!==void 0?d:dx,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(f=e?.reconnectAfterMs)!==null&&f!==void 0?f:(w=>b2[w-1]||w2),this.vsn){case c2:this.encode=(p=e?.encode)!==null&&p!==void 0?p:((w,x)=>x(JSON.stringify(w))),this.decode=(m=e?.decode)!==null&&m!==void 0?m:((w,x)=>x(JSON.parse(w)));break;case UT:this.encode=(v=e?.encode)!==null&&v!==void 0?v:this.serializer.encode.bind(this.serializer),this.decode=(b=e?.decode)!==null&&b!==void 0?b:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}var Pc=class extends Error{constructor(t,e){super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&e.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function E2(t,e,n){const r=new URL(e,t);if(n)for(const[s,a]of Object.entries(n))a!==void 0&&r.searchParams.set(s,a);return r.toString()}async function T2(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function k2(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:s,body:a,headers:l}){const u=E2(t.baseUrl,r,s),d=await T2(t.auth),f=await e(u,{method:n,headers:{...a?{"Content-Type":"application/json"}:{},...d,...l},body:a?JSON.stringify(a):void 0}),p=await f.text(),m=(f.headers.get("content-type")||"").includes("application/json"),v=m&&p?JSON.parse(p):p;if(!f.ok){const b=m?v:void 0,w=b?.error;throw new Pc(w?.message??`Request failed with status ${f.status}`,{status:f.status,icebergType:w?.type,icebergCode:w?.code,details:b})}return{status:f.status,headers:f.headers,data:v}}}}function Nd(t){return t.join("")}var _2=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:Nd(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Nd(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Nd(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Nd(t.namespace)}`}),!0}catch(e){if(e instanceof Pc&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof Pc&&n.status===409)return;throw n}}};function Do(t){return t.join("")}var C2=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Do(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Do(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Do(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Do(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String(e?.purge??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Do(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Do(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof Pc&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof Pc&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},A2=class{constructor(t){let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=k2({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=t.accessDelegation?.join(","),this.namespaceOps=new _2(this.client,e),this.tableOps=new C2(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},uh=class extends Error{constructor(t,e="storage",n,r){super(t),this.__isStorageError=!0,this.namespace=e,this.name=e==="vectors"?"StorageVectorsError":"StorageError",this.status=n,this.statusCode=r}};function dh(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var Dd=class extends uh{constructor(t,e,n,r="storage"){super(t,r,e,n),this.name=r==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},qT=class extends uh{constructor(t,e,n="storage"){super(t,n),this.name=n==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=e}};const O2=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),R2=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Fg=t=>{if(Array.isArray(t))return t.map(n=>Fg(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[s]=Fg(r)}),e},M2=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function Hc(t){"@babel/helpers - typeof";return Hc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hc(t)}function N2(t,e){if(Hc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Hc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function D2(t){var e=N2(t,"string");return Hc(e)=="symbol"?e:e+""}function j2(t,e,n){return(e=D2(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mx(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Ie(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mx(Object(n),!0).forEach(function(r){j2(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mx(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const gx=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},L2=async(t,e,n,r)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!n?.noResolveJson){const s=t,a=s.status||500;if(typeof s.json=="function")s.json().then(l=>{const u=l?.statusCode||l?.code||a+"";e(new Dd(gx(l),a,u,r))}).catch(()=>{if(r==="vectors"){const l=a+"";e(new Dd(s.statusText||`HTTP ${a} error`,a,l,r))}else{const l=a+"";e(new Dd(s.statusText||`HTTP ${a} error`,a,l,r))}});else{const l=a+"";e(new Dd(s.statusText||`HTTP ${a} error`,a,l,r))}}else e(new qT(gx(t),t,r))},z2=(t,e,n,r)=>{const s={method:t,headers:e?.headers||{}};return t==="GET"||t==="HEAD"||!r?Ie(Ie({},s),n):(R2(r)?(s.headers=Ie({"Content-Type":"application/json"},e?.headers),s.body=JSON.stringify(r)):s.body=r,e?.duplex&&(s.duplex=e.duplex),Ie(Ie({},s),n))};async function oc(t,e,n,r,s,a,l){return new Promise((u,d)=>{t(n,z2(e,r,s,a)).then(f=>{if(!f.ok)throw f;if(r?.noResolveJson)return f;if(l==="vectors"){const p=f.headers.get("content-type");if(f.headers.get("content-length")==="0"||f.status===204)return{};if(!p||!p.includes("application/json"))return{}}return f.json()}).then(f=>u(f)).catch(f=>L2(f,d,r,l))})}function VT(t="storage"){return{get:async(e,n,r,s)=>oc(e,"GET",n,r,s,void 0,t),post:async(e,n,r,s,a)=>oc(e,"POST",n,s,a,r,t),put:async(e,n,r,s,a)=>oc(e,"PUT",n,s,a,r,t),head:async(e,n,r,s)=>oc(e,"HEAD",n,Ie(Ie({},r),{},{noResolveJson:!0}),s,void 0,t),remove:async(e,n,r,s,a)=>oc(e,"DELETE",n,s,a,r,t)}}const I2=VT("storage"),{get:$c,post:Gr,put:Gg,head:B2,remove:Gy}=I2,or=VT("vectors");var dl=class{constructor(t,e={},n,r="storage"){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.fetch=O2(n),this.namespace=r}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(t){var e=this;try{return{data:await t(),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(dh(n))return{data:null,error:n};throw n}}},U2=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(dh(e))return{data:null,error:e};throw e}}};let FT;FT=Symbol.toStringTag;var P2=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[FT]="BlobDownloadBuilder",this.promise=null}asStream(){return new U2(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(dh(e))return{data:null,error:e};throw e}}};const H2={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},yx={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var $2=class extends dl{constructor(t,e={},n,r){super(t,e,r,"storage"),this.bucketId=n}async uploadOrUpdate(t,e,n,r){var s=this;return s.handleOperation(async()=>{let a;const l=Ie(Ie({},yx),r);let u=Ie(Ie({},s.headers),t==="POST"&&{"x-upsert":String(l.upsert)});const d=l.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",l.cacheControl),d&&a.append("metadata",s.encodeMetadata(d)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.has("cacheControl")||a.append("cacheControl",l.cacheControl),d&&!a.has("metadata")&&a.append("metadata",s.encodeMetadata(d))):(a=n,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType,d&&(u["x-metadata"]=s.toBase64(s.encodeMetadata(d))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!l.duplex&&(l.duplex="half")),r?.headers&&(u=Ie(Ie({},u),r.headers));const f=s._removeEmptyFolders(e),p=s._getFinalPath(f),m=await(t=="PUT"?Gg:Gr)(s.fetch,`${s.url}/object/${p}`,a,Ie({headers:u},l?.duplex?{duplex:l.duplex}:{}));return{path:f,id:m.Id,fullPath:m.Key}})}async upload(t,e,n){return this.uploadOrUpdate("POST",t,e,n)}async uploadToSignedUrl(t,e,n,r){var s=this;const a=s._removeEmptyFolders(t),l=s._getFinalPath(a),u=new URL(s.url+`/object/upload/sign/${l}`);return u.searchParams.set("token",e),s.handleOperation(async()=>{let d;const f=Ie({upsert:yx.upsert},r),p=Ie(Ie({},s.headers),{"x-upsert":String(f.upsert)});return typeof Blob<"u"&&n instanceof Blob?(d=new FormData,d.append("cacheControl",f.cacheControl),d.append("",n)):typeof FormData<"u"&&n instanceof FormData?(d=n,d.append("cacheControl",f.cacheControl)):(d=n,p["cache-control"]=`max-age=${f.cacheControl}`,p["content-type"]=f.contentType),{path:a,fullPath:(await Gg(s.fetch,u.toString(),d,{headers:p})).Key}})}async createSignedUploadUrl(t,e){var n=this;return n.handleOperation(async()=>{let r=n._getFinalPath(t);const s=Ie({},n.headers);e?.upsert&&(s["x-upsert"]="true");const a=await Gr(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:s}),l=new URL(n.url+a.url),u=l.searchParams.get("token");if(!u)throw new uh("No token returned by API");return{signedUrl:l.toString(),path:t,token:u}})}async update(t,e,n){return this.uploadOrUpdate("PUT",t,e,n)}async move(t,e,n){var r=this;return r.handleOperation(async()=>await Gr(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n?.destinationBucket},{headers:r.headers}))}async copy(t,e,n){var r=this;return r.handleOperation(async()=>({path:(await Gr(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n?.destinationBucket},{headers:r.headers})).Key}))}async createSignedUrl(t,e,n){var r=this;return r.handleOperation(async()=>{let s=r._getFinalPath(t),a=await Gr(r.fetch,`${r.url}/object/sign/${s}`,Ie({expiresIn:e},n?.transform?{transform:n.transform}:{}),{headers:r.headers});const l=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{signedUrl:encodeURI(`${r.url}${a.signedURL}${l}`)}})}async createSignedUrls(t,e,n){var r=this;return r.handleOperation(async()=>{const s=await Gr(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:e,paths:t},{headers:r.headers}),a=n?.download?`&download=${n.download===!0?"":n.download}`:"";return s.map(l=>Ie(Ie({},l),{},{signedUrl:l.signedURL?encodeURI(`${r.url}${l.signedURL}${a}`):null}))})}download(t,e){const n=typeof e?.transform<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString(e?.transform||{}),s=r?`?${r}`:"",a=this._getFinalPath(t),l=()=>$c(this.fetch,`${this.url}/${n}/${a}${s}`,{headers:this.headers,noResolveJson:!0});return new P2(l,this.shouldThrowOnError)}async info(t){var e=this;const n=e._getFinalPath(t);return e.handleOperation(async()=>Fg(await $c(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})))}async exists(t){var e=this;const n=e._getFinalPath(t);try{return await B2(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(dh(r)&&r instanceof qT){const s=r.originalError;if([400,404].includes(s?.status))return{data:!1,error:r}}throw r}}getPublicUrl(t,e){const n=this._getFinalPath(t),r=[],s=e?.download?`download=${e.download===!0?"":e.download}`:"";s!==""&&r.push(s);const a=typeof e?.transform<"u"?"render/image":"object",l=this.transformOptsToQueryString(e?.transform||{});l!==""&&r.push(l);let u=r.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${u}`)}}}async remove(t){var e=this;return e.handleOperation(async()=>await Gy(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}))}async list(t,e,n){var r=this;return r.handleOperation(async()=>{const s=Ie(Ie(Ie({},H2),e),{},{prefix:t||""});return await Gr(r.fetch,`${r.url}/object/list/${r.bucketId}`,s,{headers:r.headers},n)})}async listV2(t,e){var n=this;return n.handleOperation(async()=>{const r=Ie({},t);return await Gr(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},e)})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const q2="2.93.3",uu={"X-Client-Info":`storage-js/${q2}`};var V2=class extends dl{constructor(t,e={},n,r){const s=new URL(t);r?.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase."));const a=s.href.replace(/\/$/,""),l=Ie(Ie({},uu),e);super(a,l,n,"storage")}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const n=e.listBucketOptionsToQueryString(t);return await $c(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers})})}async getBucket(t){var e=this;return e.handleOperation(async()=>await $c(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}))}async createBucket(t,e={public:!1}){var n=this;return n.handleOperation(async()=>await Gr(n.fetch,`${n.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}))}async updateBucket(t,e){var n=this;return n.handleOperation(async()=>await Gg(n.fetch,`${n.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}))}async emptyBucket(t){var e=this;return e.handleOperation(async()=>await Gr(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await Gy(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},F2=class extends dl{constructor(t,e={},n){const r=t.replace(/\/$/,""),s=Ie(Ie({},uu),e);super(r,s,n,"storage")}async createBucket(t){var e=this;return e.handleOperation(async()=>await Gr(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}))}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const n=new URLSearchParams;t?.limit!==void 0&&n.set("limit",t.limit.toString()),t?.offset!==void 0&&n.set("offset",t.offset.toString()),t?.sortColumn&&n.set("sortColumn",t.sortColumn),t?.sortOrder&&n.set("sortOrder",t.sortOrder),t?.search&&n.set("search",t.search);const r=n.toString(),s=r?`${e.url}/bucket?${r}`:`${e.url}/bucket`;return await $c(e.fetch,s,{headers:e.headers})})}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await Gy(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}from(t){var e=this;if(!M2(t))throw new uh("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new A2({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(s,a){const l=s[a];return typeof l!="function"?l:async(...u)=>{try{return{data:await l.apply(s,u),error:null}}catch(d){if(r)throw d;return{data:null,error:d}}}}})}},G2=class extends dl{constructor(t,e={},n){const r=t.replace(/\/$/,""),s=Ie(Ie({},uu),{},{"Content-Type":"application/json"},e);super(r,s,n,"vectors")}async createIndex(t){var e=this;return e.handleOperation(async()=>await or.post(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{})}async getIndex(t,e){var n=this;return n.handleOperation(async()=>await or.post(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers}))}async listIndexes(t){var e=this;return e.handleOperation(async()=>await or.post(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}))}async deleteIndex(t,e){var n=this;return n.handleOperation(async()=>await or.post(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers})||{})}},K2=class extends dl{constructor(t,e={},n){const r=t.replace(/\/$/,""),s=Ie(Ie({},uu),{},{"Content-Type":"application/json"},e);super(r,s,n,"vectors")}async putVectors(t){var e=this;if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return e.handleOperation(async()=>await or.post(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{})}async getVectors(t){var e=this;return e.handleOperation(async()=>await or.post(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}))}async listVectors(t){var e=this;if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return e.handleOperation(async()=>await or.post(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}))}async queryVectors(t){var e=this;return e.handleOperation(async()=>await or.post(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}))}async deleteVectors(t){var e=this;if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return e.handleOperation(async()=>await or.post(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{})}},W2=class extends dl{constructor(t,e={},n){const r=t.replace(/\/$/,""),s=Ie(Ie({},uu),{},{"Content-Type":"application/json"},e);super(r,s,n,"vectors")}async createBucket(t){var e=this;return e.handleOperation(async()=>await or.post(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}async getBucket(t){var e=this;return e.handleOperation(async()=>await or.post(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}))}async listBuckets(t={}){var e=this;return e.handleOperation(async()=>await or.post(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await or.post(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}},Y2=class extends W2{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new J2(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,n=this;return e().call(n,t)}async getBucket(t){var e=()=>super.getBucket,n=this;return e().call(n,t)}async listBuckets(t={}){var e=()=>super.listBuckets,n=this;return e().call(n,t)}async deleteBucket(t){var e=()=>super.deleteBucket,n=this;return e().call(n,t)}},J2=class extends G2{constructor(t,e,n,r){super(t,e,r),this.vectorBucketName=n}async createIndex(t){var e=()=>super.createIndex,n=this;return e().call(n,Ie(Ie({},t),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,n=this;return e().call(n,Ie(Ie({},t),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,n=this;return e().call(n,n.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,n=this;return e().call(n,n.vectorBucketName,t)}index(t){return new X2(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},X2=class extends K2{constructor(t,e,n,r,s){super(t,e,s),this.vectorBucketName=n,this.indexName=r}async putVectors(t){var e=()=>super.putVectors,n=this;return e().call(n,Ie(Ie({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(t){var e=()=>super.getVectors,n=this;return e().call(n,Ie(Ie({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,n=this;return e().call(n,Ie(Ie({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,n=this;return e().call(n,Ie(Ie({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,n=this;return e().call(n,Ie(Ie({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},Q2=class extends V2{constructor(t,e={},n,r){super(t,e,n,r)}from(t){return new $2(this.url,this.headers,t,this.fetch)}get vectors(){return new Y2(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new F2(this.url+"/iceberg",this.headers,this.fetch)}};const GT="2.93.3",Go=30*1e3,Kg=3,Xm=Kg*Go,Z2="http://localhost:9999",ej="supabase.auth.token",tj={"X-Client-Info":`gotrue-js/${GT}`},Wg="X-Supabase-Api-Version",KT={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},nj=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,rj=600*1e3;class qc extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function ke(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class ij extends qc{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function sj(t){return ke(t)&&t.name==="AuthApiError"}class Ta extends qc{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Ki extends qc{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class sr extends Ki{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Qm(t){return ke(t)&&t.name==="AuthSessionMissingError"}class jo extends Ki{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class jd extends Ki{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ld extends Ki{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function aj(t){return ke(t)&&t.name==="AuthImplicitGrantRedirectError"}class vx extends Ki{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class oj extends Ki{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Yg extends Ki{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Zm(t){return ke(t)&&t.name==="AuthRetryableFetchError"}class bx extends Ki{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Jg extends Ki{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const ff="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),wx=` 	
\r=`.split(""),lj=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<wx.length;e+=1)t[wx[e].charCodeAt(0)]=-2;for(let e=0;e<ff.length;e+=1)t[ff[e].charCodeAt(0)]=e;return t})();function Sx(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(ff[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(ff[r]),e.queuedBits-=6}}function WT(t,e,n){const r=lj[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function xx(t){const e=[],n=l=>{e.push(String.fromCodePoint(l))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},a=l=>{dj(l,r,n)};for(let l=0;l<t.length;l+=1)WT(t.charCodeAt(l),s,a);return e.join("")}function cj(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function uj(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}cj(r,e)}}function dj(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if((t>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function tl(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)WT(t.charCodeAt(s),n,r);return new Uint8Array(e)}function fj(t){const e=[];return uj(t,n=>e.push(n)),new Uint8Array(e)}function Ca(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>Sx(s,n,r)),Sx(null,n,r),e.join("")}function hj(t){return Math.round(Date.now()/1e3)+t}function pj(){return Symbol("auth-callback")}const vn=()=>typeof window<"u"&&typeof document<"u",va={tested:!1,writable:!1},YT=()=>{if(!vn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(va.tested)return va.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),va.tested=!0,va.writable=!0}catch{va.tested=!0,va.writable=!1}return va.writable};function mj(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,a)=>{e[a]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const JT=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),gj=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Ko=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},ba=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},yn=async(t,e)=>{await t.removeItem(e)};class fh{constructor(){this.promise=new fh.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}fh.promiseConstructor=Promise;function zd(t){const e=t.split(".");if(e.length!==3)throw new Jg("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!nj.test(e[r]))throw new Jg("JWT not in base64url format");return{header:JSON.parse(xx(e[0])),payload:JSON.parse(xx(e[1])),signature:tl(e[2]),raw:{header:e[0],payload:e[1]}}}async function yj(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function vj(t,e){return new Promise((r,s)=>{(async()=>{for(let a=0;a<1/0;a++)try{const l=await t(a);if(!e(a,null,l)){r(l);return}}catch(l){if(!e(a,l)){s(l);return}}})()})}function bj(t){return("0"+t.toString(16)).substr(-2)}function wj(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let a=0;a<56;a++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,bj).join("")}async function Sj(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(a=>String.fromCharCode(a)).join("")}async function xj(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await Sj(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Lo(t,e,n=!1){const r=wj();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Ko(t,`${e}-code-verifier`,s);const a=await xj(r);return[a,r===a?"plain":"s256"]}const Ej=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Tj(t){const e=t.headers.get(Wg);if(!e||!e.match(Ej))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function kj(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function _j(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Cj=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function zo(t){if(!Cj.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function eg(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Aj(t,e){return new Proxy(t,{get:(n,r,s)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const a=r.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,s)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,s)}})}function Ex(t){return JSON.parse(JSON.stringify(t))}const xa=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Oj=[502,503,504];async function Tx(t){var e;if(!gj(t))throw new Yg(xa(t),0);if(Oj.includes(t.status))throw new Yg(xa(t),t.status);let n;try{n=await t.json()}catch(a){throw new Ta(xa(a),a)}let r;const s=Tj(t);if(s&&s.getTime()>=KT["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new bx(xa(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new sr}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,l)=>a&&typeof l=="string",!0))throw new bx(xa(n),t.status,n.weak_password.reasons);throw new ij(xa(n),t.status||500,r)}const Rj=(t,e,n,r)=>{const s={method:t,headers:e?.headers||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function je(t,e,n,r){var s;const a=Object.assign({},r?.headers);a[Wg]||(a[Wg]=KT["2024-01-01"].name),r?.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const l=(s=r?.query)!==null&&s!==void 0?s:{};r?.redirectTo&&(l.redirect_to=r.redirectTo);const u=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",d=await Mj(t,e,n+u,{headers:a,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(d):{data:Object.assign({},d),error:null}}async function Mj(t,e,n,r,s,a){const l=Rj(e,r,s,a);let u;try{u=await t(n,Object.assign({},l))}catch(d){throw console.error(d),new Yg(xa(d),0)}if(u.ok||await Tx(u),r?.noResolveJson)return u;try{return await u.json()}catch(d){await Tx(d)}}function Fr(t){var e;let n=null;jj(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=hj(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function kx(t){const e=Fr(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Rs(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Nj(t){return{data:t,error:null}}function Dj(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:a}=t,l=ch(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:a},d=Object.assign({},l);return{data:{properties:u,user:d},error:null}}function _x(t){return t}function jj(t){return t.access_token&&t.refresh_token&&t.expires_in}const tg=["global","local","others"];class Lj{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=JT(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=tg[0]){if(tg.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${tg.join(", ")}`);try{return await je(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ke(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await je(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Rs})}catch(r){if(ke(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=ch(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r?.newEmail,delete s.newEmail),await je(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Dj,redirectTo:n?.redirectTo})}catch(n){if(ke(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await je(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Rs})}catch(n){if(ke(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,a,l,u,d;try{const f={nextPage:null,lastPage:0,total:0},p=await je(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(s=e?.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:_x});if(p.error)throw p.error;const m=await p.json(),v=(l=p.headers.get("x-total-count"))!==null&&l!==void 0?l:0,b=(d=(u=p.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return b.length>0&&(b.forEach(w=>{const x=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(w.split(";")[1].split("=")[1]);f[`${S}Page`]=x}),f.total=parseInt(v)),{data:Object.assign(Object.assign({},m),f),error:null}}catch(f){if(ke(f))return{data:{users:[]},error:f};throw f}}async getUserById(e){zo(e);try{return await je(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Rs})}catch(n){if(ke(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){zo(e);try{return await je(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Rs})}catch(r){if(ke(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){zo(e);try{return await je(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Rs})}catch(r){if(ke(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){zo(e.userId);try{const{data:n,error:r}=await je(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(ke(n))return{data:null,error:n};throw n}}async _deleteFactor(e){zo(e.userId),zo(e.id);try{return{data:await je(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(ke(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,s,a,l,u,d;try{const f={nextPage:null,lastPage:0,total:0},p=await je(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(s=e?.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:_x});if(p.error)throw p.error;const m=await p.json(),v=(l=p.headers.get("x-total-count"))!==null&&l!==void 0?l:0,b=(d=(u=p.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return b.length>0&&(b.forEach(w=>{const x=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(w.split(";")[1].split("=")[1]);f[`${S}Page`]=x}),f.total=parseInt(v)),{data:Object.assign(Object.assign({},m),f),error:null}}catch(f){if(ke(f))return{data:{clients:[]},error:f};throw f}}async _createOAuthClient(e){try{return await je(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ke(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await je(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ke(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await je(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ke(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await je(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ke(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await je(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ke(n))return{data:null,error:n};throw n}}}function Cx(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const Io={debug:!!(globalThis&&YT()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class XT extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class zj extends XT{}async function Ij(t,e,n){Io.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Io.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Io.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{Io.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Io.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new zj(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Io.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function Bj(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function QT(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function Uj(t){return parseInt(t,16)}function Pj(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function Hj(t){var e;const{chainId:n,domain:r,expirationTime:s,issuedAt:a=new Date,nonce:l,notBefore:u,requestId:d,resources:f,scheme:p,uri:m,version:v}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!m)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(v!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${v}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const b=QT(t.address),w=p?`${p}://${r}`:r,x=t.statement?`${t.statement}
`:"",S=`${w} wants you to sign in with your Ethereum account:
${b}

${x}`;let T=`URI: ${m}
Version: ${v}
Chain ID: ${n}${l?`
Nonce: ${l}`:""}
Issued At: ${a.toISOString()}`;if(s&&(T+=`
Expiration Time: ${s.toISOString()}`),u&&(T+=`
Not Before: ${u.toISOString()}`),d&&(T+=`
Request ID: ${d}`),f){let O=`
Resources:`;for(const M of f){if(!M||typeof M!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${M}`);O+=`
- ${M}`}T+=O}return`${S}
${T}`}class Wt extends Error{constructor({message:e,code:n,cause:r,name:s}){var a;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(a=s??(r instanceof Error?r.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=n}}class hf extends Wt{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function $j({error:t,options:e}){var n,r,s;const{publicKey:a}=e;if(!a)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Wt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=a.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Wt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=a.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Wt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((s=a.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Wt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Wt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Wt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return a.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new Wt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Wt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const l=window.location.hostname;if(ZT(l)){if(a.rp.id!==l)return new Wt({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Wt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new Wt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Wt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Wt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function qj({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Wt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Wt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(ZT(r)){if(n.rpId!==r)return new Wt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Wt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Wt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Wt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class Vj{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const Fj=new Vj;function Gj(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,s=ch(t,["challenge","user","excludeCredentials"]),a=tl(e).buffer,l=Object.assign(Object.assign({},n),{id:tl(n.id).buffer}),u=Object.assign(Object.assign({},s),{challenge:a,user:l});if(r&&r.length>0){u.excludeCredentials=new Array(r.length);for(let d=0;d<r.length;d++){const f=r[d];u.excludeCredentials[d]=Object.assign(Object.assign({},f),{id:tl(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return u}function Kj(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=ch(t,["challenge","allowCredentials"]),s=tl(e).buffer,a=Object.assign(Object.assign({},r),{challenge:s});if(n&&n.length>0){a.allowCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const u=n[l];a.allowCredentials[l]=Object.assign(Object.assign({},u),{id:tl(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return a}function Wj(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:Ca(new Uint8Array(t.response.attestationObject)),clientDataJSON:Ca(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Yj(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),s=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Ca(new Uint8Array(s.authenticatorData)),clientDataJSON:Ca(new Uint8Array(s.clientDataJSON)),signature:Ca(new Uint8Array(s.signature)),userHandle:s.userHandle?Ca(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function ZT(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Ax(){var t,e;return!!(vn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function Jj(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new hf("Browser returned unexpected credential type",e)}:{data:null,error:new hf("Empty credential response",e)}}catch(e){return{data:null,error:$j({error:e,options:t})}}}async function Xj(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new hf("Browser returned unexpected credential type",e)}:{data:null,error:new hf("Empty credential response",e)}}catch(e){return{data:null,error:qj({error:e,options:t})}}}const Qj={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Zj={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function pf(...t){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),n=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of t)if(s)for(const a in s){const l=s[a];if(l!==void 0)if(Array.isArray(l))r[a]=l;else if(n(l))r[a]=l;else if(e(l)){const u=r[a];e(u)?r[a]=pf(u,l):r[a]=pf(l)}else r[a]=l}return r}function eL(t,e){return pf(Qj,t,e||{})}function tL(t,e){return pf(Zj,t,e||{})}class nL{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:s},a){var l;try{const{data:u,error:d}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!u)return{data:null,error:d};const f=s??Fj.createNewAbortSignal();if(u.webauthn.type==="create"){const{user:p}=u.webauthn.credential_options.publicKey;if(!p.name){const m=r;if(m)p.name=`${p.id}:${m}`;else{const b=(await this.client.getUser()).data.user,w=((l=b?.user_metadata)===null||l===void 0?void 0:l.name)||b?.email||b?.id||"User";p.name=`${p.id}:${w}`}}p.displayName||(p.displayName=p.name)}switch(u.webauthn.type){case"create":{const p=eL(u.webauthn.credential_options.publicKey,a?.create),{data:m,error:v}=await Jj({publicKey:p,signal:f});return m?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:m}},error:null}:{data:null,error:v}}case"request":{const p=tL(u.webauthn.credential_options.publicKey,a?.request),{data:m,error:v}=await Xj(Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:p,signal:f}));return m?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:m}},error:null}:{data:null,error:v}}}}catch(u){return ke(u)?{data:null,error:u}:{data:null,error:new Ta("Unexpected error in challenge",u)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},a){if(!n)return{data:null,error:new qc("rpId is required for WebAuthn authentication")};try{if(!Ax())return{data:null,error:new Ta("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:s},{request:a});if(!l)return{data:null,error:u};const{webauthn:d}=l;return this._verify({factorId:e,challengeId:l.challengeId,webauthn:{type:d.type,rpId:n,rpOrigins:r,credential_response:d.credential_response}})}catch(l){return ke(l)?{data:null,error:l}:{data:null,error:new Ta("Unexpected error in authenticate",l)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},a){if(!n)return{data:null,error:new qc("rpId is required for WebAuthn registration")};try{if(!Ax())return{data:null,error:new Ta("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this._enroll({friendlyName:e});if(!l)return await this.client.mfa.listFactors().then(p=>{var m;return(m=p.data)===null||m===void 0?void 0:m.all.find(v=>v.factor_type==="webauthn"&&v.friendly_name===e&&v.status!=="unverified")}).then(p=>p?this.client.mfa.unenroll({factorId:p?.id}):void 0),{data:null,error:u};const{data:d,error:f}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:s},{create:a});return d?this._verify({factorId:l.id,challengeId:d.challengeId,webauthn:{rpId:n,rpOrigins:r,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:f}}catch(l){return ke(l)?{data:null,error:l}:{data:null,error:new Ta("Unexpected error in register",l)}}}}Bj();const rL={url:Z2,storageKey:ej,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:tj,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function Ox(t,e,n){return await n()}const Bo={};class Vc{get jwks(){var e,n;return(n=(e=Bo[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Bo[this.storageKey]=Object.assign(Object.assign({},Bo[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Bo[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Bo[this.storageKey]=Object.assign(Object.assign({},Bo[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},rL),e);if(this.storageKey=a.storageKey,this.instanceID=(n=Vc.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Vc.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&vn()){const l=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(l),this.logDebugMessages&&console.trace(l)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new Lj({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=JT(a.fetch),this.lock=a.lock||Ox,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,this.lockAcquireTimeout=a.lockAcquireTimeout,a.lock?this.lock=a.lock:this.persistSession&&vn()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=Ij:this.lock=Ox,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new nL(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:YT()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Cx(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=Cx(this.memoryStorage)),vn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l);try{await this._notifyAllSubscribers(l.data.event,l.data.session,!1)}catch(u){this._debug("#broadcastChannel","error",u)}})}this.initialize().catch(l=>{this._debug("#initialize()","error",l)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${GT}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if(vn()&&(n=mj(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),vn()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:a}=await this._getSessionFromURL(n,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),aj(a)){const d=(e=a.details)===null||e===void 0?void 0:e.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:a}}return{error:a}}const{session:l,redirectType:u}=s;return this._debug("#_initialize()","detected session in URL",l,"redirect type",u),await this._saveSession(l),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return ke(n)?this._returnResult({error:n}):this._returnResult({error:new Ta("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const a=await je(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e?.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e?.options)===null||s===void 0?void 0:s.captchaToken}},xform:Fr}),{data:l,error:u}=a;if(u||!l)return this._returnResult({data:{user:null,session:null},error:u});const d=l.session,f=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:f,session:d},error:null})}catch(a){if(ke(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(e){var n,r,s;try{let a;if("email"in e){const{email:p,password:m,options:v}=e;let b=null,w=null;this.flowType==="pkce"&&([b,w]=await Lo(this.storage,this.storageKey)),a=await je(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v?.emailRedirectTo,body:{email:p,password:m,data:(n=v?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:v?.captchaToken},code_challenge:b,code_challenge_method:w},xform:Fr})}else if("phone"in e){const{phone:p,password:m,options:v}=e;a=await je(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:m,data:(r=v?.data)!==null&&r!==void 0?r:{},channel:(s=v?.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:v?.captchaToken}},xform:Fr})}else throw new jd("You must provide either an email or phone number and a password");const{data:l,error:u}=a;if(u||!l)return await yn(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:u});const d=l.session,f=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:f,session:d},error:null})}catch(a){if(await yn(this.storage,`${this.storageKey}-code-verifier`),ke(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(e){try{let n;if("email"in e){const{email:a,password:l,options:u}=e;n=await je(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:l,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:kx})}else if("phone"in e){const{phone:a,password:l,options:u}=e;n=await je(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:l,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:kx})}else throw new jd("You must provide either an email or phone number and a password");const{data:r,error:s}=n;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!r||!r.session||!r.user){const a=new jo;return this._returnResult({data:{user:null,session:null},error:a})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(ke(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,s,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,s,a,l,u,d,f,p,m,v;let b,w;if("message"in e)b=e.message,w=e.signature;else{const{chain:x,wallet:S,statement:T,options:O}=e;let M;if(vn())if(typeof S=="object")M=S;else{const G=window;if("ethereum"in G&&typeof G.ethereum=="object"&&"request"in G.ethereum&&typeof G.ethereum.request=="function")M=G.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!O?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");M=S}const P=new URL((n=O?.url)!==null&&n!==void 0?n:window.location.href),C=await M.request({method:"eth_requestAccounts"}).then(G=>G).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!C||C.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const R=QT(C[0]);let k=(r=O?.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!k){const G=await M.request({method:"eth_chainId"});k=Uj(G)}const z={domain:P.host,address:R,statement:T,uri:P.href,version:"1",chainId:k,nonce:(s=O?.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(l=(a=O?.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(u=O?.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(d=O?.signInWithEthereum)===null||d===void 0?void 0:d.notBefore,requestId:(f=O?.signInWithEthereum)===null||f===void 0?void 0:f.requestId,resources:(p=O?.signInWithEthereum)===null||p===void 0?void 0:p.resources};b=Hj(z),w=await M.request({method:"personal_sign",params:[Pj(b),R]})}try{const{data:x,error:S}=await je(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:b,signature:w},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:Fr});if(S)throw S;if(!x||!x.session||!x.user){const T=new jo;return this._returnResult({data:{user:null,session:null},error:T})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:S})}catch(x){if(ke(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async signInWithSolana(e){var n,r,s,a,l,u,d,f,p,m,v,b;let w,x;if("message"in e)w=e.message,x=e.signature;else{const{chain:S,wallet:T,statement:O,options:M}=e;let P;if(vn())if(typeof T=="object")P=T;else{const R=window;if("solana"in R&&typeof R.solana=="object"&&("signIn"in R.solana&&typeof R.solana.signIn=="function"||"signMessage"in R.solana&&typeof R.solana.signMessage=="function"))P=R.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!M?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");P=T}const C=new URL((n=M?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in P&&P.signIn){const R=await P.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},M?.signInWithSolana),{version:"1",domain:C.host,uri:C.href}),O?{statement:O}:null));let k;if(Array.isArray(R)&&R[0]&&typeof R[0]=="object")k=R[0];else if(R&&typeof R=="object"&&"signedMessage"in R&&"signature"in R)k=R;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in k&&"signature"in k&&(typeof k.signedMessage=="string"||k.signedMessage instanceof Uint8Array)&&k.signature instanceof Uint8Array)w=typeof k.signedMessage=="string"?k.signedMessage:new TextDecoder().decode(k.signedMessage),x=k.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in P)||typeof P.signMessage!="function"||!("publicKey"in P)||typeof P!="object"||!P.publicKey||!("toBase58"in P.publicKey)||typeof P.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${C.host} wants you to sign in with your Solana account:`,P.publicKey.toBase58(),...O?["",O,""]:[""],"Version: 1",`URI: ${C.href}`,`Issued At: ${(s=(r=M?.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((a=M?.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${M.signInWithSolana.notBefore}`]:[],...!((l=M?.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${M.signInWithSolana.expirationTime}`]:[],...!((u=M?.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${M.signInWithSolana.chainId}`]:[],...!((d=M?.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${M.signInWithSolana.nonce}`]:[],...!((f=M?.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${M.signInWithSolana.requestId}`]:[],...!((m=(p=M?.signInWithSolana)===null||p===void 0?void 0:p.resources)===null||m===void 0)&&m.length?["Resources",...M.signInWithSolana.resources.map(k=>`- ${k}`)]:[]].join(`
`);const R=await P.signMessage(new TextEncoder().encode(w),"utf8");if(!R||!(R instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=R}}try{const{data:S,error:T}=await je(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:Ca(x)},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(b=e.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:Fr});if(T)throw T;if(!S||!S.session||!S.user){const O=new jo;return this._returnResult({data:{user:null,session:null},error:O})}return S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),this._returnResult({data:Object.assign({},S),error:T})}catch(S){if(ke(S))return this._returnResult({data:{user:null,session:null},error:S});throw S}}async _exchangeCodeForSession(e){const n=await ba(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new oj;const{data:a,error:l}=await je(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Fr});if(await yn(this.storage,`${this.storageKey}-code-verifier`),l)throw l;if(!a||!a.session||!a.user){const u=new jo;return this._returnResult({data:{user:null,session:null,redirectType:null},error:u})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:l})}catch(a){if(await yn(this.storage,`${this.storageKey}-code-verifier`),ke(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:a,nonce:l}=e,u=await je(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:a,nonce:l,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:Fr}),{data:d,error:f}=u;if(f)return this._returnResult({data:{user:null,session:null},error:f});if(!d||!d.session||!d.user){const p=new jo;return this._returnResult({data:{user:null,session:null},error:p})}return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),this._returnResult({data:d,error:f})}catch(n){if(ke(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,s,a,l;try{if("email"in e){const{email:u,options:d}=e;let f=null,p=null;this.flowType==="pkce"&&([f,p]=await Lo(this.storage,this.storageKey));const{error:m}=await je(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(n=d?.data)!==null&&n!==void 0?n:{},create_user:(r=d?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:d?.captchaToken},code_challenge:f,code_challenge_method:p},redirectTo:d?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:m})}if("phone"in e){const{phone:u,options:d}=e,{data:f,error:p}=await je(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(s=d?.data)!==null&&s!==void 0?s:{},create_user:(a=d?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:d?.captchaToken},channel:(l=d?.channel)!==null&&l!==void 0?l:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:f?.message_id},error:p})}throw new jd("You must provide either an email or phone number.")}catch(u){if(await yn(this.storage,`${this.storageKey}-code-verifier`),ke(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async verifyOtp(e){var n,r;try{let s,a;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,a=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:l,error:u}=await je(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:Fr});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const d=l.session,f=l.user;return d?.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),this._returnResult({data:{user:f,session:d},error:null})}catch(s){if(ke(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(e){var n,r,s,a,l;try{let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Lo(this.storage,this.storageKey));const f=await je(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e?.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:d}),headers:this.headers,xform:Nj});return!((a=f.data)===null||a===void 0)&&a.url&&vn()&&!(!((l=e.options)===null||l===void 0)&&l.skipBrowserRedirect)&&window.location.assign(f.data.url),this._returnResult(f)}catch(u){if(await yn(this.storage,`${this.storageKey}-code-verifier`),ke(u))return this._returnResult({data:null,error:u});throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new sr;const{error:s}=await je(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(e){if(ke(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:a}=e,{error:l}=await je(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:a?.captchaToken}},redirectTo:a?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:l})}else if("phone"in e){const{phone:r,type:s,options:a}=e,{data:l,error:u}=await je(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:a?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:l?.message_id},error:u})}throw new jd("You must provide either an email or phone number and a type")}catch(n){if(ke(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await ba(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Xm:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const l=await ba(this.userStorage,this.storageKey+"-user");l?.user?e.user=l.user:e.user=eg()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const l={value:this.suppressGetSessionWarning};e.user=Aj(e.user,l),l.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await je(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Rs}):await this._useSession(async n=>{var r,s,a;const{data:l,error:u}=n;if(u)throw u;return!(!((r=l.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new sr}:await je(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0,xform:Rs})})}catch(n){if(ke(n))return Qm(n)&&(await this._removeSession(),await yn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:a}=r;if(a)throw a;if(!s.session)throw new sr;const l=s.session;let u=null,d=null;this.flowType==="pkce"&&e.email!=null&&([u,d]=await Lo(this.storage,this.storageKey));const{data:f,error:p}=await je(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:u,code_challenge_method:d}),jwt:l.access_token,xform:Rs});if(p)throw p;return l.user=f.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),this._returnResult({data:{user:l.user},error:null})})}catch(r){if(await yn(this.storage,`${this.storageKey}-code-verifier`),ke(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new sr;const n=Date.now()/1e3;let r=n,s=!0,a=null;const{payload:l}=zd(e.access_token);if(l.exp&&(r=l.exp,s=r<=n),s){const{data:u,error:d}=await this._callRefreshToken(e.refresh_token);if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!u)return{data:{user:null,session:null},error:null};a=u}else{const{data:u,error:d}=await this._getUser(e.access_token);if(d)return this._returnResult({data:{user:null,session:null},error:d});a={access_token:e.access_token,refresh_token:e.refresh_token,user:u.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(n){if(ke(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:l,error:u}=n;if(u)throw u;e=(r=l.session)!==null&&r!==void 0?r:void 0}if(!e?.refresh_token)throw new sr;const{data:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(ke(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!vn())throw new Ld("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ld(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new vx("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ld("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new vx("No code detected.");const{data:O,error:M}=await this._exchangeCodeForSession(e.code);if(M)throw M;const P=new URL(window.location.href);return P.searchParams.delete("code"),window.history.replaceState(window.history.state,"",P.toString()),{data:{session:O.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:a,refresh_token:l,expires_in:u,expires_at:d,token_type:f}=e;if(!a||!u||!l||!f)throw new Ld("No session defined in URL");const p=Math.round(Date.now()/1e3),m=parseInt(u);let v=p+m;d&&(v=parseInt(d));const b=v-p;b*1e3<=Go&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${m}s`);const w=v-m;p-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,v,p):p-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,v,p);const{data:x,error:S}=await this._getUser(a);if(S)throw S;const T={provider_token:r,provider_refresh_token:s,access_token:a,expires_in:m,expires_at:v,refresh_token:l,token_type:f,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:T,redirectType:e.type},error:null})}catch(r){if(ke(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await ba(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:a}=n;if(a&&!Qm(a))return this._returnResult({error:a});const l=(r=s.session)===null||r===void 0?void 0:r.access_token;if(l){const{error:u}=await this.admin.signOut(l,e);if(u&&!(sj(u)&&(u.status===404||u.status===401||u.status===403)||Qm(u)))return this._returnResult({error:u})}return e!=="others"&&(await this._removeSession(),await yn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=pj(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:a},error:l}=n;if(l)throw l;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Lo(this.storage,this.storageKey,!0));try{return await je(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if(await yn(this.storage,`${this.storageKey}-code-verifier`),ke(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(ke(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:s}=await this._useSession(async a=>{var l,u,d,f,p;const{data:m,error:v}=a;if(v)throw v;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(u=e.options)===null||u===void 0?void 0:u.scopes,queryParams:(d=e.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await je(this.fetch,"GET",b,{headers:this.headers,jwt:(p=(f=m.session)===null||f===void 0?void 0:f.access_token)!==null&&p!==void 0?p:void 0})});if(s)throw s;return vn()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r?.url),this._returnResult({data:{provider:e.provider,url:r?.url},error:null})}catch(r){if(ke(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:s,data:{session:a}}=n;if(s)throw s;const{options:l,provider:u,token:d,access_token:f,nonce:p}=e,m=await je(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=a?.access_token)!==null&&r!==void 0?r:void 0,body:{provider:u,id_token:d,access_token:f,nonce:p,link_identity:!0,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:Fr}),{data:v,error:b}=m;return b?this._returnResult({data:{user:null,session:null},error:b}):!v||!v.session||!v.user?this._returnResult({data:{user:null,session:null},error:new jo}):(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("USER_UPDATED",v.session)),this._returnResult({data:v,error:b}))}catch(s){if(await yn(this.storage,`${this.storageKey}-code-verifier`),ke(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:a,error:l}=n;if(l)throw l;return await je(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(ke(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await vj(async s=>(s>0&&await yj(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await je(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Fr})),(s,a)=>{const l=200*Math.pow(2,s);return a&&Zm(a)&&Date.now()+l-r<Go})}catch(r){if(this._debug(n,"error",r),ke(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),vn()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await ba(this.storage,this.storageKey);if(s&&this.userStorage){let l=await ba(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:s.user},await Ko(this.userStorage,this.storageKey+"-user",l)),s.user=(e=l?.user)!==null&&e!==void 0?e:eg()}else if(s&&!s.user&&!s.user){const l=await ba(this.storage,this.storageKey+"-user");l&&l?.user?(s.user=l.user,await yn(this.storage,this.storageKey+"-user"),await Ko(this.storage,this.storageKey,s)):s.user=eg()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const a=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Xm;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${Xm}s`),a){if(this.autoRefreshToken&&s.refresh_token){const{error:l}=await this._callRefreshToken(s.refresh_token);l&&(console.error(l),Zm(l)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:u}=await this._getUser(s.access_token);!u&&l?.user?(s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(r,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new sr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new fh;const{data:a,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!a.session)throw new sr;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const u={data:a.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(a){if(this._debug(s,"error",a),ke(a)){const l={data:null,error:a};return Zm(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(l),l}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const a=[],l=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(e,n)}catch(d){a.push(d)}});if(await Promise.all(l),a.length>0){for(let u=0;u<a.length;u+=1)console.error(a[u]);throw a[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await yn(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Ko(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const a=Ex(s);await Ko(this.storage,this.storageKey,a)}else{const s=Ex(n);await Ko(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await yn(this.storage,this.storageKey),await yn(this.storage,this.storageKey+"-code-verifier"),await yn(this.storage,this.storageKey+"-user"),this.userStorage&&await yn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&vn()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Go);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const n=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const n=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,n&&clearTimeout(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Go);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Go}ms, refresh threshold is ${Kg} ticks`),s<=Kg&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof XT)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!vn()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(e){this._debug("#visibilityChangedCallback","error",e)}},window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r?.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,l]=await Lo(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(u.toString())}if(r?.queryParams){const a=new URLSearchParams(r.queryParams);s.push(a.toString())}return r?.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;return a?this._returnResult({data:null,error:a}):await je(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s?.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(ke(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:a,error:l}=n;if(l)return this._returnResult({data:null,error:l});const u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:d,error:f}=await je(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(r=a?.session)===null||r===void 0?void 0:r.access_token});return f?this._returnResult({data:null,error:f}):(e.factorType==="totp"&&d.type==="totp"&&(!((s=d?.totp)===null||s===void 0)&&s.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),this._returnResult({data:d,error:null}))})}catch(n){if(ke(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;if(a)return this._returnResult({data:null,error:a});const l=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?Wj(e.webauthn.credential_response):Yj(e.webauthn.credential_response)})}:{code:e.code}),{data:u,error:d}=await je(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:l,headers:this.headers,jwt:(r=s?.session)===null||r===void 0?void 0:r.access_token});return d?this._returnResult({data:null,error:d}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),this._returnResult({data:u,error:d}))})}catch(n){if(ke(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;if(a)return this._returnResult({data:null,error:a});const l=await je(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=s?.session)===null||r===void 0?void 0:r.access_token});if(l.error)return l;const{data:u}=l;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:Gj(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:Kj(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(ke(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const a of(e=n?.factors)!==null&&e!==void 0?e:[])s.all.push(a),a.status==="verified"&&s[a.factor_type].push(a);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(e){var n,r,s,a;if(e)try{const{payload:b}=zd(e);let w=null;b.aal&&(w=b.aal);let x=w;const{data:{user:S},error:T}=await this.getUser(e);if(T)return this._returnResult({data:null,error:T});((r=(n=S?.factors)===null||n===void 0?void 0:n.filter(P=>P.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(x="aal2");const M=b.amr||[];return{data:{currentLevel:w,nextLevel:x,currentAuthenticationMethods:M},error:null}}catch(b){if(ke(b))return this._returnResult({data:null,error:b});throw b}const{data:{session:l},error:u}=await this.getSession();if(u)return this._returnResult({data:null,error:u});if(!l)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:d}=zd(l.access_token);let f=null;d.aal&&(f=d.aal);let p=f;((a=(s=l.user.factors)===null||s===void 0?void 0:s.filter(b=>b.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(p="aal2");const v=d.amr||[];return{data:{currentLevel:f,nextLevel:p,currentAuthenticationMethods:v},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?await je(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new sr})})}catch(n){if(ke(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:s},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!s)return this._returnResult({data:null,error:new sr});const l=await je(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:u=>({data:u,error:null})});return l.data&&l.data.redirect_url&&vn()&&!n?.skipBrowserRedirect&&window.location.assign(l.data.redirect_url),l})}catch(r){if(ke(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:s},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!s)return this._returnResult({data:null,error:new sr});const l=await je(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:u=>({data:u,error:null})});return l.data&&l.data.redirect_url&&vn()&&!n?.skipBrowserRedirect&&window.location.assign(l.data.redirect_url),l})}catch(r){if(ke(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;return r?this._returnResult({data:null,error:r}):n?await je(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new sr})})}catch(e){if(ke(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?(await je(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new sr})})}catch(n){if(ke(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(u=>u.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(u=>u.kid===e),r&&this.jwks_cached_at+rj>s)return r;const{data:a,error:l}=await je(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=s,r=a.keys.find(u=>u.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:b,error:w}=await this.getSession();if(w||!b.session)return this._returnResult({data:null,error:w});r=b.session.access_token}const{header:s,payload:a,signature:l,raw:{header:u,payload:d}}=zd(r);n?.allowExpired||kj(a.exp);const f=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!f){const{error:b}=await this.getUser(r);if(b)throw b;return{data:{claims:a,header:s,signature:l},error:null}}const p=_j(s.alg),m=await crypto.subtle.importKey("jwk",f,p,!0,["verify"]);if(!await crypto.subtle.verify(p,m,l,fj(`${u}.${d}`)))throw new Jg("Invalid JWT signature");return{data:{claims:a,header:s,signature:l},error:null}}catch(r){if(ke(r))return this._returnResult({data:null,error:r});throw r}}}Vc.nextInstanceID={};const iL=Vc,sL="2.93.3";let vc="";typeof Deno<"u"?vc="deno":typeof document<"u"?vc="web":typeof navigator<"u"&&navigator.product==="ReactNative"?vc="react-native":vc="node";const aL={"X-Client-Info":`supabase-js-${vc}/${sL}`},oL={headers:aL},lL={schema:"public"},cL={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},uL={};function Fc(t){"@babel/helpers - typeof";return Fc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fc(t)}function dL(t,e){if(Fc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Fc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fL(t){var e=dL(t,"string");return Fc(e)=="symbol"?e:e+""}function hL(t,e,n){return(e=fL(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Rx(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Lt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Rx(Object(n),!0).forEach(function(r){hL(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Rx(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const pL=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),mL=()=>Headers,gL=(t,e,n)=>{const r=pL(n),s=mL();return async(a,l)=>{var u;const d=(u=await e())!==null&&u!==void 0?u:t;let f=new s(l?.headers);return f.has("apikey")||f.set("apikey",t),f.has("Authorization")||f.set("Authorization",`Bearer ${d}`),r(a,Lt(Lt({},l),{},{headers:f}))}};function yL(t){return t.endsWith("/")?t:t+"/"}function vL(t,e){var n,r;const{db:s,auth:a,realtime:l,global:u}=t,{db:d,auth:f,realtime:p,global:m}=e,v={db:Lt(Lt({},d),s),auth:Lt(Lt({},f),a),realtime:Lt(Lt({},p),l),storage:{},global:Lt(Lt(Lt({},m),u),{},{headers:Lt(Lt({},(n=m?.headers)!==null&&n!==void 0?n:{}),(r=u?.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?v.accessToken=t.accessToken:delete v.accessToken,v}function bL(t){const e=t?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(yL(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var wL=class extends iL{constructor(t){super(t)}},SL=class{constructor(t,e,n){var r,s;this.supabaseUrl=t,this.supabaseKey=e;const a=bL(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const l=`sb-${a.hostname.split(".")[0]}-auth-token`,u={db:lL,realtime:uL,auth:Lt(Lt({},cL),{},{storageKey:l}),global:oL},d=vL(n??{},u);if(this.storageKey=(r=d.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(s=d.global.headers)!==null&&s!==void 0?s:{},d.accessToken)this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(p,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}});else{var f;this.auth=this._initSupabaseAuthClient((f=d.auth)!==null&&f!==void 0?f:{},this.headers,d.global.fetch)}this.fetch=gL(e,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Lt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(p=>this.realtime.setAuth(p)).catch(p=>console.warn("Failed to set initial Realtime auth token:",p)),this.rest=new s2(new URL("rest/v1",a).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new Q2(this.storageUrl.href,this.headers,this.fetch,n?.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new e2(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,n)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,n;if(t.accessToken)return await t.accessToken();const{data:r}=await t.auth.getSession();return(e=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:s,storageKey:a,flowType:l,lock:u,debug:d,throwOnError:f},p,m){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new wL({url:this.authUrl.href,headers:Lt(Lt({},v),p),storageKey:a,autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:s,flowType:l,lock:u,debug:d,throwOnError:f,fetch:m,hasCustomAuthorizationHeader:Object.keys(this.headers).some(b=>b.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new x2(this.realtimeUrl.href,Lt(Lt({},t),{},{params:Lt(Lt({},{apikey:this.supabaseKey}),t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e?.access_token)})}_handleTokenChanged(t,e,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const xL=(t,e,n)=>new SL(t,e,n);function EL(){if(typeof window<"u")return!1;const t=globalThis.process;if(!t)return!1;const e=t.version;if(e==null)return!1;const n=e.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}EL()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const TL="https://qnxquvnewtbzdgywthlw.supabase.co",kL="sb_publishable_mQpMKu1i5lS8h5PHKVjrJw_D6FpD3XT",ur=xL(TL,kL),Mx=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Nx=ET,_L=(t,e)=>n=>{var r;if(e?.variants==null)return Nx(t,n?.class,n?.className);const{variants:s,defaultVariants:a}=e,l=Object.keys(s).map(f=>{const p=n?.[f],m=a?.[f];if(p===null)return null;const v=Mx(p)||Mx(m);return s[f][v]}),u=n&&Object.entries(n).reduce((f,p)=>{let[m,v]=p;return v===void 0||(f[m]=v),f},{}),d=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((f,p)=>{let{class:m,className:v,...b}=p;return Object.entries(b).every(w=>{let[x,S]=w;return Array.isArray(S)?S.includes({...a,...u}[x]):{...a,...u}[x]===S})?[...f,m,v]:f},[]);return Nx(t,l,d,n?.class,n?.className)},CL=_L("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function ek({className:t,variant:e,...n}){return A.jsx("div",{"data-slot":"alert",role:"alert",className:lh(CL({variant:e}),t),...n})}function tk({className:t,...e}){return A.jsx("div",{"data-slot":"alert-title",className:lh("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",t),...e})}function nk({className:t,...e}){return A.jsx("div",{"data-slot":"alert-description",className:lh("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),...e})}function Xg({title:t,desc:e}){return A.jsxs(ek,{className:"max-w-md bg-[#34D399]    p-2 fixed top-2  sm:bottom-2 sm:top-auto sm:right-2  sm:ml-20 ml-12 sm:animate-[fadeIn_0.3s_ease-out_forwards] animate-[fadeOut_0.3s_ease-out_forwards] opacity-0",children:[A.jsx(KN,{}),A.jsx(tk,{children:t}),A.jsx(nk,{className:"p-0",children:e})]})}function Qg({errorMsg:t}){return A.jsxs(ek,{className:"max-w-md ml-6 border-amber-200 bg-amber-50 text-amber-900 dark:border-amber-900 dark:bg-amber-950 dark:text-amber-50",children:[A.jsx(rD,{}),A.jsxs(tk,{children:["Error Code. ",t.status," "]}),A.jsx(nk,{children:t.message})]})}function AL(){const[t,e]=L.useState(null),[n,r]=L.useState(),s=L.useRef(),a=L.useRef(),l=Fa();async function u(){event.preventDefault();let d=s.current.value,f=a.current.value,{data:p,error:m}=await ur.auth.signInWithPassword({email:d,password:f});if(m){console.log("error is."),e(m);return}p&&(console.log("Data is."),console.log(p),e(null),r(!0),l("/auth"))}return A.jsxs("div",{className:"bg-[url('/background.jpeg')] min-h-screen max-w-screen bg-center bg-cover ",children:[A.jsx("h1",{className:"text-3xl font-bold px-2 text-clip b inline text-transparent bg-clip-text bg-linear-to-r from-indigo-400 to-pink-600  w-full ",children:"Pennat"}),A.jsxs("div",{className:"mt-16",children:[A.jsx("p",{className:"text-4xl m-3 font-bold font-[verdana] md:text-7xl sm:text-5xl p-2 text-white",children:"Welcome to new era. of digital jouranling"}),A.jsx("p",{className:"px-2 text-2xl border-s-4 ml-12 font-semibold font-sans my-8 w-fit   rounded text-white",children:"Login to your account"}),A.jsxs("form",{action:".",onSubmit:u,children:[A.jsxs("div",{className:"mx-12",children:[A.jsx("label",{htmlFor:"email",className:"font-stretch-50% font-normal font-[verdana] text-black sm:text-white",children:"Enter your email"})," ",A.jsx("br",{}),A.jsx("input",{ref:s,type:"email",id:"email",required:!0,title:"Enter your email",placeholder:"pennat@exmple.com",className:`p-2 border rounded  \r
               bg-slate-300 \r
              \r
               min-w-56 text-black`}),A.jsx("br",{}),A.jsx("label",{htmlFor:"password",className:"font-stretch-50% font-normal  font-[verdana] text-black sm:text-white",children:"Enter your password"})," ",A.jsx("br",{}),A.jsx("input",{ref:a,type:"text",id:"password",required:!0,placeholder:"",minLength:6,maxLength:20,title:"enter your password",className:`p-2 border rounded  \r
                 \r
               bg-slate-300 \r
              \r
               min-w-56 text-black`})," ",A.jsx("br",{}),A.jsx("p",{className:"text-sm text-slate-200"})]}),A.jsx("button",{type:"submit",className:"bg-slate-900 px-4 py-2 mx-4 my-4 ml-12 border  text-white cursor-pointer",children:"Continue"}),t&&A.jsx(Qg,{errorMsg:t})]}),n&&A.jsx(Xg,{title:"Logged in  successfully",desc:"Your profile information has been loaded."}),A.jsx("br",{}),A.jsxs("p",{className:"text-sm text-slate-200 ml-12",children:["Don't have an account?"," ",A.jsxs("span",{onClick:()=>{l("/signup")},className:"text-blue-200 cursor-pointer underline ",children:["Create one",A.jsx(wT,{className:"inline ml-1 mb-1",size:"12px"})]})]})]})]})}function OL(){const[t,e]=L.useState(null),[n,r]=L.useState(null),[s,a]=L.useState(!1),[l,u]=L.useState(),d=Fa(),f=L.useRef(),p=L.useRef(),m=L.useRef(),v=L.useRef(),b=L.useRef();async function w(){event.preventDefault();let S=f.current.value,T=p.current.value,{error:O,data:M}=await ur.auth.signUp({email:S,password:T,options:{data:{}}});if(O){console.log("error is."),e(O),r(null);return}M&&(console.log("Data is."),console.log(M),e(null),r(M.user),u(!0),setTimeout(()=>{a(!0),u(!1)},1e3),console.log(M.user))}async function x(){console.log(n),event.preventDefault();let S=m.current.value,T=b.current.value,O=v.current.value;console.log({fullname:S,username:T,dob:O});let{data:M,error:P}=await ur.from("UserTable").insert([{username:T,name:S,email:n.email,gender:"1"}]).select();if(P){e(P);return}M&&(console.log(M),u(!0),setTimeout(()=>{u(!1),d("/auth")},3e3))}return A.jsxs("div",{className:"bg-[url('/background.jpeg')] min-h-screen max-w-screen bg-center bg-cover ",children:[A.jsx("h1",{className:"text-3xl font-bold px-2 text-clip b inline text-transparent bg-clip-text bg-linear-to-r from-indigo-400 to-pink-600  w-full ",children:"Pennat"}),A.jsxs("div",{className:"mt-16",children:[A.jsx("p",{className:"text-4xl m-3 font-bold font-[verdana] md:text-7xl sm:text-5xl p-2 text-white",children:"Welcome to new era. of digital jouranling"}),A.jsx("p",{className:"px-2 text-2xl border-s-4 ml-12 font-semibold font-sans my-8 w-fit   rounded text-white",children:"Create an account."}),!s&&A.jsxs("form",{action:".",onSubmit:w,children:[A.jsxs("div",{className:"mx-12",children:[A.jsx("label",{htmlFor:"email",className:"font-stretch-50% font-normal font-[verdana] text-black sm:text-white",children:"Enter your email"})," ",A.jsx("br",{}),A.jsx("input",{ref:f,type:"email",id:"email",required:!0,placeholder:"pennat@exmple.com",className:`p-2 border rounded  \r
            bg-slate-300 \r
           \r
            min-w-56 text-black`}),A.jsx("br",{}),A.jsx("label",{htmlFor:"password",className:"font-stretch-50% font-normal  font-[verdana] text-black sm:text-white",children:"Enter your password"})," ",A.jsx("br",{}),A.jsx("input",{ref:p,type:"text",id:"password",required:!0,placeholder:"Abcd1234$$@",minLength:6,maxLength:20,className:`p-2 border rounded  \r
              \r
            bg-slate-300 \r
           \r
            min-w-56 text-black`})," ",A.jsx("br",{}),A.jsx("p",{className:"text-sm text-slate-200",children:"Min. length 6, include uppercase,lowercase,numbers and special symbols"})]}),A.jsx("button",{type:"submit",className:"bg-slate-900 px-4 py-2 mx-4 my-4 ml-12 border  text-white cursor-pointer ",children:"Continue"}),t&&A.jsx(Qg,{errorMsg:t}),l&&A.jsx(Xg,{title:"Account created successfully",desc:"Please provide few details too."})]}),s&&A.jsxs("form",{action:".",onSubmit:x,children:[A.jsxs("div",{className:"mx-12",children:[A.jsx("label",{htmlFor:"fullname",className:"font-stretch-50% font-normal font-[verdana] text-black sm:text-white",children:"Enter your fullname"})," ",A.jsx("br",{}),A.jsx("input",{ref:m,type:"text",id:"fullname",required:!0,pattern:"[A-Za-z]+( [A-Za-z]+)*",title:"Enter a valid name (letters only, single space allowed)",placeholder:"John Doe",className:`p-2 border rounded  \r
            bg-slate-300 \r
              min-w-56 text-black`}),A.jsx("br",{}),A.jsx("label",{htmlFor:"username",className:"font-stretch-50% font-normal  font-[verdana] text-black sm:text-white",children:"Create an username"})," ",A.jsx("br",{}),A.jsx("input",{ref:b,type:"text",id:"username",required:!0,placeholder:"johne_doe1",minLength:4,pattern:"[a-z0-9_]+",className:`p-2 border rounded  \r
              \r
            bg-slate-300 \r
           \r
            min-w-56 text-black`})," ",A.jsx("br",{}),A.jsx("p",{className:"text-sm text-slate-200",children:"Lowercase letters,numbers and _ is allowed.Keep it atleast four character long."}),A.jsx("br",{}),A.jsx("label",{htmlFor:"dob",className:"font-stretch-50% font-normal  font-[verdana] text-black sm:text-white",children:"Enter your DOB."})," ",A.jsx("br",{}),A.jsx("input",{ref:v,type:"date",id:"dob",required:!0,placeholder:"YYYY-MM-DD",minLength:4,className:`p-2 border rounded  \r
              \r
            bg-slate-300 \r
           \r
            min-w-56 text-black`})," "]}),A.jsx("button",{type:"submit",className:"bg-slate-900 px-4 py-2 mx-4 my-4 ml-12 border  text-white cursor-pointer",children:"Continue"}),t&&A.jsx(Qg,{errorMsg:t}),l&&A.jsx(Xg,{title:"Details saved successfully",desc:"Your profile information has been saved. Changes will be reflected immediately."})]})]}),A.jsxs("p",{className:"text-sm text-slate-200 ml-12",children:["Already have an account?"," ",A.jsxs("span",{onClick:()=>{d("/login")},className:"text-blue-200 cursor-pointer underline ",children:["Log in",A.jsx(wT,{className:"inline ml-1 mb-1",size:"12px"})]})]})]})}function RL(){const t=Fa();return A.jsx(A.Fragment,{children:A.jsxs("nav",{className:"flex   w-full justify-between px-4 fixed top-0  z-2  py-2",children:[A.jsx("div",{children:A.jsx("h1",{className:"font-bold text-3xl pl-2",children:"Pennat"})}),A.jsx("div",{children:A.jsx("ul",{className:`flex\r
             justify-evenly  \r
             *:p-2\r
              *:px-3\r
            [&>li:hover]:bg-slate-900\r
             *:my-1\r
              *:rounded-full\r
\r
             [&>li:hover]:text-white\r
               [&>li:hover]:cursor-pointer`,children:A.jsx("li",{onClick:()=>{t("/profile")},children:A.jsxs("span",{className:"flex flex-col sm:flex-row items-center text-xs sm:text-[1rem]",children:[" ",A.jsx(sD,{height:"16px"}),A.jsx("span",{className:"",children:"Profile"})]})})})})]})})}const Gc="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJQAAACUCAMAAABC4vDmAAAARVBMVEX6+vqPj4/////l5eWMjIyIiIj19fWCgoKVlZXGxsaYmJiSkpKxsbG3t7fp6eny8vKkpKS+vr7Nzc2qqqrf39/X19eenp7INw94AAAC6UlEQVR4nO2b27KrIAxAMXLxBqJo//9TD9o9s7trVawYPDNZD20f14RbSChjBEEQBEEQBEEQBEEQxE2BiecnpHZ5AtAOpbZVXVdW94O8gRdA3hSZEJxnGedCZJU2ibUARqu8zitc2TGlFRjL35RmLe7aZFrQiw9KT61UwQItPitNiC6JFbgNJ2+lU1g1m05JrKDbcfJWPbIVDGrPKctUjmslq32njD9QnQIGbx7AEjNUMmDw5lghSoFe2TRThqoNmVFzpPBmFYxBM2q2GrBCtXm+pBo/CFWaxg9tUgWuvTlUSFKQH5BSLZJU+DzHO2p8bndg+JCWH5RHpJBS0EORUlhSd5xTzNxw9d1yn2JQBzvh7ej3PPvGwHTKRypHcrpnPhWaoiPfsoJzdDyl8NsM7nVUPgLmOreYSqE3ZIN9b99PFbAShFerZidWKkWFCrZrQYmqZkxvxEqhlhFegLFeWYOiQLuELq3MomA9wVWTrjo8aeWOv00twR1ysWxpxQYtlOA/CMW7nKVvhDAA02tnPU737Q1aMz9MJlI+vwnifwegNfkXmAvbpTC6IvzK90JdNBcdOytnShhcXdKXhCH7WmnWKi7IQ9tzTt6qil7rAHfSyZ/UTeRQwXDaycfKRJbqYkjFzkZtDKkmrpOsYkhFvpwGdUJJapIq7jh8IQWNXSkXV4qd3zvjr77grvGmVOSbPJQxpCLX0CCPIRX9RP4qu/tLFTt3OdRP+8wFFVBzevzq+L2j03lC9BxhQp6T4ll8pYO9xyUXNZMPNK8+OF1VAgX7tVX0/PwXuf1gccvpKiW2+4xy1enih4zl2iPYdXjsM28BDI8Dbe0JZa+vywIri/BocV70KHVZkGURVurgqiolWmebjbbeCxcXtR1Rq9cAee+m+vnKoAnFXZ/gCT8wmXeuKnxIxG9x3//MiocrDUtV4p/+/GGGsS+1bpyn0V3Zj3nLkv8rBN5Jq0MQBEEQBEEQBEEQBEGs8Q9UMiC2Cz0iwAAAAABJRU5ErkJggg==",hh=L.createContext(),ph=L.createContext();var lc={},Uo={},Id={},Ss={},wa={},ng={},Dx;function rk(){return Dx||(Dx=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Doctype=t.CDATA=t.Tag=t.Style=t.Script=t.Comment=t.Directive=t.Text=t.Root=t.isTag=t.ElementType=void 0;var e;(function(r){r.Root="root",r.Text="text",r.Directive="directive",r.Comment="comment",r.Script="script",r.Style="style",r.Tag="tag",r.CDATA="cdata",r.Doctype="doctype"})(e=t.ElementType||(t.ElementType={}));function n(r){return r.type===e.Tag||r.type===e.Script||r.type===e.Style}t.isTag=n,t.Root=e.Root,t.Text=e.Text,t.Directive=e.Directive,t.Comment=e.Comment,t.Script=e.Script,t.Style=e.Style,t.Tag=e.Tag,t.CDATA=e.CDATA,t.Doctype=e.Doctype})(ng)),ng}var qe={},jx;function Lx(){if(jx)return qe;jx=1;var t=qe&&qe.__extends||(function(){var C=function(R,k){return C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(z,G){z.__proto__=G}||function(z,G){for(var le in G)Object.prototype.hasOwnProperty.call(G,le)&&(z[le]=G[le])},C(R,k)};return function(R,k){if(typeof k!="function"&&k!==null)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");C(R,k);function z(){this.constructor=R}R.prototype=k===null?Object.create(k):(z.prototype=k.prototype,new z)}})(),e=qe&&qe.__assign||function(){return e=Object.assign||function(C){for(var R,k=1,z=arguments.length;k<z;k++){R=arguments[k];for(var G in R)Object.prototype.hasOwnProperty.call(R,G)&&(C[G]=R[G])}return C},e.apply(this,arguments)};Object.defineProperty(qe,"__esModule",{value:!0}),qe.cloneNode=qe.hasChildren=qe.isDocument=qe.isDirective=qe.isComment=qe.isText=qe.isCDATA=qe.isTag=qe.Element=qe.Document=qe.CDATA=qe.NodeWithChildren=qe.ProcessingInstruction=qe.Comment=qe.Text=qe.DataNode=qe.Node=void 0;var n=rk(),r=(function(){function C(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(C.prototype,"parentNode",{get:function(){return this.parent},set:function(R){this.parent=R},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"previousSibling",{get:function(){return this.prev},set:function(R){this.prev=R},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"nextSibling",{get:function(){return this.next},set:function(R){this.next=R},enumerable:!1,configurable:!0}),C.prototype.cloneNode=function(R){return R===void 0&&(R=!1),M(this,R)},C})();qe.Node=r;var s=(function(C){t(R,C);function R(k){var z=C.call(this)||this;return z.data=k,z}return Object.defineProperty(R.prototype,"nodeValue",{get:function(){return this.data},set:function(k){this.data=k},enumerable:!1,configurable:!0}),R})(r);qe.DataNode=s;var a=(function(C){t(R,C);function R(){var k=C!==null&&C.apply(this,arguments)||this;return k.type=n.ElementType.Text,k}return Object.defineProperty(R.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),R})(s);qe.Text=a;var l=(function(C){t(R,C);function R(){var k=C!==null&&C.apply(this,arguments)||this;return k.type=n.ElementType.Comment,k}return Object.defineProperty(R.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),R})(s);qe.Comment=l;var u=(function(C){t(R,C);function R(k,z){var G=C.call(this,z)||this;return G.name=k,G.type=n.ElementType.Directive,G}return Object.defineProperty(R.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),R})(s);qe.ProcessingInstruction=u;var d=(function(C){t(R,C);function R(k){var z=C.call(this)||this;return z.children=k,z}return Object.defineProperty(R.prototype,"firstChild",{get:function(){var k;return(k=this.children[0])!==null&&k!==void 0?k:null},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"childNodes",{get:function(){return this.children},set:function(k){this.children=k},enumerable:!1,configurable:!0}),R})(r);qe.NodeWithChildren=d;var f=(function(C){t(R,C);function R(){var k=C!==null&&C.apply(this,arguments)||this;return k.type=n.ElementType.CDATA,k}return Object.defineProperty(R.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),R})(d);qe.CDATA=f;var p=(function(C){t(R,C);function R(){var k=C!==null&&C.apply(this,arguments)||this;return k.type=n.ElementType.Root,k}return Object.defineProperty(R.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),R})(d);qe.Document=p;var m=(function(C){t(R,C);function R(k,z,G,le){G===void 0&&(G=[]),le===void 0&&(le=k==="script"?n.ElementType.Script:k==="style"?n.ElementType.Style:n.ElementType.Tag);var he=C.call(this,G)||this;return he.name=k,he.attribs=z,he.type=le,he}return Object.defineProperty(R.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"tagName",{get:function(){return this.name},set:function(k){this.name=k},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"attributes",{get:function(){var k=this;return Object.keys(this.attribs).map(function(z){var G,le;return{name:z,value:k.attribs[z],namespace:(G=k["x-attribsNamespace"])===null||G===void 0?void 0:G[z],prefix:(le=k["x-attribsPrefix"])===null||le===void 0?void 0:le[z]}})},enumerable:!1,configurable:!0}),R})(d);qe.Element=m;function v(C){return(0,n.isTag)(C)}qe.isTag=v;function b(C){return C.type===n.ElementType.CDATA}qe.isCDATA=b;function w(C){return C.type===n.ElementType.Text}qe.isText=w;function x(C){return C.type===n.ElementType.Comment}qe.isComment=x;function S(C){return C.type===n.ElementType.Directive}qe.isDirective=S;function T(C){return C.type===n.ElementType.Root}qe.isDocument=T;function O(C){return Object.prototype.hasOwnProperty.call(C,"children")}qe.hasChildren=O;function M(C,R){R===void 0&&(R=!1);var k;if(w(C))k=new a(C.data);else if(x(C))k=new l(C.data);else if(v(C)){var z=R?P(C.children):[],G=new m(C.name,e({},C.attribs),z);z.forEach(function(Ue){return Ue.parent=G}),C.namespace!=null&&(G.namespace=C.namespace),C["x-attribsNamespace"]&&(G["x-attribsNamespace"]=e({},C["x-attribsNamespace"])),C["x-attribsPrefix"]&&(G["x-attribsPrefix"]=e({},C["x-attribsPrefix"])),k=G}else if(b(C)){var z=R?P(C.children):[],le=new f(z);z.forEach(function(ue){return ue.parent=le}),k=le}else if(T(C)){var z=R?P(C.children):[],he=new p(z);z.forEach(function(ue){return ue.parent=he}),C["x-mode"]&&(he["x-mode"]=C["x-mode"]),k=he}else if(S(C)){var ye=new u(C.name,C.data);C["x-name"]!=null&&(ye["x-name"]=C["x-name"],ye["x-publicId"]=C["x-publicId"],ye["x-systemId"]=C["x-systemId"]),k=ye}else throw new Error("Not implemented yet: ".concat(C.type));return k.startIndex=C.startIndex,k.endIndex=C.endIndex,C.sourceCodeLocation!=null&&(k.sourceCodeLocation=C.sourceCodeLocation),k}qe.cloneNode=M;function P(C){for(var R=C.map(function(z){return M(z,!0)}),k=1;k<R.length;k++)R[k].prev=R[k-1],R[k-1].next=R[k];return R}return qe}var zx;function ik(){return zx||(zx=1,(function(t){var e=wa&&wa.__createBinding||(Object.create?(function(u,d,f,p){p===void 0&&(p=f);var m=Object.getOwnPropertyDescriptor(d,f);(!m||("get"in m?!d.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return d[f]}}),Object.defineProperty(u,p,m)}):(function(u,d,f,p){p===void 0&&(p=f),u[p]=d[f]})),n=wa&&wa.__exportStar||function(u,d){for(var f in u)f!=="default"&&!Object.prototype.hasOwnProperty.call(d,f)&&e(d,u,f)};Object.defineProperty(t,"__esModule",{value:!0}),t.DomHandler=void 0;var r=rk(),s=Lx();n(Lx(),t);var a={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},l=(function(){function u(d,f,p){this.dom=[],this.root=new s.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof f=="function"&&(p=f,f=a),typeof d=="object"&&(f=d,d=void 0),this.callback=d??null,this.options=f??a,this.elementCB=p??null}return u.prototype.onparserinit=function(d){this.parser=d},u.prototype.onreset=function(){this.dom=[],this.root=new s.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},u.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},u.prototype.onerror=function(d){this.handleCallback(d)},u.prototype.onclosetag=function(){this.lastNode=null;var d=this.tagStack.pop();this.options.withEndIndices&&(d.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(d)},u.prototype.onopentag=function(d,f){var p=this.options.xmlMode?r.ElementType.Tag:void 0,m=new s.Element(d,f,void 0,p);this.addNode(m),this.tagStack.push(m)},u.prototype.ontext=function(d){var f=this.lastNode;if(f&&f.type===r.ElementType.Text)f.data+=d,this.options.withEndIndices&&(f.endIndex=this.parser.endIndex);else{var p=new s.Text(d);this.addNode(p),this.lastNode=p}},u.prototype.oncomment=function(d){if(this.lastNode&&this.lastNode.type===r.ElementType.Comment){this.lastNode.data+=d;return}var f=new s.Comment(d);this.addNode(f),this.lastNode=f},u.prototype.oncommentend=function(){this.lastNode=null},u.prototype.oncdatastart=function(){var d=new s.Text(""),f=new s.CDATA([d]);this.addNode(f),d.parent=f,this.lastNode=d},u.prototype.oncdataend=function(){this.lastNode=null},u.prototype.onprocessinginstruction=function(d,f){var p=new s.ProcessingInstruction(d,f);this.addNode(p)},u.prototype.handleCallback=function(d){if(typeof this.callback=="function")this.callback(d,this.dom);else if(d)throw d},u.prototype.addNode=function(d){var f=this.tagStack[this.tagStack.length-1],p=f.children[f.children.length-1];this.options.withStartIndices&&(d.startIndex=this.parser.startIndex),this.options.withEndIndices&&(d.endIndex=this.parser.endIndex),f.children.push(d),p&&(d.prev=p,p.next=d),d.parent=f,this.lastNode=null},u})();t.DomHandler=l,t.default=l})(wa)),wa}var rg={},Ix;function ML(){return Ix||(Ix=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CARRIAGE_RETURN_PLACEHOLDER_REGEX=t.CARRIAGE_RETURN_PLACEHOLDER=t.CARRIAGE_RETURN_REGEX=t.CARRIAGE_RETURN=t.CASE_SENSITIVE_TAG_NAMES_MAP=t.CASE_SENSITIVE_TAG_NAMES=void 0,t.CASE_SENSITIVE_TAG_NAMES=["animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","linearGradient","radialGradient","textPath"],t.CASE_SENSITIVE_TAG_NAMES_MAP=t.CASE_SENSITIVE_TAG_NAMES.reduce(function(e,n){return e[n.toLowerCase()]=n,e},{}),t.CARRIAGE_RETURN="\r",t.CARRIAGE_RETURN_REGEX=new RegExp(t.CARRIAGE_RETURN,"g"),t.CARRIAGE_RETURN_PLACEHOLDER="__HTML_DOM_PARSER_CARRIAGE_RETURN_PLACEHOLDER_".concat(Date.now().toString(),"__"),t.CARRIAGE_RETURN_PLACEHOLDER_REGEX=new RegExp(t.CARRIAGE_RETURN_PLACEHOLDER,"g")})(rg)),rg}var Bx;function sk(){if(Bx)return Ss;Bx=1,Object.defineProperty(Ss,"__esModule",{value:!0}),Ss.formatAttributes=r,Ss.hasOpenTag=a,Ss.escapeSpecialCharacters=l,Ss.revertEscapedCharacters=u,Ss.formatDOM=d;var t=ik(),e=ML();function n(f){return e.CASE_SENSITIVE_TAG_NAMES_MAP[f]}function r(f){for(var p={},m=0,v=f.length;m<v;m++){var b=f[m];p[b.name]=b.value}return p}function s(f){f=f.toLowerCase();var p=n(f);return p||f}function a(f,p){var m="<"+p,v=f.toLowerCase().indexOf(m);if(v===-1)return!1;var b=f[v+m.length];return b===">"||b===" "||b==="	"||b===`
`||b==="\r"||b==="/"}function l(f){return f.replace(e.CARRIAGE_RETURN_REGEX,e.CARRIAGE_RETURN_PLACEHOLDER)}function u(f){return f.replace(e.CARRIAGE_RETURN_PLACEHOLDER_REGEX,e.CARRIAGE_RETURN)}function d(f,p,m){var v,b,w,x;p===void 0&&(p=null);for(var S=[],T,O=0,M=f.length;O<M;O++){var P=f[O];switch(P.nodeType){case 1:{var C=s(P.nodeName);T=new t.Element(C,r(P.attributes)),T.children=d(C==="template"?P.content.childNodes:P.childNodes,T);break}case 3:T=new t.Text(u((v=P.nodeValue)!==null&&v!==void 0?v:""));break;case 8:T=new t.Comment((b=P.nodeValue)!==null&&b!==void 0?b:"");break;default:continue}var R=(w=S[O-1])!==null&&w!==void 0?w:null;R&&(R.next=T),T.parent=p,T.prev=R,T.next=null,S.push(T)}return m&&(T=new t.ProcessingInstruction(m.substring(0,m.indexOf(" ")).toLowerCase(),m),T.next=(x=S[0])!==null&&x!==void 0?x:null,T.parent=p,S.unshift(T),S[1]&&(S[1].prev=S[0])),S}return Ss}var Ux;function NL(){if(Ux)return Id;Ux=1,Object.defineProperty(Id,"__esModule",{value:!0}),Id.default=w;var t=sk(),e="html",n="head",r="body",s=/<([a-zA-Z]+[0-9]?)/,a=function(x,S){throw new Error("This browser does not support `document.implementation.createHTMLDocument`")},l=function(x,S){throw new Error("This browser does not support `DOMParser.prototype.parseFromString`")},u=typeof window=="object"&&window.DOMParser;if(typeof u=="function"){var d=new u,f="text/html";l=function(x,S){return S&&(x="<".concat(S,">").concat(x,"</").concat(S,">")),d.parseFromString(x,f)},a=l}if(typeof document=="object"&&document.implementation){var p=document.implementation.createHTMLDocument();a=function(x,S){if(S){var T=p.documentElement.querySelector(S);return T&&(T.innerHTML=x),p}return p.documentElement.innerHTML=x,p}}var m=typeof document=="object"&&document.createElement("template"),v;m&&m.content&&(v=function(x){return m.innerHTML=x,m.content.childNodes});var b=function(){return document.createDocumentFragment().childNodes};function w(x){var S,T,O,M,P,C;x=(0,t.escapeSpecialCharacters)(x);var R=s.exec(x),k=(S=R?.[1])===null||S===void 0?void 0:S.toLowerCase();switch(k){case e:{var z=l(x);if(!(0,t.hasOpenTag)(x,n)){var G=z.querySelector(n);(T=G?.parentNode)===null||T===void 0||T.removeChild(G)}if(!(0,t.hasOpenTag)(x,r)){var G=z.querySelector(r);(O=G?.parentNode)===null||O===void 0||O.removeChild(G)}return z.querySelectorAll(e)}case n:case r:{var le=a(x).querySelectorAll(k);return(0,t.hasOpenTag)(x,r)&&(0,t.hasOpenTag)(x,n)?(P=(M=le[0].parentNode)===null||M===void 0?void 0:M.childNodes)!==null&&P!==void 0?P:b():le}default:{if(v)return v(x);var G=a(x,r).querySelector(r);return(C=G?.childNodes)!==null&&C!==void 0?C:b()}}}return Id}var Px;function DL(){if(Px)return Uo;Px=1;var t=Uo&&Uo.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Uo,"__esModule",{value:!0}),Uo.default=s;var e=t(NL()),n=sk(),r=/<(![a-zA-Z\s]+)>/;function s(a){if(typeof a!="string")throw new TypeError("First argument must be a string");if(!a)return[];var l=r.exec(a),u=l?l[1]:void 0;return(0,n.formatDOM)((0,e.default)(a),null,u)}return Uo}var Bd={},kr={},cc={},Hx;function jL(){if(Hx)return cc;Hx=1;var t=0;cc.SAME=t;var e=1;return cc.CAMELCASE=e,cc.possibleStandardNames={accept:0,acceptCharset:1,"accept-charset":"acceptCharset",accessKey:1,action:0,allowFullScreen:1,alt:0,as:0,async:0,autoCapitalize:1,autoComplete:1,autoCorrect:1,autoFocus:1,autoPlay:1,autoSave:1,capture:0,cellPadding:1,cellSpacing:1,challenge:0,charSet:1,checked:0,children:0,cite:0,class:"className",classID:1,className:1,cols:0,colSpan:1,content:0,contentEditable:1,contextMenu:1,controls:0,controlsList:1,coords:0,crossOrigin:1,dangerouslySetInnerHTML:1,data:0,dateTime:1,default:0,defaultChecked:1,defaultValue:1,defer:0,dir:0,disabled:0,disablePictureInPicture:1,disableRemotePlayback:1,download:0,draggable:0,encType:1,enterKeyHint:1,for:"htmlFor",form:0,formMethod:1,formAction:1,formEncType:1,formNoValidate:1,formTarget:1,frameBorder:1,headers:0,height:0,hidden:0,high:0,href:0,hrefLang:1,htmlFor:1,httpEquiv:1,"http-equiv":"httpEquiv",icon:0,id:0,innerHTML:1,inputMode:1,integrity:0,is:0,itemID:1,itemProp:1,itemRef:1,itemScope:1,itemType:1,keyParams:1,keyType:1,kind:0,label:0,lang:0,list:0,loop:0,low:0,manifest:0,marginWidth:1,marginHeight:1,max:0,maxLength:1,media:0,mediaGroup:1,method:0,min:0,minLength:1,multiple:0,muted:0,name:0,noModule:1,nonce:0,noValidate:1,open:0,optimum:0,pattern:0,placeholder:0,playsInline:1,poster:0,preload:0,profile:0,radioGroup:1,readOnly:1,referrerPolicy:1,rel:0,required:0,reversed:0,role:0,rows:0,rowSpan:1,sandbox:0,scope:0,scoped:0,scrolling:0,seamless:0,selected:0,shape:0,size:0,sizes:0,span:0,spellCheck:1,src:0,srcDoc:1,srcLang:1,srcSet:1,start:0,step:0,style:0,summary:0,tabIndex:1,target:0,title:0,type:0,useMap:1,value:0,width:0,wmode:0,wrap:0,about:0,accentHeight:1,"accent-height":"accentHeight",accumulate:0,additive:0,alignmentBaseline:1,"alignment-baseline":"alignmentBaseline",allowReorder:1,alphabetic:0,amplitude:0,arabicForm:1,"arabic-form":"arabicForm",ascent:0,attributeName:1,attributeType:1,autoReverse:1,azimuth:0,baseFrequency:1,baselineShift:1,"baseline-shift":"baselineShift",baseProfile:1,bbox:0,begin:0,bias:0,by:0,calcMode:1,capHeight:1,"cap-height":"capHeight",clip:0,clipPath:1,"clip-path":"clipPath",clipPathUnits:1,clipRule:1,"clip-rule":"clipRule",color:0,colorInterpolation:1,"color-interpolation":"colorInterpolation",colorInterpolationFilters:1,"color-interpolation-filters":"colorInterpolationFilters",colorProfile:1,"color-profile":"colorProfile",colorRendering:1,"color-rendering":"colorRendering",contentScriptType:1,contentStyleType:1,cursor:0,cx:0,cy:0,d:0,datatype:0,decelerate:0,descent:0,diffuseConstant:1,direction:0,display:0,divisor:0,dominantBaseline:1,"dominant-baseline":"dominantBaseline",dur:0,dx:0,dy:0,edgeMode:1,elevation:0,enableBackground:1,"enable-background":"enableBackground",end:0,exponent:0,externalResourcesRequired:1,fill:0,fillOpacity:1,"fill-opacity":"fillOpacity",fillRule:1,"fill-rule":"fillRule",filter:0,filterRes:1,filterUnits:1,floodOpacity:1,"flood-opacity":"floodOpacity",floodColor:1,"flood-color":"floodColor",focusable:0,fontFamily:1,"font-family":"fontFamily",fontSize:1,"font-size":"fontSize",fontSizeAdjust:1,"font-size-adjust":"fontSizeAdjust",fontStretch:1,"font-stretch":"fontStretch",fontStyle:1,"font-style":"fontStyle",fontVariant:1,"font-variant":"fontVariant",fontWeight:1,"font-weight":"fontWeight",format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:1,"glyph-name":"glyphName",glyphOrientationHorizontal:1,"glyph-orientation-horizontal":"glyphOrientationHorizontal",glyphOrientationVertical:1,"glyph-orientation-vertical":"glyphOrientationVertical",glyphRef:1,gradientTransform:1,gradientUnits:1,hanging:0,horizAdvX:1,"horiz-adv-x":"horizAdvX",horizOriginX:1,"horiz-origin-x":"horizOriginX",ideographic:0,imageRendering:1,"image-rendering":"imageRendering",in2:0,in:0,inlist:0,intercept:0,k1:0,k2:0,k3:0,k4:0,k:0,kernelMatrix:1,kernelUnitLength:1,kerning:0,keyPoints:1,keySplines:1,keyTimes:1,lengthAdjust:1,letterSpacing:1,"letter-spacing":"letterSpacing",lightingColor:1,"lighting-color":"lightingColor",limitingConeAngle:1,local:0,markerEnd:1,"marker-end":"markerEnd",markerHeight:1,markerMid:1,"marker-mid":"markerMid",markerStart:1,"marker-start":"markerStart",markerUnits:1,markerWidth:1,mask:0,maskContentUnits:1,maskUnits:1,mathematical:0,mode:0,numOctaves:1,offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,origin:0,overflow:0,overlinePosition:1,"overline-position":"overlinePosition",overlineThickness:1,"overline-thickness":"overlineThickness",paintOrder:1,"paint-order":"paintOrder",panose1:0,"panose-1":"panose1",pathLength:1,patternContentUnits:1,patternTransform:1,patternUnits:1,pointerEvents:1,"pointer-events":"pointerEvents",points:0,pointsAtX:1,pointsAtY:1,pointsAtZ:1,prefix:0,preserveAlpha:1,preserveAspectRatio:1,primitiveUnits:1,property:0,r:0,radius:0,refX:1,refY:1,renderingIntent:1,"rendering-intent":"renderingIntent",repeatCount:1,repeatDur:1,requiredExtensions:1,requiredFeatures:1,resource:0,restart:0,result:0,results:0,rotate:0,rx:0,ry:0,scale:0,security:0,seed:0,shapeRendering:1,"shape-rendering":"shapeRendering",slope:0,spacing:0,specularConstant:1,specularExponent:1,speed:0,spreadMethod:1,startOffset:1,stdDeviation:1,stemh:0,stemv:0,stitchTiles:1,stopColor:1,"stop-color":"stopColor",stopOpacity:1,"stop-opacity":"stopOpacity",strikethroughPosition:1,"strikethrough-position":"strikethroughPosition",strikethroughThickness:1,"strikethrough-thickness":"strikethroughThickness",string:0,stroke:0,strokeDasharray:1,"stroke-dasharray":"strokeDasharray",strokeDashoffset:1,"stroke-dashoffset":"strokeDashoffset",strokeLinecap:1,"stroke-linecap":"strokeLinecap",strokeLinejoin:1,"stroke-linejoin":"strokeLinejoin",strokeMiterlimit:1,"stroke-miterlimit":"strokeMiterlimit",strokeWidth:1,"stroke-width":"strokeWidth",strokeOpacity:1,"stroke-opacity":"strokeOpacity",suppressContentEditableWarning:1,suppressHydrationWarning:1,surfaceScale:1,systemLanguage:1,tableValues:1,targetX:1,targetY:1,textAnchor:1,"text-anchor":"textAnchor",textDecoration:1,"text-decoration":"textDecoration",textLength:1,textRendering:1,"text-rendering":"textRendering",to:0,transform:0,typeof:0,u1:0,u2:0,underlinePosition:1,"underline-position":"underlinePosition",underlineThickness:1,"underline-thickness":"underlineThickness",unicode:0,unicodeBidi:1,"unicode-bidi":"unicodeBidi",unicodeRange:1,"unicode-range":"unicodeRange",unitsPerEm:1,"units-per-em":"unitsPerEm",unselectable:0,vAlphabetic:1,"v-alphabetic":"vAlphabetic",values:0,vectorEffect:1,"vector-effect":"vectorEffect",version:0,vertAdvY:1,"vert-adv-y":"vertAdvY",vertOriginX:1,"vert-origin-x":"vertOriginX",vertOriginY:1,"vert-origin-y":"vertOriginY",vHanging:1,"v-hanging":"vHanging",vIdeographic:1,"v-ideographic":"vIdeographic",viewBox:1,viewTarget:1,visibility:0,vMathematical:1,"v-mathematical":"vMathematical",vocab:0,widths:0,wordSpacing:1,"word-spacing":"wordSpacing",writingMode:1,"writing-mode":"writingMode",x1:0,x2:0,x:0,xChannelSelector:1,xHeight:1,"x-height":"xHeight",xlinkActuate:1,"xlink:actuate":"xlinkActuate",xlinkArcrole:1,"xlink:arcrole":"xlinkArcrole",xlinkHref:1,"xlink:href":"xlinkHref",xlinkRole:1,"xlink:role":"xlinkRole",xlinkShow:1,"xlink:show":"xlinkShow",xlinkTitle:1,"xlink:title":"xlinkTitle",xlinkType:1,"xlink:type":"xlinkType",xmlBase:1,"xml:base":"xmlBase",xmlLang:1,"xml:lang":"xmlLang",xmlns:0,"xml:space":"xmlSpace",xmlnsXlink:1,"xmlns:xlink":"xmlnsXlink",xmlSpace:1,y1:0,y2:0,y:0,yChannelSelector:1,z:0,zoomAndPan:1},cc}var $x;function LL(){if($x)return kr;$x=1;const t=0,e=1,n=2,r=3,s=4,a=5,l=6;function u(C){return f.hasOwnProperty(C)?f[C]:null}function d(C,R,k,z,G,le,he){this.acceptsBooleans=R===n||R===r||R===s,this.attributeName=z,this.attributeNamespace=G,this.mustUseProperty=k,this.propertyName=C,this.type=R,this.sanitizeURL=le,this.removeEmptyString=he}const f={};["children","dangerouslySetInnerHTML","defaultValue","defaultChecked","innerHTML","suppressContentEditableWarning","suppressHydrationWarning","style"].forEach(C=>{f[C]=new d(C,t,!1,C,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(([C,R])=>{f[C]=new d(C,e,!1,R,null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(C=>{f[C]=new d(C,n,!1,C.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(C=>{f[C]=new d(C,n,!1,C,null,!1,!1)}),["allowFullScreen","async","autoFocus","autoPlay","controls","default","defer","disabled","disablePictureInPicture","disableRemotePlayback","formNoValidate","hidden","loop","noModule","noValidate","open","playsInline","readOnly","required","reversed","scoped","seamless","itemScope"].forEach(C=>{f[C]=new d(C,r,!1,C.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(C=>{f[C]=new d(C,r,!0,C,null,!1,!1)}),["capture","download"].forEach(C=>{f[C]=new d(C,s,!1,C,null,!1,!1)}),["cols","rows","size","span"].forEach(C=>{f[C]=new d(C,l,!1,C,null,!1,!1)}),["rowSpan","start"].forEach(C=>{f[C]=new d(C,a,!1,C.toLowerCase(),null,!1,!1)});const m=/[\-\:]([a-z])/g,v=C=>C[1].toUpperCase();["accent-height","alignment-baseline","arabic-form","baseline-shift","cap-height","clip-path","clip-rule","color-interpolation","color-interpolation-filters","color-profile","color-rendering","dominant-baseline","enable-background","fill-opacity","fill-rule","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","glyph-name","glyph-orientation-horizontal","glyph-orientation-vertical","horiz-adv-x","horiz-origin-x","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","overline-position","overline-thickness","paint-order","panose-1","pointer-events","rendering-intent","shape-rendering","stop-color","stop-opacity","strikethrough-position","strikethrough-thickness","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-rendering","underline-position","underline-thickness","unicode-bidi","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","vector-effect","vert-adv-y","vert-origin-x","vert-origin-y","word-spacing","writing-mode","xmlns:xlink","x-height"].forEach(C=>{const R=C.replace(m,v);f[R]=new d(R,e,!1,C,null,!1,!1)}),["xlink:actuate","xlink:arcrole","xlink:role","xlink:show","xlink:title","xlink:type"].forEach(C=>{const R=C.replace(m,v);f[R]=new d(R,e,!1,C,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(C=>{const R=C.replace(m,v);f[R]=new d(R,e,!1,C,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(C=>{f[C]=new d(C,e,!1,C.toLowerCase(),null,!1,!1)});const b="xlinkHref";f[b]=new d("xlinkHref",e,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(C=>{f[C]=new d(C,e,!1,C.toLowerCase(),null,!0,!0)});const{CAMELCASE:w,SAME:x,possibleStandardNames:S}=jL(),O=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD"+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",M=RegExp.prototype.test.bind(new RegExp("^(data|aria)-["+O+"]*$")),P=Object.keys(S).reduce((C,R)=>{const k=S[R];return k===x?C[R]=R:k===w?C[R.toLowerCase()]=R:C[R]=k,C},{});return kr.BOOLEAN=r,kr.BOOLEANISH_STRING=n,kr.NUMERIC=a,kr.OVERLOADED_BOOLEAN=s,kr.POSITIVE_NUMERIC=l,kr.RESERVED=t,kr.STRING=e,kr.getPropertyInfo=u,kr.isCustomAttribute=M,kr.possibleStandardNames=P,kr}var uc={},Po={},ig,qx;function zL(){if(qx)return ig;qx=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,s=/^:\s*/,a=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,l=/^[;\s]*/,u=/^\s+|\s+$/g,d=`
`,f="/",p="*",m="",v="comment",b="declaration";function w(S,T){if(typeof S!="string")throw new TypeError("First argument must be a string");if(!S)return[];T=T||{};var O=1,M=1;function P(ue){var re=ue.match(e);re&&(O+=re.length);var I=ue.lastIndexOf(d);M=~I?ue.length-I:M+ue.length}function C(){var ue={line:O,column:M};return function(re){return re.position=new R(ue),G(),re}}function R(ue){this.start=ue,this.end={line:O,column:M},this.source=T.source}R.prototype.content=S;function k(ue){var re=new Error(T.source+":"+O+":"+M+": "+ue);if(re.reason=ue,re.filename=T.source,re.line=O,re.column=M,re.source=S,!T.silent)throw re}function z(ue){var re=ue.exec(S);if(re){var I=re[0];return P(I),S=S.slice(I.length),re}}function G(){z(n)}function le(ue){var re;for(ue=ue||[];re=he();)re!==!1&&ue.push(re);return ue}function he(){var ue=C();if(!(f!=S.charAt(0)||p!=S.charAt(1))){for(var re=2;m!=S.charAt(re)&&(p!=S.charAt(re)||f!=S.charAt(re+1));)++re;if(re+=2,m===S.charAt(re-1))return k("End of comment missing");var I=S.slice(2,re-2);return M+=2,P(I),S=S.slice(re),M+=2,ue({type:v,comment:I})}}function ye(){var ue=C(),re=z(r);if(re){if(he(),!z(s))return k("property missing ':'");var I=z(a),Q=ue({type:b,property:x(re[0].replace(t,m)),value:I?x(I[0].replace(t,m)):m});return z(l),Q}}function Ue(){var ue=[];le(ue);for(var re;re=ye();)re!==!1&&(ue.push(re),le(ue));return ue}return G(),Ue()}function x(S){return S?S.replace(u,m):m}return ig=w,ig}var Vx;function IL(){if(Vx)return Po;Vx=1;var t=Po&&Po.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Po,"__esModule",{value:!0}),Po.default=n;const e=t(zL());function n(r,s){let a=null;if(!r||typeof r!="string")return a;const l=(0,e.default)(r),u=typeof s=="function";return l.forEach(d=>{if(d.type!=="declaration")return;const{property:f,value:p}=d;u?s(f,p,d):p&&(a=a||{},a[f]=p)}),a}return Po}var dc={},Fx;function BL(){if(Fx)return dc;Fx=1,Object.defineProperty(dc,"__esModule",{value:!0}),dc.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,s=/^-(ms)-/,a=function(f){return!f||n.test(f)||t.test(f)},l=function(f,p){return p.toUpperCase()},u=function(f,p){return"".concat(p,"-")},d=function(f,p){return p===void 0&&(p={}),a(f)?f:(f=f.toLowerCase(),p.reactCompat?f=f.replace(s,u):f=f.replace(r,u),f.replace(e,l))};return dc.camelCase=d,dc}var fc,Gx;function UL(){if(Gx)return fc;Gx=1;var t=fc&&fc.__importDefault||function(s){return s&&s.__esModule?s:{default:s}},e=t(IL()),n=BL();function r(s,a){var l={};return!s||typeof s!="string"||(0,e.default)(s,function(u,d){u&&d&&(l[(0,n.camelCase)(u,a)]=d)}),l}return r.default=r,fc=r,fc}var Kx;function ak(){return Kx||(Kx=1,(function(t){var e=uc&&uc.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(t,"__esModule",{value:!0}),t.returnFirstArg=t.canTextBeChildOfNode=t.ELEMENTS_WITH_NO_TEXT_CHILDREN=t.PRESERVE_CUSTOM_ATTRIBUTES=void 0,t.isCustomComponent=a,t.setStyleProp=u;var n=$a(),r=e(UL()),s=new Set(["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"]);function a(p,m){return p.includes("-")?!s.has(p):!!(m&&typeof m.is=="string")}var l={reactCompat:!0};function u(p,m){if(typeof p=="string"){if(!p.trim()){m.style={};return}try{m.style=(0,r.default)(p,l)}catch{m.style={}}}}t.PRESERVE_CUSTOM_ATTRIBUTES=Number(n.version.split(".")[0])>=16,t.ELEMENTS_WITH_NO_TEXT_CHILDREN=new Set(["tr","tbody","thead","tfoot","colgroup","table","head","html","frameset"]);var d=function(p){return!t.ELEMENTS_WITH_NO_TEXT_CHILDREN.has(p.name)};t.canTextBeChildOfNode=d;var f=function(p){return p};t.returnFirstArg=f})(uc)),uc}var Wx;function ok(){if(Wx)return Bd;Wx=1,Object.defineProperty(Bd,"__esModule",{value:!0}),Bd.default=a;var t=LL(),e=ak(),n=["checked","value"],r=["input","select","textarea"],s={reset:!0,submit:!0};function a(u,d){u===void 0&&(u={});var f={},p=!!(u.type&&s[u.type]);for(var m in u){var v=u[m];if((0,t.isCustomAttribute)(m)){f[m]=v;continue}var b=m.toLowerCase(),w=l(b);if(w){var x=(0,t.getPropertyInfo)(w);switch(n.includes(w)&&r.includes(d)&&!p&&(w=l("default"+b)),f[w]=v,x?.type){case t.BOOLEAN:f[w]=!0;break;case t.OVERLOADED_BOOLEAN:v===""&&(f[w]=!0);break}continue}e.PRESERVE_CUSTOM_ATTRIBUTES&&(f[m]=v)}return(0,e.setStyleProp)(u.style,f),f}function l(u){return t.possibleStandardNames[u]}return Bd}var Ho={},Yx;function PL(){if(Yx)return Ho;Yx=1;var t=Ho&&Ho.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(Ho,"__esModule",{value:!0}),Ho.default=a;var e=$a(),n=t(ok()),r=ak(),s={cloneElement:e.cloneElement,createElement:e.createElement,isValidElement:e.isValidElement};function a(u,d){var f,p,m,v,b;d===void 0&&(d={});for(var w=[],x=typeof d.replace=="function",S=(f=d.transform)!==null&&f!==void 0?f:r.returnFirstArg,T=(p=d.library)!==null&&p!==void 0?p:s,O=T.cloneElement,M=T.createElement,P=T.isValidElement,C=u.length,R=0;R<C;R++){var k=u[R];if(x){var z=(m=d.replace)===null||m===void 0?void 0:m.call(d,k,R);if(P(z)){C>1&&(z=O(z,{key:(v=z.key)!==null&&v!==void 0?v:R})),w.push(S(z,k,R));continue}}if(k.type==="text"){var G=!k.data.trim().length;if(G&&k.parent&&!(0,r.canTextBeChildOfNode)(k.parent)||d.trim&&G)continue;w.push(S(k.data,k,R));continue}var le=k,he={};l(le)?((0,r.setStyleProp)(le.attribs.style,le.attribs),he=le.attribs):le.attribs&&(he=(0,n.default)(le.attribs,le.name));var ye=void 0;switch(k.type){case"script":case"style":k.children[0]&&(he.dangerouslySetInnerHTML={__html:k.children[0].data});break;case"tag":k.name==="textarea"&&k.children[0]?he.defaultValue=k.children[0].data:!((b=k.children)===null||b===void 0)&&b.length&&(ye=a(k.children,d));break;default:continue}C>1&&(he.key=R),w.push(S(M(k.name,he,ye),k,R))}return w.length===1?w[0]:w}function l(u){return r.PRESERVE_CUSTOM_ATTRIBUTES&&u.type==="tag"&&(0,r.isCustomComponent)(u.name,u.attribs)}return Ho}var Jx;function HL(){return Jx||(Jx=1,(function(t){var e=lc&&lc.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(t,"__esModule",{value:!0}),t.htmlToDOM=t.domToReact=t.attributesToProps=t.Text=t.ProcessingInstruction=t.Element=t.Comment=void 0,t.default=u;var n=e(DL());t.htmlToDOM=n.default;var r=e(ok());t.attributesToProps=r.default;var s=e(PL());t.domToReact=s.default;var a=ik();Object.defineProperty(t,"Comment",{enumerable:!0,get:function(){return a.Comment}}),Object.defineProperty(t,"Element",{enumerable:!0,get:function(){return a.Element}}),Object.defineProperty(t,"ProcessingInstruction",{enumerable:!0,get:function(){return a.ProcessingInstruction}}),Object.defineProperty(t,"Text",{enumerable:!0,get:function(){return a.Text}});var l={lowerCaseAttributeNames:!1};function u(d,f){var p;if(typeof d!="string")throw new TypeError("First argument must be a string");return d?(0,s.default)((0,n.default)(d,(p=f?.htmlparser2)!==null&&p!==void 0?p:l),f):[]}})(lc)),lc}var $L=HL();const Xx=Ry($L),lk=Xx.default||Xx;function qL({article:t}){const{name:e,username:n,profile_img:r}=t.UserTable;console.log(t);const[s]=L.useContext(ph),[,a]=L.useContext(hh);let l=t?.author_id,u=s?.user_id;async function d(){if(t&&t.id){console.log("calling supabase");const f=await ur.from("ArticleTable").delete().eq("id",t.id);console.log(f),f.status=="204"&&a(p=>(console.log("updating"),p.filter(m=>m.id!=t.id)))}}return A.jsxs("div",{className:" h-fit w-[80vw] sm:w-[60vw]  my-2 rounded-xl  px-2 pt-1 pb-4  border border-gray-200 shadow-xs",children:[A.jsxs("div",{className:"  flex justify-between mx-1",children:[A.jsxs("div",{className:" flex flex-row items-center ",children:[A.jsx("img",{src:r||Gc,alt:"user-img",className:"size-9 mx-2 my-1 rounded-full"}),A.jsxs("div",{className:"",children:[A.jsx("p",{className:"text-[12px]",children:e}),A.jsx("p",{className:"text-[10px] hover:bg-gray-500 rounded-full mx-0 hover:px-1 cursor-pointer",children:A.jsxs(pT,{to:`/${n}`,children:["@",n]})})]})]}),A.jsxs("div",{className:"relative [&>ul]:hidden [&:hover>ul]:block cursor-pointer hidden",children:[A.jsx(YN,{}),A.jsx("ul",{className:"bg-white  p-1 absolute rounded-md border-gray-500 ",children:u===l&&A.jsxs("li",{className:"flex border items-center px-2 -mt-2 -ml-2 py-1 text-red-900 rounded-md hover:bg-red-400",onClick:d,children:[A.jsx(tD,{className:"inline",size:"16px"}),"Delete"]})})]})]}),A.jsx("div",{className:"px-4 py-2 text-lg font-semibold my-0",children:t.title}),A.jsx("div",{className:"px-4",children:lk(t.body)})]})}function VL(){const[t]=L.useContext(hh);let e=Fa();return L.useEffect(()=>{setTimeout(()=>{if(!t.length)return console.log("articles data is empty."),e("/auth"),null},500)},[t,e]),A.jsxs("div",{children:[t?.length&&A.jsx("div",{className:"flex justify-center  flex-col items-center w-full box-border pb-8 ",children:t&&t.map(n=>A.jsx(qL,{article:n},n.id))}),!t?.length&&A.jsx("div",{className:"min-h-screen flex items-center justify-center",children:A.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[A.jsx(cu,{size:24,className:"animate-spin"}),A.jsx("span",{children:"Loading profile..."})]})})]})}var sg={exports:{}},ag={};var Qx;function FL(){if(Qx)return ag;Qx=1;var t=$a();function e(m,v){return m===v&&(m!==0||1/m===1/v)||m!==m&&v!==v}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,s=t.useEffect,a=t.useLayoutEffect,l=t.useDebugValue;function u(m,v){var b=v(),w=r({inst:{value:b,getSnapshot:v}}),x=w[0].inst,S=w[1];return a(function(){x.value=b,x.getSnapshot=v,d(x)&&S({inst:x})},[m,b,v]),s(function(){return d(x)&&S({inst:x}),m(function(){d(x)&&S({inst:x})})},[m]),l(b),b}function d(m){var v=m.getSnapshot;m=m.value;try{var b=v();return!n(m,b)}catch{return!0}}function f(m,v){return v()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:u;return ag.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:p,ag}var Zx;function ck(){return Zx||(Zx=1,sg.exports=FL()),sg.exports}var uk=ck();function bn(t){this.content=t}bn.prototype={constructor:bn,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,s=r.find(t),a=r.content.slice();return s==-1?a.push(n||t,e):(a[s+1]=e,n&&(a[s]=n)),new bn(a)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new bn(n)},addToStart:function(t,e){return new bn([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new bn(n)},addBefore:function(t,e,n){var r=this.remove(e),s=r.content.slice(),a=r.find(t);return s.splice(a==-1?s.length:a,0,e,n),new bn(s)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=bn.from(t),t.size?new bn(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=bn.from(t),t.size?new bn(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=bn.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};bn.from=function(t){if(t instanceof bn)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new bn(e)};function dk(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let s=t.child(r),a=e.child(r);if(s==a){n+=s.nodeSize;continue}if(!s.sameMarkup(a))return n;if(s.isText&&s.text!=a.text){for(let l=0;s.text[l]==a.text[l];l++)n++;return n}if(s.content.size||a.content.size){let l=dk(s.content,a.content,n+1);if(l!=null)return l}n+=s.nodeSize}}function fk(t,e,n,r){for(let s=t.childCount,a=e.childCount;;){if(s==0||a==0)return s==a?null:{a:n,b:r};let l=t.child(--s),u=e.child(--a),d=l.nodeSize;if(l==u){n-=d,r-=d;continue}if(!l.sameMarkup(u))return{a:n,b:r};if(l.isText&&l.text!=u.text){let f=0,p=Math.min(l.text.length,u.text.length);for(;f<p&&l.text[l.text.length-f-1]==u.text[u.text.length-f-1];)f++,n--,r--;return{a:n,b:r}}if(l.content.size||u.content.size){let f=fk(l.content,u.content,n-1,r-1);if(f)return f}n-=d,r-=d}}class ie{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,s=0,a){for(let l=0,u=0;u<n;l++){let d=this.content[l],f=u+d.nodeSize;if(f>e&&r(d,s+u,a||null,l)!==!1&&d.content.size){let p=u+1;d.nodesBetween(Math.max(0,e-p),Math.min(d.content.size,n-p),r,s+p)}u=f}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,s){let a="",l=!0;return this.nodesBetween(e,n,(u,d)=>{let f=u.isText?u.text.slice(Math.max(e,d)-d,n-d):u.isLeaf?s?typeof s=="function"?s(u):s:u.type.spec.leafText?u.type.spec.leafText(u):"":"";u.isBlock&&(u.isLeaf&&f||u.isTextblock)&&r&&(l?l=!1:a+=r),a+=f},0),a}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,s=this.content.slice(),a=0;for(n.isText&&n.sameMarkup(r)&&(s[s.length-1]=n.withText(n.text+r.text),a=1);a<e.content.length;a++)s.push(e.content[a]);return new ie(s,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],s=0;if(n>e)for(let a=0,l=0;l<n;a++){let u=this.content[a],d=l+u.nodeSize;d>e&&((l<e||d>n)&&(u.isText?u=u.cut(Math.max(0,e-l),Math.min(u.text.length,n-l)):u=u.cut(Math.max(0,e-l-1),Math.min(u.content.size,n-l-1))),r.push(u),s+=u.nodeSize),l=d}return new ie(r,s)}cutByIndex(e,n){return e==n?ie.empty:e==0&&n==this.content.length?this:new ie(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let s=this.content.slice(),a=this.size+n.nodeSize-r.nodeSize;return s[e]=n,new ie(s,a)}addToStart(e){return new ie([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new ie(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let s=this.content[n];e(s,r,n),r+=s.nodeSize}}findDiffStart(e,n=0){return dk(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return fk(this,e,n,r)}findIndex(e){if(e==0)return Ud(0,e);if(e==this.size)return Ud(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let s=this.child(n),a=r+s.nodeSize;if(a>=e)return a==e?Ud(n+1,a):Ud(n,r);r=a}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return ie.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new ie(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return ie.empty;let n,r=0;for(let s=0;s<e.length;s++){let a=e[s];r+=a.nodeSize,s&&a.isText&&e[s-1].sameMarkup(a)?(n||(n=e.slice(0,s)),n[n.length-1]=a.withText(n[n.length-1].text+a.text)):n&&n.push(a)}return new ie(n||e,r)}static from(e){if(!e)return ie.empty;if(e instanceof ie)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new ie([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}ie.empty=new ie([],0);const og={index:0,offset:0};function Ud(t,e){return og.index=t,og.offset=e,og}function mf(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!mf(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!mf(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let gt=class Zg{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let s=0;s<e.length;s++){let a=e[s];if(this.eq(a))return e;if(this.type.excludes(a.type))n||(n=e.slice(0,s));else{if(a.type.excludes(this.type))return e;!r&&a.type.rank>this.type.rank&&(n||(n=e.slice(0,s)),n.push(this),r=!0),n&&n.push(a)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&mf(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let s=r.create(n.attrs);return r.checkAttrs(s.attrs),s}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Zg.none;if(e instanceof Zg)return[e];let n=e.slice();return n.sort((r,s)=>r.type.rank-s.type.rank),n}};gt.none=[];class gf extends Error{}class me{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=pk(this.content,e+this.openStart,n);return r&&new me(r,this.openStart,this.openEnd)}removeBetween(e,n){return new me(hk(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return me.empty;let r=n.openStart||0,s=n.openEnd||0;if(typeof r!="number"||typeof s!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new me(ie.fromJSON(e,n.content),r,s)}static maxOpen(e,n=!0){let r=0,s=0;for(let a=e.firstChild;a&&!a.isLeaf&&(n||!a.type.spec.isolating);a=a.firstChild)r++;for(let a=e.lastChild;a&&!a.isLeaf&&(n||!a.type.spec.isolating);a=a.lastChild)s++;return new me(e,r,s)}}me.empty=new me(ie.empty,0,0);function hk(t,e,n){let{index:r,offset:s}=t.findIndex(e),a=t.maybeChild(r),{index:l,offset:u}=t.findIndex(n);if(s==e||a.isText){if(u!=n&&!t.child(l).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=l)throw new RangeError("Removing non-flat range");return t.replaceChild(r,a.copy(hk(a.content,e-s-1,n-s-1)))}function pk(t,e,n,r){let{index:s,offset:a}=t.findIndex(e),l=t.maybeChild(s);if(a==e||l.isText)return r&&!r.canReplace(s,s,n)?null:t.cut(0,e).append(n).append(t.cut(e));let u=pk(l.content,e-a-1,n,l);return u&&t.replaceChild(s,l.copy(u))}function GL(t,e,n){if(n.openStart>t.depth)throw new gf("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new gf("Inconsistent open depths");return mk(t,e,n,0)}function mk(t,e,n,r){let s=t.index(r),a=t.node(r);if(s==e.index(r)&&r<t.depth-n.openStart){let l=mk(t,e,n,r+1);return a.copy(a.content.replaceChild(s,l))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let l=t.parent,u=l.content;return Da(l,u.cut(0,t.parentOffset).append(n.content).append(u.cut(e.parentOffset)))}else{let{start:l,end:u}=KL(n,t);return Da(a,yk(t,l,u,e,r))}else return Da(a,yf(t,e,r))}function gk(t,e){if(!e.type.compatibleContent(t.type))throw new gf("Cannot join "+e.type.name+" onto "+t.type.name)}function ey(t,e,n){let r=t.node(n);return gk(r,e.node(n)),r}function Na(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function Cc(t,e,n,r){let s=(e||t).node(n),a=0,l=e?e.index(n):s.childCount;t&&(a=t.index(n),t.depth>n?a++:t.textOffset&&(Na(t.nodeAfter,r),a++));for(let u=a;u<l;u++)Na(s.child(u),r);e&&e.depth==n&&e.textOffset&&Na(e.nodeBefore,r)}function Da(t,e){return t.type.checkContent(e),t.copy(e)}function yk(t,e,n,r,s){let a=t.depth>s&&ey(t,e,s+1),l=r.depth>s&&ey(n,r,s+1),u=[];return Cc(null,t,s,u),a&&l&&e.index(s)==n.index(s)?(gk(a,l),Na(Da(a,yk(t,e,n,r,s+1)),u)):(a&&Na(Da(a,yf(t,e,s+1)),u),Cc(e,n,s,u),l&&Na(Da(l,yf(n,r,s+1)),u)),Cc(r,null,s,u),new ie(u)}function yf(t,e,n){let r=[];if(Cc(null,t,n,r),t.depth>n){let s=ey(t,e,n+1);Na(Da(s,yf(t,e,n+1)),r)}return Cc(e,null,n,r),new ie(r)}function KL(t,e){let n=e.depth-t.openStart,s=e.node(n).copy(t.content);for(let a=n-1;a>=0;a--)s=e.node(a).copy(ie.from(s));return{start:s.resolveNoCache(t.openStart+n),end:s.resolveNoCache(s.content.size-t.openEnd-n)}}class Kc{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],s=e.child(n);return r?e.child(n).cut(r):s}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],s=n==0?0:this.path[n*3-1]+1;for(let a=0;a<e;a++)s+=r.child(a).nodeSize;return s}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return gt.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),s=e.maybeChild(n);if(!r){let u=r;r=s,s=u}let a=r.marks;for(var l=0;l<a.length;l++)a[l].type.spec.inclusive===!1&&(!s||!a[l].isInSet(s.marks))&&(a=a[l--].removeFromSet(a));return a}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,s=e.parent.maybeChild(e.index());for(var a=0;a<r.length;a++)r[a].type.spec.inclusive===!1&&(!s||!r[a].isInSet(s.marks))&&(r=r[a--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new vf(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],s=0,a=n;for(let l=e;;){let{index:u,offset:d}=l.content.findIndex(a),f=a-d;if(r.push(l,u,s+d),!f||(l=l.child(u),l.isText))break;a=f-1,s+=d+1}return new Kc(n,r,a)}static resolveCached(e,n){let r=e1.get(e);if(r)for(let a=0;a<r.elts.length;a++){let l=r.elts[a];if(l.pos==n)return l}else e1.set(e,r=new WL);let s=r.elts[r.i]=Kc.resolve(e,n);return r.i=(r.i+1)%YL,s}}class WL{constructor(){this.elts=[],this.i=0}}const YL=12,e1=new WeakMap;class vf{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const JL=Object.create(null);class Jr{constructor(e,n,r,s=gt.none){this.type=e,this.attrs=n,this.marks=s,this.content=r||ie.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,s=0){this.content.nodesBetween(e,n,r,s,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,s){return this.content.textBetween(e,n,r,s)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&mf(this.attrs,n||e.defaultAttrs||JL)&&gt.sameSet(this.marks,r||gt.none)}copy(e=null){return e==this.content?this:new Jr(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Jr(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return me.empty;let s=this.resolve(e),a=this.resolve(n),l=r?0:s.sharedDepth(n),u=s.start(l),f=s.node(l).content.cut(s.pos-u,a.pos-u);return new me(f,s.depth-l,a.depth-l)}replace(e,n,r){return GL(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:s}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(s==e||n.isText)return n;e-=s+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let s=this.content.child(n-1);return{node:s,index:n-1,offset:r-s.nodeSize}}resolve(e){return Kc.resolveCached(this,e)}resolveNoCache(e){return Kc.resolve(this,e)}rangeHasMark(e,n,r){let s=!1;return n>e&&this.nodesBetween(e,n,a=>(r.isInSet(a.marks)&&(s=!0),!s)),s}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),vk(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=ie.empty,s=0,a=r.childCount){let l=this.contentMatchAt(e).matchFragment(r,s,a),u=l&&l.matchFragment(this.content,n);if(!u||!u.validEnd)return!1;for(let d=s;d<a;d++)if(!this.type.allowsMarks(r.child(d).marks))return!1;return!0}canReplaceWith(e,n,r,s){if(s&&!this.type.allowsMarks(s))return!1;let a=this.contentMatchAt(e).matchType(r),l=a&&a.matchFragment(this.content,n);return l?l.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=gt.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!gt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let s=ie.fromJSON(e,n.content),a=e.nodeType(n.type).create(n.attrs,s,r);return a.type.checkAttrs(a.attrs),a}}Jr.prototype.text=void 0;class bf extends Jr{constructor(e,n,r,s){if(super(e,n,null,s),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):vk(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new bf(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new bf(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function vk(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class Ia{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new XL(e,n);if(r.next==null)return Ia.empty;let s=bk(r);r.next&&r.err("Unexpected trailing text");let a=iz(rz(s));return sz(a,r),a}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let s=this;for(let a=n;s&&a<r;a++)s=s.matchType(e.child(a).type);return s}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let s=[this];function a(l,u){let d=l.matchFragment(e,r);if(d&&(!n||d.validEnd))return ie.from(u.map(f=>f.createAndFill()));for(let f=0;f<l.next.length;f++){let{type:p,next:m}=l.next[f];if(!(p.isText||p.hasRequiredAttrs())&&s.indexOf(m)==-1){s.push(m);let v=a(m,u.concat(p));if(v)return v}}return null}return a(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let s=r.shift(),a=s.match;if(a.matchType(e)){let l=[];for(let u=s;u.type;u=u.via)l.push(u.type);return l.reverse()}for(let l=0;l<a.next.length;l++){let{type:u,next:d}=a.next[l];!u.isLeaf&&!u.hasRequiredAttrs()&&!(u.name in n)&&(!s.type||d.validEnd)&&(r.push({match:u.contentMatch,type:u,via:s}),n[u.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let s=0;s<r.next.length;s++)e.indexOf(r.next[s].next)==-1&&n(r.next[s].next)}return n(this),e.map((r,s)=>{let a=s+(r.validEnd?"*":" ")+" ";for(let l=0;l<r.next.length;l++)a+=(l?", ":"")+r.next[l].type.name+"->"+e.indexOf(r.next[l].next);return a}).join(`
`)}}Ia.empty=new Ia(!0);class XL{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function bk(t){let e=[];do e.push(QL(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function QL(t){let e=[];do e.push(ZL(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function ZL(t){let e=nz(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=ez(t,e);else break;return e}function t1(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function ez(t,e){let n=t1(t),r=n;return t.eat(",")&&(t.next!="}"?r=t1(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function tz(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let s=[];for(let a in n){let l=n[a];l.isInGroup(e)&&s.push(l)}return s.length==0&&t.err("No node type or group '"+e+"' found"),s}function nz(t){if(t.eat("(")){let e=bk(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=tz(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function rz(t){let e=[[]];return s(a(t,0),n()),e;function n(){return e.push([])-1}function r(l,u,d){let f={term:d,to:u};return e[l].push(f),f}function s(l,u){l.forEach(d=>d.to=u)}function a(l,u){if(l.type=="choice")return l.exprs.reduce((d,f)=>d.concat(a(f,u)),[]);if(l.type=="seq")for(let d=0;;d++){let f=a(l.exprs[d],u);if(d==l.exprs.length-1)return f;s(f,u=n())}else if(l.type=="star"){let d=n();return r(u,d),s(a(l.expr,d),d),[r(d)]}else if(l.type=="plus"){let d=n();return s(a(l.expr,u),d),s(a(l.expr,d),d),[r(d)]}else{if(l.type=="opt")return[r(u)].concat(a(l.expr,u));if(l.type=="range"){let d=u;for(let f=0;f<l.min;f++){let p=n();s(a(l.expr,d),p),d=p}if(l.max==-1)s(a(l.expr,d),d);else for(let f=l.min;f<l.max;f++){let p=n();r(d,p),s(a(l.expr,d),p),d=p}return[r(d)]}else{if(l.type=="name")return[r(u,void 0,l.value)];throw new Error("Unknown expr type")}}}}function wk(t,e){return e-t}function n1(t,e){let n=[];return r(e),n.sort(wk);function r(s){let a=t[s];if(a.length==1&&!a[0].term)return r(a[0].to);n.push(s);for(let l=0;l<a.length;l++){let{term:u,to:d}=a[l];!u&&n.indexOf(d)==-1&&r(d)}}}function iz(t){let e=Object.create(null);return n(n1(t,0));function n(r){let s=[];r.forEach(l=>{t[l].forEach(({term:u,to:d})=>{if(!u)return;let f;for(let p=0;p<s.length;p++)s[p][0]==u&&(f=s[p][1]);n1(t,d).forEach(p=>{f||s.push([u,f=[]]),f.indexOf(p)==-1&&f.push(p)})})});let a=e[r.join(",")]=new Ia(r.indexOf(t.length-1)>-1);for(let l=0;l<s.length;l++){let u=s[l][1].sort(wk);a.next.push({type:s[l][0],next:e[u.join(",")]||n(u)})}return a}}function sz(t,e){for(let n=0,r=[t];n<r.length;n++){let s=r[n],a=!s.validEnd,l=[];for(let u=0;u<s.next.length;u++){let{type:d,next:f}=s.next[u];l.push(d.name),a&&!(d.isText||d.hasRequiredAttrs())&&(a=!1),r.indexOf(f)==-1&&r.push(f)}a&&e.err("Only non-generatable nodes ("+l.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Sk(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function xk(t,e){let n=Object.create(null);for(let r in t){let s=e&&e[r];if(s===void 0){let a=t[r];if(a.hasDefault)s=a.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=s}return n}function Ek(t,e,n,r){for(let s in e)if(!(s in t))throw new RangeError(`Unsupported attribute ${s} for ${n} of type ${s}`);for(let s in t){let a=t[s];a.validate&&a.validate(e[s])}}function Tk(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new oz(t,r,e[r]);return n}let r1=class kk{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=Tk(e,r.attrs),this.defaultAttrs=Sk(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Ia.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:xk(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Jr(this,this.computeAttrs(e),ie.from(n),gt.setFrom(r))}createChecked(e=null,n,r){return n=ie.from(n),this.checkContent(n),new Jr(this,this.computeAttrs(e),n,gt.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=ie.from(n),n.size){let l=this.contentMatch.fillBefore(n);if(!l)return null;n=l.append(n)}let s=this.contentMatch.matchFragment(n),a=s&&s.fillBefore(ie.empty,!0);return a?new Jr(this,e,n.append(a),gt.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){Ek(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:gt.none:e}static compile(e,n){let r=Object.create(null);e.forEach((a,l)=>r[a]=new kk(a,n,l));let s=n.spec.topNode||"doc";if(!r[s])throw new RangeError("Schema is missing its top node type ('"+s+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let a in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function az(t,e,n){let r=n.split("|");return s=>{let a=s===null?"null":typeof s;if(r.indexOf(a)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${a}`)}}class oz{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?az(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class mh{constructor(e,n,r,s){this.name=e,this.rank=n,this.schema=r,this.spec=s,this.attrs=Tk(e,s.attrs),this.excluded=null;let a=Sk(this.attrs);this.instance=a?new gt(this,a):null}create(e=null){return!e&&this.instance?this.instance:new gt(this,xk(this.attrs,e))}static compile(e,n){let r=Object.create(null),s=0;return e.forEach((a,l)=>r[a]=new mh(a,s++,n,l)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){Ek(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class _k{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let s in e)n[s]=e[s];n.nodes=bn.from(e.nodes),n.marks=bn.from(e.marks||{}),this.nodes=r1.compile(this.spec.nodes,this),this.marks=mh.compile(this.spec.marks,this);let r=Object.create(null);for(let s in this.nodes){if(s in this.marks)throw new RangeError(s+" can not be both a node and a mark");let a=this.nodes[s],l=a.spec.content||"",u=a.spec.marks;if(a.contentMatch=r[l]||(r[l]=Ia.parse(l,this.nodes)),a.inlineContent=a.contentMatch.inlineContent,a.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!a.isInline||!a.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=a}a.markSet=u=="_"?null:u?i1(this,u.split(" ")):u==""||!a.inlineContent?[]:null}for(let s in this.marks){let a=this.marks[s],l=a.spec.excludes;a.excluded=l==null?[a]:l==""?[]:i1(this,l.split(" "))}this.nodeFromJSON=s=>Jr.fromJSON(this,s),this.markFromJSON=s=>gt.fromJSON(this,s),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,s){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof r1){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,s)}text(e,n){let r=this.nodes.text;return new bf(r,r.defaultAttrs,e,gt.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function i1(t,e){let n=[];for(let r=0;r<e.length;r++){let s=e[r],a=t.marks[s],l=a;if(a)n.push(a);else for(let u in t.marks){let d=t.marks[u];(s=="_"||d.spec.group&&d.spec.group.split(" ").indexOf(s)>-1)&&n.push(l=d)}if(!l)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function lz(t){return t.tag!=null}function cz(t){return t.style!=null}class Is{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(s=>{if(lz(s))this.tags.push(s);else if(cz(s)){let a=/[^=]*/.exec(s.style)[0];r.indexOf(a)<0&&r.push(a),this.styles.push(s)}}),this.normalizeLists=!this.tags.some(s=>{if(!/^(ul|ol)\b/.test(s.tag)||!s.node)return!1;let a=e.nodes[s.node];return a.contentMatch.matchType(a)})}parse(e,n={}){let r=new a1(this,n,!1);return r.addAll(e,gt.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new a1(this,n,!0);return r.addAll(e,gt.none,n.from,n.to),me.maxOpen(r.finish())}matchTag(e,n,r){for(let s=r?this.tags.indexOf(r)+1:0;s<this.tags.length;s++){let a=this.tags[s];if(fz(e,a.tag)&&(a.namespace===void 0||e.namespaceURI==a.namespace)&&(!a.context||n.matchesContext(a.context))){if(a.getAttrs){let l=a.getAttrs(e);if(l===!1)continue;a.attrs=l||void 0}return a}}}matchStyle(e,n,r,s){for(let a=s?this.styles.indexOf(s)+1:0;a<this.styles.length;a++){let l=this.styles[a],u=l.style;if(!(u.indexOf(e)!=0||l.context&&!r.matchesContext(l.context)||u.length>e.length&&(u.charCodeAt(e.length)!=61||u.slice(e.length+1)!=n))){if(l.getAttrs){let d=l.getAttrs(n);if(d===!1)continue;l.attrs=d||void 0}return l}}}static schemaRules(e){let n=[];function r(s){let a=s.priority==null?50:s.priority,l=0;for(;l<n.length;l++){let u=n[l];if((u.priority==null?50:u.priority)<a)break}n.splice(l,0,s)}for(let s in e.marks){let a=e.marks[s].spec.parseDOM;a&&a.forEach(l=>{r(l=o1(l)),l.mark||l.ignore||l.clearMark||(l.mark=s)})}for(let s in e.nodes){let a=e.nodes[s].spec.parseDOM;a&&a.forEach(l=>{r(l=o1(l)),l.node||l.ignore||l.mark||(l.node=s)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Is(e,Is.schemaRules(e)))}}const Ck={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},uz={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Ak={ol:!0,ul:!0},Wc=1,ty=2,Ac=4;function s1(t,e,n){return e!=null?(e?Wc:0)|(e==="full"?ty:0):t&&t.whitespace=="pre"?Wc|ty:n&~Ac}class Pd{constructor(e,n,r,s,a,l){this.type=e,this.attrs=n,this.marks=r,this.solid=s,this.options=l,this.content=[],this.activeMarks=gt.none,this.match=a||(l&Ac?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(ie.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,s;return(s=r.findWrapping(e.type))?(this.match=r,s):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Wc)){let r=this.content[this.content.length-1],s;if(r&&r.isText&&(s=/[ \t\r\n\u000c]+$/.exec(r.text))){let a=r;r.text.length==s[0].length?this.content.pop():this.content[this.content.length-1]=a.withText(a.text.slice(0,a.text.length-s[0].length))}}let n=ie.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(ie.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Ck.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class a1{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let s=n.topNode,a,l=s1(null,n.preserveWhitespace,0)|(r?Ac:0);s?a=new Pd(s.type,s.attrs,gt.none,!0,n.topMatch||s.type.contentMatch,l):r?a=new Pd(null,null,gt.none,!0,null,l):a=new Pd(e.schema.topNodeType,null,gt.none,!0,null,l),this.nodes=[a],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,s=this.top,a=s.options&ty?"full":this.localPreserveWS||(s.options&Wc)>0,{schema:l}=this.parser;if(a==="full"||s.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(a)if(a==="full")r=r.replace(/\r\n?/g,`
`);else if(l.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(l.linebreakReplacement.create())){let u=r.split(/\r?\n|\r/);for(let d=0;d<u.length;d++)d&&this.insertNode(l.linebreakReplacement.create(),n,!0),u[d]&&this.insertNode(l.text(u[d]),n,!/\S/.test(u[d]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let u=s.content[s.content.length-1],d=e.previousSibling;(!u||d&&d.nodeName=="BR"||u.isText&&/[ \t\r\n\u000c]$/.test(u.text))&&(r=r.slice(1))}r&&this.insertNode(l.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let s=this.localPreserveWS,a=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let l=e.nodeName.toLowerCase(),u;Ak.hasOwnProperty(l)&&this.parser.normalizeLists&&dz(e);let d=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(u=this.parser.matchTag(e,this,r));e:if(d?d.ignore:uz.hasOwnProperty(l))this.findInside(e),this.ignoreFallback(e,n);else if(!d||d.skip||d.closeParent){d&&d.closeParent?this.open=Math.max(0,this.open-1):d&&d.skip.nodeType&&(e=d.skip);let f,p=this.needsBlock;if(Ck.hasOwnProperty(l))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),f=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let m=d&&d.skip?n:this.readStyles(e,n);m&&this.addAll(e,m),f&&this.sync(a),this.needsBlock=p}else{let f=this.readStyles(e,n);f&&this.addElementByRule(e,d,f,d.consuming===!1?u:void 0)}this.localPreserveWS=s}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let s=0;s<this.parser.matchedStyles.length;s++){let a=this.parser.matchedStyles[s],l=r.getPropertyValue(a);if(l)for(let u=void 0;;){let d=this.parser.matchStyle(a,l,this,u);if(!d)break;if(d.ignore)return null;if(d.clearMark?n=n.filter(f=>!d.clearMark(f)):n=n.concat(this.parser.schema.marks[d.mark].create(d.attrs)),d.consuming===!1)u=d;else break}}return n}addElementByRule(e,n,r,s){let a,l;if(n.node)if(l=this.parser.schema.nodes[n.node],l.isLeaf)this.insertNode(l.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let d=this.enter(l,n.attrs||null,r,n.preserveWhitespace);d&&(a=!0,r=d)}else{let d=this.parser.schema.marks[n.mark];r=r.concat(d.create(n.attrs))}let u=this.top;if(l&&l.isLeaf)this.findInside(e);else if(s)this.addElement(e,r,s);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(d=>this.insertNode(d,r,!1));else{let d=e;typeof n.contentElement=="string"?d=e.querySelector(n.contentElement):typeof n.contentElement=="function"?d=n.contentElement(e):n.contentElement&&(d=n.contentElement),this.findAround(e,d,!0),this.addAll(d,r),this.findAround(e,d,!1)}a&&this.sync(u)&&this.open--}addAll(e,n,r,s){let a=r||0;for(let l=r?e.childNodes[r]:e.firstChild,u=s==null?null:e.childNodes[s];l!=u;l=l.nextSibling,++a)this.findAtPoint(e,a),this.addDOM(l,n);this.findAtPoint(e,a)}findPlace(e,n,r){let s,a;for(let l=this.open,u=0;l>=0;l--){let d=this.nodes[l],f=d.findWrapping(e);if(f&&(!s||s.length>f.length+u)&&(s=f,a=d,!f.length))break;if(d.solid){if(r)break;u+=2}}if(!s)return null;this.sync(a);for(let l=0;l<s.length;l++)n=this.enterInner(s[l],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let a=this.textblockFromContext();a&&(n=this.enterInner(a,null,n))}let s=this.findPlace(e,n,r);if(s){this.closeExtra();let a=this.top;a.match&&(a.match=a.match.matchType(e.type));let l=gt.none;for(let u of s.concat(e.marks))(a.type?a.type.allowsMarkType(u.type):l1(u.type,e.type))&&(l=u.addToSet(l));return a.content.push(e.mark(l)),!0}return!1}enter(e,n,r,s){let a=this.findPlace(e.create(n),r,!1);return a&&(a=this.enterInner(e,n,r,!0,s)),a}enterInner(e,n,r,s=!1,a){this.closeExtra();let l=this.top;l.match=l.match&&l.match.matchType(e);let u=s1(e,a,l.options);l.options&Ac&&l.content.length==0&&(u|=Ac);let d=gt.none;return r=r.filter(f=>(l.type?l.type.allowsMarkType(f.type):l1(f.type,e))?(d=f.addToSet(d),!1):!0),this.nodes.push(new Pd(e,n,d,s,null,u)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=Wc)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let s=r.length-1;s>=0;s--)e+=r[s].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let s=0;s<this.find.length;s++)this.find[s].pos==null&&e.nodeType==1&&e.contains(this.find[s].node)&&n.compareDocumentPosition(this.find[s].node)&(r?2:4)&&(this.find[s].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,s=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),a=-(r?r.depth+1:0)+(s?0:1),l=(u,d)=>{for(;u>=0;u--){let f=n[u];if(f==""){if(u==n.length-1||u==0)continue;for(;d>=a;d--)if(l(u-1,d))return!0;return!1}else{let p=d>0||d==0&&s?this.nodes[d].type:r&&d>=a?r.node(d-a).type:null;if(!p||p.name!=f&&!p.isInGroup(f))return!1;d--}}return!0};return l(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function dz(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&Ak.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function fz(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function o1(t){let e={};for(let n in t)e[n]=t[n];return e}function l1(t,e){let n=e.schema.nodes;for(let r in n){let s=n[r];if(!s.allowsMarkType(t))continue;let a=[],l=u=>{a.push(u);for(let d=0;d<u.edgeCount;d++){let{type:f,next:p}=u.edge(d);if(f==e||a.indexOf(p)<0&&l(p))return!0}};if(l(s.contentMatch))return!0}}class Ka{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=lg(n).createDocumentFragment());let s=r,a=[];return e.forEach(l=>{if(a.length||l.marks.length){let u=0,d=0;for(;u<a.length&&d<l.marks.length;){let f=l.marks[d];if(!this.marks[f.type.name]){d++;continue}if(!f.eq(a[u][0])||f.type.spec.spanning===!1)break;u++,d++}for(;u<a.length;)s=a.pop()[1];for(;d<l.marks.length;){let f=l.marks[d++],p=this.serializeMark(f,l.isInline,n);p&&(a.push([f,s]),s.appendChild(p.dom),s=p.contentDOM||p.dom)}}s.appendChild(this.serializeNodeInner(l,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:s}=nf(lg(n),this.nodes[e.type.name](e),null,e.attrs);if(s){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,s)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let s=e.marks.length-1;s>=0;s--){let a=this.serializeMark(e.marks[s],e.isInline,n);a&&((a.contentDOM||a.dom).appendChild(r),r=a.dom)}return r}serializeMark(e,n,r={}){let s=this.marks[e.type.name];return s&&nf(lg(r),s(e,n),null,e.attrs)}static renderSpec(e,n,r=null,s){return nf(e,n,r,s)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Ka(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=c1(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return c1(e.marks)}}function c1(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function lg(t){return t.document||window.document}const u1=new WeakMap;function hz(t){let e=u1.get(t);return e===void 0&&u1.set(t,e=pz(t)),e}function pz(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let s=0;s<r.length;s++)n(r[s]);else for(let s in r)n(r[s])}return n(t),e}function nf(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let s=e[0],a;if(typeof s!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(a=hz(r))&&a.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let l=s.indexOf(" ");l>0&&(n=s.slice(0,l),s=s.slice(l+1));let u,d=n?t.createElementNS(n,s):t.createElement(s),f=e[1],p=1;if(f&&typeof f=="object"&&f.nodeType==null&&!Array.isArray(f)){p=2;for(let m in f)if(f[m]!=null){let v=m.indexOf(" ");v>0?d.setAttributeNS(m.slice(0,v),m.slice(v+1),f[m]):m=="style"&&d.style?d.style.cssText=f[m]:d.setAttribute(m,f[m])}}for(let m=p;m<e.length;m++){let v=e[m];if(v===0){if(m<e.length-1||m>p)throw new RangeError("Content hole must be the only child of its parent node");return{dom:d,contentDOM:d}}else{let{dom:b,contentDOM:w}=nf(t,v,n,r);if(d.appendChild(b),w){if(u)throw new RangeError("Multiple content holes");u=w}}}return{dom:d,contentDOM:u}}const Ok=65535,Rk=Math.pow(2,16);function mz(t,e){return t+e*Rk}function d1(t){return t&Ok}function gz(t){return(t-(t&Ok))/Rk}const Mk=1,Nk=2,rf=4,Dk=8;class ny{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&Dk)>0}get deletedBefore(){return(this.delInfo&(Mk|rf))>0}get deletedAfter(){return(this.delInfo&(Nk|rf))>0}get deletedAcross(){return(this.delInfo&rf)>0}}class lr{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&lr.empty)return lr.empty}recover(e){let n=0,r=d1(e);if(!this.inverted)for(let s=0;s<r;s++)n+=this.ranges[s*3+2]-this.ranges[s*3+1];return this.ranges[r*3]+n+gz(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let s=0,a=this.inverted?2:1,l=this.inverted?1:2;for(let u=0;u<this.ranges.length;u+=3){let d=this.ranges[u]-(this.inverted?s:0);if(d>e)break;let f=this.ranges[u+a],p=this.ranges[u+l],m=d+f;if(e<=m){let v=f?e==d?-1:e==m?1:n:n,b=d+s+(v<0?0:p);if(r)return b;let w=e==(n<0?d:m)?null:mz(u/3,e-d),x=e==d?Nk:e==m?Mk:rf;return(n<0?e!=d:e!=m)&&(x|=Dk),new ny(b,x,w)}s+=p-f}return r?e+s:new ny(e+s,0,null)}touches(e,n){let r=0,s=d1(n),a=this.inverted?2:1,l=this.inverted?1:2;for(let u=0;u<this.ranges.length;u+=3){let d=this.ranges[u]-(this.inverted?r:0);if(d>e)break;let f=this.ranges[u+a],p=d+f;if(e<=p&&u==s*3)return!0;r+=this.ranges[u+l]-f}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let s=0,a=0;s<this.ranges.length;s+=3){let l=this.ranges[s],u=l-(this.inverted?a:0),d=l+(this.inverted?0:a),f=this.ranges[s+n],p=this.ranges[s+r];e(u,u+f,d,d+p),a+=p-f}}invert(){return new lr(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?lr.empty:new lr(e<0?[0,-e,0]:[0,0,e])}}lr.empty=new lr([]);class Yc{constructor(e,n,r=0,s=e?e.length:0){this.mirror=n,this.from=r,this.to=s,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new Yc(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let s=e.getMirror(n);this.appendMap(e._maps[n],s!=null&&s<n?r+s:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let s=e.getMirror(n);this.appendMap(e._maps[n].invert(),s!=null&&s>n?r-s-1:void 0)}}invert(){let e=new Yc;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let s=0;for(let a=this.from;a<this.to;a++){let l=this._maps[a],u=l.mapResult(e,n);if(u.recover!=null){let d=this.getMirror(a);if(d!=null&&d>a&&d<this.to){a=d,e=this._maps[d].recover(u.recover);continue}}s|=u.delInfo,e=u.pos}return r?e:new ny(e,s,null)}}const cg=Object.create(null);class On{getMap(){return lr.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=cg[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in cg)throw new RangeError("Duplicate use of step JSON ID "+e);return cg[e]=n,n.prototype.jsonID=e,n}}class Yt{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new Yt(e,null)}static fail(e){return new Yt(null,e)}static fromReplace(e,n,r,s){try{return Yt.ok(e.replace(n,r,s))}catch(a){if(a instanceof gf)return Yt.fail(a.message);throw a}}}function Ky(t,e,n){let r=[];for(let s=0;s<t.childCount;s++){let a=t.child(s);a.content.size&&(a=a.copy(Ky(a.content,e,a))),a.isInline&&(a=e(a,n,s)),r.push(a)}return ie.fromArray(r)}class js extends On{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),s=r.node(r.sharedDepth(this.to)),a=new me(Ky(n.content,(l,u)=>!l.isAtom||!u.type.allowsMarkType(this.mark.type)?l:l.mark(this.mark.addToSet(l.marks)),s),n.openStart,n.openEnd);return Yt.fromReplace(e,this.from,this.to,a)}invert(){return new Yr(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new js(n.pos,r.pos,this.mark)}merge(e){return e instanceof js&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new js(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new js(n.from,n.to,e.markFromJSON(n.mark))}}On.jsonID("addMark",js);class Yr extends On{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new me(Ky(n.content,s=>s.mark(this.mark.removeFromSet(s.marks)),e),n.openStart,n.openEnd);return Yt.fromReplace(e,this.from,this.to,r)}invert(){return new js(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Yr(n.pos,r.pos,this.mark)}merge(e){return e instanceof Yr&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Yr(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Yr(n.from,n.to,e.markFromJSON(n.mark))}}On.jsonID("removeMark",Yr);class Ls extends On{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Yt.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Yt.fromReplace(e,this.pos,this.pos+1,new me(ie.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let s=0;s<n.marks.length;s++)if(!n.marks[s].isInSet(r))return new Ls(this.pos,n.marks[s]);return new Ls(this.pos,this.mark)}}return new Ba(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Ls(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Ls(n.pos,e.markFromJSON(n.mark))}}On.jsonID("addNodeMark",Ls);class Ba extends On{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Yt.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Yt.fromReplace(e,this.pos,this.pos+1,new me(ie.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Ls(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Ba(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Ba(n.pos,e.markFromJSON(n.mark))}}On.jsonID("removeNodeMark",Ba);class an extends On{constructor(e,n,r,s=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=s}apply(e){return this.structure&&ry(e,this.from,this.to)?Yt.fail("Structure replace would overwrite content"):Yt.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new lr([this.from,this.to-this.from,this.slice.size])}invert(e){return new an(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new an(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof an)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?me.empty:new me(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new an(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?me.empty:new me(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new an(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new an(n.from,n.to,me.fromJSON(e,n.slice),!!n.structure)}}On.jsonID("replace",an);class on extends On{constructor(e,n,r,s,a,l,u=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=s,this.slice=a,this.insert=l,this.structure=u}apply(e){if(this.structure&&(ry(e,this.from,this.gapFrom)||ry(e,this.gapTo,this.to)))return Yt.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Yt.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Yt.fromReplace(e,this.from,this.to,r):Yt.fail("Content does not fit in gap")}getMap(){return new lr([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new on(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),s=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),a=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||s<n.pos||a>r.pos?null:new on(n.pos,r.pos,s,a,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new on(n.from,n.to,n.gapFrom,n.gapTo,me.fromJSON(e,n.slice),n.insert,!!n.structure)}}On.jsonID("replaceAround",on);function ry(t,e,n){let r=t.resolve(e),s=n-e,a=r.depth;for(;s>0&&a>0&&r.indexAfter(a)==r.node(a).childCount;)a--,s--;if(s>0){let l=r.node(a).maybeChild(r.indexAfter(a));for(;s>0;){if(!l||l.isLeaf)return!0;l=l.firstChild,s--}}return!1}function yz(t,e,n,r){let s=[],a=[],l,u;t.doc.nodesBetween(e,n,(d,f,p)=>{if(!d.isInline)return;let m=d.marks;if(!r.isInSet(m)&&p.type.allowsMarkType(r.type)){let v=Math.max(f,e),b=Math.min(f+d.nodeSize,n),w=r.addToSet(m);for(let x=0;x<m.length;x++)m[x].isInSet(w)||(l&&l.to==v&&l.mark.eq(m[x])?l.to=b:s.push(l=new Yr(v,b,m[x])));u&&u.to==v?u.to=b:a.push(u=new js(v,b,r))}}),s.forEach(d=>t.step(d)),a.forEach(d=>t.step(d))}function vz(t,e,n,r){let s=[],a=0;t.doc.nodesBetween(e,n,(l,u)=>{if(!l.isInline)return;a++;let d=null;if(r instanceof mh){let f=l.marks,p;for(;p=r.isInSet(f);)(d||(d=[])).push(p),f=p.removeFromSet(f)}else r?r.isInSet(l.marks)&&(d=[r]):d=l.marks;if(d&&d.length){let f=Math.min(u+l.nodeSize,n);for(let p=0;p<d.length;p++){let m=d[p],v;for(let b=0;b<s.length;b++){let w=s[b];w.step==a-1&&m.eq(s[b].style)&&(v=w)}v?(v.to=f,v.step=a):s.push({style:m,from:Math.max(u,e),to:f,step:a})}}}),s.forEach(l=>t.step(new Yr(l.from,l.to,l.style)))}function Wy(t,e,n,r=n.contentMatch,s=!0){let a=t.doc.nodeAt(e),l=[],u=e+1;for(let d=0;d<a.childCount;d++){let f=a.child(d),p=u+f.nodeSize,m=r.matchType(f.type);if(!m)l.push(new an(u,p,me.empty));else{r=m;for(let v=0;v<f.marks.length;v++)n.allowsMarkType(f.marks[v].type)||t.step(new Yr(u,p,f.marks[v]));if(s&&f.isText&&n.whitespace!="pre"){let v,b=/\r?\n|\r/g,w;for(;v=b.exec(f.text);)w||(w=new me(ie.from(n.schema.text(" ",n.allowedMarks(f.marks))),0,0)),l.push(new an(u+v.index,u+v.index+v[0].length,w))}}u=p}if(!r.validEnd){let d=r.fillBefore(ie.empty,!0);t.replace(u,u,new me(d,0,0))}for(let d=l.length-1;d>=0;d--)t.step(l[d])}function bz(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function fl(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth,s=0,a=0;;--r){let l=t.$from.node(r),u=t.$from.index(r)+s,d=t.$to.indexAfter(r)-a;if(r<t.depth&&l.canReplace(u,d,n))return r;if(r==0||l.type.spec.isolating||!bz(l,u,d))break;u&&(s=1),d<l.childCount&&(a=1)}return null}function wz(t,e,n){let{$from:r,$to:s,depth:a}=e,l=r.before(a+1),u=s.after(a+1),d=l,f=u,p=ie.empty,m=0;for(let w=a,x=!1;w>n;w--)x||r.index(w)>0?(x=!0,p=ie.from(r.node(w).copy(p)),m++):d--;let v=ie.empty,b=0;for(let w=a,x=!1;w>n;w--)x||s.after(w+1)<s.end(w)?(x=!0,v=ie.from(s.node(w).copy(v)),b++):f++;t.step(new on(d,f,l,u,new me(p.append(v),m,b),p.size-m,!0))}function Yy(t,e,n=null,r=t){let s=Sz(t,e),a=s&&xz(r,e);return a?s.map(f1).concat({type:e,attrs:n}).concat(a.map(f1)):null}function f1(t){return{type:t,attrs:null}}function Sz(t,e){let{parent:n,startIndex:r,endIndex:s}=t,a=n.contentMatchAt(r).findWrapping(e);if(!a)return null;let l=a.length?a[0]:e;return n.canReplaceWith(r,s,l)?a:null}function xz(t,e){let{parent:n,startIndex:r,endIndex:s}=t,a=n.child(r),l=e.contentMatch.findWrapping(a.type);if(!l)return null;let d=(l.length?l[l.length-1]:e).contentMatch;for(let f=r;d&&f<s;f++)d=d.matchType(n.child(f).type);return!d||!d.validEnd?null:l}function Ez(t,e,n){let r=ie.empty;for(let l=n.length-1;l>=0;l--){if(r.size){let u=n[l].type.contentMatch.matchFragment(r);if(!u||!u.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=ie.from(n[l].type.create(n[l].attrs,r))}let s=e.start,a=e.end;t.step(new on(s,a,s,a,new me(r,0,0),n.length,!0))}function Tz(t,e,n,r,s){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let a=t.steps.length;t.doc.nodesBetween(e,n,(l,u)=>{let d=typeof s=="function"?s(l):s;if(l.isTextblock&&!l.hasMarkup(r,d)&&kz(t.doc,t.mapping.slice(a).map(u),r)){let f=null;if(r.schema.linebreakReplacement){let b=r.whitespace=="pre",w=!!r.contentMatch.matchType(r.schema.linebreakReplacement);b&&!w?f=!1:!b&&w&&(f=!0)}f===!1&&Lk(t,l,u,a),Wy(t,t.mapping.slice(a).map(u,1),r,void 0,f===null);let p=t.mapping.slice(a),m=p.map(u,1),v=p.map(u+l.nodeSize,1);return t.step(new on(m,v,m+1,v-1,new me(ie.from(r.create(d,null,l.marks)),0,0),1,!0)),f===!0&&jk(t,l,u,a),!1}})}function jk(t,e,n,r){e.forEach((s,a)=>{if(s.isText){let l,u=/\r?\n|\r/g;for(;l=u.exec(s.text);){let d=t.mapping.slice(r).map(n+1+a+l.index);t.replaceWith(d,d+1,e.type.schema.linebreakReplacement.create())}}})}function Lk(t,e,n,r){e.forEach((s,a)=>{if(s.type==s.type.schema.linebreakReplacement){let l=t.mapping.slice(r).map(n+1+a);t.replaceWith(l,l+1,e.type.schema.text(`
`))}})}function kz(t,e,n){let r=t.resolve(e),s=r.index();return r.parent.canReplaceWith(s,s+1,n)}function _z(t,e,n,r,s){let a=t.doc.nodeAt(e);if(!a)throw new RangeError("No node at given position");n||(n=a.type);let l=n.create(r,null,s||a.marks);if(a.isLeaf)return t.replaceWith(e,e+a.nodeSize,l);if(!n.validContent(a.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new on(e,e+a.nodeSize,e+1,e+a.nodeSize-1,new me(ie.from(l),0,0),1,!0))}function Vi(t,e,n=1,r){let s=t.resolve(e),a=s.depth-n,l=r&&r[r.length-1]||s.parent;if(a<0||s.parent.type.spec.isolating||!s.parent.canReplace(s.index(),s.parent.childCount)||!l.type.validContent(s.parent.content.cutByIndex(s.index(),s.parent.childCount)))return!1;for(let f=s.depth-1,p=n-2;f>a;f--,p--){let m=s.node(f),v=s.index(f);if(m.type.spec.isolating)return!1;let b=m.content.cutByIndex(v,m.childCount),w=r&&r[p+1];w&&(b=b.replaceChild(0,w.type.create(w.attrs)));let x=r&&r[p]||m;if(!m.canReplace(v+1,m.childCount)||!x.type.validContent(b))return!1}let u=s.indexAfter(a),d=r&&r[0];return s.node(a).canReplaceWith(u,u,d?d.type:s.node(a+1).type)}function Cz(t,e,n=1,r){let s=t.doc.resolve(e),a=ie.empty,l=ie.empty;for(let u=s.depth,d=s.depth-n,f=n-1;u>d;u--,f--){a=ie.from(s.node(u).copy(a));let p=r&&r[f];l=ie.from(p?p.type.create(p.attrs,l):s.node(u).copy(l))}t.step(new an(e,e,new me(a.append(l),n,n),!0))}function Vs(t,e){let n=t.resolve(e),r=n.index();return zk(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function Az(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let s=0;s<e.childCount;s++){let a=e.child(s),l=a.type==r?t.type.schema.nodes.text:a.type;if(n=n.matchType(l),!n||!t.type.allowsMarks(a.marks))return!1}return n.validEnd}function zk(t,e){return!!(t&&e&&!t.isLeaf&&Az(t,e))}function gh(t,e,n=-1){let r=t.resolve(e);for(let s=r.depth;;s--){let a,l,u=r.index(s);if(s==r.depth?(a=r.nodeBefore,l=r.nodeAfter):n>0?(a=r.node(s+1),u++,l=r.node(s).maybeChild(u)):(a=r.node(s).maybeChild(u-1),l=r.node(s+1)),a&&!a.isTextblock&&zk(a,l)&&r.node(s).canReplace(u,u+1))return e;if(s==0)break;e=n<0?r.before(s):r.after(s)}}function Oz(t,e,n){let r=null,{linebreakReplacement:s}=t.doc.type.schema,a=t.doc.resolve(e-n),l=a.node().type;if(s&&l.inlineContent){let p=l.whitespace=="pre",m=!!l.contentMatch.matchType(s);p&&!m?r=!1:!p&&m&&(r=!0)}let u=t.steps.length;if(r===!1){let p=t.doc.resolve(e+n);Lk(t,p.node(),p.before(),u)}l.inlineContent&&Wy(t,e+n-1,l,a.node().contentMatchAt(a.index()),r==null);let d=t.mapping.slice(u),f=d.map(e-n);if(t.step(new an(f,d.map(e+n,-1),me.empty,!0)),r===!0){let p=t.doc.resolve(f);jk(t,p.node(),p.before(),t.steps.length)}return t}function Rz(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let s=r.depth-1;s>=0;s--){let a=r.index(s);if(r.node(s).canReplaceWith(a,a,n))return r.before(s+1);if(a>0)return null}if(r.parentOffset==r.parent.content.size)for(let s=r.depth-1;s>=0;s--){let a=r.indexAfter(s);if(r.node(s).canReplaceWith(a,a,n))return r.after(s+1);if(a<r.node(s).childCount)return null}return null}function Ik(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let s=n.content;for(let a=0;a<n.openStart;a++)s=s.firstChild.content;for(let a=1;a<=(n.openStart==0&&n.size?2:1);a++)for(let l=r.depth;l>=0;l--){let u=l==r.depth?0:r.pos<=(r.start(l+1)+r.end(l+1))/2?-1:1,d=r.index(l)+(u>0?1:0),f=r.node(l),p=!1;if(a==1)p=f.canReplace(d,d,s);else{let m=f.contentMatchAt(d).findWrapping(s.firstChild.type);p=m&&f.canReplaceWith(d,d,m[0])}if(p)return u==0?r.pos:u<0?r.before(l+1):r.after(l+1)}return null}function yh(t,e,n=e,r=me.empty){if(e==n&&!r.size)return null;let s=t.resolve(e),a=t.resolve(n);return Bk(s,a,r)?new an(e,n,r):new Mz(s,a,r).fit()}function Bk(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class Mz{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=ie.empty;for(let s=0;s<=e.depth;s++){let a=e.node(s);this.frontier.push({type:a.type,match:a.contentMatchAt(e.indexAfter(s))})}for(let s=e.depth;s>0;s--)this.placed=ie.from(e.node(s).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let f=this.findFittable();f?this.placeNodes(f):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,s=this.close(e<0?this.$to:r.doc.resolve(e));if(!s)return null;let a=this.placed,l=r.depth,u=s.depth;for(;l&&u&&a.childCount==1;)a=a.firstChild.content,l--,u--;let d=new me(a,l,u);return e>-1?new on(r.pos,e,this.$to.pos,this.$to.end(),d,n):d.size||r.pos!=this.$to.pos?new an(r.pos,s.pos,d):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,s=this.unplaced.openEnd;r<e;r++){let a=n.firstChild;if(n.childCount>1&&(s=0),a.type.spec.isolating&&s<=r){e=r;break}n=a.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let s,a=null;r?(a=ug(this.unplaced.content,r-1).firstChild,s=a.content):s=this.unplaced.content;let l=s.firstChild;for(let u=this.depth;u>=0;u--){let{type:d,match:f}=this.frontier[u],p,m=null;if(n==1&&(l?f.matchType(l.type)||(m=f.fillBefore(ie.from(l),!1)):a&&d.compatibleContent(a.type)))return{sliceDepth:r,frontierDepth:u,parent:a,inject:m};if(n==2&&l&&(p=f.findWrapping(l.type)))return{sliceDepth:r,frontierDepth:u,parent:a,wrap:p};if(a&&f.matchType(a.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,s=ug(e,n);return!s.childCount||s.firstChild.isLeaf?!1:(this.unplaced=new me(e,n+1,Math.max(r,s.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,s=ug(e,n);if(s.childCount<=1&&n>0){let a=e.size-n<=n+s.size;this.unplaced=new me(bc(e,n-1,1),n-1,a?n-1:r)}else this.unplaced=new me(bc(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:s,wrap:a}){for(;this.depth>n;)this.closeFrontierNode();if(a)for(let x=0;x<a.length;x++)this.openFrontierNode(a[x]);let l=this.unplaced,u=r?r.content:l.content,d=l.openStart-e,f=0,p=[],{match:m,type:v}=this.frontier[n];if(s){for(let x=0;x<s.childCount;x++)p.push(s.child(x));m=m.matchFragment(s)}let b=u.size+e-(l.content.size-l.openEnd);for(;f<u.childCount;){let x=u.child(f),S=m.matchType(x.type);if(!S)break;f++,(f>1||d==0||x.content.size)&&(m=S,p.push(Uk(x.mark(v.allowedMarks(x.marks)),f==1?d:0,f==u.childCount?b:-1)))}let w=f==u.childCount;w||(b=-1),this.placed=wc(this.placed,n,ie.from(p)),this.frontier[n].match=m,w&&b<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let x=0,S=u;x<b;x++){let T=S.lastChild;this.frontier.push({type:T.type,match:T.contentMatchAt(T.childCount)}),S=T.content}this.unplaced=w?e==0?me.empty:new me(bc(l.content,e-1,1),e-1,b<0?l.openEnd:e-1):new me(bc(l.content,e,f),l.openStart,l.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!dg(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,s=this.$to.after(r);for(;r>1&&s==this.$to.end(--r);)++s;return s}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:s}=this.frontier[n],a=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),l=dg(e,n,s,r,a);if(l){for(let u=n-1;u>=0;u--){let{match:d,type:f}=this.frontier[u],p=dg(e,u,f,d,!0);if(!p||p.childCount)continue e}return{depth:n,fit:l,move:a?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=wc(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let s=e.node(r),a=s.type.contentMatch.fillBefore(s.content,!0,e.index(r));this.openFrontierNode(s.type,s.attrs,a)}return e}openFrontierNode(e,n=null,r){let s=this.frontier[this.depth];s.match=s.match.matchType(e),this.placed=wc(this.placed,this.depth,ie.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(ie.empty,!0);n.childCount&&(this.placed=wc(this.placed,this.frontier.length,n))}}function bc(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(bc(t.firstChild.content,e-1,n)))}function wc(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(wc(t.lastChild.content,e-1,n)))}function ug(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function Uk(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,Uk(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(ie.empty,!0)))),t.copy(r)}function dg(t,e,n,r,s){let a=t.node(e),l=s?t.indexAfter(e):t.index(e);if(l==a.childCount&&!n.compatibleContent(a.type))return null;let u=r.fillBefore(a.content,!0,l);return u&&!Nz(n,a.content,l)?u:null}function Nz(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function Dz(t){return t.spec.defining||t.spec.definingForContent}function jz(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let s=t.doc.resolve(e),a=t.doc.resolve(n);if(Bk(s,a,r))return t.step(new an(e,n,r));let l=Hk(s,a);l[l.length-1]==0&&l.pop();let u=-(s.depth+1);l.unshift(u);for(let v=s.depth,b=s.pos-1;v>0;v--,b--){let w=s.node(v).type.spec;if(w.defining||w.definingAsContext||w.isolating)break;l.indexOf(v)>-1?u=v:s.before(v)==b&&l.splice(1,0,-v)}let d=l.indexOf(u),f=[],p=r.openStart;for(let v=r.content,b=0;;b++){let w=v.firstChild;if(f.push(w),b==r.openStart)break;v=w.content}for(let v=p-1;v>=0;v--){let b=f[v],w=Dz(b.type);if(w&&!b.sameMarkup(s.node(Math.abs(u)-1)))p=v;else if(w||!b.type.isTextblock)break}for(let v=r.openStart;v>=0;v--){let b=(v+p+1)%(r.openStart+1),w=f[b];if(w)for(let x=0;x<l.length;x++){let S=l[(x+d)%l.length],T=!0;S<0&&(T=!1,S=-S);let O=s.node(S-1),M=s.index(S-1);if(O.canReplaceWith(M,M,w.type,w.marks))return t.replace(s.before(S),T?a.after(S):n,new me(Pk(r.content,0,r.openStart,b),b,r.openEnd))}}let m=t.steps.length;for(let v=l.length-1;v>=0&&(t.replace(e,n,r),!(t.steps.length>m));v--){let b=l[v];b<0||(e=s.before(b),n=a.after(b))}}function Pk(t,e,n,r,s){if(e<n){let a=t.firstChild;t=t.replaceChild(0,a.copy(Pk(a.content,e+1,n,r,a)))}if(e>r){let a=s.contentMatchAt(0),l=a.fillBefore(t).append(t);t=l.append(a.matchFragment(l).fillBefore(ie.empty,!0))}return t}function Lz(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let s=Rz(t.doc,e,r.type);s!=null&&(e=n=s)}t.replaceRange(e,n,new me(ie.from(r),0,0))}function zz(t,e,n){let r=t.doc.resolve(e),s=t.doc.resolve(n),a=Hk(r,s);for(let l=0;l<a.length;l++){let u=a[l],d=l==a.length-1;if(d&&u==0||r.node(u).type.contentMatch.validEnd)return t.delete(r.start(u),s.end(u));if(u>0&&(d||r.node(u-1).canReplace(r.index(u-1),s.indexAfter(u-1))))return t.delete(r.before(u),s.after(u))}for(let l=1;l<=r.depth&&l<=s.depth;l++)if(e-r.start(l)==r.depth-l&&n>r.end(l)&&s.end(l)-n!=s.depth-l&&r.start(l-1)==s.start(l-1)&&r.node(l-1).canReplace(r.index(l-1),s.index(l-1)))return t.delete(r.before(l),n);t.delete(e,n)}function Hk(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let s=r;s>=0;s--){let a=t.start(s);if(a<t.pos-(t.depth-s)||e.end(s)>e.pos+(e.depth-s)||t.node(s).type.spec.isolating||e.node(s).type.spec.isolating)break;(a==e.start(s)||s==t.depth&&s==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&s&&e.start(s-1)==a-1)&&n.push(s)}return n}class nl extends On{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return Yt.fail("No node at attribute step's position");let r=Object.create(null);for(let a in n.attrs)r[a]=n.attrs[a];r[this.attr]=this.value;let s=n.type.create(r,null,n.marks);return Yt.fromReplace(e,this.pos,this.pos+1,new me(ie.from(s),0,n.isLeaf?0:1))}getMap(){return lr.empty}invert(e){return new nl(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new nl(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new nl(n.pos,n.attr,n.value)}}On.jsonID("attr",nl);class Jc extends On{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let s in e.attrs)n[s]=e.attrs[s];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return Yt.ok(r)}getMap(){return lr.empty}invert(e){return new Jc(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Jc(n.attr,n.value)}}On.jsonID("docAttr",Jc);let il=class extends Error{};il=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};il.prototype=Object.create(Error.prototype);il.prototype.constructor=il;il.prototype.name="TransformError";class $k{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Yc}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new il(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}changedRange(){let e=1e9,n=-1e9;for(let r=0;r<this.mapping.maps.length;r++){let s=this.mapping.maps[r];r&&(e=s.map(e,1),n=s.map(n,-1)),s.forEach((a,l,u,d)=>{e=Math.min(e,u),n=Math.max(n,d)})}return e==1e9?null:{from:e,to:n}}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=me.empty){let s=yh(this.doc,e,n,r);return s&&this.step(s),this}replaceWith(e,n,r){return this.replace(e,n,new me(ie.from(r),0,0))}delete(e,n){return this.replace(e,n,me.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return jz(this,e,n,r),this}replaceRangeWith(e,n,r){return Lz(this,e,n,r),this}deleteRange(e,n){return zz(this,e,n),this}lift(e,n){return wz(this,e,n),this}join(e,n=1){return Oz(this,e,n),this}wrap(e,n){return Ez(this,e,n),this}setBlockType(e,n=e,r,s=null){return Tz(this,e,n,r,s),this}setNodeMarkup(e,n,r=null,s){return _z(this,e,n,r,s),this}setNodeAttribute(e,n,r){return this.step(new nl(e,n,r)),this}setDocAttribute(e,n){return this.step(new Jc(e,n)),this}addNodeMark(e,n){return this.step(new Ls(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof gt)n.isInSet(r.marks)&&this.step(new Ba(e,n));else{let s=r.marks,a,l=[];for(;a=n.isInSet(s);)l.push(new Ba(e,a)),s=a.removeFromSet(s);for(let u=l.length-1;u>=0;u--)this.step(l[u])}return this}split(e,n=1,r){return Cz(this,e,n,r),this}addMark(e,n,r){return yz(this,e,n,r),this}removeMark(e,n,r){return vz(this,e,n,r),this}clearIncompatible(e,n,r){return Wy(this,e,n,r),this}}const fg=Object.create(null);class Fe{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new Iz(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=me.empty){let r=n.content.lastChild,s=null;for(let u=0;u<n.openEnd;u++)s=r,r=r.lastChild;let a=e.steps.length,l=this.ranges;for(let u=0;u<l.length;u++){let{$from:d,$to:f}=l[u],p=e.mapping.slice(a);e.replaceRange(p.map(d.pos),p.map(f.pos),u?me.empty:n),u==0&&m1(e,a,(r?r.isInline:s&&s.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,s=this.ranges;for(let a=0;a<s.length;a++){let{$from:l,$to:u}=s[a],d=e.mapping.slice(r),f=d.map(l.pos),p=d.map(u.pos);a?e.deleteRange(f,p):(e.replaceRangeWith(f,p,n),m1(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let s=e.parent.inlineContent?new Be(e):Wo(e.node(0),e.parent,e.pos,e.index(),n,r);if(s)return s;for(let a=e.depth-1;a>=0;a--){let l=n<0?Wo(e.node(0),e.node(a),e.before(a+1),e.index(a),n,r):Wo(e.node(0),e.node(a),e.after(a+1),e.index(a)+1,n,r);if(l)return l}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new cr(e.node(0))}static atStart(e){return Wo(e,e,0,0,1)||new cr(e)}static atEnd(e){return Wo(e,e,e.content.size,e.childCount,-1)||new cr(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=fg[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in fg)throw new RangeError("Duplicate use of selection JSON ID "+e);return fg[e]=n,n.prototype.jsonID=e,n}getBookmark(){return Be.between(this.$anchor,this.$head).getBookmark()}}Fe.prototype.visible=!0;class Iz{constructor(e,n){this.$from=e,this.$to=n}}let h1=!1;function p1(t){!h1&&!t.parent.inlineContent&&(h1=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class Be extends Fe{constructor(e,n=e){p1(e),p1(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return Fe.near(r);let s=e.resolve(n.map(this.anchor));return new Be(s.parent.inlineContent?s:r,r)}replace(e,n=me.empty){if(super.replace(e,n),n==me.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof Be&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new vh(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Be(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let s=e.resolve(n);return new this(s,r==n?s:e.resolve(r))}static between(e,n,r){let s=e.pos-n.pos;if((!r||s)&&(r=s>=0?1:-1),!n.parent.inlineContent){let a=Fe.findFrom(n,r,!0)||Fe.findFrom(n,-r,!0);if(a)n=a.$head;else return Fe.near(n,r)}return e.parent.inlineContent||(s==0?e=n:(e=(Fe.findFrom(e,-r,!0)||Fe.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=s<0&&(e=n))),new Be(e,n)}}Fe.jsonID("text",Be);class vh{constructor(e,n){this.anchor=e,this.head=n}map(e){return new vh(e.map(this.anchor),e.map(this.head))}resolve(e){return Be.between(e.resolve(this.anchor),e.resolve(this.head))}}class Me extends Fe{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:s}=n.mapResult(this.anchor),a=e.resolve(s);return r?Fe.near(a):new Me(a)}content(){return new me(ie.from(this.node),0,0)}eq(e){return e instanceof Me&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Jy(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Me(e.resolve(n.anchor))}static create(e,n){return new Me(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Me.prototype.visible=!1;Fe.jsonID("node",Me);class Jy{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new vh(r,r):new Jy(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&Me.isSelectable(r)?new Me(n):Fe.near(n)}}class cr extends Fe{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=me.empty){if(n==me.empty){e.delete(0,e.doc.content.size);let r=Fe.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new cr(e)}map(e){return new cr(e)}eq(e){return e instanceof cr}getBookmark(){return Bz}}Fe.jsonID("all",cr);const Bz={map(){return this},resolve(t){return new cr(t)}};function Wo(t,e,n,r,s,a=!1){if(e.inlineContent)return Be.create(t,n);for(let l=r-(s>0?0:1);s>0?l<e.childCount:l>=0;l+=s){let u=e.child(l);if(u.isAtom){if(!a&&Me.isSelectable(u))return Me.create(t,n-(s<0?u.nodeSize:0))}else{let d=Wo(t,u,n+s,s<0?u.childCount:0,s,a);if(d)return d}n+=u.nodeSize*s}return null}function m1(t,e,n){let r=t.steps.length-1;if(r<e)return;let s=t.steps[r];if(!(s instanceof an||s instanceof on))return;let a=t.mapping.maps[r],l;a.forEach((u,d,f,p)=>{l==null&&(l=p)}),t.setSelection(Fe.near(t.doc.resolve(l),n))}const g1=1,Hd=2,y1=4;class Uz extends $k{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|g1)&~Hd,this.storedMarks=null,this}get selectionSet(){return(this.updated&g1)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Hd,this}ensureMarks(e){return gt.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Hd)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~Hd,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||gt.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let s=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(s.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),!e)return this.deleteRange(n,r);let a=this.storedMarks;if(!a){let l=this.doc.resolve(n);a=r==n?l.marks():l.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,s.text(e,a)),!this.selection.empty&&this.selection.to==n+e.length&&this.setSelection(Fe.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=y1,this}get scrolledIntoView(){return(this.updated&y1)>0}}function v1(t,e){return!e||!t?t:t.bind(e)}class Sc{constructor(e,n,r){this.name=e,this.init=v1(n.init,r),this.apply=v1(n.apply,r)}}const Pz=[new Sc("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Sc("selection",{init(t,e){return t.selection||Fe.atStart(e.doc)},apply(t){return t.selection}}),new Sc("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new Sc("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class hg{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Pz.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Sc(r.key,r.spec.state,r))})}}class Zo{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let s=this.config.plugins[r];if(s.spec.filterTransaction&&!s.spec.filterTransaction.call(s,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),s=null;for(;;){let a=!1;for(let l=0;l<this.config.plugins.length;l++){let u=this.config.plugins[l];if(u.spec.appendTransaction){let d=s?s[l].n:0,f=s?s[l].state:this,p=d<n.length&&u.spec.appendTransaction.call(u,d?n.slice(d):n,f,r);if(p&&r.filterTransaction(p,l)){if(p.setMeta("appendedTransaction",e),!s){s=[];for(let m=0;m<this.config.plugins.length;m++)s.push(m<l?{state:r,n:n.length}:{state:this,n:0})}n.push(p),r=r.applyInner(p),a=!0}s&&(s[l]={state:r,n:n.length})}}if(!a)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Zo(this.config),r=this.config.fields;for(let s=0;s<r.length;s++){let a=r[s];n[a.name]=a.apply(e,this[a.name],this,n)}return n}get tr(){return new Uz(this)}static create(e){let n=new hg(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Zo(n);for(let s=0;s<n.fields.length;s++)r[n.fields[s].name]=n.fields[s].init(e,r);return r}reconfigure(e){let n=new hg(this.schema,e.plugins),r=n.fields,s=new Zo(n);for(let a=0;a<r.length;a++){let l=r[a].name;s[l]=this.hasOwnProperty(l)?this[l]:r[a].init(e,s)}return s}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let s=e[r],a=s.spec.state;a&&a.toJSON&&(n[r]=a.toJSON.call(s,this[s.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let s=new hg(e.schema,e.plugins),a=new Zo(s);return s.fields.forEach(l=>{if(l.name=="doc")a.doc=Jr.fromJSON(e.schema,n.doc);else if(l.name=="selection")a.selection=Fe.fromJSON(a.doc,n.selection);else if(l.name=="storedMarks")n.storedMarks&&(a.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let u in r){let d=r[u],f=d.spec.state;if(d.key==l.name&&f&&f.fromJSON&&Object.prototype.hasOwnProperty.call(n,u)){a[l.name]=f.fromJSON.call(d,e,n[u],a);return}}a[l.name]=l.init(e,a)}}),a}}function qk(t,e,n){for(let r in t){let s=t[r];s instanceof Function?s=s.bind(e):r=="handleDOMEvents"&&(s=qk(s,e,{})),n[r]=s}return n}class Ot{constructor(e){this.spec=e,this.props={},e.props&&qk(e.props,this,this.props),this.key=e.key?e.key.key:Vk("plugin")}getState(e){return e[this.key]}}const pg=Object.create(null);function Vk(t){return t in pg?t+"$"+ ++pg[t]:(pg[t]=0,t+"$")}class nn{constructor(e="key"){this.key=Vk(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Xy=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function Fk(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const Gk=(t,e,n)=>{let r=Fk(t,n);if(!r)return!1;let s=Qy(r);if(!s){let l=r.blockRange(),u=l&&fl(l);return u==null?!1:(e&&e(t.tr.lift(l,u).scrollIntoView()),!0)}let a=s.nodeBefore;if(t_(t,s,e,-1))return!0;if(r.parent.content.size==0&&(sl(a,"end")||Me.isSelectable(a)))for(let l=r.depth;;l--){let u=yh(t.doc,r.before(l),r.after(l),me.empty);if(u&&u.slice.size<u.to-u.from){if(e){let d=t.tr.step(u);d.setSelection(sl(a,"end")?Fe.findFrom(d.doc.resolve(d.mapping.map(s.pos,-1)),-1):Me.create(d.doc,s.pos-a.nodeSize)),e(d.scrollIntoView())}return!0}if(l==1||r.node(l-1).childCount>1)break}return a.isAtom&&s.depth==r.depth-1?(e&&e(t.tr.delete(s.pos-a.nodeSize,s.pos).scrollIntoView()),!0):!1},Hz=(t,e,n)=>{let r=Fk(t,n);if(!r)return!1;let s=Qy(r);return s?Kk(t,s,e):!1},$z=(t,e,n)=>{let r=Yk(t,n);if(!r)return!1;let s=Zy(r);return s?Kk(t,s,e):!1};function Kk(t,e,n){let r=e.nodeBefore,s=r,a=e.pos-1;for(;!s.isTextblock;a--){if(s.type.spec.isolating)return!1;let p=s.lastChild;if(!p)return!1;s=p}let l=e.nodeAfter,u=l,d=e.pos+1;for(;!u.isTextblock;d++){if(u.type.spec.isolating)return!1;let p=u.firstChild;if(!p)return!1;u=p}let f=yh(t.doc,a,d,me.empty);if(!f||f.from!=a||f instanceof an&&f.slice.size>=d-a)return!1;if(n){let p=t.tr.step(f);p.setSelection(Be.create(p.doc,a)),n(p.scrollIntoView())}return!0}function sl(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const Wk=(t,e,n)=>{let{$head:r,empty:s}=t.selection,a=r;if(!s)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;a=Qy(r)}let l=a&&a.nodeBefore;return!l||!Me.isSelectable(l)?!1:(e&&e(t.tr.setSelection(Me.create(t.doc,a.pos-l.nodeSize)).scrollIntoView()),!0)};function Qy(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function Yk(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const Jk=(t,e,n)=>{let r=Yk(t,n);if(!r)return!1;let s=Zy(r);if(!s)return!1;let a=s.nodeAfter;if(t_(t,s,e,1))return!0;if(r.parent.content.size==0&&(sl(a,"start")||Me.isSelectable(a))){let l=yh(t.doc,r.before(),r.after(),me.empty);if(l&&l.slice.size<l.to-l.from){if(e){let u=t.tr.step(l);u.setSelection(sl(a,"start")?Fe.findFrom(u.doc.resolve(u.mapping.map(s.pos)),1):Me.create(u.doc,u.mapping.map(s.pos))),e(u.scrollIntoView())}return!0}}return a.isAtom&&s.depth==r.depth-1?(e&&e(t.tr.delete(s.pos,s.pos+a.nodeSize).scrollIntoView()),!0):!1},Xk=(t,e,n)=>{let{$head:r,empty:s}=t.selection,a=r;if(!s)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;a=Zy(r)}let l=a&&a.nodeAfter;return!l||!Me.isSelectable(l)?!1:(e&&e(t.tr.setSelection(Me.create(t.doc,a.pos)).scrollIntoView()),!0)};function Zy(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const qz=(t,e)=>{let n=t.selection,r=n instanceof Me,s;if(r){if(n.node.isTextblock||!Vs(t.doc,n.from))return!1;s=n.from}else if(s=gh(t.doc,n.from,-1),s==null)return!1;if(e){let a=t.tr.join(s);r&&a.setSelection(Me.create(a.doc,s-t.doc.resolve(s).nodeBefore.nodeSize)),e(a.scrollIntoView())}return!0},Vz=(t,e)=>{let n=t.selection,r;if(n instanceof Me){if(n.node.isTextblock||!Vs(t.doc,n.to))return!1;r=n.to}else if(r=gh(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},Fz=(t,e)=>{let{$from:n,$to:r}=t.selection,s=n.blockRange(r),a=s&&fl(s);return a==null?!1:(e&&e(t.tr.lift(s,a).scrollIntoView()),!0)},Qk=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function e0(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const Gz=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let s=n.node(-1),a=n.indexAfter(-1),l=e0(s.contentMatchAt(a));if(!l||!s.canReplaceWith(a,a,l))return!1;if(e){let u=n.after(),d=t.tr.replaceWith(u,u,l.createAndFill());d.setSelection(Fe.near(d.doc.resolve(u),1)),e(d.scrollIntoView())}return!0},Zk=(t,e)=>{let n=t.selection,{$from:r,$to:s}=n;if(n instanceof cr||r.parent.inlineContent||s.parent.inlineContent)return!1;let a=e0(s.parent.contentMatchAt(s.indexAfter()));if(!a||!a.isTextblock)return!1;if(e){let l=(!r.parentOffset&&s.index()<s.parent.childCount?r:s).pos,u=t.tr.insert(l,a.createAndFill());u.setSelection(Be.create(u.doc,l+1)),e(u.scrollIntoView())}return!0},e_=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let a=n.before();if(Vi(t.doc,a))return e&&e(t.tr.split(a).scrollIntoView()),!0}let r=n.blockRange(),s=r&&fl(r);return s==null?!1:(e&&e(t.tr.lift(r,s).scrollIntoView()),!0)};function Kz(t){return(e,n)=>{let{$from:r,$to:s}=e.selection;if(e.selection instanceof Me&&e.selection.node.isBlock)return!r.parentOffset||!Vi(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let a=[],l,u,d=!1,f=!1;for(let b=r.depth;;b--)if(r.node(b).isBlock){d=r.end(b)==r.pos+(r.depth-b),f=r.start(b)==r.pos-(r.depth-b),u=e0(r.node(b-1).contentMatchAt(r.indexAfter(b-1))),a.unshift(d&&u?{type:u}:null),l=b;break}else{if(b==1)return!1;a.unshift(null)}let p=e.tr;(e.selection instanceof Be||e.selection instanceof cr)&&p.deleteSelection();let m=p.mapping.map(r.pos),v=Vi(p.doc,m,a.length,a);if(v||(a[0]=u?{type:u}:null,v=Vi(p.doc,m,a.length,a)),!v)return!1;if(p.split(m,a.length,a),!d&&f&&r.node(l).type!=u){let b=p.mapping.map(r.before(l)),w=p.doc.resolve(b);u&&r.node(l-1).canReplaceWith(w.index(),w.index()+1,u)&&p.setNodeMarkup(p.mapping.map(r.before(l)),u)}return n&&n(p.scrollIntoView()),!0}}const Wz=Kz(),Yz=(t,e)=>{let{$from:n,to:r}=t.selection,s,a=n.sharedDepth(r);return a==0?!1:(s=n.before(a),e&&e(t.tr.setSelection(Me.create(t.doc,s))),!0)};function Jz(t,e,n){let r=e.nodeBefore,s=e.nodeAfter,a=e.index();return!r||!s||!r.type.compatibleContent(s.type)?!1:!r.content.size&&e.parent.canReplace(a-1,a)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(a,a+1)||!(s.isTextblock||Vs(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function t_(t,e,n,r){let s=e.nodeBefore,a=e.nodeAfter,l,u,d=s.type.spec.isolating||a.type.spec.isolating;if(!d&&Jz(t,e,n))return!0;let f=!d&&e.parent.canReplace(e.index(),e.index()+1);if(f&&(l=(u=s.contentMatchAt(s.childCount)).findWrapping(a.type))&&u.matchType(l[0]||a.type).validEnd){if(n){let b=e.pos+a.nodeSize,w=ie.empty;for(let T=l.length-1;T>=0;T--)w=ie.from(l[T].create(null,w));w=ie.from(s.copy(w));let x=t.tr.step(new on(e.pos-1,b,e.pos,b,new me(w,1,0),l.length,!0)),S=x.doc.resolve(b+2*l.length);S.nodeAfter&&S.nodeAfter.type==s.type&&Vs(x.doc,S.pos)&&x.join(S.pos),n(x.scrollIntoView())}return!0}let p=a.type.spec.isolating||r>0&&d?null:Fe.findFrom(e,1),m=p&&p.$from.blockRange(p.$to),v=m&&fl(m);if(v!=null&&v>=e.depth)return n&&n(t.tr.lift(m,v).scrollIntoView()),!0;if(f&&sl(a,"start",!0)&&sl(s,"end")){let b=s,w=[];for(;w.push(b),!b.isTextblock;)b=b.lastChild;let x=a,S=1;for(;!x.isTextblock;x=x.firstChild)S++;if(b.canReplace(b.childCount,b.childCount,x.content)){if(n){let T=ie.empty;for(let M=w.length-1;M>=0;M--)T=ie.from(w[M].copy(T));let O=t.tr.step(new on(e.pos-w.length,e.pos+a.nodeSize,e.pos+S,e.pos+a.nodeSize-S,new me(T,w.length,0),0,!0));n(O.scrollIntoView())}return!0}}return!1}function n_(t){return function(e,n){let r=e.selection,s=t<0?r.$from:r.$to,a=s.depth;for(;s.node(a).isInline;){if(!a)return!1;a--}return s.node(a).isTextblock?(n&&n(e.tr.setSelection(Be.create(e.doc,t<0?s.start(a):s.end(a)))),!0):!1}}const Xz=n_(-1),Qz=n_(1);function Zz(t,e=null){return function(n,r){let{$from:s,$to:a}=n.selection,l=s.blockRange(a),u=l&&Yy(l,t,e);return u?(r&&r(n.tr.wrap(l,u).scrollIntoView()),!0):!1}}function b1(t,e=null){return function(n,r){let s=!1;for(let a=0;a<n.selection.ranges.length&&!s;a++){let{$from:{pos:l},$to:{pos:u}}=n.selection.ranges[a];n.doc.nodesBetween(l,u,(d,f)=>{if(s)return!1;if(!(!d.isTextblock||d.hasMarkup(t,e)))if(d.type==t)s=!0;else{let p=n.doc.resolve(f),m=p.index();s=p.parent.canReplaceWith(m,m+1,t)}})}if(!s)return!1;if(r){let a=n.tr;for(let l=0;l<n.selection.ranges.length;l++){let{$from:{pos:u},$to:{pos:d}}=n.selection.ranges[l];a.setBlockType(u,d,t,e)}r(a.scrollIntoView())}return!0}}function t0(...t){return function(e,n,r){for(let s=0;s<t.length;s++)if(t[s](e,n,r))return!0;return!1}}t0(Xy,Gk,Wk);t0(Xy,Jk,Xk);t0(Qk,Zk,e_,Wz);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function e3(t,e=null){return function(n,r){let{$from:s,$to:a}=n.selection,l=s.blockRange(a);if(!l)return!1;let u=r?n.tr:null;return t3(u,l,t,e)?(r&&r(u.scrollIntoView()),!0):!1}}function t3(t,e,n,r=null){let s=!1,a=e,l=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let d=l.resolve(e.start-2);a=new vf(d,d,e.depth),e.endIndex<e.parent.childCount&&(e=new vf(e.$from,l.resolve(e.$to.end(e.depth)),e.depth)),s=!0}let u=Yy(a,n,r,e);return u?(t&&n3(t,e,u,s,n),!0):!1}function n3(t,e,n,r,s){let a=ie.empty;for(let p=n.length-1;p>=0;p--)a=ie.from(n[p].type.create(n[p].attrs,a));t.step(new on(e.start-(r?2:0),e.end,e.start,e.end,new me(a,0,0),n.length,!0));let l=0;for(let p=0;p<n.length;p++)n[p].type==s&&(l=p+1);let u=n.length-l,d=e.start+n.length-(r?2:0),f=e.parent;for(let p=e.startIndex,m=e.endIndex,v=!0;p<m;p++,v=!1)!v&&Vi(t.doc,d,u)&&(t.split(d,u),d+=2*u),d+=f.child(p).nodeSize;return t}function r3(t){return function(e,n){let{$from:r,$to:s}=e.selection,a=r.blockRange(s,l=>l.childCount>0&&l.firstChild.type==t);return a?n?r.node(a.depth-1).type==t?i3(e,n,t,a):s3(e,n,a):!0:!1}}function i3(t,e,n,r){let s=t.tr,a=r.end,l=r.$to.end(r.depth);a<l&&(s.step(new on(a-1,l,a,l,new me(ie.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new vf(s.doc.resolve(r.$from.pos),s.doc.resolve(l),r.depth));const u=fl(r);if(u==null)return!1;s.lift(r,u);let d=s.doc.resolve(s.mapping.map(a,-1)-1);return Vs(s.doc,d.pos)&&d.nodeBefore.type==d.nodeAfter.type&&s.join(d.pos),e(s.scrollIntoView()),!0}function s3(t,e,n){let r=t.tr,s=n.parent;for(let b=n.end,w=n.endIndex-1,x=n.startIndex;w>x;w--)b-=s.child(w).nodeSize,r.delete(b-1,b+1);let a=r.doc.resolve(n.start),l=a.nodeAfter;if(r.mapping.map(n.end)!=n.start+a.nodeAfter.nodeSize)return!1;let u=n.startIndex==0,d=n.endIndex==s.childCount,f=a.node(-1),p=a.index(-1);if(!f.canReplace(p+(u?0:1),p+1,l.content.append(d?ie.empty:ie.from(s))))return!1;let m=a.pos,v=m+l.nodeSize;return r.step(new on(m-(u?1:0),v+(d?1:0),m+1,v-1,new me((u?ie.empty:ie.from(s.copy(ie.empty))).append(d?ie.empty:ie.from(s.copy(ie.empty))),u?0:1,d?0:1),u?0:1)),e(r.scrollIntoView()),!0}function a3(t){return function(e,n){let{$from:r,$to:s}=e.selection,a=r.blockRange(s,f=>f.childCount>0&&f.firstChild.type==t);if(!a)return!1;let l=a.startIndex;if(l==0)return!1;let u=a.parent,d=u.child(l-1);if(d.type!=t)return!1;if(n){let f=d.lastChild&&d.lastChild.type==u.type,p=ie.from(f?t.create():null),m=new me(ie.from(t.create(null,ie.from(u.type.create(null,p)))),f?3:1,0),v=a.start,b=a.end;n(e.tr.step(new on(v-(f?3:1),b,v,b,m,1,!0)).scrollIntoView())}return!0}}const wn=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},al=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let iy=null;const $i=function(t,e,n){let r=iy||(iy=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},o3=function(){iy=null},Ua=function(t,e,n,r){return n&&(w1(t,e,n,r,-1)||w1(t,e,n,r,1))},l3=/^(img|br|input|textarea|hr)$/i;function w1(t,e,n,r,s){for(var a;;){if(t==n&&e==r)return!0;if(e==(s<0?0:Rr(t))){let l=t.parentNode;if(!l||l.nodeType!=1||du(t)||l3.test(t.nodeName)||t.contentEditable=="false")return!1;e=wn(t)+(s<0?0:1),t=l}else if(t.nodeType==1){let l=t.childNodes[e+(s<0?-1:0)];if(l.nodeType==1&&l.contentEditable=="false")if(!((a=l.pmViewDesc)===null||a===void 0)&&a.ignoreForSelection)e+=s;else return!1;else t=l,e=s<0?Rr(t):0}else return!1}}function Rr(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function c3(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=Rr(t)}else if(t.parentNode&&!du(t))e=wn(t),t=t.parentNode;else return null}}function u3(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!du(t))e=wn(t)+1,t=t.parentNode;else return null}}function d3(t,e,n){for(let r=e==0,s=e==Rr(t);r||s;){if(t==n)return!0;let a=wn(t);if(t=t.parentNode,!t)return!1;r=r&&a==0,s=s&&a==Rr(t)}}function du(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const bh=function(t){return t.focusNode&&Ua(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function ka(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function f3(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function h3(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(Rr(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(Rr(r.startContainer),r.startOffset)}}}const ci=typeof navigator<"u"?navigator:null,S1=typeof document<"u"?document:null,Fs=ci&&ci.userAgent||"",sy=/Edge\/(\d+)/.exec(Fs),r_=/MSIE \d/.exec(Fs),ay=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Fs),Wn=!!(r_||ay||sy),Bs=r_?document.documentMode:ay?+ay[1]:sy?+sy[1]:0,Mr=!Wn&&/gecko\/(\d+)/i.test(Fs);Mr&&+(/Firefox\/(\d+)/.exec(Fs)||[0,0])[1];const oy=!Wn&&/Chrome\/(\d+)/.exec(Fs),xn=!!oy,i_=oy?+oy[1]:0,An=!Wn&&!!ci&&/Apple Computer/.test(ci.vendor),ol=An&&(/Mobile\/\w+/.test(Fs)||!!ci&&ci.maxTouchPoints>2),Or=ol||(ci?/Mac/.test(ci.platform):!1),s_=ci?/Win/.test(ci.platform):!1,qi=/Android \d/.test(Fs),fu=!!S1&&"webkitFontSmoothing"in S1.documentElement.style,p3=fu?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function m3(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function zi(t,e){return typeof t=="number"?t:t[e]}function g3(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function x1(t,e,n){let r=t.someProp("scrollThreshold")||0,s=t.someProp("scrollMargin")||5,a=t.dom.ownerDocument;for(let l=n||t.dom;l;){if(l.nodeType!=1){l=al(l);continue}let u=l,d=u==a.body,f=d?m3(a):g3(u),p=0,m=0;if(e.top<f.top+zi(r,"top")?m=-(f.top-e.top+zi(s,"top")):e.bottom>f.bottom-zi(r,"bottom")&&(m=e.bottom-e.top>f.bottom-f.top?e.top+zi(s,"top")-f.top:e.bottom-f.bottom+zi(s,"bottom")),e.left<f.left+zi(r,"left")?p=-(f.left-e.left+zi(s,"left")):e.right>f.right-zi(r,"right")&&(p=e.right-f.right+zi(s,"right")),p||m)if(d)a.defaultView.scrollBy(p,m);else{let b=u.scrollLeft,w=u.scrollTop;m&&(u.scrollTop+=m),p&&(u.scrollLeft+=p);let x=u.scrollLeft-b,S=u.scrollTop-w;e={left:e.left-x,top:e.top-S,right:e.right-x,bottom:e.bottom-S}}let v=d?"fixed":getComputedStyle(l).position;if(/^(fixed|sticky)$/.test(v))break;l=v=="absolute"?l.offsetParent:al(l)}}function y3(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,s;for(let a=(e.left+e.right)/2,l=n+1;l<Math.min(innerHeight,e.bottom);l+=5){let u=t.root.elementFromPoint(a,l);if(!u||u==t.dom||!t.dom.contains(u))continue;let d=u.getBoundingClientRect();if(d.top>=n-20){r=u,s=d.top;break}}return{refDOM:r,refTop:s,stack:a_(t.dom)}}function a_(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=al(r));return e}function v3({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;o_(n,r==0?0:r-e)}function o_(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:s,left:a}=t[n];r.scrollTop!=s+e&&(r.scrollTop=s+e),r.scrollLeft!=a&&(r.scrollLeft=a)}}let $o=null;function b3(t){if(t.setActive)return t.setActive();if($o)return t.focus($o);let e=a_(t);t.focus($o==null?{get preventScroll(){return $o={preventScroll:!0},!0}}:void 0),$o||($o=!1,o_(e,0))}function l_(t,e){let n,r=2e8,s,a=0,l=e.top,u=e.top,d,f;for(let p=t.firstChild,m=0;p;p=p.nextSibling,m++){let v;if(p.nodeType==1)v=p.getClientRects();else if(p.nodeType==3)v=$i(p).getClientRects();else continue;for(let b=0;b<v.length;b++){let w=v[b];if(w.top<=l&&w.bottom>=u){l=Math.max(w.bottom,l),u=Math.min(w.top,u);let x=w.left>e.left?w.left-e.left:w.right<e.left?e.left-w.right:0;if(x<r){n=p,r=x,s=x&&n.nodeType==3?{left:w.right<e.left?w.right:w.left,top:e.top}:e,p.nodeType==1&&x&&(a=m+(e.left>=(w.left+w.right)/2?1:0));continue}}else w.top>e.top&&!d&&w.left<=e.left&&w.right>=e.left&&(d=p,f={left:Math.max(w.left,Math.min(w.right,e.left)),top:w.top});!n&&(e.left>=w.right&&e.top>=w.top||e.left>=w.left&&e.top>=w.bottom)&&(a=m+1)}}return!n&&d&&(n=d,s=f,r=0),n&&n.nodeType==3?w3(n,s):!n||r&&n.nodeType==1?{node:t,offset:a}:l_(n,s)}function w3(t,e){let n=t.nodeValue.length,r=document.createRange(),s;for(let a=0;a<n;a++){r.setEnd(t,a+1),r.setStart(t,a);let l=Es(r,1);if(l.top!=l.bottom&&n0(e,l)){s={node:t,offset:a+(e.left>=(l.left+l.right)/2?1:0)};break}}return r.detach(),s||{node:t,offset:0}}function n0(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function S3(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function x3(t,e,n){let{node:r,offset:s}=l_(e,n),a=-1;if(r.nodeType==1&&!r.firstChild){let l=r.getBoundingClientRect();a=l.left!=l.right&&n.left>(l.left+l.right)/2?1:-1}return t.docView.posFromDOM(r,s,a)}function E3(t,e,n,r){let s=-1;for(let a=e,l=!1;a!=t.dom;){let u=t.docView.nearestDesc(a,!0),d;if(!u)return null;if(u.dom.nodeType==1&&(u.node.isBlock&&u.parent||!u.contentDOM)&&((d=u.dom.getBoundingClientRect()).width||d.height)&&(u.node.isBlock&&u.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(u.dom.nodeName)&&(!l&&d.left>r.left||d.top>r.top?s=u.posBefore:(!l&&d.right<r.left||d.bottom<r.top)&&(s=u.posAfter),l=!0),!u.contentDOM&&s<0&&!u.node.isText))return(u.node.isBlock?r.top<(d.top+d.bottom)/2:r.left<(d.left+d.right)/2)?u.posBefore:u.posAfter;a=u.dom.parentNode}return s>-1?s:t.docView.posFromDOM(e,n,-1)}function c_(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let s=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),a=s;;){let l=t.childNodes[a];if(l.nodeType==1){let u=l.getClientRects();for(let d=0;d<u.length;d++){let f=u[d];if(n0(e,f))return c_(l,e,f)}}if((a=(a+1)%r)==s)break}return t}function T3(t,e){let n=t.dom.ownerDocument,r,s=0,a=h3(n,e.left,e.top);a&&({node:r,offset:s}=a);let l=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),u;if(!l||!t.dom.contains(l.nodeType!=1?l.parentNode:l)){let f=t.dom.getBoundingClientRect();if(!n0(e,f)||(l=c_(t.dom,e,f),!l))return null}if(An)for(let f=l;r&&f;f=al(f))f.draggable&&(r=void 0);if(l=S3(l,e),r){if(Mr&&r.nodeType==1&&(s=Math.min(s,r.childNodes.length),s<r.childNodes.length)){let p=r.childNodes[s],m;p.nodeName=="IMG"&&(m=p.getBoundingClientRect()).right<=e.left&&m.bottom>e.top&&s++}let f;fu&&s&&r.nodeType==1&&(f=r.childNodes[s-1]).nodeType==1&&f.contentEditable=="false"&&f.getBoundingClientRect().top>=e.top&&s--,r==t.dom&&s==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?u=t.state.doc.content.size:(s==0||r.nodeType!=1||r.childNodes[s-1].nodeName!="BR")&&(u=E3(t,r,s,e))}u==null&&(u=x3(t,l,e));let d=t.docView.nearestDesc(l,!0);return{pos:u,inside:d?d.posAtStart-d.border:-1}}function E1(t){return t.top<t.bottom||t.left<t.right}function Es(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(E1(r))return r}return Array.prototype.find.call(n,E1)||t.getBoundingClientRect()}const k3=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function u_(t,e,n){let{node:r,offset:s,atom:a}=t.docView.domFromPos(e,n<0?-1:1),l=fu||Mr;if(r.nodeType==3)if(l&&(k3.test(r.nodeValue)||(n<0?!s:s==r.nodeValue.length))){let d=Es($i(r,s,s),n);if(Mr&&s&&/\s/.test(r.nodeValue[s-1])&&s<r.nodeValue.length){let f=Es($i(r,s-1,s-1),-1);if(f.top==d.top){let p=Es($i(r,s,s+1),-1);if(p.top!=d.top)return hc(p,p.left<f.left)}}return d}else{let d=s,f=s,p=n<0?1:-1;return n<0&&!s?(f++,p=-1):n>=0&&s==r.nodeValue.length?(d--,p=1):n<0?d--:f++,hc(Es($i(r,d,f),p),p<0)}if(!t.state.doc.resolve(e-(a||0)).parent.inlineContent){if(a==null&&s&&(n<0||s==Rr(r))){let d=r.childNodes[s-1];if(d.nodeType==1)return mg(d.getBoundingClientRect(),!1)}if(a==null&&s<Rr(r)){let d=r.childNodes[s];if(d.nodeType==1)return mg(d.getBoundingClientRect(),!0)}return mg(r.getBoundingClientRect(),n>=0)}if(a==null&&s&&(n<0||s==Rr(r))){let d=r.childNodes[s-1],f=d.nodeType==3?$i(d,Rr(d)-(l?0:1)):d.nodeType==1&&(d.nodeName!="BR"||!d.nextSibling)?d:null;if(f)return hc(Es(f,1),!1)}if(a==null&&s<Rr(r)){let d=r.childNodes[s];for(;d.pmViewDesc&&d.pmViewDesc.ignoreForCoords;)d=d.nextSibling;let f=d?d.nodeType==3?$i(d,0,l?0:1):d.nodeType==1?d:null:null;if(f)return hc(Es(f,-1),!0)}return hc(Es(r.nodeType==3?$i(r):r,-n),n>=0)}function hc(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function mg(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function d_(t,e,n){let r=t.state,s=t.root.activeElement;r!=e&&t.updateState(e),s!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),s!=t.dom&&s&&s.focus()}}function _3(t,e,n){let r=e.selection,s=n=="up"?r.$from:r.$to;return d_(t,e,()=>{let{node:a}=t.docView.domFromPos(s.pos,n=="up"?-1:1);for(;;){let u=t.docView.nearestDesc(a,!0);if(!u)break;if(u.node.isBlock){a=u.contentDOM||u.dom;break}a=u.dom.parentNode}let l=u_(t,s.pos,1);for(let u=a.firstChild;u;u=u.nextSibling){let d;if(u.nodeType==1)d=u.getClientRects();else if(u.nodeType==3)d=$i(u,0,u.nodeValue.length).getClientRects();else continue;for(let f=0;f<d.length;f++){let p=d[f];if(p.bottom>p.top+1&&(n=="up"?l.top-p.top>(p.bottom-l.top)*2:p.bottom-l.bottom>(l.bottom-p.top)*2))return!1}}return!0})}const C3=/[\u0590-\u08ac]/;function A3(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let s=r.parentOffset,a=!s,l=s==r.parent.content.size,u=t.domSelection();return u?!C3.test(r.parent.textContent)||!u.modify?n=="left"||n=="backward"?a:l:d_(t,e,()=>{let{focusNode:d,focusOffset:f,anchorNode:p,anchorOffset:m}=t.domSelectionRange(),v=u.caretBidiLevel;u.modify("move",n,"character");let b=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:w,focusOffset:x}=t.domSelectionRange(),S=w&&!b.contains(w.nodeType==1?w:w.parentNode)||d==w&&f==x;try{u.collapse(p,m),d&&(d!=p||f!=m)&&u.extend&&u.extend(d,f)}catch{}return v!=null&&(u.caretBidiLevel=v),S}):r.pos==r.start()||r.pos==r.end()}let T1=null,k1=null,_1=!1;function O3(t,e,n){return T1==e&&k1==n?_1:(T1=e,k1=n,_1=n=="up"||n=="down"?_3(t,e,n):A3(t,e,n))}const Nr=0,C1=1,Aa=2,ui=3;class hu{constructor(e,n,r,s){this.parent=e,this.children=n,this.dom=r,this.contentDOM=s,this.dirty=Nr,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let s=this.children[n];if(s==e)return r;r+=s.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let a,l;if(e==this.contentDOM)a=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;a=e.previousSibling}for(;a&&!((l=a.pmViewDesc)&&l.parent==this);)a=a.previousSibling;return a?this.posBeforeChild(l)+l.size:this.posAtStart}else{let a,l;if(e==this.contentDOM)a=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;a=e.nextSibling}for(;a&&!((l=a.pmViewDesc)&&l.parent==this);)a=a.nextSibling;return a?this.posBeforeChild(l):this.posAtEnd}let s;if(e==this.dom&&this.contentDOM)s=n>wn(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let a=e;;a=a.parentNode){if(a==this.dom){s=!1;break}if(a.previousSibling)break}if(s==null&&n==e.childNodes.length)for(let a=e;;a=a.parentNode){if(a==this.dom){s=!0;break}if(a.nextSibling)break}}return s??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,s=e;s;s=s.parentNode){let a=this.getDesc(s),l;if(a&&(!n||a.node))if(r&&(l=a.nodeDOM)&&!(l.nodeType==1?l.contains(e.nodeType==1?e:e.parentNode):l==e))r=!1;else return a}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let s=e;s;s=s.parentNode){let a=this.getDesc(s);if(a)return a.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let s=this.children[n],a=r+s.size;if(r==e&&a!=r){for(;!s.border&&s.children.length;)for(let l=0;l<s.children.length;l++){let u=s.children[l];if(u.size){s=u;break}}return s}if(e<a)return s.descAt(e-r-s.border);r=a}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,s=0;for(let a=0;r<this.children.length;r++){let l=this.children[r],u=a+l.size;if(u>e||l instanceof h_){s=e-a;break}a=u}if(s)return this.children[r].domFromPos(s-this.children[r].border,n);for(let a;r&&!(a=this.children[r-1]).size&&a instanceof f_&&a.side>=0;r--);if(n<=0){let a,l=!0;for(;a=r?this.children[r-1]:null,!(!a||a.dom.parentNode==this.contentDOM);r--,l=!1);return a&&n&&l&&!a.border&&!a.domAtom?a.domFromPos(a.size,n):{node:this.contentDOM,offset:a?wn(a.dom)+1:0}}else{let a,l=!0;for(;a=r<this.children.length?this.children[r]:null,!(!a||a.dom.parentNode==this.contentDOM);r++,l=!1);return a&&l&&!a.border&&!a.domAtom?a.domFromPos(0,n):{node:this.contentDOM,offset:a?wn(a.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let s=-1,a=-1;for(let l=r,u=0;;u++){let d=this.children[u],f=l+d.size;if(s==-1&&e<=f){let p=l+d.border;if(e>=p&&n<=f-d.border&&d.node&&d.contentDOM&&this.contentDOM.contains(d.contentDOM))return d.parseRange(e,n,p);e=l;for(let m=u;m>0;m--){let v=this.children[m-1];if(v.size&&v.dom.parentNode==this.contentDOM&&!v.emptyChildAt(1)){s=wn(v.dom)+1;break}e-=v.size}s==-1&&(s=0)}if(s>-1&&(f>n||u==this.children.length-1)){n=f;for(let p=u+1;p<this.children.length;p++){let m=this.children[p];if(m.size&&m.dom.parentNode==this.contentDOM&&!m.emptyChildAt(-1)){a=wn(m.dom);break}n+=m.size}a==-1&&(a=this.contentDOM.childNodes.length);break}l=f}return{node:this.contentDOM,from:e,to:n,fromOffset:s,toOffset:a}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,s=!1){let a=Math.min(e,n),l=Math.max(e,n);for(let b=0,w=0;b<this.children.length;b++){let x=this.children[b],S=w+x.size;if(a>w&&l<S)return x.setSelection(e-w-x.border,n-w-x.border,r,s);w=S}let u=this.domFromPos(e,e?-1:1),d=n==e?u:this.domFromPos(n,n?-1:1),f=r.root.getSelection(),p=r.domSelectionRange(),m=!1;if((Mr||An)&&e==n){let{node:b,offset:w}=u;if(b.nodeType==3){if(m=!!(w&&b.nodeValue[w-1]==`
`),m&&w==b.nodeValue.length)for(let x=b,S;x;x=x.parentNode){if(S=x.nextSibling){S.nodeName=="BR"&&(u=d={node:S.parentNode,offset:wn(S)+1});break}let T=x.pmViewDesc;if(T&&T.node&&T.node.isBlock)break}}else{let x=b.childNodes[w-1];m=x&&(x.nodeName=="BR"||x.contentEditable=="false")}}if(Mr&&p.focusNode&&p.focusNode!=d.node&&p.focusNode.nodeType==1){let b=p.focusNode.childNodes[p.focusOffset];b&&b.contentEditable=="false"&&(s=!0)}if(!(s||m&&An)&&Ua(u.node,u.offset,p.anchorNode,p.anchorOffset)&&Ua(d.node,d.offset,p.focusNode,p.focusOffset))return;let v=!1;if((f.extend||e==n)&&!(m&&Mr)){f.collapse(u.node,u.offset);try{e!=n&&f.extend(d.node,d.offset),v=!0}catch{}}if(!v){if(e>n){let w=u;u=d,d=w}let b=document.createRange();b.setEnd(d.node,d.offset),b.setStart(u.node,u.offset),f.removeAllRanges(),f.addRange(b)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,s=0;s<this.children.length;s++){let a=this.children[s],l=r+a.size;if(r==l?e<=l&&n>=r:e<l&&n>r){let u=r+a.border,d=l-a.border;if(e>=u&&n<=d){this.dirty=e==r||n==l?Aa:C1,e==u&&n==d&&(a.contentLost||a.dom.parentNode!=this.contentDOM)?a.dirty=ui:a.markDirty(e-u,n-u);return}else a.dirty=a.dom==a.contentDOM&&a.dom.parentNode==this.contentDOM&&!a.children.length?Aa:ui}r=l}this.dirty=Aa}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?Aa:C1;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class f_ extends hu{constructor(e,n,r,s){let a,l=n.type.toDOM;if(typeof l=="function"&&(l=l(r,()=>{if(!a)return s;if(a.parent)return a.parent.posBeforeChild(a)})),!n.type.spec.raw){if(l.nodeType!=1){let u=document.createElement("span");u.appendChild(l),l=u}l.contentEditable="false",l.classList.add("ProseMirror-widget")}super(e,[],l,null),this.widget=n,this.widget=n,a=this}matchesWidget(e){return this.dirty==Nr&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class R3 extends hu{constructor(e,n,r,s){super(e,[],n,null),this.textDOM=r,this.text=s}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Pa extends hu{constructor(e,n,r,s,a){super(e,[],r,s),this.mark=n,this.spec=a}static create(e,n,r,s){let a=s.nodeViews[n.type.name],l=a&&a(n,s,r);return(!l||!l.dom)&&(l=Ka.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new Pa(e,n,l.dom,l.contentDOM||l.dom,l)}parseRule(){return this.dirty&ui||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=ui&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=Nr){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Nr}}slice(e,n,r){let s=Pa.create(this.parent,this.mark,!0,r),a=this.children,l=this.size;n<l&&(a=cy(a,n,l,r)),e>0&&(a=cy(a,0,e,r));for(let u=0;u<a.length;u++)a[u].parent=s;return s.children=a,s}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Us extends hu{constructor(e,n,r,s,a,l,u,d,f){super(e,[],a,l),this.node=n,this.outerDeco=r,this.innerDeco=s,this.nodeDOM=u}static create(e,n,r,s,a,l){let u=a.nodeViews[n.type.name],d,f=u&&u(n,a,()=>{if(!d)return l;if(d.parent)return d.parent.posBeforeChild(d)},r,s),p=f&&f.dom,m=f&&f.contentDOM;if(n.isText){if(!p)p=document.createTextNode(n.text);else if(p.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else p||({dom:p,contentDOM:m}=Ka.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!m&&!n.isText&&p.nodeName!="BR"&&(p.hasAttribute("contenteditable")||(p.contentEditable="false"),n.type.spec.draggable&&(p.draggable=!0));let v=p;return p=g_(p,r,n),f?d=new M3(e,n,r,s,p,m||null,v,f,a,l+1):n.isText?new wh(e,n,r,s,p,v,a):new Us(e,n,r,s,p,m||null,v,a,l+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>ie.empty)}return e}matchesNode(e,n,r){return this.dirty==Nr&&e.eq(this.node)&&wf(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,s=n,a=e.composing?this.localCompositionInfo(e,n):null,l=a&&a.pos>-1?a:null,u=a&&a.pos<0,d=new D3(this,l&&l.node,e);z3(this.node,this.innerDeco,(f,p,m)=>{f.spec.marks?d.syncToMarks(f.spec.marks,r,e,p):f.type.side>=0&&!m&&d.syncToMarks(p==this.node.childCount?gt.none:this.node.child(p).marks,r,e,p),d.placeWidget(f,e,s)},(f,p,m,v)=>{d.syncToMarks(f.marks,r,e,v);let b;d.findNodeMatch(f,p,m,v)||u&&e.state.selection.from>s&&e.state.selection.to<s+f.nodeSize&&(b=d.findIndexWithChild(a.node))>-1&&d.updateNodeAt(f,p,m,b,e)||d.updateNextNode(f,p,m,e,v,s)||d.addNode(f,p,m,e,s),s+=f.nodeSize}),d.syncToMarks([],r,e,0),this.node.isTextblock&&d.addTextblockHacks(),d.destroyRest(),(d.changed||this.dirty==Aa)&&(l&&this.protectLocalComposition(e,l),p_(this.contentDOM,this.children,e),ol&&I3(this.dom))}localCompositionInfo(e,n){let{from:r,to:s}=e.state.selection;if(!(e.state.selection instanceof Be)||r<n||s>n+this.node.content.size)return null;let a=e.input.compositionNode;if(!a||!this.dom.contains(a.parentNode))return null;if(this.node.inlineContent){let l=a.nodeValue,u=B3(this.node.content,l,r-n,s-n);return u<0?null:{node:a,pos:u,text:l}}else return{node:a,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:s}){if(this.getDesc(n))return;let a=n;for(;a.parentNode!=this.contentDOM;a=a.parentNode){for(;a.previousSibling;)a.parentNode.removeChild(a.previousSibling);for(;a.nextSibling;)a.parentNode.removeChild(a.nextSibling);a.pmViewDesc&&(a.pmViewDesc=void 0)}let l=new R3(this,a,n,s);e.input.compositionNodes.push(l),this.children=cy(this.children,r,r+s.length,e,l)}update(e,n,r,s){return this.dirty==ui||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,s),!0)}updateInner(e,n,r,s){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(s,this.posAtStart),this.dirty=Nr}updateOuterDeco(e){if(wf(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=m_(this.dom,this.nodeDOM,ly(this.outerDeco,this.node,n),ly(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function A1(t,e,n,r,s){g_(r,e,t);let a=new Us(void 0,t,e,n,r,r,r,s,0);return a.contentDOM&&a.updateChildren(s,0),a}class wh extends Us{constructor(e,n,r,s,a,l,u){super(e,n,r,s,a,null,l,u,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,s){return this.dirty==ui||this.dirty!=Nr&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Nr||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,s.trackWrites==this.nodeDOM&&(s.trackWrites=null)),this.node=e,this.dirty=Nr,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let s=this.node.cut(e,n),a=document.createTextNode(s.text);return new wh(this.parent,s,this.outerDeco,this.innerDeco,a,a,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=ui)}get domAtom(){return!1}isText(e){return this.node.text==e}}class h_ extends hu{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Nr&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class M3 extends Us{constructor(e,n,r,s,a,l,u,d,f,p){super(e,n,r,s,a,l,u,f,p),this.spec=d}update(e,n,r,s){if(this.dirty==ui)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let a=this.spec.update(e,n,r);return a&&this.updateInner(e,n,r,s),a}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,s)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,s){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,s)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function p_(t,e,n){let r=t.firstChild,s=!1;for(let a=0;a<e.length;a++){let l=e[a],u=l.dom;if(u.parentNode==t){for(;u!=r;)r=O1(r),s=!0;r=r.nextSibling}else s=!0,t.insertBefore(u,r);if(l instanceof Pa){let d=r?r.previousSibling:t.lastChild;p_(l.contentDOM,l.children,n),r=d?d.nextSibling:t.firstChild}}for(;r;)r=O1(r),s=!0;s&&n.trackWrites==t&&(n.trackWrites=null)}const Oc=function(t){t&&(this.nodeName=t)};Oc.prototype=Object.create(null);const Oa=[new Oc];function ly(t,e,n){if(t.length==0)return Oa;let r=n?Oa[0]:new Oc,s=[r];for(let a=0;a<t.length;a++){let l=t[a].type.attrs;if(l){l.nodeName&&s.push(r=new Oc(l.nodeName));for(let u in l){let d=l[u];d!=null&&(n&&s.length==1&&s.push(r=new Oc(e.isInline?"span":"div")),u=="class"?r.class=(r.class?r.class+" ":"")+d:u=="style"?r.style=(r.style?r.style+";":"")+d:u!="nodeName"&&(r[u]=d))}}}return s}function m_(t,e,n,r){if(n==Oa&&r==Oa)return e;let s=e;for(let a=0;a<r.length;a++){let l=r[a],u=n[a];if(a){let d;u&&u.nodeName==l.nodeName&&s!=t&&(d=s.parentNode)&&d.nodeName.toLowerCase()==l.nodeName||(d=document.createElement(l.nodeName),d.pmIsDeco=!0,d.appendChild(s),u=Oa[0]),s=d}N3(s,u||Oa[0],l)}return s}function N3(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],s=n.class?n.class.split(" ").filter(Boolean):[];for(let a=0;a<r.length;a++)s.indexOf(r[a])==-1&&t.classList.remove(r[a]);for(let a=0;a<s.length;a++)r.indexOf(s[a])==-1&&t.classList.add(s[a]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,s;for(;s=r.exec(e.style);)t.style.removeProperty(s[1])}n.style&&(t.style.cssText+=n.style)}}function g_(t,e,n){return m_(t,t,Oa,ly(e,n,t.nodeType!=1))}function wf(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function O1(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class D3{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=j3(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r,s){let a=0,l=this.stack.length>>1,u=Math.min(l,e.length);for(;a<u&&(a==l-1?this.top:this.stack[a+1<<1]).matchesMark(e[a])&&e[a].type.spec.spanning!==!1;)a++;for(;a<l;)this.destroyRest(),this.top.dirty=Nr,this.index=this.stack.pop(),this.top=this.stack.pop(),l--;for(;l<e.length;){this.stack.push(this.top,this.index+1);let d=-1,f=this.top.children.length;s<this.preMatch.index&&(f=Math.min(this.index+3,f));for(let p=this.index;p<f;p++){let m=this.top.children[p];if(m.matchesMark(e[l])&&!this.isLocked(m.dom)){d=p;break}}if(d>-1)d>this.index&&(this.changed=!0,this.destroyBetween(this.index,d)),this.top=this.top.children[this.index];else{let p=Pa.create(this.top,e[l],n,r);this.top.children.splice(this.index,0,p),this.top=p,this.changed=!0}this.index=0,l++}}findNodeMatch(e,n,r,s){let a=-1,l;if(s>=this.preMatch.index&&(l=this.preMatch.matches[s-this.preMatch.index]).parent==this.top&&l.matchesNode(e,n,r))a=this.top.children.indexOf(l,this.index);else for(let u=this.index,d=Math.min(this.top.children.length,u+5);u<d;u++){let f=this.top.children[u];if(f.matchesNode(e,n,r)&&!this.preMatch.matched.has(f)){a=u;break}}return a<0?!1:(this.destroyBetween(this.index,a),this.index++,!0)}updateNodeAt(e,n,r,s,a){let l=this.top.children[s];return l.dirty==ui&&l.dom==l.contentDOM&&(l.dirty=Aa),l.update(e,n,r,a)?(this.destroyBetween(this.index,s),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let s=this.index;s<this.top.children.length;s++)if(this.top.children[s]==r)return s}return-1}e=n}}updateNextNode(e,n,r,s,a,l){for(let u=this.index;u<this.top.children.length;u++){let d=this.top.children[u];if(d instanceof Us){let f=this.preMatch.matched.get(d);if(f!=null&&f!=a)return!1;let p=d.dom,m,v=this.isLocked(p)&&!(e.isText&&d.node&&d.node.isText&&d.nodeDOM.nodeValue==e.text&&d.dirty!=ui&&wf(n,d.outerDeco));if(!v&&d.update(e,n,r,s))return this.destroyBetween(this.index,u),d.dom!=p&&(this.changed=!0),this.index++,!0;if(!v&&(m=this.recreateWrapper(d,e,n,r,s,l)))return this.destroyBetween(this.index,u),this.top.children[this.index]=m,m.contentDOM&&(m.dirty=Aa,m.updateChildren(s,l+1),m.dirty=Nr),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,s,a,l){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!wf(r,e.outerDeco)||!s.eq(e.innerDeco))return null;let u=Us.create(this.top,n,r,s,a,l);if(u.contentDOM){u.children=e.children,e.children=[];for(let d of u.children)d.parent=u}return e.destroy(),u}addNode(e,n,r,s,a){let l=Us.create(this.top,e,n,r,s,a);l.contentDOM&&l.updateChildren(s,a+1),this.top.children.splice(this.index++,0,l),this.changed=!0}placeWidget(e,n,r){let s=this.index<this.top.children.length?this.top.children[this.index]:null;if(s&&s.matchesWidget(e)&&(e==s.widget||!s.widget.type.toDOM.parentNode))this.index++;else{let a=new f_(this.top,e,n,r);this.top.children.splice(this.index++,0,a),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof Pa;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof wh)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((An||xn)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let s=new h_(this.top,[],r,null);n!=this.top?n.children.push(s):n.children.splice(this.index++,0,s),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function j3(t,e){let n=e,r=n.children.length,s=t.childCount,a=new Map,l=[];e:for(;s>0;){let u;for(;;)if(r){let f=n.children[r-1];if(f instanceof Pa)n=f,r=f.children.length;else{u=f,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let d=u.node;if(d){if(d!=t.child(s-1))break;--s,a.set(u,s),l.push(u)}}return{index:s,matched:a,matches:l.reverse()}}function L3(t,e){return t.type.side-e.type.side}function z3(t,e,n,r){let s=e.locals(t),a=0;if(s.length==0){for(let f=0;f<t.childCount;f++){let p=t.child(f);r(p,s,e.forChild(a,p),f),a+=p.nodeSize}return}let l=0,u=[],d=null;for(let f=0;;){let p,m;for(;l<s.length&&s[l].to==a;){let S=s[l++];S.widget&&(p?(m||(m=[p])).push(S):p=S)}if(p)if(m){m.sort(L3);for(let S=0;S<m.length;S++)n(m[S],f,!!d)}else n(p,f,!!d);let v,b;if(d)b=-1,v=d,d=null;else if(f<t.childCount)b=f,v=t.child(f++);else break;for(let S=0;S<u.length;S++)u[S].to<=a&&u.splice(S--,1);for(;l<s.length&&s[l].from<=a&&s[l].to>a;)u.push(s[l++]);let w=a+v.nodeSize;if(v.isText){let S=w;l<s.length&&s[l].from<S&&(S=s[l].from);for(let T=0;T<u.length;T++)u[T].to<S&&(S=u[T].to);S<w&&(d=v.cut(S-a),v=v.cut(0,S-a),w=S,b=-1)}else for(;l<s.length&&s[l].to<w;)l++;let x=v.isInline&&!v.isLeaf?u.filter(S=>!S.inline):u.slice();r(v,x,e.forChild(a,v),b),a=w}}function I3(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function B3(t,e,n,r){for(let s=0,a=0;s<t.childCount&&a<=r;){let l=t.child(s++),u=a;if(a+=l.nodeSize,!l.isText)continue;let d=l.text;for(;s<t.childCount;){let f=t.child(s++);if(a+=f.nodeSize,!f.isText)break;d+=f.text}if(a>=n){if(a>=r&&d.slice(r-e.length-u,r-u)==e)return r-e.length;let f=u<r?d.lastIndexOf(e,r-u-1):-1;if(f>=0&&f+e.length+u>=n)return u+f;if(n==r&&d.length>=r+e.length-u&&d.slice(r-u,r-u+e.length)==e)return r}}return-1}function cy(t,e,n,r,s){let a=[];for(let l=0,u=0;l<t.length;l++){let d=t[l],f=u,p=u+=d.size;f>=n||p<=e?a.push(d):(f<e&&a.push(d.slice(0,e-f,r)),s&&(a.push(s),s=void 0),p>n&&a.push(d.slice(n-f,d.size,r)))}return a}function r0(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let s=t.docView.nearestDesc(n.focusNode),a=s&&s.size==0,l=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(l<0)return null;let u=r.resolve(l),d,f;if(bh(n)){for(d=l;s&&!s.node;)s=s.parent;let m=s.node;if(s&&m.isAtom&&Me.isSelectable(m)&&s.parent&&!(m.isInline&&d3(n.focusNode,n.focusOffset,s.dom))){let v=s.posBefore;f=new Me(l==v?u:r.resolve(v))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let m=l,v=l;for(let b=0;b<n.rangeCount;b++){let w=n.getRangeAt(b);m=Math.min(m,t.docView.posFromDOM(w.startContainer,w.startOffset,1)),v=Math.max(v,t.docView.posFromDOM(w.endContainer,w.endOffset,-1))}if(m<0)return null;[d,l]=v==t.state.selection.anchor?[v,m]:[m,v],u=r.resolve(l)}else d=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(d<0)return null}let p=r.resolve(d);if(!f){let m=e=="pointer"||t.state.selection.head<u.pos&&!a?1:-1;f=i0(t,p,u,m)}return f}function y_(t){return t.editable?t.hasFocus():b_(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Fi(t,e=!1){let n=t.state.selection;if(v_(t,n),!!y_(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&xn){let r=t.domSelectionRange(),s=t.domObserver.currentSelection;if(r.anchorNode&&s.anchorNode&&Ua(r.anchorNode,r.anchorOffset,s.anchorNode,s.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)P3(t);else{let{anchor:r,head:s}=n,a,l;R1&&!(n instanceof Be)&&(n.$from.parent.inlineContent||(a=M1(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(l=M1(t,n.to))),t.docView.setSelection(r,s,t,e),R1&&(a&&N1(a),l&&N1(l)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&U3(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const R1=An||xn&&i_<63;function M1(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),s=r<n.childNodes.length?n.childNodes[r]:null,a=r?n.childNodes[r-1]:null;if(An&&s&&s.contentEditable=="false")return gg(s);if((!s||s.contentEditable=="false")&&(!a||a.contentEditable=="false")){if(s)return gg(s);if(a)return gg(a)}}function gg(t){return t.contentEditable="true",An&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function N1(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function U3(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,s=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=s)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!y_(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function P3(t){let e=t.domSelection();if(!e)return;let n=t.cursorWrapper.dom,r=n.nodeName=="IMG";r?e.collapse(n.parentNode,wn(n)+1):e.collapse(n,0),!r&&!t.state.selection.visible&&Wn&&Bs<=11&&(n.disabled=!0,n.disabled=!1)}function v_(t,e){if(e instanceof Me){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(D1(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else D1(t)}function D1(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function i0(t,e,n,r){return t.someProp("createSelectionBetween",s=>s(t,e,n))||Be.between(e,n,r)}function j1(t){return t.editable&&!t.hasFocus()?!1:b_(t)}function b_(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function H3(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return Ua(e.node,e.offset,n.anchorNode,n.anchorOffset)}function uy(t,e){let{$anchor:n,$head:r}=t.selection,s=e>0?n.max(r):n.min(r),a=s.parent.inlineContent?s.depth?t.doc.resolve(e>0?s.after():s.before()):null:s;return a&&Fe.findFrom(a,e)}function ks(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function L1(t,e,n){let r=t.state.selection;if(r instanceof Be)if(n.indexOf("s")>-1){let{$head:s}=r,a=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter;if(!a||a.isText||!a.isLeaf)return!1;let l=t.state.doc.resolve(s.pos+a.nodeSize*(e<0?-1:1));return ks(t,new Be(r.$anchor,l))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let s=uy(t.state,e);return s&&s instanceof Me?ks(t,s):!1}else if(!(Or&&n.indexOf("m")>-1)){let s=r.$head,a=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter,l;if(!a||a.isText)return!1;let u=e<0?s.pos-a.nodeSize:s.pos;return a.isAtom||(l=t.docView.descAt(u))&&!l.contentDOM?Me.isSelectable(a)?ks(t,new Me(e<0?t.state.doc.resolve(s.pos-a.nodeSize):s)):fu?ks(t,new Be(t.state.doc.resolve(e<0?u:u+a.nodeSize))):!1:!1}}else return!1;else{if(r instanceof Me&&r.node.isInline)return ks(t,new Be(e>0?r.$to:r.$from));{let s=uy(t.state,e);return s?ks(t,s):!1}}}function Sf(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Rc(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function qo(t,e){return e<0?$3(t):q3(t)}function $3(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let s,a,l=!1;for(Mr&&n.nodeType==1&&r<Sf(n)&&Rc(n.childNodes[r],-1)&&(l=!0);;)if(r>0){if(n.nodeType!=1)break;{let u=n.childNodes[r-1];if(Rc(u,-1))s=n,a=--r;else if(u.nodeType==3)n=u,r=n.nodeValue.length;else break}}else{if(w_(n))break;{let u=n.previousSibling;for(;u&&Rc(u,-1);)s=n.parentNode,a=wn(u),u=u.previousSibling;if(u)n=u,r=Sf(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}l?dy(t,n,r):s&&dy(t,s,a)}function q3(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let s=Sf(n),a,l;for(;;)if(r<s){if(n.nodeType!=1)break;let u=n.childNodes[r];if(Rc(u,1))a=n,l=++r;else break}else{if(w_(n))break;{let u=n.nextSibling;for(;u&&Rc(u,1);)a=u.parentNode,l=wn(u)+1,u=u.nextSibling;if(u)n=u,r=0,s=Sf(n);else{if(n=n.parentNode,n==t.dom)break;r=s=0}}}a&&dy(t,a,l)}function w_(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function V3(t,e){for(;t&&e==t.childNodes.length&&!du(t);)e=wn(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function F3(t,e){for(;t&&!e&&!du(t);)e=wn(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function dy(t,e,n){if(e.nodeType!=3){let a,l;(l=V3(e,n))?(e=l,n=0):(a=F3(e,n))&&(e=a,n=a.nodeValue.length)}let r=t.domSelection();if(!r)return;if(bh(r)){let a=document.createRange();a.setEnd(e,n),a.setStart(e,n),r.removeAllRanges(),r.addRange(a)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:s}=t;setTimeout(()=>{t.state==s&&Fi(t)},50)}function z1(t,e){let n=t.state.doc.resolve(e);if(!(xn||s_)&&n.parent.inlineContent){let s=t.coordsAtPos(e);if(e>n.start()){let a=t.coordsAtPos(e-1),l=(a.top+a.bottom)/2;if(l>s.top&&l<s.bottom&&Math.abs(a.left-s.left)>1)return a.left<s.left?"ltr":"rtl"}if(e<n.end()){let a=t.coordsAtPos(e+1),l=(a.top+a.bottom)/2;if(l>s.top&&l<s.bottom&&Math.abs(a.left-s.left)>1)return a.left>s.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function I1(t,e,n){let r=t.state.selection;if(r instanceof Be&&!r.empty||n.indexOf("s")>-1||Or&&n.indexOf("m")>-1)return!1;let{$from:s,$to:a}=r;if(!s.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let l=uy(t.state,e);if(l&&l instanceof Me)return ks(t,l)}if(!s.parent.inlineContent){let l=e<0?s:a,u=r instanceof cr?Fe.near(l,e):Fe.findFrom(l,e);return u?ks(t,u):!1}return!1}function B1(t,e){if(!(t.state.selection instanceof Be))return!0;let{$head:n,$anchor:r,empty:s}=t.state.selection;if(!n.sameParent(r))return!0;if(!s)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let a=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(a&&!a.isText){let l=t.state.tr;return e<0?l.delete(n.pos-a.nodeSize,n.pos):l.delete(n.pos,n.pos+a.nodeSize),t.dispatch(l),!0}return!1}function U1(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function G3(t){if(!An||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;U1(t,r,"true"),setTimeout(()=>U1(t,r,"false"),20)}return!1}function K3(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function W3(t,e){let n=e.keyCode,r=K3(e);if(n==8||Or&&n==72&&r=="c")return B1(t,-1)||qo(t,-1);if(n==46&&!e.shiftKey||Or&&n==68&&r=="c")return B1(t,1)||qo(t,1);if(n==13||n==27)return!0;if(n==37||Or&&n==66&&r=="c"){let s=n==37?z1(t,t.state.selection.from)=="ltr"?-1:1:-1;return L1(t,s,r)||qo(t,s)}else if(n==39||Or&&n==70&&r=="c"){let s=n==39?z1(t,t.state.selection.from)=="ltr"?1:-1:1;return L1(t,s,r)||qo(t,s)}else{if(n==38||Or&&n==80&&r=="c")return I1(t,-1,r)||qo(t,-1);if(n==40||Or&&n==78&&r=="c")return G3(t)||I1(t,1,r)||qo(t,1);if(r==(Or?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function s0(t,e){t.someProp("transformCopied",b=>{e=b(e,t)});let n=[],{content:r,openStart:s,openEnd:a}=e;for(;s>1&&a>1&&r.childCount==1&&r.firstChild.childCount==1;){s--,a--;let b=r.firstChild;n.push(b.type.name,b.attrs!=b.type.defaultAttrs?b.attrs:null),r=b.content}let l=t.someProp("clipboardSerializer")||Ka.fromSchema(t.state.schema),u=__(),d=u.createElement("div");d.appendChild(l.serializeFragment(r,{document:u}));let f=d.firstChild,p,m=0;for(;f&&f.nodeType==1&&(p=k_[f.nodeName.toLowerCase()]);){for(let b=p.length-1;b>=0;b--){let w=u.createElement(p[b]);for(;d.firstChild;)w.appendChild(d.firstChild);d.appendChild(w),m++}f=d.firstChild}f&&f.nodeType==1&&f.setAttribute("data-pm-slice",`${s} ${a}${m?` -${m}`:""} ${JSON.stringify(n)}`);let v=t.someProp("clipboardTextSerializer",b=>b(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:d,text:v,slice:e}}function S_(t,e,n,r,s){let a=s.parent.type.spec.code,l,u;if(!n&&!e)return null;let d=!!e&&(r||a||!n);if(d){if(t.someProp("transformPastedText",v=>{e=v(e,a||r,t)}),a)return u=new me(ie.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",v=>{u=v(u,t,!0)}),u;let m=t.someProp("clipboardTextParser",v=>v(e,s,r,t));if(m)u=m;else{let v=s.marks(),{schema:b}=t.state,w=Ka.fromSchema(b);l=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(x=>{let S=l.appendChild(document.createElement("p"));x&&S.appendChild(w.serializeNode(b.text(x,v)))})}}else t.someProp("transformPastedHTML",m=>{n=m(n,t)}),l=Q3(n),fu&&Z3(l);let f=l&&l.querySelector("[data-pm-slice]"),p=f&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(f.getAttribute("data-pm-slice")||"");if(p&&p[3])for(let m=+p[3];m>0;m--){let v=l.firstChild;for(;v&&v.nodeType!=1;)v=v.nextSibling;if(!v)break;l=v}if(u||(u=(t.someProp("clipboardParser")||t.someProp("domParser")||Is.fromSchema(t.state.schema)).parseSlice(l,{preserveWhitespace:!!(d||p),context:s,ruleFromNode(v){return v.nodeName=="BR"&&!v.nextSibling&&v.parentNode&&!Y3.test(v.parentNode.nodeName)?{ignore:!0}:null}})),p)u=eI(P1(u,+p[1],+p[2]),p[4]);else if(u=me.maxOpen(J3(u.content,s),!0),u.openStart||u.openEnd){let m=0,v=0;for(let b=u.content.firstChild;m<u.openStart&&!b.type.spec.isolating;m++,b=b.firstChild);for(let b=u.content.lastChild;v<u.openEnd&&!b.type.spec.isolating;v++,b=b.lastChild);u=P1(u,m,v)}return t.someProp("transformPasted",m=>{u=m(u,t,d)}),u}const Y3=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function J3(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let s=e.node(n).contentMatchAt(e.index(n)),a,l=[];if(t.forEach(u=>{if(!l)return;let d=s.findWrapping(u.type),f;if(!d)return l=null;if(f=l.length&&a.length&&E_(d,a,u,l[l.length-1],0))l[l.length-1]=f;else{l.length&&(l[l.length-1]=T_(l[l.length-1],a.length));let p=x_(u,d);l.push(p),s=s.matchType(p.type),a=d}}),l)return ie.from(l)}return t}function x_(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,ie.from(t));return t}function E_(t,e,n,r,s){if(s<t.length&&s<e.length&&t[s]==e[s]){let a=E_(t,e,n,r.lastChild,s+1);if(a)return r.copy(r.content.replaceChild(r.childCount-1,a));if(r.contentMatchAt(r.childCount).matchType(s==t.length-1?n.type:t[s+1]))return r.copy(r.content.append(ie.from(x_(n,t,s+1))))}}function T_(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,T_(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(ie.empty,!0);return t.copy(n.append(r))}function fy(t,e,n,r,s,a){let l=e<0?t.firstChild:t.lastChild,u=l.content;return t.childCount>1&&(a=0),s<r-1&&(u=fy(u,e,n,r,s+1,a)),s>=n&&(u=e<0?l.contentMatchAt(0).fillBefore(u,a<=s).append(u):u.append(l.contentMatchAt(l.childCount).fillBefore(ie.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,l.copy(u))}function P1(t,e,n){return e<t.openStart&&(t=new me(fy(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new me(fy(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const k_={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let H1=null;function __(){return H1||(H1=document.implementation.createHTMLDocument("title"))}let yg=null;function X3(t){let e=window.trustedTypes;return e?(yg||(yg=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),yg.createHTML(t)):t}function Q3(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=__().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),s;if((s=r&&k_[r[1].toLowerCase()])&&(t=s.map(a=>"<"+a+">").join("")+t+s.map(a=>"</"+a+">").reverse().join("")),n.innerHTML=X3(t),s)for(let a=0;a<s.length;a++)n=n.querySelector(s[a])||n;return n}function Z3(t){let e=t.querySelectorAll(xn?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function eI(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:s,openStart:a,openEnd:l}=t;for(let u=r.length-2;u>=0;u-=2){let d=n.nodes[r[u]];if(!d||d.hasRequiredAttrs())break;s=ie.from(d.create(r[u+1],s)),a++,l++}return new me(s,a,l)}const jn={},Ln={},tI={touchstart:!0,touchmove:!0};class nI{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.badSafariComposition=!1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function rI(t){for(let e in jn){let n=jn[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{sI(t,r)&&!a0(t,r)&&(t.editable||!(r.type in Ln))&&n(t,r)},tI[e]?{passive:!0}:void 0)}An&&t.dom.addEventListener("input",()=>null),hy(t)}function zs(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function iI(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function hy(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>a0(t,r))})}function a0(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function sI(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function aI(t,e){!a0(t,e)&&jn[e.type]&&(t.editable||!(e.type in Ln))&&jn[e.type](t,e)}Ln.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!A_(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(qi&&xn&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),ol&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",s=>s(t,ka(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||W3(t,n)?n.preventDefault():zs(t,"key")};Ln.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Ln.keypress=(t,e)=>{let n=e;if(A_(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Or&&n.metaKey)return;if(t.someProp("handleKeyPress",s=>s(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof Be)||!r.$from.sameParent(r.$to)){let s=String.fromCharCode(n.charCode),a=()=>t.state.tr.insertText(s).scrollIntoView();!/[\r\n]/.test(s)&&!t.someProp("handleTextInput",l=>l(t,r.$from.pos,r.$to.pos,s,a))&&t.dispatch(a()),n.preventDefault()}};function Sh(t){return{left:t.clientX,top:t.clientY}}function oI(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function o0(t,e,n,r,s){if(r==-1)return!1;let a=t.state.doc.resolve(r);for(let l=a.depth+1;l>0;l--)if(t.someProp(e,u=>l>a.depth?u(t,n,a.nodeAfter,a.before(l),s,!0):u(t,n,a.node(l),a.before(l),s,!1)))return!0;return!1}function rl(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function lI(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&Me.isSelectable(r)?(rl(t,new Me(n)),!0):!1}function cI(t,e){if(e==-1)return!1;let n=t.state.selection,r,s;n instanceof Me&&(r=n.node);let a=t.state.doc.resolve(e);for(let l=a.depth+1;l>0;l--){let u=l>a.depth?a.nodeAfter:a.node(l);if(Me.isSelectable(u)){r&&n.$from.depth>0&&l>=n.$from.depth&&a.before(n.$from.depth+1)==n.$from.pos?s=a.before(n.$from.depth):s=a.before(l);break}}return s!=null?(rl(t,Me.create(t.state.doc,s)),!0):!1}function uI(t,e,n,r,s){return o0(t,"handleClickOn",e,n,r)||t.someProp("handleClick",a=>a(t,e,r))||(s?cI(t,n):lI(t,n))}function dI(t,e,n,r){return o0(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",s=>s(t,e,r))}function fI(t,e,n,r){return o0(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",s=>s(t,e,r))||hI(t,n,r)}function hI(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(rl(t,Be.create(r,0,r.content.size)),!0):!1;let s=r.resolve(e);for(let a=s.depth+1;a>0;a--){let l=a>s.depth?s.nodeAfter:s.node(a),u=s.before(a);if(l.inlineContent)rl(t,Be.create(r,u+1,u+1+l.content.size));else if(Me.isSelectable(l))rl(t,Me.create(r,u));else continue;return!0}}function l0(t){return xf(t)}const C_=Or?"metaKey":"ctrlKey";jn.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=l0(t),s=Date.now(),a="singleClick";s-t.input.lastClick.time<500&&oI(n,t.input.lastClick)&&!n[C_]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?a="doubleClick":t.input.lastClick.type=="doubleClick"&&(a="tripleClick")),t.input.lastClick={time:s,x:n.clientX,y:n.clientY,type:a,button:n.button};let l=t.posAtCoords(Sh(n));l&&(a=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new pI(t,l,n,!!r)):(a=="doubleClick"?dI:fI)(t,l.pos,l.inside,n)?n.preventDefault():zs(t,"pointer"))};class pI{constructor(e,n,r,s){this.view=e,this.pos=n,this.event=r,this.flushed=s,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[C_],this.allowDefault=r.shiftKey;let a,l;if(n.inside>-1)a=e.state.doc.nodeAt(n.inside),l=n.inside;else{let p=e.state.doc.resolve(n.pos);a=p.parent,l=p.depth?p.before():0}const u=s?null:r.target,d=u?e.docView.nearestDesc(u,!0):null;this.target=d&&d.nodeDOM.nodeType==1?d.nodeDOM:null;let{selection:f}=e.state;(r.button==0&&a.type.spec.draggable&&a.type.spec.selectable!==!1||f instanceof Me&&f.from<=l&&f.to>l)&&(this.mightDrag={node:a,pos:l,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Mr&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),zs(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Fi(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(Sh(e))),this.updateAllowDefault(e),this.allowDefault||!n?zs(this.view,"pointer"):uI(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||An&&this.mightDrag&&!this.mightDrag.node.isAtom||xn&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(rl(this.view,Fe.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):zs(this.view,"pointer")}move(e){this.updateAllowDefault(e),zs(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}jn.touchstart=t=>{t.input.lastTouch=Date.now(),l0(t),zs(t,"pointer")};jn.touchmove=t=>{t.input.lastTouch=Date.now(),zs(t,"pointer")};jn.contextmenu=t=>l0(t);function A_(t,e){return t.composing?!0:An&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const mI=qi?5e3:-1;Ln.compositionstart=Ln.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof Be&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)||xn&&s_&&gI(t)))t.markCursor=t.state.storedMarks||n.marks(),xf(t,!0),t.markCursor=null;else if(xf(t,!e.selection.empty),Mr&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let s=r.focusNode,a=r.focusOffset;s&&s.nodeType==1&&a!=0;){let l=a<0?s.lastChild:s.childNodes[a-1];if(!l)break;if(l.nodeType==3){let u=t.domSelection();u&&u.collapse(l,l.nodeValue.length);break}else s=l,a=-1}}t.input.composing=!0}O_(t,mI)};function gI(t){let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(!e||e.nodeType!=1||n>=e.childNodes.length)return!1;let r=e.childNodes[n];return r.nodeType==1&&r.contentEditable=="false"}Ln.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.badSafariComposition?t.domObserver.forceFlush():t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,O_(t,20))};function O_(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>xf(t),e))}function R_(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=vI());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function yI(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=c3(e.focusNode,e.focusOffset),r=u3(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let s=r.pmViewDesc,a=t.domObserver.lastChangedTextNode;if(n==a||r==a)return a;if(!s||!s.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let l=n.pmViewDesc;if(!(!l||!l.isText(n.nodeValue)))return r}}return n||r}function vI(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function xf(t,e=!1){if(!(qi&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),R_(t),e||t.docView&&t.docView.dirty){let n=r0(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function bI(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),s=document.createRange();s.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(s),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const Xc=Wn&&Bs<15||ol&&p3<604;jn.copy=Ln.cut=(t,e)=>{let n=e,r=t.state.selection,s=n.type=="cut";if(r.empty)return;let a=Xc?null:n.clipboardData,l=r.content(),{dom:u,text:d}=s0(t,l);a?(n.preventDefault(),a.clearData(),a.setData("text/html",u.innerHTML),a.setData("text/plain",d)):bI(t,u),s&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function wI(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function SI(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let s=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Qc(t,r.value,null,s,e):Qc(t,r.textContent,r.innerHTML,s,e)},50)}function Qc(t,e,n,r,s){let a=S_(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",d=>d(t,s,a||me.empty)))return!0;if(!a)return!1;let l=wI(a),u=l?t.state.tr.replaceSelectionWith(l,r):t.state.tr.replaceSelection(a);return t.dispatch(u.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function M_(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Ln.paste=(t,e)=>{let n=e;if(t.composing&&!qi)return;let r=Xc?null:n.clipboardData,s=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&Qc(t,M_(r),r.getData("text/html"),s,n)?n.preventDefault():SI(t,n)};class N_{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const xI=Or?"altKey":"ctrlKey";function D_(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[xI]}jn.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let s=t.state.selection,a=s.empty?null:t.posAtCoords(Sh(n)),l;if(!(a&&a.pos>=s.from&&a.pos<=(s instanceof Me?s.to-1:s.to))){if(r&&r.mightDrag)l=Me.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let m=t.docView.nearestDesc(n.target,!0);m&&m.node.type.spec.draggable&&m!=t.docView&&(l=Me.create(t.state.doc,m.posBefore))}}let u=(l||t.state.selection).content(),{dom:d,text:f,slice:p}=s0(t,u);(!n.dataTransfer.files.length||!xn||i_>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Xc?"Text":"text/html",d.innerHTML),n.dataTransfer.effectAllowed="copyMove",Xc||n.dataTransfer.setData("text/plain",f),t.dragging=new N_(p,D_(t,n),l)};jn.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Ln.dragover=Ln.dragenter=(t,e)=>e.preventDefault();Ln.drop=(t,e)=>{try{EI(t,e,t.dragging)}finally{t.dragging=null}};function EI(t,e,n){if(!e.dataTransfer)return;let r=t.posAtCoords(Sh(e));if(!r)return;let s=t.state.doc.resolve(r.pos),a=n&&n.slice;a?t.someProp("transformPasted",b=>{a=b(a,t,!1)}):a=S_(t,M_(e.dataTransfer),Xc?null:e.dataTransfer.getData("text/html"),!1,s);let l=!!(n&&D_(t,e));if(t.someProp("handleDrop",b=>b(t,e,a||me.empty,l))){e.preventDefault();return}if(!a)return;e.preventDefault();let u=a?Ik(t.state.doc,s.pos,a):s.pos;u==null&&(u=s.pos);let d=t.state.tr;if(l){let{node:b}=n;b?b.replace(d):d.deleteSelection()}let f=d.mapping.map(u),p=a.openStart==0&&a.openEnd==0&&a.content.childCount==1,m=d.doc;if(p?d.replaceRangeWith(f,f,a.content.firstChild):d.replaceRange(f,f,a),d.doc.eq(m))return;let v=d.doc.resolve(f);if(p&&Me.isSelectable(a.content.firstChild)&&v.nodeAfter&&v.nodeAfter.sameMarkup(a.content.firstChild))d.setSelection(new Me(v));else{let b=d.mapping.map(u);d.mapping.maps[d.mapping.maps.length-1].forEach((w,x,S,T)=>b=T),d.setSelection(i0(t,v,d.doc.resolve(b)))}t.focus(),t.dispatch(d.setMeta("uiEvent","drop"))}jn.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Fi(t)},20))};jn.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};jn.beforeinput=(t,e)=>{if(xn&&qi&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",a=>a(t,ka(8,"Backspace")))))return;let{$cursor:s}=t.state.selection;s&&s.pos>0&&t.dispatch(t.state.tr.delete(s.pos-1,s.pos).scrollIntoView())},50)}};for(let t in Ln)jn[t]=Ln[t];function Zc(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class Ef{constructor(e,n){this.toDOM=e,this.spec=n||ja,this.side=this.spec.side||0}map(e,n,r,s){let{pos:a,deleted:l}=e.mapResult(n.from+s,this.side<0?-1:1);return l?null:new Dn(a-r,a-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Ef&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Zc(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Ps{constructor(e,n){this.attrs=e,this.spec=n||ja}map(e,n,r,s){let a=e.map(n.from+s,this.spec.inclusiveStart?-1:1)-r,l=e.map(n.to+s,this.spec.inclusiveEnd?1:-1)-r;return a>=l?null:new Dn(a,l,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof Ps&&Zc(this.attrs,e.attrs)&&Zc(this.spec,e.spec)}static is(e){return e.type instanceof Ps}destroy(){}}class c0{constructor(e,n){this.attrs=e,this.spec=n||ja}map(e,n,r,s){let a=e.mapResult(n.from+s,1);if(a.deleted)return null;let l=e.mapResult(n.to+s,-1);return l.deleted||l.pos<=a.pos?null:new Dn(a.pos-r,l.pos-r,this)}valid(e,n){let{index:r,offset:s}=e.content.findIndex(n.from),a;return s==n.from&&!(a=e.child(r)).isText&&s+a.nodeSize==n.to}eq(e){return this==e||e instanceof c0&&Zc(this.attrs,e.attrs)&&Zc(this.spec,e.spec)}destroy(){}}class Dn{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new Dn(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new Dn(e,e,new Ef(n,r))}static inline(e,n,r,s){return new Dn(e,n,new Ps(r,s))}static node(e,n,r,s){return new Dn(e,n,new c0(r,s))}get spec(){return this.type.spec}get inline(){return this.type instanceof Ps}get widget(){return this.type instanceof Ef}}const Yo=[],ja={};class At{constructor(e,n){this.local=e.length?e:Yo,this.children=n.length?n:Yo}static create(e,n){return n.length?Tf(n,e,0,ja):_n}find(e,n,r){let s=[];return this.findInner(e??0,n??1e9,s,0,r),s}findInner(e,n,r,s,a){for(let l=0;l<this.local.length;l++){let u=this.local[l];u.from<=n&&u.to>=e&&(!a||a(u.spec))&&r.push(u.copy(u.from+s,u.to+s))}for(let l=0;l<this.children.length;l+=3)if(this.children[l]<n&&this.children[l+1]>e){let u=this.children[l]+1;this.children[l+2].findInner(e-u,n-u,r,s+u,a)}}map(e,n,r){return this==_n||e.maps.length==0?this:this.mapInner(e,n,0,0,r||ja)}mapInner(e,n,r,s,a){let l;for(let u=0;u<this.local.length;u++){let d=this.local[u].map(e,r,s);d&&d.type.valid(n,d)?(l||(l=[])).push(d):a.onRemove&&a.onRemove(this.local[u].spec)}return this.children.length?TI(this.children,l||[],e,n,r,s,a):l?new At(l.sort(La),Yo):_n}add(e,n){return n.length?this==_n?At.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let s,a=0;e.forEach((u,d)=>{let f=d+r,p;if(p=L_(n,u,f)){for(s||(s=this.children.slice());a<s.length&&s[a]<d;)a+=3;s[a]==d?s[a+2]=s[a+2].addInner(u,p,f+1):s.splice(a,0,d,d+u.nodeSize,Tf(p,u,f+1,ja)),a+=3}});let l=j_(a?z_(n):n,-r);for(let u=0;u<l.length;u++)l[u].type.valid(e,l[u])||l.splice(u--,1);return new At(l.length?this.local.concat(l).sort(La):this.local,s||this.children)}remove(e){return e.length==0||this==_n?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,s=this.local;for(let a=0;a<r.length;a+=3){let l,u=r[a]+n,d=r[a+1]+n;for(let p=0,m;p<e.length;p++)(m=e[p])&&m.from>u&&m.to<d&&(e[p]=null,(l||(l=[])).push(m));if(!l)continue;r==this.children&&(r=this.children.slice());let f=r[a+2].removeInner(l,u+1);f!=_n?r[a+2]=f:(r.splice(a,3),a-=3)}if(s.length){for(let a=0,l;a<e.length;a++)if(l=e[a])for(let u=0;u<s.length;u++)s[u].eq(l,n)&&(s==this.local&&(s=this.local.slice()),s.splice(u--,1))}return r==this.children&&s==this.local?this:s.length||r.length?new At(s,r):_n}forChild(e,n){if(this==_n)return this;if(n.isLeaf)return At.empty;let r,s;for(let u=0;u<this.children.length;u+=3)if(this.children[u]>=e){this.children[u]==e&&(r=this.children[u+2]);break}let a=e+1,l=a+n.content.size;for(let u=0;u<this.local.length;u++){let d=this.local[u];if(d.from<l&&d.to>a&&d.type instanceof Ps){let f=Math.max(a,d.from)-a,p=Math.min(l,d.to)-a;f<p&&(s||(s=[])).push(d.copy(f,p))}}if(s){let u=new At(s.sort(La),Yo);return r?new Ms([u,r]):u}return r||_n}eq(e){if(this==e)return!0;if(!(e instanceof At)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return u0(this.localsInner(e))}localsInner(e){if(this==_n)return Yo;if(e.inlineContent||!this.local.some(Ps.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Ps||n.push(this.local[r]);return n}forEachSet(e){e(this)}}At.empty=new At([],[]);At.removeOverlap=u0;const _n=At.empty;class Ms{constructor(e){this.members=e}map(e,n){const r=this.members.map(s=>s.map(e,n,ja));return Ms.from(r)}forChild(e,n){if(n.isLeaf)return At.empty;let r=[];for(let s=0;s<this.members.length;s++){let a=this.members[s].forChild(e,n);a!=_n&&(a instanceof Ms?r=r.concat(a.members):r.push(a))}return Ms.from(r)}eq(e){if(!(e instanceof Ms)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let s=0;s<this.members.length;s++){let a=this.members[s].localsInner(e);if(a.length)if(!n)n=a;else{r&&(n=n.slice(),r=!1);for(let l=0;l<a.length;l++)n.push(a[l])}}return n?u0(r?n:n.sort(La)):Yo}static from(e){switch(e.length){case 0:return _n;case 1:return e[0];default:return new Ms(e.every(n=>n instanceof At)?e:e.reduce((n,r)=>n.concat(r instanceof At?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function TI(t,e,n,r,s,a,l){let u=t.slice();for(let f=0,p=a;f<n.maps.length;f++){let m=0;n.maps[f].forEach((v,b,w,x)=>{let S=x-w-(b-v);for(let T=0;T<u.length;T+=3){let O=u[T+1];if(O<0||v>O+p-m)continue;let M=u[T]+p-m;b>=M?u[T+1]=v<=M?-2:-1:v>=p&&S&&(u[T]+=S,u[T+1]+=S)}m+=S}),p=n.maps[f].map(p,-1)}let d=!1;for(let f=0;f<u.length;f+=3)if(u[f+1]<0){if(u[f+1]==-2){d=!0,u[f+1]=-1;continue}let p=n.map(t[f]+a),m=p-s;if(m<0||m>=r.content.size){d=!0;continue}let v=n.map(t[f+1]+a,-1),b=v-s,{index:w,offset:x}=r.content.findIndex(m),S=r.maybeChild(w);if(S&&x==m&&x+S.nodeSize==b){let T=u[f+2].mapInner(n,S,p+1,t[f]+a+1,l);T!=_n?(u[f]=m,u[f+1]=b,u[f+2]=T):(u[f+1]=-2,d=!0)}else d=!0}if(d){let f=kI(u,t,e,n,s,a,l),p=Tf(f,r,0,l);e=p.local;for(let m=0;m<u.length;m+=3)u[m+1]<0&&(u.splice(m,3),m-=3);for(let m=0,v=0;m<p.children.length;m+=3){let b=p.children[m];for(;v<u.length&&u[v]<b;)v+=3;u.splice(v,0,p.children[m],p.children[m+1],p.children[m+2])}}return new At(e.sort(La),u)}function j_(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let s=t[r];n.push(new Dn(s.from+e,s.to+e,s.type))}return n}function kI(t,e,n,r,s,a,l){function u(d,f){for(let p=0;p<d.local.length;p++){let m=d.local[p].map(r,s,f);m?n.push(m):l.onRemove&&l.onRemove(d.local[p].spec)}for(let p=0;p<d.children.length;p+=3)u(d.children[p+2],d.children[p]+f+1)}for(let d=0;d<t.length;d+=3)t[d+1]==-1&&u(t[d+2],e[d]+a+1);return n}function L_(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,s=null;for(let a=0,l;a<t.length;a++)(l=t[a])&&l.from>n&&l.to<r&&((s||(s=[])).push(l),t[a]=null);return s}function z_(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function Tf(t,e,n,r){let s=[],a=!1;e.forEach((u,d)=>{let f=L_(t,u,d+n);if(f){a=!0;let p=Tf(f,u,n+d+1,r);p!=_n&&s.push(d,d+u.nodeSize,p)}});let l=j_(a?z_(t):t,-n).sort(La);for(let u=0;u<l.length;u++)l[u].type.valid(e,l[u])||(r.onRemove&&r.onRemove(l[u].spec),l.splice(u--,1));return l.length||s.length?new At(l,s):_n}function La(t,e){return t.from-e.from||t.to-e.to}function u0(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let s=n+1;s<e.length;s++){let a=e[s];if(a.from==r.from){a.to!=r.to&&(e==t&&(e=t.slice()),e[s]=a.copy(a.from,r.to),$1(e,s+1,a.copy(r.to,a.to)));continue}else{a.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,a.from),$1(e,s,r.copy(a.from,r.to)));break}}}return e}function $1(t,e,n){for(;e<t.length&&La(n,t[e])>0;)e++;t.splice(e,0,n)}function vg(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=_n&&e.push(r)}),t.cursorWrapper&&e.push(At.create(t.state.doc,[t.cursorWrapper.deco])),Ms.from(e)}const _I={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},CI=Wn&&Bs<=11;class AI{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class OI{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new AI,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let s=0;s<r.length;s++)this.queue.push(r[s]);Wn&&Bs<=11&&r.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():An&&e.composing&&r.some(s=>s.type=="childList"&&s.target.nodeName=="TR")?(e.input.badSafariComposition=!0,this.flushSoon()):this.flush()}),CI&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,_I)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(j1(this.view)){if(this.suppressingSelectionUpdates)return Fi(this.view);if(Wn&&Bs<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Ua(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let a=e.focusNode;a;a=al(a))n.add(a);for(let a=e.anchorNode;a;a=al(a))if(n.has(a)){r=a;break}let s=r&&this.view.docView.nearestDesc(r);if(s&&s.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),s=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&j1(e)&&!this.ignoreSelectionChange(r),a=-1,l=-1,u=!1,d=[];if(e.editable)for(let p=0;p<n.length;p++){let m=this.registerMutation(n[p],d);m&&(a=a<0?m.from:Math.min(m.from,a),l=l<0?m.to:Math.max(m.to,l),m.typeOver&&(u=!0))}if(d.some(p=>p.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let p of d)if(p.nodeName=="BR"&&p.parentNode){let m=p.nextSibling;m&&m.nodeType==1&&m.contentEditable=="false"&&p.parentNode.removeChild(p)}}else if(Mr&&d.length){let p=d.filter(m=>m.nodeName=="BR");if(p.length==2){let[m,v]=p;m.parentNode&&m.parentNode.parentNode==v.parentNode?v.remove():m.remove()}else{let{focusNode:m}=this.currentSelection;for(let v of p){let b=v.parentNode;b&&b.nodeName=="LI"&&(!m||NI(e,m)!=b)&&v.remove()}}}let f=null;a<0&&s&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&bh(r)&&(f=r0(e))&&f.eq(Fe.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Fi(e),this.currentSelection.set(r),e.scrollToSelection()):(a>-1||s)&&(a>-1&&(e.docView.markDirty(a,l),RI(e)),e.input.badSafariComposition&&(e.input.badSafariComposition=!1,DI(e,d)),this.handleDOMChange(a,l,u,d),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Fi(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let p=0;p<e.addedNodes.length;p++){let m=e.addedNodes[p];n.push(m),m.nodeType==3&&(this.lastChangedTextNode=m)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let s=e.previousSibling,a=e.nextSibling;if(Wn&&Bs<=11&&e.addedNodes.length)for(let p=0;p<e.addedNodes.length;p++){let{previousSibling:m,nextSibling:v}=e.addedNodes[p];(!m||Array.prototype.indexOf.call(e.addedNodes,m)<0)&&(s=m),(!v||Array.prototype.indexOf.call(e.addedNodes,v)<0)&&(a=v)}let l=s&&s.parentNode==e.target?wn(s)+1:0,u=r.localPosFromDOM(e.target,l,-1),d=a&&a.parentNode==e.target?wn(a):e.target.childNodes.length,f=r.localPosFromDOM(e.target,d,1);return{from:u,to:f}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let q1=new WeakMap,V1=!1;function RI(t){if(!q1.has(t)&&(q1.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Mr,V1)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),V1=!0}}function F1(t,e){let n=e.startContainer,r=e.startOffset,s=e.endContainer,a=e.endOffset,l=t.domAtPos(t.state.selection.anchor);return Ua(l.node,l.offset,s,a)&&([n,r,s,a]=[s,a,n,r]),{anchorNode:n,anchorOffset:r,focusNode:s,focusOffset:a}}function MI(t,e){if(e.getComposedRanges){let s=e.getComposedRanges(t.root)[0];if(s)return F1(t,s)}let n;function r(s){s.preventDefault(),s.stopImmediatePropagation(),n=s.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?F1(t,n):null}function NI(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function DI(t,e){var n;let{focusNode:r,focusOffset:s}=t.domSelectionRange();for(let a of e)if(((n=a.parentNode)===null||n===void 0?void 0:n.nodeName)=="TR"){let l=a.nextSibling;for(;l&&l.nodeName!="TD"&&l.nodeName!="TH";)l=l.nextSibling;if(l){let u=l;for(;;){let d=u.firstChild;if(!d||d.nodeType!=1||d.contentEditable=="false"||/^(BR|IMG)$/.test(d.nodeName))break;u=d}u.insertBefore(a,u.firstChild),r==a&&t.domSelection().collapse(a,s)}else a.parentNode.removeChild(a)}}function jI(t,e,n){let{node:r,fromOffset:s,toOffset:a,from:l,to:u}=t.docView.parseRange(e,n),d=t.domSelectionRange(),f,p=d.anchorNode;if(p&&t.dom.contains(p.nodeType==1?p:p.parentNode)&&(f=[{node:p,offset:d.anchorOffset}],bh(d)||f.push({node:d.focusNode,offset:d.focusOffset})),xn&&t.input.lastKeyCode===8)for(let S=a;S>s;S--){let T=r.childNodes[S-1],O=T.pmViewDesc;if(T.nodeName=="BR"&&!O){a=S;break}if(!O||O.size)break}let m=t.state.doc,v=t.someProp("domParser")||Is.fromSchema(t.state.schema),b=m.resolve(l),w=null,x=v.parse(r,{topNode:b.parent,topMatch:b.parent.contentMatchAt(b.index()),topOpen:!0,from:s,to:a,preserveWhitespace:b.parent.type.whitespace=="pre"?"full":!0,findPositions:f,ruleFromNode:LI,context:b});if(f&&f[0].pos!=null){let S=f[0].pos,T=f[1]&&f[1].pos;T==null&&(T=S),w={anchor:S+l,head:T+l}}return{doc:x,sel:w,from:l,to:u}}function LI(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(An&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||An&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const zI=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function II(t,e,n,r,s){let a=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let k=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,z=r0(t,k);if(z&&!t.state.selection.eq(z)){if(xn&&qi&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",le=>le(t,ka(13,"Enter"))))return;let G=t.state.tr.setSelection(z);k=="pointer"?G.setMeta("pointer",!0):k=="key"&&G.scrollIntoView(),a&&G.setMeta("composition",a),t.dispatch(G)}return}let l=t.state.doc.resolve(e),u=l.sharedDepth(n);e=l.before(u+1),n=t.state.doc.resolve(n).after(u+1);let d=t.state.selection,f=jI(t,e,n),p=t.state.doc,m=p.slice(f.from,f.to),v,b;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(v=t.state.selection.to,b="end"):(v=t.state.selection.from,b="start"),t.input.lastKeyCode=null;let w=PI(m.content,f.doc.content,f.from,v,b);if(w&&t.input.domChangeCount++,(ol&&t.input.lastIOSEnter>Date.now()-225||qi)&&s.some(k=>k.nodeType==1&&!zI.test(k.nodeName))&&(!w||w.endA>=w.endB)&&t.someProp("handleKeyDown",k=>k(t,ka(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!w)if(r&&d instanceof Be&&!d.empty&&d.$head.sameParent(d.$anchor)&&!t.composing&&!(f.sel&&f.sel.anchor!=f.sel.head))w={start:d.from,endA:d.to,endB:d.to};else{if(f.sel){let k=G1(t,t.state.doc,f.sel);if(k&&!k.eq(t.state.selection)){let z=t.state.tr.setSelection(k);a&&z.setMeta("composition",a),t.dispatch(z)}}return}t.state.selection.from<t.state.selection.to&&w.start==w.endB&&t.state.selection instanceof Be&&(w.start>t.state.selection.from&&w.start<=t.state.selection.from+2&&t.state.selection.from>=f.from?w.start=t.state.selection.from:w.endA<t.state.selection.to&&w.endA>=t.state.selection.to-2&&t.state.selection.to<=f.to&&(w.endB+=t.state.selection.to-w.endA,w.endA=t.state.selection.to)),Wn&&Bs<=11&&w.endB==w.start+1&&w.endA==w.start&&w.start>f.from&&f.doc.textBetween(w.start-f.from-1,w.start-f.from+1)==" "&&(w.start--,w.endA--,w.endB--);let x=f.doc.resolveNoCache(w.start-f.from),S=f.doc.resolveNoCache(w.endB-f.from),T=p.resolve(w.start),O=x.sameParent(S)&&x.parent.inlineContent&&T.end()>=w.endA;if((ol&&t.input.lastIOSEnter>Date.now()-225&&(!O||s.some(k=>k.nodeName=="DIV"||k.nodeName=="P"))||!O&&x.pos<f.doc.content.size&&(!x.sameParent(S)||!x.parent.inlineContent)&&x.pos<S.pos&&!/\S/.test(f.doc.textBetween(x.pos,S.pos,"","")))&&t.someProp("handleKeyDown",k=>k(t,ka(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>w.start&&UI(p,w.start,w.endA,x,S)&&t.someProp("handleKeyDown",k=>k(t,ka(8,"Backspace")))){qi&&xn&&t.domObserver.suppressSelectionUpdates();return}xn&&w.endB==w.start&&(t.input.lastChromeDelete=Date.now()),qi&&!O&&x.start()!=S.start()&&S.parentOffset==0&&x.depth==S.depth&&f.sel&&f.sel.anchor==f.sel.head&&f.sel.head==w.endA&&(w.endB-=2,S=f.doc.resolveNoCache(w.endB-f.from),setTimeout(()=>{t.someProp("handleKeyDown",function(k){return k(t,ka(13,"Enter"))})},20));let M=w.start,P=w.endA,C=k=>{let z=k||t.state.tr.replace(M,P,f.doc.slice(w.start-f.from,w.endB-f.from));if(f.sel){let G=G1(t,z.doc,f.sel);G&&!(xn&&t.composing&&G.empty&&(w.start!=w.endB||t.input.lastChromeDelete<Date.now()-100)&&(G.head==M||G.head==z.mapping.map(P)-1)||Wn&&G.empty&&G.head==M)&&z.setSelection(G)}return a&&z.setMeta("composition",a),z.scrollIntoView()},R;if(O)if(x.pos==S.pos){Wn&&Bs<=11&&x.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Fi(t),20));let k=C(t.state.tr.delete(M,P)),z=p.resolve(w.start).marksAcross(p.resolve(w.endA));z&&k.ensureMarks(z),t.dispatch(k)}else if(w.endA==w.endB&&(R=BI(x.parent.content.cut(x.parentOffset,S.parentOffset),T.parent.content.cut(T.parentOffset,w.endA-T.start())))){let k=C(t.state.tr);R.type=="add"?k.addMark(M,P,R.mark):k.removeMark(M,P,R.mark),t.dispatch(k)}else if(x.parent.child(x.index()).isText&&x.index()==S.index()-(S.textOffset?0:1)){let k=x.parent.textBetween(x.parentOffset,S.parentOffset),z=()=>C(t.state.tr.insertText(k,M,P));t.someProp("handleTextInput",G=>G(t,M,P,k,z))||t.dispatch(z())}else t.dispatch(C());else t.dispatch(C())}function G1(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:i0(t,e.resolve(n.anchor),e.resolve(n.head))}function BI(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,s=n,a=r,l,u,d;for(let p=0;p<r.length;p++)s=r[p].removeFromSet(s);for(let p=0;p<n.length;p++)a=n[p].removeFromSet(a);if(s.length==1&&a.length==0)u=s[0],l="add",d=p=>p.mark(u.addToSet(p.marks));else if(s.length==0&&a.length==1)u=a[0],l="remove",d=p=>p.mark(u.removeFromSet(p.marks));else return null;let f=[];for(let p=0;p<e.childCount;p++)f.push(d(e.child(p)));if(ie.from(f).eq(t))return{mark:u,type:l}}function UI(t,e,n,r,s){if(n-e<=s.pos-r.pos||bg(r,!0,!1)<s.pos)return!1;let a=t.resolve(e);if(!r.parent.isTextblock){let u=a.nodeAfter;return u!=null&&n==e+u.nodeSize}if(a.parentOffset<a.parent.content.size||!a.parent.isTextblock)return!1;let l=t.resolve(bg(a,!0,!0));return!l.parent.isTextblock||l.pos>n||bg(l,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(l.parent.content)}function bg(t,e,n){let r=t.depth,s=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,s++,e=!1;if(n){let a=t.node(r).maybeChild(t.indexAfter(r));for(;a&&!a.isLeaf;)a=a.firstChild,s++}return s}function PI(t,e,n,r,s){let a=t.findDiffStart(e,n);if(a==null)return null;let{a:l,b:u}=t.findDiffEnd(e,n+t.size,n+e.size);if(s=="end"){let d=Math.max(0,a-Math.min(l,u));r-=l+d-a}if(l<a&&t.size<e.size){let d=r<=a&&r>=l?a-r:0;a-=d,a&&a<e.size&&K1(e.textBetween(a-1,a+1))&&(a+=d?1:-1),u=a+(u-l),l=a}else if(u<a){let d=r<=a&&r>=u?a-r:0;a-=d,a&&a<t.size&&K1(t.textBetween(a-1,a+1))&&(a+=d?1:-1),l=a+(l-u),u=a}return{start:a,endA:l,endB:u}}function K1(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class I_{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new nI,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(Q1),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=J1(this),Y1(this),this.nodeViews=X1(this),this.docView=A1(this.state.doc,W1(this),vg(this),this.dom,this),this.domObserver=new OI(this,(r,s,a,l)=>II(this,r,s,a,l)),this.domObserver.start(),rI(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&hy(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Q1),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let s=this.state,a=!1,l=!1;e.storedMarks&&this.composing&&(R_(this),l=!0),this.state=e;let u=s.plugins!=e.plugins||this._props.plugins!=n.plugins;if(u||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let b=X1(this);$I(b,this.nodeViews)&&(this.nodeViews=b,a=!0)}(u||n.handleDOMEvents!=this._props.handleDOMEvents)&&hy(this),this.editable=J1(this),Y1(this);let d=vg(this),f=W1(this),p=s.plugins!=e.plugins&&!s.doc.eq(e.doc)?"reset":e.scrollToSelection>s.scrollToSelection?"to selection":"preserve",m=a||!this.docView.matchesNode(e.doc,f,d);(m||!e.selection.eq(s.selection))&&(l=!0);let v=p=="preserve"&&l&&this.dom.style.overflowAnchor==null&&y3(this);if(l){this.domObserver.stop();let b=m&&(Wn||xn)&&!this.composing&&!s.selection.empty&&!e.selection.empty&&HI(s.selection,e.selection);if(m){let w=xn?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=yI(this)),(a||!this.docView.update(e.doc,f,d,this))&&(this.docView.updateOuterDeco(f),this.docView.destroy(),this.docView=A1(e.doc,f,d,this.dom,this)),w&&(!this.trackWrites||!this.dom.contains(this.trackWrites))&&(b=!0)}b||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&H3(this))?Fi(this,b):(v_(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(s),!((r=this.dragging)===null||r===void 0)&&r.node&&!s.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,s),p=="reset"?this.dom.scrollTop=0:p=="to selection"?this.scrollToSelection():v&&v3(v)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof Me){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&x1(this,n.getBoundingClientRect(),e)}else x1(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,s=-1;if(this.state.doc.nodeAt(r.from)==r.node)s=r.from;else{let a=r.from+(this.state.doc.content.size-n.doc.content.size);(a>0&&this.state.doc.nodeAt(a))==r.node&&(s=a)}this.dragging=new N_(e.slice,e.move,s<0?void 0:Me.create(this.state.doc,s))}someProp(e,n){let r=this._props&&this._props[e],s;if(r!=null&&(s=n?n(r):r))return s;for(let l=0;l<this.directPlugins.length;l++){let u=this.directPlugins[l].props[e];if(u!=null&&(s=n?n(u):u))return s}let a=this.state.plugins;if(a)for(let l=0;l<a.length;l++){let u=a[l].props[e];if(u!=null&&(s=n?n(u):u))return s}}hasFocus(){if(Wn){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&b3(this.dom),Fi(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return T3(this,e)}coordsAtPos(e,n=1){return u_(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let s=this.docView.posFromDOM(e,n,r);if(s==null)throw new RangeError("DOM position not inside the editor");return s}endOfTextblock(e,n){return O3(this,n||this.state,e)}pasteHTML(e,n){return Qc(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return Qc(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return s0(this,e)}destroy(){this.docView&&(iI(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],vg(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,o3())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return aI(this,e)}domSelectionRange(){let e=this.domSelection();return e?An&&this.root.nodeType===11&&f3(this.dom.ownerDocument)==this.dom&&MI(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}I_.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function W1(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[Dn.node(0,t.state.doc.content.size,e)]}function Y1(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:Dn.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function J1(t){return!t.someProp("editable",e=>e(t.state)===!1)}function HI(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function X1(t){let e=Object.create(null);function n(r){for(let s in r)Object.prototype.hasOwnProperty.call(e,s)||(e[s]=r[s])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function $I(t,e){let n=0,r=0;for(let s in t){if(t[s]!=e[s])return!0;n++}for(let s in e)r++;return n!=r}function Q1(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Hs={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},kf={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},qI=typeof navigator<"u"&&/Mac/.test(navigator.platform),VI=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Sn=0;Sn<10;Sn++)Hs[48+Sn]=Hs[96+Sn]=String(Sn);for(var Sn=1;Sn<=24;Sn++)Hs[Sn+111]="F"+Sn;for(var Sn=65;Sn<=90;Sn++)Hs[Sn]=String.fromCharCode(Sn+32),kf[Sn]=String.fromCharCode(Sn);for(var wg in Hs)kf.hasOwnProperty(wg)||(kf[wg]=Hs[wg]);function FI(t){var e=qI&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||VI&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?kf:Hs)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const GI=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),KI=typeof navigator<"u"&&/Win/.test(navigator.platform);function WI(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,s,a,l;for(let u=0;u<e.length-1;u++){let d=e[u];if(/^(cmd|meta|m)$/i.test(d))l=!0;else if(/^a(lt)?$/i.test(d))r=!0;else if(/^(c|ctrl|control)$/i.test(d))s=!0;else if(/^s(hift)?$/i.test(d))a=!0;else if(/^mod$/i.test(d))GI?l=!0:s=!0;else throw new Error("Unrecognized modifier name: "+d)}return r&&(n="Alt-"+n),s&&(n="Ctrl-"+n),l&&(n="Meta-"+n),a&&(n="Shift-"+n),n}function YI(t){let e=Object.create(null);for(let n in t)e[WI(n)]=t[n];return e}function Sg(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function JI(t){return new Ot({props:{handleKeyDown:B_(t)}})}function B_(t){let e=YI(t);return function(n,r){let s=FI(r),a,l=e[Sg(s,r)];if(l&&l(n.state,n.dispatch,n))return!0;if(s.length==1&&s!=" "){if(r.shiftKey){let u=e[Sg(s,r,!1)];if(u&&u(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(KI&&r.ctrlKey&&r.altKey)&&(a=Hs[r.keyCode])&&a!=s){let u=e[Sg(a,r)];if(u&&u(n.state,n.dispatch,n))return!0}}return!1}}var XI=Object.defineProperty,d0=(t,e)=>{for(var n in e)XI(t,n,{get:e[n],enumerable:!0})};function xh(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:s}=n,{storedMarks:a}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return a},get selection(){return r},get doc(){return s},get tr(){return r=n.selection,s=n.doc,a=n.storedMarks,n}}}var Eh=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:n}=this,{view:r}=e,{tr:s}=n,a=this.buildProps(s);return Object.fromEntries(Object.entries(t).map(([l,u])=>[l,(...f)=>{const p=u(...f)(a);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(s),p}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:n,editor:r,state:s}=this,{view:a}=r,l=[],u=!!t,d=t||s.tr,f=()=>(!u&&e&&!d.getMeta("preventDispatch")&&!this.hasCustomState&&a.dispatch(d),l.every(m=>m===!0)),p={...Object.fromEntries(Object.entries(n).map(([m,v])=>[m,(...w)=>{const x=this.buildProps(d,e),S=v(...w)(x);return l.push(S),p}])),run:f};return p}createCan(t){const{rawCommands:e,state:n}=this,r=!1,s=t||n.tr,a=this.buildProps(s,r);return{...Object.fromEntries(Object.entries(e).map(([u,d])=>[u,(...f)=>d(...f)({...a,dispatch:void 0})])),chain:()=>this.createChain(s,r)}}buildProps(t,e=!0){const{rawCommands:n,editor:r,state:s}=this,{view:a}=r,l={tr:t,editor:r,view:a,state:xh({state:s,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(n).map(([u,d])=>[u,(...f)=>d(...f)(l)]))}};return l}},U_={};d0(U_,{blur:()=>QI,clearContent:()=>ZI,clearNodes:()=>eB,command:()=>tB,createParagraphNear:()=>nB,cut:()=>rB,deleteCurrentNode:()=>iB,deleteNode:()=>sB,deleteRange:()=>aB,deleteSelection:()=>oB,enter:()=>lB,exitCode:()=>cB,extendMarkRange:()=>uB,first:()=>dB,focus:()=>hB,forEach:()=>pB,insertContent:()=>mB,insertContentAt:()=>vB,joinBackward:()=>SB,joinDown:()=>wB,joinForward:()=>xB,joinItemBackward:()=>EB,joinItemForward:()=>TB,joinTextblockBackward:()=>kB,joinTextblockForward:()=>_B,joinUp:()=>bB,keyboardShortcut:()=>AB,lift:()=>OB,liftEmptyBlock:()=>RB,liftListItem:()=>MB,newlineInCode:()=>NB,resetAttributes:()=>DB,scrollIntoView:()=>jB,selectAll:()=>LB,selectNodeBackward:()=>zB,selectNodeForward:()=>IB,selectParentNode:()=>BB,selectTextblockEnd:()=>UB,selectTextblockStart:()=>PB,setContent:()=>HB,setMark:()=>oU,setMeta:()=>lU,setNode:()=>cU,setNodeSelection:()=>uU,setTextDirection:()=>dU,setTextSelection:()=>fU,sinkListItem:()=>hU,splitBlock:()=>pU,splitListItem:()=>mU,toggleList:()=>gU,toggleMark:()=>yU,toggleNode:()=>vU,toggleWrap:()=>bU,undoInputRule:()=>wU,unsetAllMarks:()=>SU,unsetMark:()=>xU,unsetTextDirection:()=>EU,updateAttributes:()=>TU,wrapIn:()=>kU,wrapInList:()=>_U});var QI=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window?.getSelection())==null||n.removeAllRanges())}),!0),ZI=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),eB=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:s}=r;return n&&s.forEach(({$from:a,$to:l})=>{t.doc.nodesBetween(a.pos,l.pos,(u,d)=>{if(u.type.isText)return;const{doc:f,mapping:p}=e,m=f.resolve(p.map(d)),v=f.resolve(p.map(d+u.nodeSize)),b=m.blockRange(v);if(!b)return;const w=fl(b);if(u.type.isTextblock){const{defaultType:x}=m.parent.contentMatchAt(m.index());e.setNodeMarkup(b.start,x)}(w||w===0)&&e.lift(b,w)})}),!0},tB=t=>e=>t(e),nB=()=>({state:t,dispatch:e})=>Zk(t,e),rB=(t,e)=>({editor:n,tr:r})=>{const{state:s}=n,a=s.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const l=r.mapping.map(e);return r.insert(l,a.content),r.setSelection(new Be(r.doc.resolve(Math.max(l-1,0)))),!0},iB=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const s=t.selection.$anchor;for(let a=s.depth;a>0;a-=1)if(s.node(a).type===r.type){if(e){const u=s.before(a),d=s.after(a);t.delete(u,d).scrollIntoView()}return!0}return!1};function Jt(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}var sB=t=>({tr:e,state:n,dispatch:r})=>{const s=Jt(t,n.schema),a=e.selection.$anchor;for(let l=a.depth;l>0;l-=1)if(a.node(l).type===s){if(r){const d=a.before(l),f=a.after(l);e.delete(d,f).scrollIntoView()}return!0}return!1},aB=t=>({tr:e,dispatch:n})=>{const{from:r,to:s}=t;return n&&e.delete(r,s),!0},oB=()=>({state:t,dispatch:e})=>Xy(t,e),lB=()=>({commands:t})=>t.keyboardShortcut("Enter"),cB=()=>({state:t,dispatch:e})=>Gz(t,e);function f0(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function _f(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(s=>n.strict?e[s]===t[s]:f0(e[s])?e[s].test(t[s]):e[s]===t[s]):!0}function P_(t,e,n={}){return t.find(r=>r.type===e&&_f(Object.fromEntries(Object.keys(n).map(s=>[s,r.attrs[s]])),n))}function Z1(t,e,n={}){return!!P_(t,e,n)}function h0(t,e,n){var r;if(!t||!e)return;let s=t.parent.childAfter(t.parentOffset);if((!s.node||!s.node.marks.some(p=>p.type===e))&&(s=t.parent.childBefore(t.parentOffset)),!s.node||!s.node.marks.some(p=>p.type===e)||(n=n||((r=s.node.marks[0])==null?void 0:r.attrs),!P_([...s.node.marks],e,n)))return;let l=s.index,u=t.start()+s.offset,d=l+1,f=u+s.node.nodeSize;for(;l>0&&Z1([...t.parent.child(l-1).marks],e,n);)l-=1,u-=t.parent.child(l).nodeSize;for(;d<t.parent.childCount&&Z1([...t.parent.child(d).marks],e,n);)f+=t.parent.child(d).nodeSize,d+=1;return{from:u,to:f}}function Wi(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}var uB=(t,e={})=>({tr:n,state:r,dispatch:s})=>{const a=Wi(t,r.schema),{doc:l,selection:u}=n,{$from:d,from:f,to:p}=u;if(s){const m=h0(d,a,e);if(m&&m.from<=f&&m.to>=p){const v=Be.create(l,m.from,m.to);n.setSelection(v)}}return!0},dB=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function H_(t){return t instanceof Be}function Ra(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function $_(t,e=null){if(!e)return null;const n=Fe.atStart(t),r=Fe.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const s=n.from,a=r.to;return e==="all"?Be.create(t,Ra(0,s,a),Ra(t.content.size,s,a)):Be.create(t,Ra(e,s,a),Ra(e,s,a))}function eE(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function Cf(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function fB(){return typeof navigator<"u"?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}var hB=(t=null,e={})=>({editor:n,view:r,tr:s,dispatch:a})=>{e={scrollIntoView:!0,...e};const l=()=>{(Cf()||eE())&&r.dom.focus(),fB()&&!Cf()&&!eE()&&r.dom.focus({preventScroll:!0}),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e?.scrollIntoView&&n.commands.scrollIntoView())})};try{if(r.hasFocus()&&t===null||t===!1)return!0}catch{return!1}if(a&&t===null&&!H_(n.state.selection))return l(),!0;const u=$_(s.doc,t)||n.state.selection,d=n.state.selection.eq(u);return a&&(d||s.setSelection(u),d&&s.storedMarks&&s.setStoredMarks(s.storedMarks),l()),!0},pB=(t,e)=>n=>t.every((r,s)=>e(r,{...n,index:s})),mB=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),q_=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&q_(r)}return t};function $d(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return q_(n)}function eu(t,e,n){if(t instanceof Jr||t instanceof ie)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,s=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return ie.fromArray(t.map(u=>e.nodeFromJSON(u)));const l=e.nodeFromJSON(t);return n.errorOnInvalidContent&&l.check(),l}catch(a){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:a});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",a),eu("",e,n)}if(s){if(n.errorOnInvalidContent){let l=!1,u="";const d=new _k({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:f=>(l=!0,u=typeof f=="string"?f:f.outerHTML,null)}]}})});if(n.slice?Is.fromSchema(d).parseSlice($d(t),n.parseOptions):Is.fromSchema(d).parse($d(t),n.parseOptions),n.errorOnInvalidContent&&l)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${u}`)})}const a=Is.fromSchema(e);return n.slice?a.parseSlice($d(t),n.parseOptions).content:a.parse($d(t),n.parseOptions)}return eu("",e,n)}function gB(t,e,n){const r=t.steps.length-1;if(r<e)return;const s=t.steps[r];if(!(s instanceof an||s instanceof on))return;const a=t.mapping.maps[r];let l=0;a.forEach((u,d,f,p)=>{l===0&&(l=p)}),t.setSelection(Fe.near(t.doc.resolve(l),n))}var yB=t=>!("type"in t),vB=(t,e,n)=>({tr:r,dispatch:s,editor:a})=>{var l;if(s){n={parseOptions:a.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let u;const d=S=>{a.emit("contentError",{editor:a,error:S,disableCollaboration:()=>{"collaboration"in a.storage&&typeof a.storage.collaboration=="object"&&a.storage.collaboration&&(a.storage.collaboration.isDisabled=!0)}})},f={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!a.options.enableContentCheck&&a.options.emitContentError)try{eu(e,a.schema,{parseOptions:f,errorOnInvalidContent:!0})}catch(S){d(S)}try{u=eu(e,a.schema,{parseOptions:f,errorOnInvalidContent:(l=n.errorOnInvalidContent)!=null?l:a.options.enableContentCheck})}catch(S){return d(S),!1}let{from:p,to:m}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},v=!0,b=!0;if((yB(u)?u:[u]).forEach(S=>{S.check(),v=v?S.isText&&S.marks.length===0:!1,b=b?S.isBlock:!1}),p===m&&b){const{parent:S}=r.doc.resolve(p);S.isTextblock&&!S.type.spec.code&&!S.childCount&&(p-=1,m+=1)}let x;if(v){if(Array.isArray(e))x=e.map(S=>S.text||"").join("");else if(e instanceof ie){let S="";e.forEach(T=>{T.text&&(S+=T.text)}),x=S}else typeof e=="object"&&e&&e.text?x=e.text:x=e;r.insertText(x,p,m)}else{x=u;const S=r.doc.resolve(p),T=S.node(),O=S.parentOffset===0,M=T.isText||T.isTextblock,P=T.content.size>0;O&&M&&P&&(p=Math.max(0,p-1)),r.replaceWith(p,m,x)}n.updateSelection&&gB(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:p,text:x}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:p,text:x})}return!0},bB=()=>({state:t,dispatch:e})=>qz(t,e),wB=()=>({state:t,dispatch:e})=>Vz(t,e),SB=()=>({state:t,dispatch:e})=>Gk(t,e),xB=()=>({state:t,dispatch:e})=>Jk(t,e),EB=()=>({state:t,dispatch:e,tr:n})=>{try{const r=gh(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},TB=()=>({state:t,dispatch:e,tr:n})=>{try{const r=gh(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},kB=()=>({state:t,dispatch:e})=>Hz(t,e),_B=()=>({state:t,dispatch:e})=>$z(t,e);function V_(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function CB(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,s,a,l;for(let u=0;u<e.length-1;u+=1){const d=e[u];if(/^(cmd|meta|m)$/i.test(d))l=!0;else if(/^a(lt)?$/i.test(d))r=!0;else if(/^(c|ctrl|control)$/i.test(d))s=!0;else if(/^s(hift)?$/i.test(d))a=!0;else if(/^mod$/i.test(d))Cf()||V_()?l=!0:s=!0;else throw new Error(`Unrecognized modifier name: ${d}`)}return r&&(n=`Alt-${n}`),s&&(n=`Ctrl-${n}`),l&&(n=`Meta-${n}`),a&&(n=`Shift-${n}`),n}var AB=t=>({editor:e,view:n,tr:r,dispatch:s})=>{const a=CB(t).split(/-(?!$)/),l=a.find(f=>!["Alt","Ctrl","Meta","Shift"].includes(f)),u=new KeyboardEvent("keydown",{key:l==="Space"?" ":l,altKey:a.includes("Alt"),ctrlKey:a.includes("Ctrl"),metaKey:a.includes("Meta"),shiftKey:a.includes("Shift"),bubbles:!0,cancelable:!0}),d=e.captureTransaction(()=>{n.someProp("handleKeyDown",f=>f(n,u))});return d?.steps.forEach(f=>{const p=f.map(r.mapping);p&&s&&r.maybeStep(p)}),!0};function $s(t,e,n={}){const{from:r,to:s,empty:a}=t.selection,l=e?Jt(e,t.schema):null,u=[];t.doc.nodesBetween(r,s,(m,v)=>{if(m.isText)return;const b=Math.max(r,v),w=Math.min(s,v+m.nodeSize);u.push({node:m,from:b,to:w})});const d=s-r,f=u.filter(m=>l?l.name===m.node.type.name:!0).filter(m=>_f(m.node.attrs,n,{strict:!1}));return a?!!f.length:f.reduce((m,v)=>m+v.to-v.from,0)>=d}var OB=(t,e={})=>({state:n,dispatch:r})=>{const s=Jt(t,n.schema);return $s(n,s,e)?Fz(n,r):!1},RB=()=>({state:t,dispatch:e})=>e_(t,e),MB=t=>({state:e,dispatch:n})=>{const r=Jt(t,e.schema);return r3(r)(e,n)},NB=()=>({state:t,dispatch:e})=>Qk(t,e);function Th(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function tE(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,s)=>(n.includes(s)||(r[s]=t[s]),r),{})}var DB=(t,e)=>({tr:n,state:r,dispatch:s})=>{let a=null,l=null;const u=Th(typeof t=="string"?t:t.name,r.schema);if(!u)return!1;u==="node"&&(a=Jt(t,r.schema)),u==="mark"&&(l=Wi(t,r.schema));let d=!1;return n.selection.ranges.forEach(f=>{r.doc.nodesBetween(f.$from.pos,f.$to.pos,(p,m)=>{a&&a===p.type&&(d=!0,s&&n.setNodeMarkup(m,void 0,tE(p.attrs,e))),l&&p.marks.length&&p.marks.forEach(v=>{l===v.type&&(d=!0,s&&n.addMark(m,m+p.nodeSize,l.create(tE(v.attrs,e))))})})}),d},jB=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),LB=()=>({tr:t,dispatch:e})=>{if(e){const n=new cr(t.doc);t.setSelection(n)}return!0},zB=()=>({state:t,dispatch:e})=>Wk(t,e),IB=()=>({state:t,dispatch:e})=>Xk(t,e),BB=()=>({state:t,dispatch:e})=>Yz(t,e),UB=()=>({state:t,dispatch:e})=>Qz(t,e),PB=()=>({state:t,dispatch:e})=>Xz(t,e);function py(t,e,n={},r={}){return eu(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}var HB=(t,{errorOnInvalidContent:e,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:s,tr:a,dispatch:l,commands:u})=>{const{doc:d}=a;if(r.preserveWhitespace!=="full"){const f=py(t,s.schema,r,{errorOnInvalidContent:e??s.options.enableContentCheck});return l&&a.replaceWith(0,d.content.size,f).setMeta("preventUpdate",!n),!0}return l&&a.setMeta("preventUpdate",!n),u.insertContentAt({from:0,to:d.content.size},t,{parseOptions:r,errorOnInvalidContent:e??s.options.enableContentCheck})};function F_(t,e){const n=Wi(e,t.schema),{from:r,to:s,empty:a}=t.selection,l=[];a?(t.storedMarks&&l.push(...t.storedMarks),l.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,s,d=>{l.push(...d.marks)});const u=l.find(d=>d.type.name===n.name);return u?{...u.attrs}:{}}function G_(t,e){const n=new $k(t);return e.forEach(r=>{r.steps.forEach(s=>{n.step(s)})}),n}function $B(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function qB(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(s,a)=>{n(s)&&r.push({node:s,pos:a})}),r}function VB(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function kh(t){return e=>VB(e.$from,t)}function Oe(t,e,n){return t.config[e]===void 0&&t.parent?Oe(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?Oe(t.parent,e,n):null}):t.config[e]}function p0(t){return t.map(e=>{const n={name:e.name,options:e.options,storage:e.storage},r=Oe(e,"addExtensions",n);return r?[e,...p0(r())]:e}).flat(10)}function m0(t,e){const n=Ka.fromSchema(e).serializeFragment(t),s=document.implementation.createHTMLDocument().createElement("div");return s.appendChild(n),s.innerHTML}function K_(t){return typeof t=="function"}function dt(t,e=void 0,...n){return K_(t)?e?t.bind(e)(...n):t(...n):t}function FB(t={}){return Object.keys(t).length===0&&t.constructor===Object}function ll(t){const e=t.filter(s=>s.type==="extension"),n=t.filter(s=>s.type==="node"),r=t.filter(s=>s.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function W_(t){const e=[],{nodeExtensions:n,markExtensions:r}=ll(t),s=[...n,...r],a={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(l=>{const u={name:l.name,options:l.options,storage:l.storage,extensions:s},d=Oe(l,"addGlobalAttributes",u);if(!d)return;d().forEach(p=>{p.types.forEach(m=>{Object.entries(p.attributes).forEach(([v,b])=>{e.push({type:m,name:v,attribute:{...a,...b}})})})})}),s.forEach(l=>{const u={name:l.name,options:l.options,storage:l.storage},d=Oe(l,"addAttributes",u);if(!d)return;const f=d();Object.entries(f).forEach(([p,m])=>{const v={...a,...m};typeof v?.default=="function"&&(v.default=v.default()),v?.isRequired&&v?.default===void 0&&delete v.default,e.push({type:l.name,name:p,attribute:v})})}),e}function Xt(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([s,a])=>{if(!r[s]){r[s]=a;return}if(s==="class"){const u=a?String(a).split(" "):[],d=r[s]?r[s].split(" "):[],f=u.filter(p=>!d.includes(p));r[s]=[...d,...f].join(" ")}else if(s==="style"){const u=a?a.split(";").map(p=>p.trim()).filter(Boolean):[],d=r[s]?r[s].split(";").map(p=>p.trim()).filter(Boolean):[],f=new Map;d.forEach(p=>{const[m,v]=p.split(":").map(b=>b.trim());f.set(m,v)}),u.forEach(p=>{const[m,v]=p.split(":").map(b=>b.trim());f.set(m,v)}),r[s]=Array.from(f.entries()).map(([p,m])=>`${p}: ${m}`).join("; ")}else r[s]=a}),r},{})}function tu(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>Xt(n,r),{})}function GB(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function nE(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const s=e.reduce((a,l)=>{const u=l.attribute.parseHTML?l.attribute.parseHTML(n):GB(n.getAttribute(l.name));return u==null?a:{...a,[l.name]:u}},{});return{...r,...s}}}}function rE(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&FB(n)?!1:n!=null))}function iE(t){var e,n;const r={};return!((e=t?.attribute)!=null&&e.isRequired)&&"default"in(t?.attribute||{})&&(r.default=t.attribute.default),((n=t?.attribute)==null?void 0:n.validate)!==void 0&&(r.validate=t.attribute.validate),[t.name,r]}function KB(t,e){var n;const r=W_(t),{nodeExtensions:s,markExtensions:a}=ll(t),l=(n=s.find(f=>Oe(f,"topNode")))==null?void 0:n.name,u=Object.fromEntries(s.map(f=>{const p=r.filter(T=>T.type===f.name),m={name:f.name,options:f.options,storage:f.storage,editor:e},v=t.reduce((T,O)=>{const M=Oe(O,"extendNodeSchema",m);return{...T,...M?M(f):{}}},{}),b=rE({...v,content:dt(Oe(f,"content",m)),marks:dt(Oe(f,"marks",m)),group:dt(Oe(f,"group",m)),inline:dt(Oe(f,"inline",m)),atom:dt(Oe(f,"atom",m)),selectable:dt(Oe(f,"selectable",m)),draggable:dt(Oe(f,"draggable",m)),code:dt(Oe(f,"code",m)),whitespace:dt(Oe(f,"whitespace",m)),linebreakReplacement:dt(Oe(f,"linebreakReplacement",m)),defining:dt(Oe(f,"defining",m)),isolating:dt(Oe(f,"isolating",m)),attrs:Object.fromEntries(p.map(iE))}),w=dt(Oe(f,"parseHTML",m));w&&(b.parseDOM=w.map(T=>nE(T,p)));const x=Oe(f,"renderHTML",m);x&&(b.toDOM=T=>x({node:T,HTMLAttributes:tu(T,p)}));const S=Oe(f,"renderText",m);return S&&(b.toText=S),[f.name,b]})),d=Object.fromEntries(a.map(f=>{const p=r.filter(S=>S.type===f.name),m={name:f.name,options:f.options,storage:f.storage,editor:e},v=t.reduce((S,T)=>{const O=Oe(T,"extendMarkSchema",m);return{...S,...O?O(f):{}}},{}),b=rE({...v,inclusive:dt(Oe(f,"inclusive",m)),excludes:dt(Oe(f,"excludes",m)),group:dt(Oe(f,"group",m)),spanning:dt(Oe(f,"spanning",m)),code:dt(Oe(f,"code",m)),attrs:Object.fromEntries(p.map(iE))}),w=dt(Oe(f,"parseHTML",m));w&&(b.parseDOM=w.map(S=>nE(S,p)));const x=Oe(f,"renderHTML",m);return x&&(b.toDOM=S=>x({mark:S,HTMLAttributes:tu(S,p)})),[f.name,b]}));return new _k({topNode:l,nodes:u,marks:d})}function WB(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}function Af(t){return t.sort((n,r)=>{const s=Oe(n,"priority")||100,a=Oe(r,"priority")||100;return s>a?-1:s<a?1:0})}function Y_(t){const e=Af(p0(t)),n=WB(e.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),e}function J_(t,e,n){const{from:r,to:s}=e,{blockSeparator:a=`

`,textSerializers:l={}}=n||{};let u="";return t.nodesBetween(r,s,(d,f,p,m)=>{var v;d.isBlock&&f>r&&(u+=a);const b=l?.[d.type.name];if(b)return p&&(u+=b({node:d,pos:f,parent:p,index:m,range:e})),!1;d.isText&&(u+=(v=d?.text)==null?void 0:v.slice(Math.max(r,f)-f,s-f))}),u}function YB(t,e){const n={from:0,to:t.content.size};return J_(t,n,e)}function X_(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}function JB(t,e){const n=Jt(e,t.schema),{from:r,to:s}=t.selection,a=[];t.doc.nodesBetween(r,s,u=>{a.push(u)});const l=a.reverse().find(u=>u.type.name===n.name);return l?{...l.attrs}:{}}function Q_(t,e){const n=Th(typeof e=="string"?e:e.name,t.schema);return n==="node"?JB(t,e):n==="mark"?F_(t,e):{}}function XB(t,e=JSON.stringify){const n={};return t.filter(r=>{const s=e(r);return Object.prototype.hasOwnProperty.call(n,s)?!1:n[s]=!0})}function QB(t){const e=XB(t);return e.length===1?e:e.filter((n,r)=>!e.filter((a,l)=>l!==r).some(a=>n.oldRange.from>=a.oldRange.from&&n.oldRange.to<=a.oldRange.to&&n.newRange.from>=a.newRange.from&&n.newRange.to<=a.newRange.to))}function Z_(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((s,a)=>{const l=[];if(s.ranges.length)s.forEach((u,d)=>{l.push({from:u,to:d})});else{const{from:u,to:d}=n[a];if(u===void 0||d===void 0)return;l.push({from:u,to:d})}l.forEach(({from:u,to:d})=>{const f=e.slice(a).map(u,-1),p=e.slice(a).map(d),m=e.invert().map(f,-1),v=e.invert().map(p);r.push({oldRange:{from:m,to:v},newRange:{from:f,to:p}})})}),QB(r)}function g0(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(s=>{const a=n.resolve(t),l=h0(a,s.type);l&&r.push({mark:s,...l})}):n.nodesBetween(t,e,(s,a)=>{!s||s?.nodeSize===void 0||r.push(...s.marks.map(l=>({from:a,to:a+s.nodeSize,mark:l})))}),r}var ZB=(t,e,n,r=20)=>{const s=t.doc.resolve(n);let a=r,l=null;for(;a>0&&l===null;){const u=s.node(a);u?.type.name===e?l=u:a-=1}return[l,a]};function qd(t,e){return e.nodes[t]||e.marks[t]||null}function sf(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const s=t.find(a=>a.type===e&&a.name===r);return s?s.attribute.keepOnSplit:!1}))}var eU=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(s,a,l,u)=>{var d,f;const p=((f=(d=s.type.spec).toText)==null?void 0:f.call(d,{node:s,pos:a,parent:l,index:u}))||s.textContent||"%leaf%";n+=s.isAtom&&!s.isText?p:p.slice(0,Math.max(0,r-a))}),n};function my(t,e,n={}){const{empty:r,ranges:s}=t.selection,a=e?Wi(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(m=>a?a.name===m.type.name:!0).find(m=>_f(m.attrs,n,{strict:!1}));let l=0;const u=[];if(s.forEach(({$from:m,$to:v})=>{const b=m.pos,w=v.pos;t.doc.nodesBetween(b,w,(x,S)=>{if(!x.isText&&!x.marks.length)return;const T=Math.max(b,S),O=Math.min(w,S+x.nodeSize),M=O-T;l+=M,u.push(...x.marks.map(P=>({mark:P,from:T,to:O})))})}),l===0)return!1;const d=u.filter(m=>a?a.name===m.mark.type.name:!0).filter(m=>_f(m.mark.attrs,n,{strict:!1})).reduce((m,v)=>m+v.to-v.from,0),f=u.filter(m=>a?m.mark.type!==a&&m.mark.type.excludes(a):!0).reduce((m,v)=>m+v.to-v.from,0);return(d>0?d+f:d)>=l}function tU(t,e,n={}){if(!e)return $s(t,null,n)||my(t,null,n);const r=Th(e,t.schema);return r==="node"?$s(t,e,n):r==="mark"?my(t,e,n):!1}var nU=(t,e)=>{const{$from:n,$to:r,$anchor:s}=t.selection;if(e){const a=kh(u=>u.type.name===e)(t.selection);if(!a)return!1;const l=t.doc.resolve(a.pos+1);return s.pos+1===l.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)},rU=t=>{const{$from:e,$to:n}=t.selection;return!(e.parentOffset>0||e.pos!==n.pos)};function sE(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function aE(t,e){const{nodeExtensions:n}=ll(e),r=n.find(l=>l.name===t);if(!r)return!1;const s={name:r.name,options:r.options,storage:r.storage},a=dt(Oe(r,"group",s));return typeof a!="string"?!1:a.split(" ").includes("list")}function _h(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!=null?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let s=!0;return t.content.forEach(a=>{s!==!1&&(_h(a,{ignoreWhitespace:n,checkChildren:e})||(s=!1))}),s}return!1}function eC(t){return t instanceof Me}var tC=class nC{constructor(e){this.position=e}static fromJSON(e){return new nC(e.position)}toJSON(){return{position:this.position}}};function iU(t,e){const n=e.mapping.mapResult(t.position);return{position:new tC(n.pos),mapResult:n}}function sU(t){return new tC(t)}function aU(t,e,n){var r;const{selection:s}=e;let a=null;if(H_(s)&&(a=s.$cursor),a){const u=(r=t.storedMarks)!=null?r:a.marks();return a.parent.type.allowsMarkType(n)&&(!!n.isInSet(u)||!u.some(f=>f.type.excludes(n)))}const{ranges:l}=s;return l.some(({$from:u,$to:d})=>{let f=u.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(u.pos,d.pos,(p,m,v)=>{if(f)return!1;if(p.isInline){const b=!v||v.type.allowsMarkType(n),w=!!n.isInSet(p.marks)||!p.marks.some(x=>x.type.excludes(n));f=b&&w}return!f}),f})}var oU=(t,e={})=>({tr:n,state:r,dispatch:s})=>{const{selection:a}=n,{empty:l,ranges:u}=a,d=Wi(t,r.schema);if(s)if(l){const f=F_(r,d);n.addStoredMark(d.create({...f,...e}))}else u.forEach(f=>{const p=f.$from.pos,m=f.$to.pos;r.doc.nodesBetween(p,m,(v,b)=>{const w=Math.max(b,p),x=Math.min(b+v.nodeSize,m);v.marks.find(T=>T.type===d)?v.marks.forEach(T=>{d===T.type&&n.addMark(w,x,d.create({...T.attrs,...e}))}):n.addMark(w,x,d.create(e))})});return aU(r,n,d)},lU=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),cU=(t,e={})=>({state:n,dispatch:r,chain:s})=>{const a=Jt(t,n.schema);let l;return n.selection.$anchor.sameParent(n.selection.$head)&&(l=n.selection.$anchor.parent.attrs),a.isTextblock?s().command(({commands:u})=>b1(a,{...l,...e})(n)?!0:u.clearNodes()).command(({state:u})=>b1(a,{...l,...e})(u,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},uU=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,s=Ra(t,0,r.content.size),a=Me.create(r,s);e.setSelection(a)}return!0},dU=(t,e)=>({tr:n,state:r,dispatch:s})=>{const{selection:a}=r;let l,u;return typeof e=="number"?(l=e,u=e):e&&"from"in e&&"to"in e?(l=e.from,u=e.to):(l=a.from,u=a.to),s&&n.doc.nodesBetween(l,u,(d,f)=>{d.isText||n.setNodeMarkup(f,void 0,{...d.attrs,dir:t})}),!0},fU=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:s,to:a}=typeof t=="number"?{from:t,to:t}:t,l=Be.atStart(r).from,u=Be.atEnd(r).to,d=Ra(s,l,u),f=Ra(a,l,u),p=Be.create(r,d,f);e.setSelection(p)}return!0},hU=t=>({state:e,dispatch:n})=>{const r=Jt(t,e.schema);return a3(r)(e,n)};function oE(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(s=>e?.includes(s.type.name));t.tr.ensureMarks(r)}}var pU=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:s})=>{const{selection:a,doc:l}=e,{$from:u,$to:d}=a,f=s.extensionManager.attributes,p=sf(f,u.node().type.name,u.node().attrs);if(a instanceof Me&&a.node.isBlock)return!u.parentOffset||!Vi(l,u.pos)?!1:(r&&(t&&oE(n,s.extensionManager.splittableMarks),e.split(u.pos).scrollIntoView()),!0);if(!u.parent.isBlock)return!1;const m=d.parentOffset===d.parent.content.size,v=u.depth===0?void 0:$B(u.node(-1).contentMatchAt(u.indexAfter(-1)));let b=m&&v?[{type:v,attrs:p}]:void 0,w=Vi(e.doc,e.mapping.map(u.pos),1,b);if(!b&&!w&&Vi(e.doc,e.mapping.map(u.pos),1,v?[{type:v}]:void 0)&&(w=!0,b=v?[{type:v,attrs:p}]:void 0),r){if(w&&(a instanceof Be&&e.deleteSelection(),e.split(e.mapping.map(u.pos),1,b),v&&!m&&!u.parentOffset&&u.parent.type!==v)){const x=e.mapping.map(u.before()),S=e.doc.resolve(x);u.node(-1).canReplaceWith(S.index(),S.index()+1,v)&&e.setNodeMarkup(e.mapping.map(u.before()),v)}t&&oE(n,s.extensionManager.splittableMarks),e.scrollIntoView()}return w},mU=(t,e={})=>({tr:n,state:r,dispatch:s,editor:a})=>{var l;const u=Jt(t,r.schema),{$from:d,$to:f}=r.selection,p=r.selection.node;if(p&&p.isBlock||d.depth<2||!d.sameParent(f))return!1;const m=d.node(-1);if(m.type!==u)return!1;const v=a.extensionManager.attributes;if(d.parent.content.size===0&&d.node(-1).childCount===d.indexAfter(-1)){if(d.depth===2||d.node(-3).type!==u||d.index(-2)!==d.node(-2).childCount-1)return!1;if(s){let T=ie.empty;const O=d.index(-1)?1:d.index(-2)?2:3;for(let z=d.depth-O;z>=d.depth-3;z-=1)T=ie.from(d.node(z).copy(T));const M=d.indexAfter(-1)<d.node(-2).childCount?1:d.indexAfter(-2)<d.node(-3).childCount?2:3,P={...sf(v,d.node().type.name,d.node().attrs),...e},C=((l=u.contentMatch.defaultType)==null?void 0:l.createAndFill(P))||void 0;T=T.append(ie.from(u.createAndFill(null,C)||void 0));const R=d.before(d.depth-(O-1));n.replace(R,d.after(-M),new me(T,4-O,0));let k=-1;n.doc.nodesBetween(R,n.doc.content.size,(z,G)=>{if(k>-1)return!1;z.isTextblock&&z.content.size===0&&(k=G+1)}),k>-1&&n.setSelection(Be.near(n.doc.resolve(k))),n.scrollIntoView()}return!0}const b=f.pos===d.end()?m.contentMatchAt(0).defaultType:null,w={...sf(v,m.type.name,m.attrs),...e},x={...sf(v,d.node().type.name,d.node().attrs),...e};n.delete(d.pos,f.pos);const S=b?[{type:u,attrs:w},{type:b,attrs:x}]:[{type:u,attrs:w}];if(!Vi(n.doc,d.pos,2))return!1;if(s){const{selection:T,storedMarks:O}=r,{splittableMarks:M}=a.extensionManager,P=O||T.$to.parentOffset&&T.$from.marks();if(n.split(d.pos,2,S).scrollIntoView(),!P||!s)return!0;const C=P.filter(R=>M.includes(R.type.name));n.ensureMarks(C)}return!0},xg=(t,e)=>{const n=kh(l=>l.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const s=t.doc.nodeAt(r);return n.node.type===s?.type&&Vs(t.doc,n.pos)&&t.join(n.pos),!0},Eg=(t,e)=>{const n=kh(l=>l.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const s=t.doc.nodeAt(r);return n.node.type===s?.type&&Vs(t.doc,r)&&t.join(r),!0},gU=(t,e,n,r={})=>({editor:s,tr:a,state:l,dispatch:u,chain:d,commands:f,can:p})=>{const{extensions:m,splittableMarks:v}=s.extensionManager,b=Jt(t,l.schema),w=Jt(e,l.schema),{selection:x,storedMarks:S}=l,{$from:T,$to:O}=x,M=T.blockRange(O),P=S||x.$to.parentOffset&&x.$from.marks();if(!M)return!1;const C=kh(R=>aE(R.type.name,m))(x);if(M.depth>=1&&C&&M.depth-C.depth<=1){if(C.node.type===b)return f.liftListItem(w);if(aE(C.node.type.name,m)&&b.validContent(C.node.content)&&u)return d().command(()=>(a.setNodeMarkup(C.pos,b),!0)).command(()=>xg(a,b)).command(()=>Eg(a,b)).run()}return!n||!P||!u?d().command(()=>p().wrapInList(b,r)?!0:f.clearNodes()).wrapInList(b,r).command(()=>xg(a,b)).command(()=>Eg(a,b)).run():d().command(()=>{const R=p().wrapInList(b,r),k=P.filter(z=>v.includes(z.type.name));return a.ensureMarks(k),R?!0:f.clearNodes()}).wrapInList(b,r).command(()=>xg(a,b)).command(()=>Eg(a,b)).run()},yU=(t,e={},n={})=>({state:r,commands:s})=>{const{extendEmptyMarkRange:a=!1}=n,l=Wi(t,r.schema);return my(r,l,e)?s.unsetMark(l,{extendEmptyMarkRange:a}):s.setMark(l,e)},vU=(t,e,n={})=>({state:r,commands:s})=>{const a=Jt(t,r.schema),l=Jt(e,r.schema),u=$s(r,a,n);let d;return r.selection.$anchor.sameParent(r.selection.$head)&&(d=r.selection.$anchor.parent.attrs),u?s.setNode(l,d):s.setNode(a,{...d,...n})},bU=(t,e={})=>({state:n,commands:r})=>{const s=Jt(t,n.schema);return $s(n,s,e)?r.lift(s):r.wrapIn(s,e)},wU=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const s=n[r];let a;if(s.spec.isInputRules&&(a=s.getState(t))){if(e){const l=t.tr,u=a.transform;for(let d=u.steps.length-1;d>=0;d-=1)l.step(u.steps[d].invert(u.docs[d]));if(a.text){const d=l.doc.resolve(a.from).marks();l.replaceWith(a.from,a.to,t.schema.text(a.text,d))}else l.delete(a.from,a.to)}return!0}}return!1},SU=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:s}=n;return r||e&&s.forEach(a=>{t.removeMark(a.$from.pos,a.$to.pos)}),!0},xU=(t,e={})=>({tr:n,state:r,dispatch:s})=>{var a;const{extendEmptyMarkRange:l=!1}=e,{selection:u}=n,d=Wi(t,r.schema),{$from:f,empty:p,ranges:m}=u;if(!s)return!0;if(p&&l){let{from:v,to:b}=u;const w=(a=f.marks().find(S=>S.type===d))==null?void 0:a.attrs,x=h0(f,d,w);x&&(v=x.from,b=x.to),n.removeMark(v,b,d)}else m.forEach(v=>{n.removeMark(v.$from.pos,v.$to.pos,d)});return n.removeStoredMark(d),!0},EU=t=>({tr:e,state:n,dispatch:r})=>{const{selection:s}=n;let a,l;return typeof t=="number"?(a=t,l=t):t&&"from"in t&&"to"in t?(a=t.from,l=t.to):(a=s.from,l=s.to),r&&e.doc.nodesBetween(a,l,(u,d)=>{if(u.isText)return;const f={...u.attrs};delete f.dir,e.setNodeMarkup(d,void 0,f)}),!0},TU=(t,e={})=>({tr:n,state:r,dispatch:s})=>{let a=null,l=null;const u=Th(typeof t=="string"?t:t.name,r.schema);if(!u)return!1;u==="node"&&(a=Jt(t,r.schema)),u==="mark"&&(l=Wi(t,r.schema));let d=!1;return n.selection.ranges.forEach(f=>{const p=f.$from.pos,m=f.$to.pos;let v,b,w,x;n.selection.empty?r.doc.nodesBetween(p,m,(S,T)=>{a&&a===S.type&&(d=!0,w=Math.max(T,p),x=Math.min(T+S.nodeSize,m),v=T,b=S)}):r.doc.nodesBetween(p,m,(S,T)=>{T<p&&a&&a===S.type&&(d=!0,w=Math.max(T,p),x=Math.min(T+S.nodeSize,m),v=T,b=S),T>=p&&T<=m&&(a&&a===S.type&&(d=!0,s&&n.setNodeMarkup(T,void 0,{...S.attrs,...e})),l&&S.marks.length&&S.marks.forEach(O=>{if(l===O.type&&(d=!0,s)){const M=Math.max(T,p),P=Math.min(T+S.nodeSize,m);n.addMark(M,P,l.create({...O.attrs,...e}))}}))}),b&&(v!==void 0&&s&&n.setNodeMarkup(v,void 0,{...b.attrs,...e}),l&&b.marks.length&&b.marks.forEach(S=>{l===S.type&&s&&n.addMark(w,x,l.create({...S.attrs,...e}))}))}),d},kU=(t,e={})=>({state:n,dispatch:r})=>{const s=Jt(t,n.schema);return Zz(s,e)(n,r)},_U=(t,e={})=>({state:n,dispatch:r})=>{const s=Jt(t,n.schema);return e3(s,e)(n,r)},CU=class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const n=this.callbacks[t];return n&&n.forEach(r=>r.apply(this,e)),this}off(t,e){const n=this.callbacks[t];return n&&(e?this.callbacks[t]=n.filter(r=>r!==e):delete this.callbacks[t]),this}once(t,e){const n=(...r)=>{this.off(t,n),e.apply(this,r)};return this.on(t,n)}removeAllListeners(){this.callbacks={}}},Ch=class{constructor(t){var e;this.find=t.find,this.handler=t.handler,this.undoable=(e=t.undoable)!=null?e:!0}},AU=(t,e)=>{if(f0(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function Vd(t){var e;const{editor:n,from:r,to:s,text:a,rules:l,plugin:u}=t,{view:d}=n;if(d.composing)return!1;const f=d.state.doc.resolve(r);if(f.parent.type.spec.code||(e=f.nodeBefore||f.nodeAfter)!=null&&e.marks.find(v=>v.type.spec.code))return!1;let p=!1;const m=eU(f)+a;return l.forEach(v=>{if(p)return;const b=AU(m,v.find);if(!b)return;const w=d.state.tr,x=xh({state:d.state,transaction:w}),S={from:r-(b[0].length-a.length),to:s},{commands:T,chain:O,can:M}=new Eh({editor:n,state:x});v.handler({state:x,range:S,match:b,commands:T,chain:O,can:M})===null||!w.steps.length||(v.undoable&&w.setMeta(u,{transform:w,from:r,to:s,text:a}),d.dispatch(w),p=!0)}),p}function OU(t){const{editor:e,rules:n}=t,r=new Ot({state:{init(){return null},apply(s,a,l){const u=s.getMeta(r);if(u)return u;const d=s.getMeta("applyInputRules");return d&&setTimeout(()=>{let{text:p}=d;typeof p=="string"?p=p:p=m0(ie.from(p),l.schema);const{from:m}=d,v=m+p.length;Vd({editor:e,from:m,to:v,text:p,rules:n,plugin:r})}),s.selectionSet||s.docChanged?null:a}},props:{handleTextInput(s,a,l,u){return Vd({editor:e,from:a,to:l,text:u,rules:n,plugin:r})},handleDOMEvents:{compositionend:s=>(setTimeout(()=>{const{$cursor:a}=s.state.selection;a&&Vd({editor:e,from:a.pos,to:a.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(s,a){if(a.key!=="Enter")return!1;const{$cursor:l}=s.state.selection;return l?Vd({editor:e,from:l.pos,to:l.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function RU(t){return Object.prototype.toString.call(t).slice(8,-1)}function Fd(t){return RU(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function rC(t,e){const n={...t};return Fd(t)&&Fd(e)&&Object.keys(e).forEach(r=>{Fd(e[r])&&Fd(t[r])?n[r]=rC(t[r],e[r]):n[r]=e[r]}),n}var y0=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...dt(Oe(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...dt(Oe(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const e=this.extend({...this.config,addOptions:()=>rC(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new this.constructor({...this.config,...t});return e.parent=this,this.child=e,e.name="name"in t?t.name:e.parent.name,e}},Wa=class iC extends y0{constructor(){super(...arguments),this.type="mark"}static create(e={}){const n=typeof e=="function"?e():e;return new iC(n)}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,s=e.state.selection.$from;if(s.pos===s.end()){const l=s.marks();if(!!!l.find(f=>f?.type.name===n.name))return!1;const d=l.find(f=>f?.type.name===n.name);return d&&r.removeStoredMark(d),r.insertText(" ",s.pos),e.view.dispatch(r),!0}return!1}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function MU(t){return typeof t=="number"}var NU=class{constructor(t){this.find=t.find,this.handler=t.handler}},DU=(t,e,n)=>{if(f0(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(s=>{const a=[s.text];return a.index=s.index,a.input=t,a.data=s.data,s.replaceWith&&(s.text.includes(s.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),a.push(s.replaceWith)),a}):[]};function jU(t){const{editor:e,state:n,from:r,to:s,rule:a,pasteEvent:l,dropEvent:u}=t,{commands:d,chain:f,can:p}=new Eh({editor:e,state:n}),m=[];return n.doc.nodesBetween(r,s,(b,w)=>{var x,S,T,O,M;if((S=(x=b.type)==null?void 0:x.spec)!=null&&S.code||!(b.isText||b.isTextblock||b.isInline))return;const P=(M=(O=(T=b.content)==null?void 0:T.size)!=null?O:b.nodeSize)!=null?M:0,C=Math.max(r,w),R=Math.min(s,w+P);if(C>=R)return;const k=b.isText?b.text||"":b.textBetween(C-w,R-w,void 0,"");DU(k,a.find,l).forEach(G=>{if(G.index===void 0)return;const le=C+G.index+1,he=le+G[0].length,ye={from:n.tr.mapping.map(le),to:n.tr.mapping.map(he)},Ue=a.handler({state:n,range:ye,match:G,commands:d,chain:f,can:p,pasteEvent:l,dropEvent:u});m.push(Ue)})}),m.every(b=>b!==null)}var Gd=null,LU=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)==null||e.setData("text/html",t),n};function zU(t){const{editor:e,rules:n}=t;let r=null,s=!1,a=!1,l=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,u;try{u=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{u=null}const d=({state:p,from:m,to:v,rule:b,pasteEvt:w})=>{const x=p.tr,S=xh({state:p,transaction:x});if(!(!jU({editor:e,state:S,from:Math.max(m-1,0),to:v.b-1,rule:b,pasteEvent:w,dropEvent:u})||!x.steps.length)){try{u=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{u=null}return l=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,x}};return n.map(p=>new Ot({view(m){const v=w=>{var x;r=(x=m.dom.parentElement)!=null&&x.contains(w.target)?m.dom.parentElement:null,r&&(Gd=e)},b=()=>{Gd&&(Gd=null)};return window.addEventListener("dragstart",v),window.addEventListener("dragend",b),{destroy(){window.removeEventListener("dragstart",v),window.removeEventListener("dragend",b)}}},props:{handleDOMEvents:{drop:(m,v)=>{if(a=r===m.dom.parentElement,u=v,!a){const b=Gd;b?.isEditable&&setTimeout(()=>{const w=b.state.selection;w&&b.commands.deleteRange({from:w.from,to:w.to})},10)}return!1},paste:(m,v)=>{var b;const w=(b=v.clipboardData)==null?void 0:b.getData("text/html");return l=v,s=!!w?.includes("data-pm-slice"),!1}}},appendTransaction:(m,v,b)=>{const w=m[0],x=w.getMeta("uiEvent")==="paste"&&!s,S=w.getMeta("uiEvent")==="drop"&&!a,T=w.getMeta("applyPasteRules"),O=!!T;if(!x&&!S&&!O)return;if(O){let{text:C}=T;typeof C=="string"?C=C:C=m0(ie.from(C),b.schema);const{from:R}=T,k=R+C.length,z=LU(C);return d({rule:p,state:b,from:R,to:{b:k},pasteEvt:z})}const M=v.doc.content.findDiffStart(b.doc.content),P=v.doc.content.findDiffEnd(b.doc.content);if(!(!MU(M)||!P||M===P.b))return d({rule:p,state:b,from:M,to:P,pasteEvt:l})}}))}var Ah=class{constructor(t,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=t,this.extensions=Y_(t),this.schema=KB(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((t,e)=>{const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:qd(e.name,this.schema)},r=Oe(e,"addCommands",n);return r?{...t,...r()}:t},{})}get plugins(){const{editor:t}=this;return Af([...this.extensions].reverse()).flatMap(r=>{const s={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:qd(r.name,this.schema)},a=[],l=Oe(r,"addKeyboardShortcuts",s);let u={};if(r.type==="mark"&&Oe(r,"exitable",s)&&(u.ArrowRight=()=>Wa.handleExit({editor:t,mark:r})),l){const v=Object.fromEntries(Object.entries(l()).map(([b,w])=>[b,()=>w({editor:t})]));u={...u,...v}}const d=JI(u);a.push(d);const f=Oe(r,"addInputRules",s);if(sE(r,t.options.enableInputRules)&&f){const v=f();if(v&&v.length){const b=OU({editor:t,rules:v}),w=Array.isArray(b)?b:[b];a.push(...w)}}const p=Oe(r,"addPasteRules",s);if(sE(r,t.options.enablePasteRules)&&p){const v=p();if(v&&v.length){const b=zU({editor:t,rules:v});a.push(...b)}}const m=Oe(r,"addProseMirrorPlugins",s);if(m){const v=m();a.push(...v)}return a})}get attributes(){return W_(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=ll(this.extensions);return Object.fromEntries(e.filter(n=>!!Oe(n,"addNodeView")).map(n=>{const r=this.attributes.filter(d=>d.type===n.name),s={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:Jt(n.name,this.schema)},a=Oe(n,"addNodeView",s);if(!a)return[];const l=a();if(!l)return[];const u=(d,f,p,m,v)=>{const b=tu(d,r);return l({node:d,view:f,getPos:p,decorations:m,innerDecorations:v,editor:t,extension:n,HTMLAttributes:b})};return[n.name,u]}))}dispatchTransaction(t){const{editor:e}=this;return Af([...this.extensions].reverse()).reduceRight((r,s)=>{const a={name:s.name,options:s.options,storage:this.editor.extensionStorage[s.name],editor:e,type:qd(s.name,this.schema)},l=Oe(s,"dispatchTransaction",a);return l?u=>{l.call(a,{transaction:u,next:r})}:r},t)}get markViews(){const{editor:t}=this,{markExtensions:e}=ll(this.extensions);return Object.fromEntries(e.filter(n=>!!Oe(n,"addMarkView")).map(n=>{const r=this.attributes.filter(u=>u.type===n.name),s={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:Wi(n.name,this.schema)},a=Oe(n,"addMarkView",s);if(!a)return[];const l=(u,d,f)=>{const p=tu(u,r);return a()({mark:u,view:d,inline:f,editor:t,extension:n,HTMLAttributes:p,updateAttributes:m=>{JU(u,t,m)}})};return[n.name,l]}))}setupExtensions(){const t=this.extensions;this.editor.extensionStorage=Object.fromEntries(t.map(e=>[e.name,e.storage])),t.forEach(e=>{var n;const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:qd(e.name,this.schema)};e.type==="mark"&&((n=dt(Oe(e,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(e.name);const s=Oe(e,"onBeforeCreate",r),a=Oe(e,"onCreate",r),l=Oe(e,"onUpdate",r),u=Oe(e,"onSelectionUpdate",r),d=Oe(e,"onTransaction",r),f=Oe(e,"onFocus",r),p=Oe(e,"onBlur",r),m=Oe(e,"onDestroy",r);s&&this.editor.on("beforeCreate",s),a&&this.editor.on("create",a),l&&this.editor.on("update",l),u&&this.editor.on("selectionUpdate",u),d&&this.editor.on("transaction",d),f&&this.editor.on("focus",f),p&&this.editor.on("blur",p),m&&this.editor.on("destroy",m)})}};Ah.resolve=Y_;Ah.sort=Af;Ah.flatten=p0;var IU={};d0(IU,{ClipboardTextSerializer:()=>aC,Commands:()=>oC,Delete:()=>lC,Drop:()=>cC,Editable:()=>uC,FocusEvents:()=>fC,Keymap:()=>hC,Paste:()=>pC,Tabindex:()=>mC,TextDirection:()=>gC,focusEventsPluginKey:()=>dC});var qt=class sC extends y0{constructor(){super(...arguments),this.type="extension"}static create(e={}){const n=typeof e=="function"?e():e;return new sC(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}},aC=qt.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Ot({key:new nn("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:s}=e,{ranges:a}=s,l=Math.min(...a.map(p=>p.$from.pos)),u=Math.max(...a.map(p=>p.$to.pos)),d=X_(n);return J_(r,{from:l,to:u},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:d})}}})]}}),oC=qt.create({name:"commands",addCommands(){return{...U_}}}),lC=qt.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var n,r,s;const a=()=>{var l,u,d,f;if((f=(d=(u=(l=this.editor.options.coreExtensionOptions)==null?void 0:l.delete)==null?void 0:u.filterTransaction)==null?void 0:d.call(u,t))!=null?f:t.getMeta("y-sync$"))return;const p=G_(t.before,[t,...e]);Z_(p).forEach(b=>{p.mapping.mapResult(b.oldRange.from).deletedAfter&&p.mapping.mapResult(b.oldRange.to).deletedBefore&&p.before.nodesBetween(b.oldRange.from,b.oldRange.to,(w,x)=>{const S=x+w.nodeSize-2,T=b.oldRange.from<=x&&S<=b.oldRange.to;this.editor.emit("delete",{type:"node",node:w,from:x,to:S,newFrom:p.mapping.map(x),newTo:p.mapping.map(S),deletedRange:b.oldRange,newRange:b.newRange,partial:!T,editor:this.editor,transaction:t,combinedTransform:p})})});const v=p.mapping;p.steps.forEach((b,w)=>{var x,S;if(b instanceof Yr){const T=v.slice(w).map(b.from,-1),O=v.slice(w).map(b.to),M=v.invert().map(T,-1),P=v.invert().map(O),C=(x=p.doc.nodeAt(T-1))==null?void 0:x.marks.some(k=>k.eq(b.mark)),R=(S=p.doc.nodeAt(O))==null?void 0:S.marks.some(k=>k.eq(b.mark));this.editor.emit("delete",{type:"mark",mark:b.mark,from:b.from,to:b.to,deletedRange:{from:M,to:P},newRange:{from:T,to:O},partial:!!(R||C),editor:this.editor,transaction:t,combinedTransform:p})}})};(s=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||s?setTimeout(a,0):a()}}),cC=qt.create({name:"drop",addProseMirrorPlugins(){return[new Ot({key:new nn("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),uC=qt.create({name:"editable",addProseMirrorPlugins(){return[new Ot({key:new nn("editable"),props:{editable:()=>this.editor.options.editable}})]}}),dC=new nn("focusEvents"),fC=qt.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Ot({key:dC,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),hC=qt.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:l})=>[()=>l.undoInputRule(),()=>l.command(({tr:u})=>{const{selection:d,doc:f}=u,{empty:p,$anchor:m}=d,{pos:v,parent:b}=m,w=m.parent.isTextblock&&v>0?u.doc.resolve(v-1):m,x=w.parent.type.spec.isolating,S=m.pos-m.parentOffset,T=x&&w.parent.childCount===1?S===m.pos:Fe.atStart(f).from===v;return!p||!b.type.isTextblock||b.textContent.length||!T||T&&m.parent.type.name==="paragraph"?!1:l.clearNodes()}),()=>l.deleteSelection(),()=>l.joinBackward(),()=>l.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:l})=>[()=>l.deleteSelection(),()=>l.deleteCurrentNode(),()=>l.joinForward(),()=>l.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:l})=>[()=>l.newlineInCode(),()=>l.createParagraphNear(),()=>l.liftEmptyBlock(),()=>l.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},s={...r},a={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Cf()||V_()?a:s},addProseMirrorPlugins(){return[new Ot({key:new nn("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(x=>x.getMeta("composition")))return;const r=t.some(x=>x.docChanged)&&!e.doc.eq(n.doc),s=t.some(x=>x.getMeta("preventClearDocument"));if(!r||s)return;const{empty:a,from:l,to:u}=e.selection,d=Fe.atStart(e.doc).from,f=Fe.atEnd(e.doc).to;if(a||!(l===d&&u===f)||!_h(n.doc))return;const v=n.tr,b=xh({state:n,transaction:v}),{commands:w}=new Eh({editor:this.editor,state:b});if(w.clearNodes(),!!v.steps.length)return v}})]}}),pC=qt.create({name:"paste",addProseMirrorPlugins(){return[new Ot({key:new nn("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),mC=qt.create({name:"tabindex",addProseMirrorPlugins(){return[new Ot({key:new nn("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),gC=qt.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:t}=ll(this.extensions);return[{types:t.filter(e=>e.name!=="text").map(e=>e.name),attributes:{dir:{default:this.options.direction,parseHTML:e=>{const n=e.getAttribute("dir");return n&&(n==="ltr"||n==="rtl"||n==="auto")?n:this.options.direction},renderHTML:e=>e.dir?{dir:e.dir}:{}}}}]},addProseMirrorPlugins(){return[new Ot({key:new nn("textDirection"),props:{attributes:()=>{const t=this.options.direction;return t?{dir:t}:{}}}})]}}),BU=class xc{constructor(e,n,r=!1,s=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=s}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new xc(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new xc(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new xc(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const s=n.isBlock&&!n.isTextblock,a=n.isAtom&&!n.isText,l=n.isInline,u=this.pos+r+(a?0:1);if(u<0||u>this.resolvedPos.doc.nodeSize-2)return;const d=this.resolvedPos.doc.resolve(u);if(!s&&!l&&d.depth<=this.depth)return;const f=new xc(d,this.editor,s,s||l?n:null);s&&(f.actualDepth=this.depth+1),e.push(f)}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,s=this.parent;for(;s&&!r;){if(s.node.type.name===e)if(Object.keys(n).length>0){const a=s.node.attrs,l=Object.keys(n);for(let u=0;u<l.length;u+=1){const d=l[u];if(a[d]!==n[d])break}}else r=s;s=s.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let s=[];if(!this.children||this.children.length===0)return s;const a=Object.keys(n);return this.children.forEach(l=>{r&&s.length>0||(l.node.type.name===e&&a.every(d=>n[d]===l.node.attrs[d])&&s.push(l),!(r&&s.length>0)&&(s=s.concat(l.querySelectorAll(e,n,r))))}),s}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}},UU=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function PU(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const s=document.createElement("style");return e&&s.setAttribute("nonce",e),s.setAttribute("data-tiptap-style",""),s.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(s),s}var HU=class extends CU{constructor(t={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null,enableExtensionDispatchTransaction:!0},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:iU,createMappablePosition:sU},this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:s,moved:a})=>this.options.onDrop(r,s,a)),this.on("paste",({event:r,slice:s})=>this.options.onPaste(r,s)),this.on("delete",this.options.onDelete);const e=this.createDoc(),n=$_(e,this.options.autofocus);this.editorState=Zo.create({doc:e,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(t){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(t),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const t=this.editorView.dom;t?.editor&&delete t.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(t){console.warn("Failed to remove CSS element:",t)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=PU(UU,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:t=>{this.editorState=t},dispatch:t=>{this.dispatchTransaction(t)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(t,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in t)return Reflect.get(t,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(t,e){const n=K_(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(t){if(this.isDestroyed)return;const e=this.state.plugins;let n=e;if([].concat(t).forEach(s=>{const a=typeof s=="string"?`${s}$`:s.key;n=n.filter(l=>!l.key.startsWith(a))}),e.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var t,e;const r=[...this.options.enableCoreExtensions?[uC,aC.configure({blockSeparator:(e=(t=this.options.coreExtensionOptions)==null?void 0:t.clipboardTextSerializer)==null?void 0:e.blockSeparator}),oC,fC,hC,mC,cC,pC,lC,gC.configure({direction:this.options.textDirection})].filter(s=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[s.name]!==!1:!0):[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s?.type));this.extensionManager=new Ah(r,this)}createCommandManager(){this.commandManager=new Eh({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let t;try{t=py(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),t=py(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return t}createView(t){const{editorProps:e,enableExtensionDispatchTransaction:n}=this.options,r=e.dispatchTransaction||this.dispatchTransaction.bind(this),s=n?this.extensionManager.dispatchTransaction(r):r;this.editorView=new I_(t,{...e,attributes:{role:"textbox",...e?.attributes},dispatchTransaction:s,state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const a=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(a),this.prependClass(),this.injectCSS();const l=this.view.dom;l.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(f=>{var p;return(p=this.capturedTransaction)==null?void 0:p.step(f)});return}const{state:e,transactions:n}=this.state.applyTransaction(t),r=!this.state.selection.eq(e.selection),s=n.includes(t),a=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:t,nextState:e}),!s)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:t});const l=n.findLast(f=>f.getMeta("focus")||f.getMeta("blur")),u=l?.getMeta("focus"),d=l?.getMeta("blur");u&&this.emit("focus",{editor:this,event:u.event,transaction:l}),d&&this.emit("blur",{editor:this,event:d.event,transaction:l}),!(t.getMeta("preventUpdate")||!n.some(f=>f.docChanged)||a.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:t,appendedTransactions:n.slice(1)})}getAttributes(t){return Q_(this.state,t)}isActive(t,e){const n=typeof t=="string"?t:null,r=typeof t=="string"?e:t;return tU(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return m0(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:n={}}=t||{};return YB(this.state.doc,{blockSeparator:e,textSerializers:{...X_(this.schema),...n}})}get isEmpty(){return _h(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var t,e;return(e=(t=this.editorView)==null?void 0:t.isDestroyed)!=null?e:!0}$node(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelector(t,e))||null}$nodes(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(t,e))||null}$pos(t){const e=this.state.doc.resolve(t);return new BU(e,this)}get $doc(){return this.$pos(0)}};function cl(t){return new Ch({find:t.find,handler:({state:e,range:n,match:r})=>{const s=dt(t.getAttributes,void 0,r);if(s===!1||s===null)return null;const{tr:a}=e,l=r[r.length-1],u=r[0];if(l){const d=u.search(/\S/),f=n.from+u.indexOf(l),p=f+l.length;if(g0(n.from,n.to,e.doc).filter(b=>b.mark.type.excluded.find(x=>x===t.type&&x!==b.mark.type)).filter(b=>b.to>f).length)return null;p<n.to&&a.delete(p,n.to),f>n.from&&a.delete(n.from+d,f);const v=n.from+d+l.length;a.addMark(n.from+d,v,t.type.create(s||{})),a.removeStoredMark(t.type)}},undoable:t.undoable})}function $U(t){return new Ch({find:t.find,handler:({state:e,range:n,match:r})=>{const s=dt(t.getAttributes,void 0,r)||{},{tr:a}=e,l=n.from;let u=n.to;const d=t.type.create(s);if(r[1]){const f=r[0].lastIndexOf(r[1]);let p=l+f;p>u?p=u:u=p+r[1].length;const m=r[0][r[0].length-1];a.insertText(m,l+r[0].length-1),a.replaceWith(p,u,d)}else if(r[0]){const f=t.type.isInline?l:l-1;a.insert(f,t.type.create(s)).delete(a.mapping.map(l),a.mapping.map(u))}a.scrollIntoView()},undoable:t.undoable})}function gy(t){return new Ch({find:t.find,handler:({state:e,range:n,match:r})=>{const s=e.doc.resolve(n.from),a=dt(t.getAttributes,void 0,r)||{};if(!s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,a)},undoable:t.undoable})}function ul(t){return new Ch({find:t.find,handler:({state:e,range:n,match:r,chain:s})=>{const a=dt(t.getAttributes,void 0,r)||{},l=e.tr.delete(n.from,n.to),d=l.doc.resolve(n.from).blockRange(),f=d&&Yy(d,t.type,a);if(!f)return null;if(l.wrap(d,f),t.keepMarks&&t.editor){const{selection:m,storedMarks:v}=e,{splittableMarks:b}=t.editor.extensionManager,w=v||m.$to.parentOffset&&m.$from.marks();if(w){const x=w.filter(S=>b.includes(S.type.name));l.ensureMarks(x)}}if(t.keepAttributes){const m=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";s().updateAttributes(m,a).run()}const p=l.doc.resolve(n.from-1).nodeBefore;p&&p.type===t.type&&Vs(l.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,p))&&l.join(n.from-1)},undoable:t.undoable})}function qU(t,e){const{selection:n}=t,{$from:r}=n;if(n instanceof Me){const a=r.index();return r.parent.canReplaceWith(a,a+1,e)}let s=r.depth;for(;s>=0;){const a=r.index(s);if(r.node(s).contentMatchAt(a).matchType(e))return!0;s-=1}return!1}var VU={};d0(VU,{createAtomBlockMarkdownSpec:()=>FU,createBlockMarkdownSpec:()=>GU,createInlineMarkdownSpec:()=>YU,parseAttributes:()=>v0,parseIndentedBlocks:()=>yy,renderNestedMarkdownContent:()=>w0,serializeAttributes:()=>b0});function v0(t){if(!t?.trim())return{};const e={},n=[],r=t.replace(/["']([^"']*)["']/g,f=>(n.push(f),`__QUOTED_${n.length-1}__`)),s=r.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(s){const f=s.map(p=>p.trim().slice(1));e.class=f.join(" ")}const a=r.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);a&&(e.id=a[1]);const l=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(r.matchAll(l)).forEach(([,f,p])=>{var m;const v=parseInt(((m=p.match(/__QUOTED_(\d+)__/))==null?void 0:m[1])||"0",10),b=n[v];b&&(e[f]=b.slice(1,-1))});const d=r.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return d&&d.split(/\s+/).filter(Boolean).forEach(p=>{p.match(/^[a-zA-Z][\w-]*$/)&&(e[p]=!0)}),e}function b0(t){if(!t||Object.keys(t).length===0)return"";const e=[];return t.class&&String(t.class).split(/\s+/).filter(Boolean).forEach(r=>e.push(`.${r}`)),t.id&&e.push(`#${t.id}`),Object.entries(t).forEach(([n,r])=>{n==="class"||n==="id"||(r===!0?e.push(n):r!==!1&&r!=null&&e.push(`${n}="${String(r)}"`))}),e.join(" ")}function FU(t){const{nodeName:e,name:n,parseAttributes:r=v0,serializeAttributes:s=b0,defaultAttributes:a={},requiredAttributes:l=[],allowedAttributes:u}=t,d=n||e,f=p=>{if(!u)return p;const m={};return u.forEach(v=>{v in p&&(m[v]=p[v])}),m};return{parseMarkdown:(p,m)=>{const v={...a,...p.attributes};return m.createNode(e,v,[])},markdownTokenizer:{name:e,level:"block",start(p){var m;const v=new RegExp(`^:::${d}(?:\\s|$)`,"m"),b=(m=p.match(v))==null?void 0:m.index;return b!==void 0?b:-1},tokenize(p,m,v){const b=new RegExp(`^:::${d}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),w=p.match(b);if(!w)return;const x=w[1]||"",S=r(x);if(!l.find(O=>!(O in S)))return{type:e,raw:w[0],attributes:S}}},renderMarkdown:p=>{const m=f(p.attrs||{}),v=s(m),b=v?` {${v}}`:"";return`:::${d}${b} :::`}}}function GU(t){const{nodeName:e,name:n,getContent:r,parseAttributes:s=v0,serializeAttributes:a=b0,defaultAttributes:l={},content:u="block",allowedAttributes:d}=t,f=n||e,p=m=>{if(!d)return m;const v={};return d.forEach(b=>{b in m&&(v[b]=m[b])}),v};return{parseMarkdown:(m,v)=>{let b;if(r){const x=r(m);b=typeof x=="string"?[{type:"text",text:x}]:x}else u==="block"?b=v.parseChildren(m.tokens||[]):b=v.parseInline(m.tokens||[]);const w={...l,...m.attributes};return v.createNode(e,w,b)},markdownTokenizer:{name:e,level:"block",start(m){var v;const b=new RegExp(`^:::${f}`,"m"),w=(v=m.match(b))==null?void 0:v.index;return w!==void 0?w:-1},tokenize(m,v,b){var w;const x=new RegExp(`^:::${f}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),S=m.match(x);if(!S)return;const[T,O=""]=S,M=s(O);let P=1;const C=T.length;let R="";const k=/^:::([\w-]*)(\s.*)?/gm,z=m.slice(C);for(k.lastIndex=0;;){const G=k.exec(z);if(G===null)break;const le=G.index,he=G[1];if(!((w=G[2])!=null&&w.endsWith(":::"))){if(he)P+=1;else if(P-=1,P===0){const ye=z.slice(0,le);R=ye.trim();const Ue=m.slice(0,C+le+G[0].length);let ue=[];if(R)if(u==="block")for(ue=b.blockTokens(ye),ue.forEach(re=>{re.text&&(!re.tokens||re.tokens.length===0)&&(re.tokens=b.inlineTokens(re.text))});ue.length>0;){const re=ue[ue.length-1];if(re.type==="paragraph"&&(!re.text||re.text.trim()===""))ue.pop();else break}else ue=b.inlineTokens(R);return{type:e,raw:Ue,attributes:M,content:R,tokens:ue}}}}}},renderMarkdown:(m,v)=>{const b=p(m.attrs||{}),w=a(b),x=w?` {${w}}`:"",S=v.renderChildren(m.content||[],`

`);return`:::${f}${x}

${S}

:::`}}}function KU(t){if(!t.trim())return{};const e={},n=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let r=n.exec(t);for(;r!==null;){const[,s,a,l]=r;e[s]=a||l,r=n.exec(t)}return e}function WU(t){return Object.entries(t).filter(([,e])=>e!=null).map(([e,n])=>`${e}="${n}"`).join(" ")}function YU(t){const{nodeName:e,name:n,getContent:r,parseAttributes:s=KU,serializeAttributes:a=WU,defaultAttributes:l={},selfClosing:u=!1,allowedAttributes:d}=t,f=n||e,p=v=>{if(!d)return v;const b={};return d.forEach(w=>{const x=typeof w=="string"?w:w.name,S=typeof w=="string"?void 0:w.skipIfDefault;if(x in v){const T=v[x];if(S!==void 0&&T===S)return;b[x]=T}}),b},m=f.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(v,b)=>{const w={...l,...v.attributes};if(u)return b.createNode(e,w);const x=r?r(v):v.content||"";return x?b.createNode(e,w,[b.createTextNode(x)]):b.createNode(e,w,[])},markdownTokenizer:{name:e,level:"inline",start(v){const b=u?new RegExp(`\\[${m}\\s*[^\\]]*\\]`):new RegExp(`\\[${m}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${m}\\]`),w=v.match(b),x=w?.index;return x!==void 0?x:-1},tokenize(v,b,w){const x=u?new RegExp(`^\\[${m}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${m}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${m}\\]`),S=v.match(x);if(!S)return;let T="",O="";if(u){const[,P]=S;O=P}else{const[,P,C]=S;O=P,T=C||""}const M=s(O.trim());return{type:e,raw:S[0],content:T.trim(),attributes:M}}},renderMarkdown:v=>{let b="";r?b=r(v):v.content&&v.content.length>0&&(b=v.content.filter(T=>T.type==="text").map(T=>T.text).join(""));const w=p(v.attrs||{}),x=a(w),S=x?` ${x}`:"";return u?`[${f}${S}]`:`[${f}${S}]${b}[/${f}]`}}}function yy(t,e,n){var r,s,a,l;const u=t.split(`
`),d=[];let f="",p=0;const m=e.baseIndentSize||2;for(;p<u.length;){const v=u[p],b=v.match(e.itemPattern);if(!b){if(d.length>0)break;if(v.trim()===""){p+=1,f=`${f}${v}
`;continue}else return}const w=e.extractItemData(b),{indentLevel:x,mainContent:S}=w;f=`${f}${v}
`;const T=[S];for(p+=1;p<u.length;){const C=u[p];if(C.trim()===""){const k=u.slice(p+1).findIndex(le=>le.trim()!=="");if(k===-1)break;if((((s=(r=u[p+1+k].match(/^(\s*)/))==null?void 0:r[1])==null?void 0:s.length)||0)>x){T.push(C),f=`${f}${C}
`,p+=1;continue}else break}if((((l=(a=C.match(/^(\s*)/))==null?void 0:a[1])==null?void 0:l.length)||0)>x)T.push(C),f=`${f}${C}
`,p+=1;else break}let O;const M=T.slice(1);if(M.length>0){const C=M.map(R=>R.slice(x+m)).join(`
`);C.trim()&&(e.customNestedParser?O=e.customNestedParser(C):O=n.blockTokens(C))}const P=e.createToken(w,O);d.push(P)}if(d.length!==0)return{items:d,raw:f}}function w0(t,e,n,r){if(!t||!Array.isArray(t.content))return"";const s=typeof n=="function"?n(r):n,[a,...l]=t.content,u=e.renderChildren([a]),d=[`${s}${u}`];return l&&l.length>0&&l.forEach(f=>{const p=e.renderChildren([f]);if(p){const m=p.split(`
`).map(v=>v?e.indent(v):"").join(`
`);d.push(m)}}),d.join(`
`)}function JU(t,e,n={}){const{state:r}=e,{doc:s,tr:a}=r,l=t;s.descendants((u,d)=>{const f=a.mapping.map(d),p=a.mapping.map(d)+u.nodeSize;let m=null;if(u.marks.forEach(b=>{if(b!==l)return!1;m=b}),!m)return;let v=!1;if(Object.keys(n).forEach(b=>{n[b]!==m.attrs[b]&&(v=!0)}),v){const b=t.type.create({...t.attrs,...n});a.removeMark(f,p,t.type),a.addMark(f,p,b)}}),a.docChanged&&e.view.dispatch(a)}var dr=class yC extends y0{constructor(){super(...arguments),this.type="node"}static create(e={}){const n=typeof e=="function"?e():e;return new yC(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function Ha(t){return new NU({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:s})=>{const a=dt(t.getAttributes,void 0,r,s);if(a===!1||a===null)return null;const{tr:l}=e,u=r[r.length-1],d=r[0];let f=n.to;if(u){const p=d.search(/\S/),m=n.from+d.indexOf(u),v=m+u.length;if(g0(n.from,n.to,e.doc).filter(w=>w.mark.type.excluded.find(S=>S===t.type&&S!==w.mark.type)).filter(w=>w.to>m).length)return null;v<n.to&&l.delete(v,n.to),m>n.from&&l.delete(n.from+p,m),f=n.from+p+u.length,l.addMark(n.from+p,f,t.type.create(a||{})),l.removeStoredMark(t.type)}}})}const{getOwnPropertyNames:XU,getOwnPropertySymbols:QU}=Object,{hasOwnProperty:ZU}=Object.prototype;function Tg(t,e){return function(r,s,a){return t(r,s,a)&&e(r,s,a)}}function Kd(t){return function(n,r,s){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,s);const{cache:a}=s,l=a.get(n),u=a.get(r);if(l&&u)return l===r&&u===n;a.set(n,r),a.set(r,n);const d=t(n,r,s);return a.delete(n),a.delete(r),d}}function eP(t){return t?.[Symbol.toStringTag]}function lE(t){return XU(t).concat(QU(t))}const tP=Object.hasOwn||((t,e)=>ZU.call(t,e));function Ya(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const nP="__v",rP="__o",iP="_owner",{getOwnPropertyDescriptor:cE,keys:uE}=Object;function sP(t,e){return t.byteLength===e.byteLength&&Of(new Uint8Array(t),new Uint8Array(e))}function aP(t,e,n){let r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function oP(t,e){return t.byteLength===e.byteLength&&Of(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function lP(t,e){return Ya(t.getTime(),e.getTime())}function cP(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function uP(t,e){return t===e}function dE(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const s=new Array(r),a=t.entries();let l,u,d=0;for(;(l=a.next())&&!l.done;){const f=e.entries();let p=!1,m=0;for(;(u=f.next())&&!u.done;){if(s[m]){m++;continue}const v=l.value,b=u.value;if(n.equals(v[0],b[0],d,m,t,e,n)&&n.equals(v[1],b[1],v[0],b[0],t,e,n)){p=s[m]=!0;break}m++}if(!p)return!1;d++}return!0}const dP=Ya;function fP(t,e,n){const r=uE(t);let s=r.length;if(uE(e).length!==s)return!1;for(;s-- >0;)if(!vC(t,e,n,r[s]))return!1;return!0}function pc(t,e,n){const r=lE(t);let s=r.length;if(lE(e).length!==s)return!1;let a,l,u;for(;s-- >0;)if(a=r[s],!vC(t,e,n,a)||(l=cE(t,a),u=cE(e,a),(l||u)&&(!l||!u||l.configurable!==u.configurable||l.enumerable!==u.enumerable||l.writable!==u.writable)))return!1;return!0}function hP(t,e){return Ya(t.valueOf(),e.valueOf())}function pP(t,e){return t.source===e.source&&t.flags===e.flags}function fE(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const s=new Array(r),a=t.values();let l,u;for(;(l=a.next())&&!l.done;){const d=e.values();let f=!1,p=0;for(;(u=d.next())&&!u.done;){if(!s[p]&&n.equals(l.value,u.value,l.value,u.value,t,e,n)){f=s[p]=!0;break}p++}if(!f)return!1}return!0}function Of(t,e){let n=t.byteLength;if(e.byteLength!==n||t.byteOffset!==e.byteOffset)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function mP(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function vC(t,e,n,r){return(r===iP||r===rP||r===nP)&&(t.$$typeof||e.$$typeof)?!0:tP(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}const gP="[object ArrayBuffer]",yP="[object Arguments]",vP="[object Boolean]",bP="[object DataView]",wP="[object Date]",SP="[object Error]",xP="[object Map]",EP="[object Number]",TP="[object Object]",kP="[object RegExp]",_P="[object Set]",CP="[object String]",AP={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},OP="[object URL]",RP=Object.prototype.toString;function MP({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:n,areDatesEqual:r,areErrorsEqual:s,areFunctionsEqual:a,areMapsEqual:l,areNumbersEqual:u,areObjectsEqual:d,arePrimitiveWrappersEqual:f,areRegExpsEqual:p,areSetsEqual:m,areTypedArraysEqual:v,areUrlsEqual:b,unknownTagComparators:w}){return function(S,T,O){if(S===T)return!0;if(S==null||T==null)return!1;const M=typeof S;if(M!==typeof T)return!1;if(M!=="object")return M==="number"?u(S,T,O):M==="function"?a(S,T,O):!1;const P=S.constructor;if(P!==T.constructor)return!1;if(P===Object)return d(S,T,O);if(Array.isArray(S))return e(S,T,O);if(P===Date)return r(S,T,O);if(P===RegExp)return p(S,T,O);if(P===Map)return l(S,T,O);if(P===Set)return m(S,T,O);const C=RP.call(S);if(C===wP)return r(S,T,O);if(C===kP)return p(S,T,O);if(C===xP)return l(S,T,O);if(C===_P)return m(S,T,O);if(C===TP)return typeof S.then!="function"&&typeof T.then!="function"&&d(S,T,O);if(C===OP)return b(S,T,O);if(C===SP)return s(S,T,O);if(C===yP)return d(S,T,O);if(AP[C])return v(S,T,O);if(C===gP)return t(S,T,O);if(C===bP)return n(S,T,O);if(C===vP||C===EP||C===CP)return f(S,T,O);if(w){let R=w[C];if(!R){const k=eP(S);k&&(R=w[k])}if(R)return R(S,T,O)}return!1}}function NP({circular:t,createCustomConfig:e,strict:n}){let r={areArrayBuffersEqual:sP,areArraysEqual:n?pc:aP,areDataViewsEqual:oP,areDatesEqual:lP,areErrorsEqual:cP,areFunctionsEqual:uP,areMapsEqual:n?Tg(dE,pc):dE,areNumbersEqual:dP,areObjectsEqual:n?pc:fP,arePrimitiveWrappersEqual:hP,areRegExpsEqual:pP,areSetsEqual:n?Tg(fE,pc):fE,areTypedArraysEqual:n?Tg(Of,pc):Of,areUrlsEqual:mP,unknownTagComparators:void 0};if(e&&(r=Object.assign({},r,e(r))),t){const s=Kd(r.areArraysEqual),a=Kd(r.areMapsEqual),l=Kd(r.areObjectsEqual),u=Kd(r.areSetsEqual);r=Object.assign({},r,{areArraysEqual:s,areMapsEqual:a,areObjectsEqual:l,areSetsEqual:u})}return r}function DP(t){return function(e,n,r,s,a,l,u){return t(e,n,u)}}function jP({circular:t,comparator:e,createState:n,equals:r,strict:s}){if(n)return function(u,d){const{cache:f=t?new WeakMap:void 0,meta:p}=n();return e(u,d,{cache:f,equals:r,meta:p,strict:s})};if(t)return function(u,d){return e(u,d,{cache:new WeakMap,equals:r,meta:void 0,strict:s})};const a={cache:void 0,equals:r,meta:void 0,strict:s};return function(u,d){return e(u,d,a)}}const LP=Gs();Gs({strict:!0});Gs({circular:!0});Gs({circular:!0,strict:!0});Gs({createInternalComparator:()=>Ya});Gs({strict:!0,createInternalComparator:()=>Ya});Gs({circular:!0,createInternalComparator:()=>Ya});Gs({circular:!0,createInternalComparator:()=>Ya,strict:!0});function Gs(t={}){const{circular:e=!1,createInternalComparator:n,createState:r,strict:s=!1}=t,a=NP(t),l=MP(a),u=n?n(l):DP(l);return jP({circular:e,comparator:l,createState:r,equals:u,strict:s})}var kg={exports:{}},_g={};var hE;function zP(){if(hE)return _g;hE=1;var t=$a(),e=ck();function n(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var r=typeof Object.is=="function"?Object.is:n,s=e.useSyncExternalStore,a=t.useRef,l=t.useEffect,u=t.useMemo,d=t.useDebugValue;return _g.useSyncExternalStoreWithSelector=function(f,p,m,v,b){var w=a(null);if(w.current===null){var x={hasValue:!1,value:null};w.current=x}else x=w.current;w=u(function(){function T(R){if(!O){if(O=!0,M=R,R=v(R),b!==void 0&&x.hasValue){var k=x.value;if(b(k,R))return P=k}return P=R}if(k=P,r(M,R))return k;var z=v(R);return b!==void 0&&b(k,z)?(M=R,k):(M=R,P=z)}var O=!1,M,P,C=m===void 0?null:m;return[function(){return T(p())},C===null?void 0:function(){return T(C())}]},[p,m,v,b]);var S=s(f,w[0],w[1]);return l(function(){x.hasValue=!0,x.value=S},[S]),d(S),S},_g}var pE;function IP(){return pE||(pE=1,kg.exports=zP()),kg.exports}var BP=IP(),UP=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},PP=({contentComponent:t})=>{const e=uk.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return A.jsx(A.Fragment,{children:Object.values(e)})};function HP(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:yT.createPortal(r.reactElement,r.element,n)},t.forEach(s=>s())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(s=>s())}}}var $P=class extends ae.Component{constructor(t){var e;super(t),this.editorContentRef=ae.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=t.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){var t;const e=this.props.editor;if(e&&!e.isDestroyed&&((t=e.view.dom)!=null&&t.parentNode)){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:n}),e.contentComponent=HP(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var t;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((t=e.view.dom)!=null&&t.parentNode))return;const n=document.createElement("div");n.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:n})}catch{}}}render(){const{editor:t,innerRef:e,...n}=this.props;return A.jsxs(A.Fragment,{children:[A.jsx("div",{ref:UP(e,this.editorContentRef),...n}),t?.contentComponent&&A.jsx(PP,{contentComponent:t.contentComponent})]})}},qP=L.forwardRef((t,e)=>{const n=ae.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return ae.createElement($P,{key:n,innerRef:e,...t})}),bC=ae.memo(qP),VP=typeof window<"u"?L.useLayoutEffect:L.useEffect,FP=class{constructor(t){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=t,this.lastSnapshot={editor:t,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}watch(t){if(this.editor=t,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},n=this.editor;return n.on("transaction",e),()=>{n.off("transaction",e)}}}};function GP(t){var e;const[n]=L.useState(()=>new FP(t.editor)),r=BP.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!=null?e:LP);return VP(()=>n.watch(t.editor),[t.editor,n]),L.useDebugValue(r),r}var KP=!1,vy=typeof window>"u",WP=vy||!!(typeof window<"u"&&window.next),YP=class wC{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?vy||WP?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var s,a;return(a=(s=this.options.current).onBeforeCreate)==null?void 0:a.call(s,...r)},onBlur:(...r)=>{var s,a;return(a=(s=this.options.current).onBlur)==null?void 0:a.call(s,...r)},onCreate:(...r)=>{var s,a;return(a=(s=this.options.current).onCreate)==null?void 0:a.call(s,...r)},onDestroy:(...r)=>{var s,a;return(a=(s=this.options.current).onDestroy)==null?void 0:a.call(s,...r)},onFocus:(...r)=>{var s,a;return(a=(s=this.options.current).onFocus)==null?void 0:a.call(s,...r)},onSelectionUpdate:(...r)=>{var s,a;return(a=(s=this.options.current).onSelectionUpdate)==null?void 0:a.call(s,...r)},onTransaction:(...r)=>{var s,a;return(a=(s=this.options.current).onTransaction)==null?void 0:a.call(s,...r)},onUpdate:(...r)=>{var s,a;return(a=(s=this.options.current).onUpdate)==null?void 0:a.call(s,...r)},onContentError:(...r)=>{var s,a;return(a=(s=this.options.current).onContentError)==null?void 0:a.call(s,...r)},onDrop:(...r)=>{var s,a;return(a=(s=this.options.current).onDrop)==null?void 0:a.call(s,...r)},onPaste:(...r)=>{var s,a;return(a=(s=this.options.current).onPaste)==null?void 0:a.call(s,...r)},onDelete:(...r)=>{var s,a;return(a=(s=this.options.current).onDelete)==null?void 0:a.call(s,...r)}};return new HU(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,n){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&n.extensions?e.extensions.length!==n.extensions.length?!1:e.extensions.every((s,a)=>{var l;return s===((l=n.extensions)==null?void 0:l[a])}):e[r]===n[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?wC.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,s)=>r===e[s]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function JP(t={},e=[]){const n=L.useRef(t);n.current=t;const[r]=L.useState(()=>new YP(n)),s=uk.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return L.useDebugValue(s),L.useEffect(r.onRender(e)),GP({editor:s,selector:({transactionNumber:a})=>t.shouldRerenderOnTransaction===!1||t.shouldRerenderOnTransaction===void 0?null:t.immediatelyRender&&a===0?0:a+1}),s}var SC=L.createContext({editor:null});SC.Consumer;var XP=L.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),QP=()=>L.useContext(XP);ae.forwardRef((t,e)=>{const{onDragStart:n}=QP(),r=t.as||"div";return A.jsx(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});ae.createContext({markViewContentRef:()=>{}});var S0=L.createContext({get editor(){throw new Error("useTiptap must be used within a <Tiptap> provider")}});S0.displayName="TiptapContext";var ZP=()=>L.useContext(S0);function xC({editor:t,instance:e,children:n}){const r=t??e;if(!r)throw new Error("Tiptap: An editor instance is required. Pass a non-null `editor` prop.");const s=L.useMemo(()=>({editor:r}),[r]),a=L.useMemo(()=>({editor:r}),[r]);return A.jsx(SC.Provider,{value:a,children:A.jsx(S0.Provider,{value:s,children:n})})}xC.displayName="Tiptap";function EC({...t}){const{editor:e}=ZP();return A.jsx(bC,{editor:e,...t})}EC.displayName="Tiptap.Content";Object.assign(xC,{Content:EC});var Rf=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:n,...r}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,r,n]},e4=/^\s*>\s$/,t4=dr.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return Rf("blockquote",{...Xt(this.options.HTMLAttributes,t),children:Rf("slot",{})})},parseMarkdown:(t,e)=>e.createNode("blockquote",void 0,e.parseChildren(t.tokens||[])),renderMarkdown:(t,e)=>{if(!t.content)return"";const n=">",r=[];return t.content.forEach(s=>{const u=e.renderChildren([s]).split(`
`).map(d=>d.trim()===""?n:`${n} ${d}`);r.push(u.join(`
`))}),r.join(`
${n}
`)},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[ul({find:e4,type:this.type})]}}),n4=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,r4=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,i4=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,s4=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,a4=Wa.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return Rf("strong",{...Xt(this.options.HTMLAttributes,t),children:Rf("slot",{})})},markdownTokenName:"strong",parseMarkdown:(t,e)=>e.applyMark("bold",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`**${e.renderChildren(t)}**`,addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[cl({find:n4,type:this.type}),cl({find:i4,type:this.type})]},addPasteRules(){return[Ha({find:r4,type:this.type}),Ha({find:s4,type:this.type})]}}),o4=/(^|[^`])`([^`]+)`(?!`)$/,l4=/(^|[^`])`([^`]+)`(?!`)/g,c4=Wa.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Xt(this.options.HTMLAttributes,t),0]},markdownTokenName:"codespan",parseMarkdown:(t,e)=>e.applyMark("code",[{type:"text",text:t.text||""}]),renderMarkdown:(t,e)=>t.content?`\`${e.renderChildren(t.content)}\``:"",addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[cl({find:o4,type:this.type})]},addPasteRules(){return[Ha({find:l4,type:this.type})]}}),Cg=4,u4=/^```([a-z]+)?[\s\n]$/,d4=/^~~~([a-z]+)?[\s\n]$/,f4=dr.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:Cg,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options;if(!n)return null;const a=[...((e=t.firstElementChild)==null?void 0:e.classList)||[]].filter(l=>l.startsWith(n)).map(l=>l.replace(n,""))[0];return a||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",Xt(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(t,e)=>{var n;return((n=t.raw)==null?void 0:n.startsWith("```"))===!1&&t.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:t.lang||null},t.text?[e.createTextNode(t.text)]:[])},renderMarkdown:(t,e)=>{var n;let r="";const s=((n=t.attrs)==null?void 0:n.language)||"";return t.content?r=[`\`\`\`${s}`,e.renderChildren(t.content),"```"].join(`
`):r=`\`\`\`${s}

\`\`\``,r},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:Cg,{state:r}=t,{selection:s}=r,{$from:a,empty:l}=s;if(a.parent.type!==this.type)return!1;const u=" ".repeat(n);return l?t.commands.insertContent(u):t.commands.command(({tr:d})=>{const{from:f,to:p}=s,b=r.doc.textBetween(f,p,`
`,`
`).split(`
`).map(w=>u+w).join(`
`);return d.replaceWith(f,p,r.schema.text(b)),!0})},"Shift-Tab":({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:Cg,{state:r}=t,{selection:s}=r,{$from:a,empty:l}=s;return a.parent.type!==this.type?!1:l?t.commands.command(({tr:u})=>{var d;const{pos:f}=a,p=a.start(),m=a.end(),b=r.doc.textBetween(p,m,`
`,`
`).split(`
`);let w=0,x=0;const S=f-p;for(let R=0;R<b.length;R+=1){if(x+b[R].length>=S){w=R;break}x+=b[R].length+1}const O=((d=b[w].match(/^ */))==null?void 0:d[0])||"",M=Math.min(O.length,n);if(M===0)return!0;let P=p;for(let R=0;R<w;R+=1)P+=b[R].length+1;return u.delete(P,P+M),f-P<=M&&u.setSelection(Be.create(u.doc,P)),!0}):t.commands.command(({tr:u})=>{const{from:d,to:f}=s,v=r.doc.textBetween(d,f,`
`,`
`).split(`
`).map(b=>{var w;const x=((w=b.match(/^ */))==null?void 0:w[0])||"",S=Math.min(x.length,n);return b.slice(S)}).join(`
`);return u.replaceWith(d,f,r.schema.text(v)),!0})},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:s}=n;if(!s||r.parent.type!==this.type)return!1;const a=r.parentOffset===r.parent.nodeSize-2,l=r.parent.textContent.endsWith(`

`);return!a||!l?!1:t.chain().command(({tr:u})=>(u.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:s,empty:a}=n;if(!a||s.parent.type!==this.type||!(s.parentOffset===s.parent.nodeSize-2))return!1;const u=s.after();return u===void 0?!1:r.nodeAt(u)?t.commands.command(({tr:f})=>(f.setSelection(Fe.near(r.resolve(u))),!0)):t.commands.exitCode()}}},addInputRules(){return[gy({find:u4,type:this.type,getAttributes:t=>({language:t[1]})}),gy({find:d4,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new Ot({key:new nn("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),s=r?JSON.parse(r):void 0,a=s?.mode;if(!n||!a)return!1;const{tr:l,schema:u}=t.state,d=u.text(n.replace(/\r\n?/g,`
`));return l.replaceSelectionWith(this.type.create({language:a},d)),l.selection.$from.parent.type!==this.type&&l.setSelection(Be.near(l.doc.resolve(Math.max(0,l.selection.from-2)))),l.setMeta("paste",!0),t.dispatch(l),!0}}})]}}),h4=dr.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`

`):""}),p4=dr.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Xt(this.options.HTMLAttributes,t)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:s,storedMarks:a}=n;if(s.$from.parent.type.spec.isolating)return!1;const{keepMarks:l}=this.options,{splittableMarks:u}=r.extensionManager,d=a||s.$to.parentOffset&&s.$from.marks();return e().insertContent({type:this.name}).command(({tr:f,dispatch:p})=>{if(p&&d&&l){const m=d.filter(v=>u.includes(v.type.name));f.ensureMarks(m)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),m4=dr.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,Xt(this.options.HTMLAttributes,e),0]},parseMarkdown:(t,e)=>e.createNode("heading",{level:t.depth||1},e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>{var n;const r=(n=t.attrs)!=null&&n.level?parseInt(t.attrs.level,10):1,s="#".repeat(r);return t.content?`${s} ${e.renderChildren(t.content)}`:""},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>gy({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),g4=dr.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",Xt(this.options.HTMLAttributes,t)]},markdownTokenName:"hr",parseMarkdown:(t,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!qU(e,e.schema.nodes[this.name]))return!1;const{selection:n}=e,{$to:r}=n,s=t();return eC(n)?s.insertContentAt(r.pos,{type:this.name}):s.insertContent({type:this.name}),s.command(({state:a,tr:l,dispatch:u})=>{if(u){const{$to:d}=l.selection,f=d.end();if(d.nodeAfter)d.nodeAfter.isTextblock?l.setSelection(Be.create(l.doc,d.pos+1)):d.nodeAfter.isBlock?l.setSelection(Me.create(l.doc,d.pos)):l.setSelection(Be.create(l.doc,d.pos));else{const p=a.schema.nodes[this.options.nextNodeType]||d.parent.type.contentMatch.defaultType,m=p?.create();m&&(l.insert(f,m),l.setSelection(Be.create(l.doc,f+1)))}l.scrollIntoView()}return!0}).run()}}},addInputRules(){return[$U({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),y4=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,v4=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,b4=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,w4=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,S4=Wa.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Xt(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(t,e)=>e.applyMark("italic",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`*${e.renderChildren(t)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[cl({find:y4,type:this.type}),cl({find:b4,type:this.type})]},addPasteRules(){return[Ha({find:v4,type:this.type}),Ha({find:w4,type:this.type})]}});const x4="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",E4="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",by="numeric",wy="ascii",Sy="alpha",Mc="asciinumeric",Ec="alphanumeric",xy="domain",TC="emoji",T4="scheme",k4="slashscheme",Ag="whitespace";function _4(t,e){return t in e||(e[t]=[]),e[t]}function Ma(t,e,n){e[by]&&(e[Mc]=!0,e[Ec]=!0),e[wy]&&(e[Mc]=!0,e[Sy]=!0),e[Mc]&&(e[Ec]=!0),e[Sy]&&(e[Ec]=!0),e[Ec]&&(e[xy]=!0),e[TC]&&(e[xy]=!0);for(const r in e){const s=_4(r,n);s.indexOf(t)<0&&s.push(t)}}function C4(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function Kn(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}Kn.groups={};Kn.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const s=e.jr[r][0],a=e.jr[r][1];if(a&&s.test(t))return a}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let s=0;s<t.length;s++)this.tt(t[s],e,n,r)},tr(t,e,n,r){r=r||Kn.groups;let s;return e&&e.j?s=e:(s=new Kn(e),n&&r&&Ma(e,n,r)),this.jr.push([t,s]),s},ts(t,e,n,r){let s=this;const a=t.length;if(!a)return s;for(let l=0;l<a-1;l++)s=s.tt(t[l]);return s.tt(t[a-1],e,n,r)},tt(t,e,n,r){r=r||Kn.groups;const s=this;if(e&&e.j)return s.j[t]=e,e;const a=e;let l,u=s.go(t);if(u?(l=new Kn,Object.assign(l.j,u.j),l.jr.push.apply(l.jr,u.jr),l.jd=u.jd,l.t=u.t):l=new Kn,a){if(r)if(l.t&&typeof l.t=="string"){const d=Object.assign(C4(l.t,r),n);Ma(a,d,r)}else n&&Ma(a,n,r);l.t=a}return s.j[t]=l,l}};const Ve=(t,e,n,r,s)=>t.ta(e,n,r,s),jt=(t,e,n,r,s)=>t.tr(e,n,r,s),mE=(t,e,n,r,s)=>t.ts(e,n,r,s),se=(t,e,n,r,s)=>t.tt(e,n,r,s),Pi="WORD",Ey="UWORD",kC="ASCIINUMERICAL",_C="ALPHANUMERICAL",nu="LOCALHOST",Ty="TLD",ky="UTLD",af="SCHEME",Jo="SLASH_SCHEME",x0="NUM",_y="WS",E0="NL",Nc="OPENBRACE",Dc="CLOSEBRACE",Mf="OPENBRACKET",Nf="CLOSEBRACKET",Df="OPENPAREN",jf="CLOSEPAREN",Lf="OPENANGLEBRACKET",zf="CLOSEANGLEBRACKET",If="FULLWIDTHLEFTPAREN",Bf="FULLWIDTHRIGHTPAREN",Uf="LEFTCORNERBRACKET",Pf="RIGHTCORNERBRACKET",Hf="LEFTWHITECORNERBRACKET",$f="RIGHTWHITECORNERBRACKET",qf="FULLWIDTHLESSTHAN",Vf="FULLWIDTHGREATERTHAN",Ff="AMPERSAND",Gf="APOSTROPHE",Kf="ASTERISK",_s="AT",Wf="BACKSLASH",Yf="BACKTICK",Jf="CARET",Ns="COLON",T0="COMMA",Xf="DOLLAR",ii="DOT",Qf="EQUALS",k0="EXCLAMATION",Cr="HYPHEN",jc="PERCENT",Zf="PIPE",eh="PLUS",th="POUND",Lc="QUERY",_0="QUOTE",CC="FULLWIDTHMIDDLEDOT",C0="SEMI",si="SLASH",zc="TILDE",nh="UNDERSCORE",AC="EMOJI",rh="SYM";var OC=Object.freeze({__proto__:null,ALPHANUMERICAL:_C,AMPERSAND:Ff,APOSTROPHE:Gf,ASCIINUMERICAL:kC,ASTERISK:Kf,AT:_s,BACKSLASH:Wf,BACKTICK:Yf,CARET:Jf,CLOSEANGLEBRACKET:zf,CLOSEBRACE:Dc,CLOSEBRACKET:Nf,CLOSEPAREN:jf,COLON:Ns,COMMA:T0,DOLLAR:Xf,DOT:ii,EMOJI:AC,EQUALS:Qf,EXCLAMATION:k0,FULLWIDTHGREATERTHAN:Vf,FULLWIDTHLEFTPAREN:If,FULLWIDTHLESSTHAN:qf,FULLWIDTHMIDDLEDOT:CC,FULLWIDTHRIGHTPAREN:Bf,HYPHEN:Cr,LEFTCORNERBRACKET:Uf,LEFTWHITECORNERBRACKET:Hf,LOCALHOST:nu,NL:E0,NUM:x0,OPENANGLEBRACKET:Lf,OPENBRACE:Nc,OPENBRACKET:Mf,OPENPAREN:Df,PERCENT:jc,PIPE:Zf,PLUS:eh,POUND:th,QUERY:Lc,QUOTE:_0,RIGHTCORNERBRACKET:Pf,RIGHTWHITECORNERBRACKET:$f,SCHEME:af,SEMI:C0,SLASH:si,SLASH_SCHEME:Jo,SYM:rh,TILDE:zc,TLD:Ty,UNDERSCORE:nh,UTLD:ky,UWORD:Ey,WORD:Pi,WS:_y});const Ii=/[a-z]/,mc=new RegExp("\\p{L}","u"),Og=new RegExp("\\p{Emoji}","u"),Bi=/\d/,Rg=/\s/,gE="\r",Mg=`
`,A4="",O4="",Ng="";let Wd=null,Yd=null;function R4(t=[]){const e={};Kn.groups=e;const n=new Kn;Wd==null&&(Wd=yE(x4)),Yd==null&&(Yd=yE(E4)),se(n,"'",Gf),se(n,"{",Nc),se(n,"}",Dc),se(n,"[",Mf),se(n,"]",Nf),se(n,"(",Df),se(n,")",jf),se(n,"<",Lf),se(n,">",zf),se(n,"",If),se(n,"",Bf),se(n,"",Uf),se(n,"",Pf),se(n,"",Hf),se(n,"",$f),se(n,"",qf),se(n,"",Vf),se(n,"&",Ff),se(n,"*",Kf),se(n,"@",_s),se(n,"`",Yf),se(n,"^",Jf),se(n,":",Ns),se(n,",",T0),se(n,"$",Xf),se(n,".",ii),se(n,"=",Qf),se(n,"!",k0),se(n,"-",Cr),se(n,"%",jc),se(n,"|",Zf),se(n,"+",eh),se(n,"#",th),se(n,"?",Lc),se(n,'"',_0),se(n,"/",si),se(n,";",C0),se(n,"~",zc),se(n,"_",nh),se(n,"\\",Wf),se(n,"",CC);const r=jt(n,Bi,x0,{[by]:!0});jt(r,Bi,r);const s=jt(r,Ii,kC,{[Mc]:!0}),a=jt(r,mc,_C,{[Ec]:!0}),l=jt(n,Ii,Pi,{[wy]:!0});jt(l,Bi,s),jt(l,Ii,l),jt(s,Bi,s),jt(s,Ii,s);const u=jt(n,mc,Ey,{[Sy]:!0});jt(u,Ii),jt(u,Bi,a),jt(u,mc,u),jt(a,Bi,a),jt(a,Ii),jt(a,mc,a);const d=se(n,Mg,E0,{[Ag]:!0}),f=se(n,gE,_y,{[Ag]:!0}),p=jt(n,Rg,_y,{[Ag]:!0});se(n,Ng,p),se(f,Mg,d),se(f,Ng,p),jt(f,Rg,p),se(p,gE),se(p,Mg),jt(p,Rg,p),se(p,Ng,p);const m=jt(n,Og,AC,{[TC]:!0});se(m,"#"),jt(m,Og,m),se(m,A4,m);const v=se(m,O4);se(v,"#"),jt(v,Og,m);const b=[[Ii,l],[Bi,s]],w=[[Ii,null],[mc,u],[Bi,a]];for(let x=0;x<Wd.length;x++)xs(n,Wd[x],Ty,Pi,b);for(let x=0;x<Yd.length;x++)xs(n,Yd[x],ky,Ey,w);Ma(Ty,{tld:!0,ascii:!0},e),Ma(ky,{utld:!0,alpha:!0},e),xs(n,"file",af,Pi,b),xs(n,"mailto",af,Pi,b),xs(n,"http",Jo,Pi,b),xs(n,"https",Jo,Pi,b),xs(n,"ftp",Jo,Pi,b),xs(n,"ftps",Jo,Pi,b),Ma(af,{scheme:!0,ascii:!0},e),Ma(Jo,{slashscheme:!0,ascii:!0},e),t=t.sort((x,S)=>x[0]>S[0]?1:-1);for(let x=0;x<t.length;x++){const S=t[x][0],O=t[x][1]?{[T4]:!0}:{[k4]:!0};S.indexOf("-")>=0?O[xy]=!0:Ii.test(S)?Bi.test(S)?O[Mc]=!0:O[wy]=!0:O[by]=!0,mE(n,S,S,O)}return mE(n,"localhost",nu,{ascii:!0}),n.jd=new Kn(rh),{start:n,tokens:Object.assign({groups:e},OC)}}function RC(t,e){const n=M4(e.replace(/[A-Z]/g,u=>u.toLowerCase())),r=n.length,s=[];let a=0,l=0;for(;l<r;){let u=t,d=null,f=0,p=null,m=-1,v=-1;for(;l<r&&(d=u.go(n[l]));)u=d,u.accepts()?(m=0,v=0,p=u):m>=0&&(m+=n[l].length,v++),f+=n[l].length,a+=n[l].length,l++;a-=m,l-=v,f-=m,s.push({t:p.t,v:e.slice(a-f,a),s:a-f,e:a})}return s}function M4(t){const e=[],n=t.length;let r=0;for(;r<n;){let s=t.charCodeAt(r),a,l=s<55296||s>56319||r+1===n||(a=t.charCodeAt(r+1))<56320||a>57343?t[r]:t.slice(r,r+2);e.push(l),r+=l.length}return e}function xs(t,e,n,r,s){let a;const l=e.length;for(let u=0;u<l-1;u++){const d=e[u];t.j[d]?a=t.j[d]:(a=new Kn(r),a.jr=s.slice(),t.j[d]=a),t=a}return a=new Kn(n),a.jr=s.slice(),t.j[e[l-1]]=a,a}function yE(t){const e=[],n=[];let r=0,s="0123456789";for(;r<t.length;){let a=0;for(;s.indexOf(t[r+a])>=0;)a++;if(a>0){e.push(n.join(""));for(let l=parseInt(t.substring(r,r+a),10);l>0;l--)n.pop();r+=a}else n.push(t[r]),r++}return e}const ru={defaultProtocol:"http",events:null,format:vE,formatHref:vE,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function A0(t,e=null){let n=Object.assign({},ru);t&&(n=Object.assign(n,t instanceof A0?t.o:t));const r=n.ignoreTags,s=[];for(let a=0;a<r.length;a++)s.push(r[a].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=s}A0.prototype={o:ru,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let s=this.o[t];return s&&(typeof s=="object"?(s=n.t in s?s[n.t]:ru[t],typeof s=="function"&&r&&(s=s(e,n))):typeof s=="function"&&r&&(s=s(e,n.t,n)),s)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function vE(t){return t}function MC(t,e){this.t="token",this.v=t,this.tk=e}MC.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=ru.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),s=t.get("tagName",n,e),a=this.toFormattedString(t),l={},u=t.get("className",n,e),d=t.get("target",n,e),f=t.get("rel",n,e),p=t.getObj("attributes",n,e),m=t.getObj("events",n,e);return l.href=r,u&&(l.class=u),d&&(l.target=d),f&&(l.rel=f),p&&Object.assign(l,p),{tagName:s,attributes:l,content:a,eventListeners:m}}};function Oh(t,e){class n extends MC{constructor(s,a){super(s,a),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const bE=Oh("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),wE=Oh("text"),N4=Oh("nl"),Jd=Oh("url",{isLink:!0,toHref(t=ru.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==nu&&t[1].t===Ns}}),_r=t=>new Kn(t);function D4({groups:t}){const e=t.domain.concat([Ff,Kf,_s,Wf,Yf,Jf,Xf,Qf,Cr,x0,jc,Zf,eh,th,si,rh,zc,nh]),n=[Gf,Ns,T0,ii,k0,jc,Lc,_0,C0,Lf,zf,Nc,Dc,Nf,Mf,Df,jf,If,Bf,Uf,Pf,Hf,$f,qf,Vf],r=[Ff,Gf,Kf,Wf,Yf,Jf,Xf,Qf,Cr,Nc,Dc,jc,Zf,eh,th,Lc,si,rh,zc,nh],s=_r(),a=se(s,zc);Ve(a,r,a),Ve(a,t.domain,a);const l=_r(),u=_r(),d=_r();Ve(s,t.domain,l),Ve(s,t.scheme,u),Ve(s,t.slashscheme,d),Ve(l,r,a),Ve(l,t.domain,l);const f=se(l,_s);se(a,_s,f),se(u,_s,f),se(d,_s,f);const p=se(a,ii);Ve(p,r,a),Ve(p,t.domain,a);const m=_r();Ve(f,t.domain,m),Ve(m,t.domain,m);const v=se(m,ii);Ve(v,t.domain,m);const b=_r(bE);Ve(v,t.tld,b),Ve(v,t.utld,b),se(f,nu,b);const w=se(m,Cr);se(w,Cr,w),Ve(w,t.domain,m),Ve(b,t.domain,m),se(b,ii,v),se(b,Cr,w);const x=se(b,Ns);Ve(x,t.numeric,bE);const S=se(l,Cr),T=se(l,ii);se(S,Cr,S),Ve(S,t.domain,l),Ve(T,r,a),Ve(T,t.domain,l);const O=_r(Jd);Ve(T,t.tld,O),Ve(T,t.utld,O),Ve(O,t.domain,l),Ve(O,r,a),se(O,ii,T),se(O,Cr,S),se(O,_s,f);const M=se(O,Ns),P=_r(Jd);Ve(M,t.numeric,P);const C=_r(Jd),R=_r();Ve(C,e,C),Ve(C,n,R),Ve(R,e,C),Ve(R,n,R),se(O,si,C),se(P,si,C);const k=se(u,Ns),z=se(d,Ns),G=se(z,si),le=se(G,si);Ve(u,t.domain,l),se(u,ii,T),se(u,Cr,S),Ve(d,t.domain,l),se(d,ii,T),se(d,Cr,S),Ve(k,t.domain,C),se(k,si,C),se(k,Lc,C),Ve(le,t.domain,C),Ve(le,e,C),se(le,si,C);const he=[[Nc,Dc],[Mf,Nf],[Df,jf],[Lf,zf],[If,Bf],[Uf,Pf],[Hf,$f],[qf,Vf]];for(let ye=0;ye<he.length;ye++){const[Ue,ue]=he[ye],re=se(C,Ue);se(R,Ue,re),se(re,ue,C);const I=_r(Jd);Ve(re,e,I);const Q=_r();Ve(re,n),Ve(I,e,I),Ve(I,n,Q),Ve(Q,e,I),Ve(Q,n,Q),se(I,ue,C),se(Q,ue,C)}return se(s,nu,O),se(s,E0,N4),{start:s,tokens:OC}}function j4(t,e,n){let r=n.length,s=0,a=[],l=[];for(;s<r;){let u=t,d=null,f=null,p=0,m=null,v=-1;for(;s<r&&!(d=u.go(n[s].t));)l.push(n[s++]);for(;s<r&&(f=d||u.go(n[s].t));)d=null,u=f,u.accepts()?(v=0,m=u):v>=0&&v++,s++,p++;if(v<0)s-=p,s<r&&(l.push(n[s]),s++);else{l.length>0&&(a.push(Dg(wE,e,l)),l=[]),s-=v,p-=v;const b=m.t,w=n.slice(s-p,s);a.push(Dg(b,e,w))}}return l.length>0&&a.push(Dg(wE,e,l)),a}function Dg(t,e,n){const r=n[0].s,s=n[n.length-1].e,a=e.slice(r,s);return new t(a,n)}const L4=typeof console<"u"&&console&&console.warn||(()=>{}),z4="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Et={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function I4(){return Kn.groups={},Et.scanner=null,Et.parser=null,Et.tokenQueue=[],Et.pluginQueue=[],Et.customSchemes=[],Et.initialized=!1,Et}function SE(t,e=!1){if(Et.initialized&&L4(`linkifyjs: already initialized - will not register custom scheme "${t}" ${z4}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Et.customSchemes.push([t,e])}function B4(){Et.scanner=R4(Et.customSchemes);for(let t=0;t<Et.tokenQueue.length;t++)Et.tokenQueue[t][1]({scanner:Et.scanner});Et.parser=D4(Et.scanner.tokens);for(let t=0;t<Et.pluginQueue.length;t++)Et.pluginQueue[t][1]({scanner:Et.scanner,parser:Et.parser});return Et.initialized=!0,Et}function O0(t){return Et.initialized||B4(),j4(Et.parser.start,t,RC(Et.scanner.start,t))}O0.scan=RC;function NC(t,e=null,n=null){if(e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new A0(n),s=O0(t),a=[];for(let l=0;l<s.length;l++){const u=s[l];u.isLink&&(!e||u.t===e)&&r.check(u)&&a.push(u.toFormattedObject(r))}return a}var R0="[\0- -\u2029]",U4=new RegExp(R0),P4=new RegExp(`${R0}$`),H4=new RegExp(R0,"g");function $4(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function q4(t){return new Ot({key:new nn("autolink"),appendTransaction:(e,n,r)=>{const s=e.some(f=>f.docChanged)&&!n.doc.eq(r.doc),a=e.some(f=>f.getMeta("preventAutolink"));if(!s||a)return;const{tr:l}=r,u=G_(n.doc,[...e]);if(Z_(u).forEach(({newRange:f})=>{const p=qB(r.doc,f,b=>b.isTextblock);let m,v;if(p.length>1)m=p[0],v=r.doc.textBetween(m.pos,m.pos+m.node.nodeSize,void 0," ");else if(p.length){const b=r.doc.textBetween(f.from,f.to," "," ");if(!P4.test(b))return;m=p[0],v=r.doc.textBetween(m.pos,f.to,void 0," ")}if(m&&v){const b=v.split(U4).filter(Boolean);if(b.length<=0)return!1;const w=b[b.length-1],x=m.pos+v.lastIndexOf(w);if(!w)return!1;const S=O0(w).map(T=>T.toObject(t.defaultProtocol));if(!$4(S))return!1;S.filter(T=>T.isLink).map(T=>({...T,from:x+T.start+1,to:x+T.end+1})).filter(T=>r.schema.marks.code?!r.doc.rangeHasMark(T.from,T.to,r.schema.marks.code):!0).filter(T=>t.validate(T.value)).filter(T=>t.shouldAutoLink(T.value)).forEach(T=>{g0(T.from,T.to,r.doc).some(O=>O.mark.type===t.type)||l.addMark(T.from,T.to,t.type.create({href:T.href}))})}}),!!l.steps.length)return l}})}function V4(t){return new Ot({key:new nn("handleClickLink"),props:{handleClick:(e,n,r)=>{var s,a;if(r.button!==0||!e.editable)return!1;let l=null;if(r.target instanceof HTMLAnchorElement)l=r.target;else{const d=r.target;if(!d)return!1;const f=t.editor.view.dom;l=d.closest("a"),l&&!f.contains(l)&&(l=null)}if(!l)return!1;let u=!1;if(t.enableClickSelection&&(u=t.editor.commands.extendMarkRange(t.type.name)),t.openOnClick){const d=Q_(e.state,t.type.name),f=(s=l.href)!=null?s:d.href,p=(a=l.target)!=null?a:d.target;f&&(window.open(f,p),u=!0)}return u}}})}function F4(t){return new Ot({key:new nn("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{shouldAutoLink:s}=t,{state:a}=e,{selection:l}=a,{empty:u}=l;if(u)return!1;let d="";r.content.forEach(p=>{d+=p.textContent});const f=NC(d,{defaultProtocol:t.defaultProtocol}).find(p=>p.isLink&&p.value===d);return!d||!f||s!==void 0&&!s(f.value)?!1:t.editor.commands.setMark(t.type,{href:f.href})}}})}function Sa(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const s=typeof r=="string"?r:r.scheme;s&&n.push(s)}),!t||t.replace(H4,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var G4=Wa.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){SE(t);return}SE(t.scheme,t.optionalSlashes)})},onDestroy(){I4()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!Sa(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>{const e=/^[a-z][a-z0-9+.-]*:\/\//i.test(t),n=/^[a-z][a-z0-9+.-]*:/i.test(t);if(e||n&&!t.includes("@"))return!0;const s=(t.includes("@")?t.split("@").pop():t).split(/[/?#:]/)[0];return!(/^\d{1,3}(\.\d{1,3}){3}$/.test(s)||!/\./.test(s))}}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class},title:{default:null}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:n=>!!Sa(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!Sa(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Xt(this.options.HTMLAttributes,t),0]:["a",Xt(this.options.HTMLAttributes,{...t,href:""}),0]},markdownTokenName:"link",parseMarkdown:(t,e)=>e.applyMark("link",e.parseInline(t.tokens||[]),{href:t.href,title:t.title||null}),renderMarkdown:(t,e)=>{var n,r,s,a;const l=(r=(n=t.attrs)==null?void 0:n.href)!=null?r:"",u=(a=(s=t.attrs)==null?void 0:s.title)!=null?a:"",d=e.renderChildren(t);return u?`[${d}](${l} "${u}")`:`[${d}](${l})`},addCommands(){return{setLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!Sa(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:n}=t||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!Sa(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Ha({find:t=>{const e=[];if(t){const{protocols:n,defaultProtocol:r}=this.options,s=NC(t).filter(a=>a.isLink&&this.options.isAllowedUri(a.value,{defaultValidate:l=>!!Sa(l,n),protocols:n,defaultProtocol:r}));s.length&&s.forEach(a=>{this.options.shouldAutoLink(a.value)&&e.push({text:a.value,data:{href:a.href},index:a.start})})}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:n}=this.options;return this.options.autolink&&t.push(q4({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:s=>!!Sa(s,e),protocols:e,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),t.push(V4({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push(F4({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),t}}),K4=Object.defineProperty,W4=(t,e)=>{for(var n in e)K4(t,n,{get:e[n],enumerable:!0})},Y4="listItem",xE="textStyle",EE=/^\s*([-+*])\s$/,DC=dr.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",Xt(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>t.type!=="list"||t.ordered?[]:{type:"bulletList",content:t.items?e.parseChildren(t.items):[]},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Y4,this.editor.getAttributes(xE)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=ul({find:EE,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=ul({find:EE,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(xE),editor:this.editor})),[t]}}),jC=dr.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Xt(this.options.HTMLAttributes,t),0]},markdownTokenName:"list_item",parseMarkdown:(t,e)=>{if(t.type!=="list_item")return[];let n=[];if(t.tokens&&t.tokens.length>0)if(t.tokens.some(s=>s.type==="paragraph"))n=e.parseChildren(t.tokens);else{const s=t.tokens[0];if(s&&s.type==="text"&&s.tokens&&s.tokens.length>0){if(n=[{type:"paragraph",content:e.parseInline(s.tokens)}],t.tokens.length>1){const l=t.tokens.slice(1),u=e.parseChildren(l);n.push(...u)}}else n=e.parseChildren(t.tokens)}return n.length===0&&(n=[{type:"paragraph",content:[]}]),{type:"listItem",content:n}},renderMarkdown:(t,e,n)=>w0(t,e,r=>{var s,a;return r.parentType==="bulletList"?"- ":r.parentType==="orderedList"?`${(((a=(s=r.meta)==null?void 0:s.parentAttrs)==null?void 0:a.start)||1)+r.index}. `:"- "},n),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),J4={};W4(J4,{findListItemPos:()=>pu,getNextListDepth:()=>M0,handleBackspace:()=>Cy,handleDelete:()=>Ay,hasListBefore:()=>LC,hasListItemAfter:()=>X4,hasListItemBefore:()=>zC,listItemHasSubList:()=>IC,nextListIsDeeper:()=>BC,nextListIsHigher:()=>UC});var pu=(t,e)=>{const{$from:n}=e.selection,r=Jt(t,e.schema);let s=null,a=n.depth,l=n.pos,u=null;for(;a>0&&u===null;)s=n.node(a),s.type===r?u=a:(a-=1,l-=1);return u===null?null:{$pos:e.doc.resolve(l),depth:u}},M0=(t,e)=>{const n=pu(t,e);if(!n)return!1;const[,r]=ZB(e,t,n.$pos.pos+4);return r},LC=(t,e,n)=>{const{$anchor:r}=t.selection,s=Math.max(0,r.pos-2),a=t.doc.resolve(s).node();return!(!a||!n.includes(a.type.name))},zC=(t,e)=>{var n;const{$anchor:r}=e.selection,s=e.doc.resolve(r.pos-2);return!(s.index()===0||((n=s.nodeBefore)==null?void 0:n.type.name)!==t)},IC=(t,e,n)=>{if(!n)return!1;const r=Jt(t,e.schema);let s=!1;return n.descendants(a=>{a.type===r&&(s=!0)}),s},Cy=(t,e,n)=>{if(t.commands.undoInputRule())return!0;if(t.state.selection.from!==t.state.selection.to)return!1;if(!$s(t.state,e)&&LC(t.state,e,n)){const{$anchor:u}=t.state.selection,d=t.state.doc.resolve(u.before()-1),f=[];d.node().descendants((v,b)=>{v.type.name===e&&f.push({node:v,pos:b})});const p=f.at(-1);if(!p)return!1;const m=t.state.doc.resolve(d.start()+p.pos+1);return t.chain().cut({from:u.start()-1,to:u.end()+1},m.end()).joinForward().run()}if(!$s(t.state,e)||!rU(t.state))return!1;const r=pu(e,t.state);if(!r)return!1;const a=t.state.doc.resolve(r.$pos.pos-2).node(r.depth),l=IC(e,t.state,a);return zC(e,t.state)&&!l?t.commands.joinItemBackward():t.chain().liftListItem(e).run()},BC=(t,e)=>{const n=M0(t,e),r=pu(t,e);return!r||!n?!1:n>r.depth},UC=(t,e)=>{const n=M0(t,e),r=pu(t,e);return!r||!n?!1:n<r.depth},Ay=(t,e)=>{if(!$s(t.state,e)||!nU(t.state,e))return!1;const{selection:n}=t.state,{$from:r,$to:s}=n;return!n.empty&&r.sameParent(s)?!1:BC(e,t.state)?t.chain().focus(t.state.selection.from+4).lift(e).joinBackward().run():UC(e,t.state)?t.chain().joinForward().joinBackward().run():t.commands.joinItemForward()},X4=(t,e)=>{var n;const{$anchor:r}=e.selection,s=e.doc.resolve(r.pos-r.parentOffset-2);return!(s.index()===s.parent.childCount-1||((n=s.nodeAfter)==null?void 0:n.type.name)!==t)},PC=qt.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&Ay(t,n)&&(e=!0)}),e},"Mod-Delete":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&Ay(t,n)&&(e=!0)}),e},Backspace:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&Cy(t,n,r)&&(e=!0)}),e},"Mod-Backspace":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&Cy(t,n,r)&&(e=!0)}),e}}}}),TE=/^(\s*)(\d+)\.\s+(.*)$/,Q4=/^\s/;function Z4(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n],a=s.match(TE);if(!a)break;const[,l,u,d]=a,f=l.length;let p=d,m=n+1;const v=[s];for(;m<t.length;){const b=t[m];if(b.match(TE))break;if(b.trim()==="")v.push(b),p+=`
`,m+=1;else if(b.match(Q4))v.push(b),p+=`
${b.slice(f+2)}`,m+=1;else break}e.push({indent:f,number:parseInt(u,10),content:p.trim(),raw:v.join(`
`)}),r=m,n=m}return[e,r]}function HC(t,e,n){var r;const s=[];let a=0;for(;a<t.length;){const l=t[a];if(l.indent===e){const u=l.content.split(`
`),d=((r=u[0])==null?void 0:r.trim())||"",f=[];d&&f.push({type:"paragraph",raw:d,tokens:n.inlineTokens(d)});const p=u.slice(1).join(`
`).trim();if(p){const b=n.blockTokens(p);f.push(...b)}let m=a+1;const v=[];for(;m<t.length&&t[m].indent>e;)v.push(t[m]),m+=1;if(v.length>0){const b=Math.min(...v.map(x=>x.indent)),w=HC(v,b,n);f.push({type:"list",ordered:!0,start:v[0].number,items:w,raw:v.map(x=>x.raw).join(`
`)})}s.push({type:"list_item",raw:l.raw,tokens:f}),a=m}else a+=1}return s}function e5(t,e){return t.map(n=>{if(n.type!=="list_item")return e.parseChildren([n])[0];const r=[];return n.tokens&&n.tokens.length>0&&n.tokens.forEach(s=>{if(s.type==="paragraph"||s.type==="list"||s.type==="blockquote"||s.type==="code")r.push(...e.parseChildren([s]));else if(s.type==="text"&&s.tokens){const a=e.parseChildren([s]);r.push({type:"paragraph",content:a})}else{const a=e.parseChildren([s]);a.length>0&&r.push(...a)}}),{type:"listItem",content:r}})}var t5="listItem",kE="textStyle",_E=/^(\d+)\.\s$/,$C=dr.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",Xt(this.options.HTMLAttributes,n),0]:["ol",Xt(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>{if(t.type!=="list"||!t.ordered)return[];const n=t.start||1,r=t.items?e5(t.items,e):[];return n!==1?{type:"orderedList",attrs:{start:n},content:r}:{type:"orderedList",content:r}},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:t=>{const e=t.match(/^(\s*)(\d+)\.\s+/),n=e?.index;return n!==void 0?n:-1},tokenize:(t,e,n)=>{var r;const s=t.split(`
`),[a,l]=Z4(s);if(a.length===0)return;const u=HC(a,0,n);return u.length===0?void 0:{type:"list",ordered:!0,start:((r=a[0])==null?void 0:r.number)||1,items:u,raw:s.slice(0,l).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(t5,this.editor.getAttributes(kE)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=ul({find:_E,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=ul({find:_E,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(kE)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),n5=/^\s*(\[([( |x])?\])\s$/,r5=dr.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",Xt(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(t,e)=>{const n=[];if(t.tokens&&t.tokens.length>0?n.push(e.createNode("paragraph",{},e.parseInline(t.tokens))):t.text?n.push(e.createNode("paragraph",{},[e.createNode("text",{text:t.text})])):n.push(e.createNode("paragraph",{},[])),t.nestedTokens&&t.nestedTokens.length>0){const r=e.parseChildren(t.nestedTokens);n.push(...r)}return e.createNode("taskItem",{checked:t.checked||!1},n)},renderMarkdown:(t,e)=>{var n;const s=`- [${(n=t.attrs)!=null&&n.checked?"x":" "}] `;return w0(t,e,s)},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:n,editor:r})=>{const s=document.createElement("li"),a=document.createElement("label"),l=document.createElement("span"),u=document.createElement("input"),d=document.createElement("div"),f=m=>{var v,b;u.ariaLabel=((b=(v=this.options.a11y)==null?void 0:v.checkboxLabel)==null?void 0:b.call(v,m,u.checked))||`Task item checkbox for ${m.textContent||"empty task item"}`};f(t),a.contentEditable="false",u.type="checkbox",u.addEventListener("mousedown",m=>m.preventDefault()),u.addEventListener("change",m=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){u.checked=!u.checked;return}const{checked:v}=m.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:b})=>{const w=n();if(typeof w!="number")return!1;const x=b.doc.nodeAt(w);return b.setNodeMarkup(w,void 0,{...x?.attrs,checked:v}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,v)||(u.checked=!u.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([m,v])=>{s.setAttribute(m,v)}),s.dataset.checked=t.attrs.checked,u.checked=t.attrs.checked,a.append(u,l),s.append(a,d),Object.entries(e).forEach(([m,v])=>{s.setAttribute(m,v)});let p=new Set(Object.keys(e));return{dom:s,contentDOM:d,update:m=>{if(m.type!==this.type)return!1;s.dataset.checked=m.attrs.checked,u.checked=m.attrs.checked,f(m);const v=r.extensionManager.attributes,b=tu(m,v),w=new Set(Object.keys(b)),x=this.options.HTMLAttributes;return p.forEach(S=>{w.has(S)||(S in x?s.setAttribute(S,x[S]):s.removeAttribute(S))}),Object.entries(b).forEach(([S,T])=>{T==null?S in x?s.setAttribute(S,x[S]):s.removeAttribute(S):s.setAttribute(S,T)}),p=w,!0}}}},addInputRules(){return[ul({find:n5,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),i5=dr.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",Xt(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},parseMarkdown:(t,e)=>e.createNode("taskList",{},e.parseChildren(t.items||[])),renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(t){var e;const n=(e=t.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return n!==void 0?n:-1},tokenize(t,e,n){const r=a=>{const l=yy(a,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:u=>({indentLevel:u[1].length,mainContent:u[4],checked:u[3].toLowerCase()==="x"}),createToken:(u,d)=>({type:"taskItem",raw:"",mainContent:u.mainContent,indentLevel:u.indentLevel,checked:u.checked,text:u.mainContent,tokens:n.inlineTokens(u.mainContent),nestedTokens:d}),customNestedParser:r},n);return l?[{type:"taskList",raw:l.raw,items:l.items}]:n.blockTokens(a)},s=yy(t,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:a=>({indentLevel:a[1].length,mainContent:a[4],checked:a[3].toLowerCase()==="x"}),createToken:(a,l)=>({type:"taskItem",raw:"",mainContent:a.mainContent,indentLevel:a.indentLevel,checked:a.checked,text:a.mainContent,tokens:n.inlineTokens(a.mainContent),nestedTokens:l}),customNestedParser:r},n);if(s)return{type:"taskList",raw:s.raw,items:s.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});qt.create({name:"listKit",addExtensions(){const t=[];return this.options.bulletList!==!1&&t.push(DC.configure(this.options.bulletList)),this.options.listItem!==!1&&t.push(jC.configure(this.options.listItem)),this.options.listKeymap!==!1&&t.push(PC.configure(this.options.listKeymap)),this.options.orderedList!==!1&&t.push($C.configure(this.options.orderedList)),this.options.taskItem!==!1&&t.push(r5.configure(this.options.taskItem)),this.options.taskList!==!1&&t.push(i5.configure(this.options.taskList)),t}});var CE="&nbsp;",s5="",a5=dr.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",Xt(this.options.HTMLAttributes,t),0]},parseMarkdown:(t,e)=>{const n=t.tokens||[];if(n.length===1&&n[0].type==="image")return e.parseChildren([n[0]]);const r=e.parseInline(n);return r.length===1&&r[0].type==="text"&&(r[0].text===CE||r[0].text===s5)?e.createNode("paragraph",void 0,[]):e.createNode("paragraph",void 0,r)},renderMarkdown:(t,e)=>{if(!t)return"";const n=Array.isArray(t.content)?t.content:[];return n.length===0?CE:e.renderChildren(n)},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),o5=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,l5=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,c5=Wa.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Xt(this.options.HTMLAttributes,t),0]},markdownTokenName:"del",parseMarkdown:(t,e)=>e.applyMark("strike",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`~~${e.renderChildren(t)}~~`,addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[cl({find:o5,type:this.type})]},addPasteRules(){return[Ha({find:l5,type:this.type})]}}),u5=dr.create({name:"text",group:"inline",parseMarkdown:t=>({type:"text",text:t.text||""}),renderMarkdown:t=>t.text||""}),d5=Wa.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",Xt(this.options.HTMLAttributes,t),0]},parseMarkdown(t,e){return e.applyMark(this.name||"underline",e.parseInline(t.tokens||[]))},renderMarkdown(t,e){return`++${e.renderChildren(t)}++`},markdownTokenizer:{name:"underline",level:"inline",start(t){return t.indexOf("++")},tokenize(t,e,n){const s=/^(\+\+)([\s\S]+?)(\+\+)/.exec(t);if(!s)return;const a=s[2].trim();return{type:"underline",raw:s[0],text:a,tokens:n.inlineTokens(a)}}},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function f5(t={}){return new Ot({view(e){return new h5(e,t)}})}class h5{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(s=>{let a=l=>{this[s](l)};return e.dom.addEventListener(s,a),{name:s,handler:a}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,s=this.editorView.dom,a=s.getBoundingClientRect(),l=a.width/s.offsetWidth,u=a.height/s.offsetHeight;if(n){let m=e.nodeBefore,v=e.nodeAfter;if(m||v){let b=this.editorView.nodeDOM(this.cursorPos-(m?m.nodeSize:0));if(b){let w=b.getBoundingClientRect(),x=m?w.bottom:w.top;m&&v&&(x=(x+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let S=this.width/2*u;r={left:w.left,right:w.right,top:x-S,bottom:x+S}}}}if(!r){let m=this.editorView.coordsAtPos(this.cursorPos),v=this.width/2*l;r={left:m.left-v,right:m.left+v,top:m.top,bottom:m.bottom}}let d=this.editorView.dom.offsetParent;this.element||(this.element=d.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let f,p;if(!d||d==document.body&&getComputedStyle(d).position=="static")f=-pageXOffset,p=-pageYOffset;else{let m=d.getBoundingClientRect(),v=m.width/d.offsetWidth,b=m.height/d.offsetHeight;f=m.left-d.scrollLeft*v,p=m.top-d.scrollTop*b}this.element.style.left=(r.left-f)/l+"px",this.element.style.top=(r.top-p)/u+"px",this.element.style.width=(r.right-r.left)/l+"px",this.element.style.height=(r.bottom-r.top)/u+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),s=r&&r.type.spec.disableDropCursor,a=typeof s=="function"?s(this.editorView,n,e):s;if(n&&!a){let l=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let u=Ik(this.editorView.state.doc,l,this.editorView.dragging.slice);u!=null&&(l=u)}this.setCursor(l),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class zt extends Fe{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return zt.valid(r)?new zt(r):Fe.near(r)}content(){return me.empty}eq(e){return e instanceof zt&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new zt(e.resolve(n.pos))}getBookmark(){return new N0(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!p5(e)||!m5(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let s=n.contentMatchAt(e.index()).defaultType;return s&&s.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&zt.valid(e))return e;let s=e.pos,a=null;for(let l=e.depth;;l--){let u=e.node(l);if(n>0?e.indexAfter(l)<u.childCount:e.index(l)>0){a=u.child(n>0?e.indexAfter(l):e.index(l)-1);break}else if(l==0)return null;s+=n;let d=e.doc.resolve(s);if(zt.valid(d))return d}for(;;){let l=n>0?a.firstChild:a.lastChild;if(!l){if(a.isAtom&&!a.isText&&!Me.isSelectable(a)){e=e.doc.resolve(s+a.nodeSize*n),r=!1;continue e}break}a=l,s+=n;let u=e.doc.resolve(s);if(zt.valid(u))return u}return null}}}zt.prototype.visible=!1;zt.findFrom=zt.findGapCursorFrom;Fe.jsonID("gapcursor",zt);class N0{constructor(e){this.pos=e}map(e){return new N0(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return zt.valid(n)?new zt(n):Fe.near(n)}}function qC(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function p5(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(n-1);;s=s.lastChild){if(s.childCount==0&&!s.inlineContent||qC(s.type))return!0;if(s.inlineContent)return!1}}return!0}function m5(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(n);;s=s.firstChild){if(s.childCount==0&&!s.inlineContent||qC(s.type))return!0;if(s.inlineContent)return!1}}return!0}function g5(){return new Ot({props:{decorations:w5,createSelectionBetween(t,e,n){return e.pos==n.pos&&zt.valid(n)?new zt(n):null},handleClick:v5,handleKeyDown:y5,handleDOMEvents:{beforeinput:b5}}})}const y5=B_({ArrowLeft:Xd("horiz",-1),ArrowRight:Xd("horiz",1),ArrowUp:Xd("vert",-1),ArrowDown:Xd("vert",1)});function Xd(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,s,a){let l=r.selection,u=e>0?l.$to:l.$from,d=l.empty;if(l instanceof Be){if(!a.endOfTextblock(n)||u.depth==0)return!1;d=!1,u=r.doc.resolve(e>0?u.after():u.before())}let f=zt.findGapCursorFrom(u,e,d);return f?(s&&s(r.tr.setSelection(new zt(f))),!0):!1}}function v5(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!zt.valid(r))return!1;let s=t.posAtCoords({left:n.clientX,top:n.clientY});return s&&s.inside>-1&&Me.isSelectable(t.state.doc.nodeAt(s.inside))?!1:(t.dispatch(t.state.tr.setSelection(new zt(r))),!0)}function b5(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof zt))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let s=ie.empty;for(let l=r.length-1;l>=0;l--)s=ie.from(r[l].createAndFill(null,s));let a=t.state.tr.replace(n.pos,n.pos,new me(s,0,0));return a.setSelection(Be.near(a.doc.resolve(n.pos+1))),t.dispatch(a),!1}function w5(t){if(!(t.selection instanceof zt))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",At.create(t.doc,[Dn.widget(t.selection.head,e,{key:"gapcursor"})])}var ih=200,ln=function(){};ln.prototype.append=function(e){return e.length?(e=ln.from(e),!this.length&&e||e.length<ih&&this.leafAppend(e)||this.length<ih&&e.leafPrepend(this)||this.appendInner(e)):this};ln.prototype.prepend=function(e){return e.length?ln.from(e).append(this):this};ln.prototype.appendInner=function(e){return new S5(this,e)};ln.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?ln.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};ln.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};ln.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};ln.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var s=[];return this.forEach(function(a,l){return s.push(e(a,l))},n,r),s};ln.from=function(e){return e instanceof ln?e:e&&e.length?new VC(e):ln.empty};var VC=(function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(s,a){return s==0&&a==this.length?this:new e(this.values.slice(s,a))},e.prototype.getInner=function(s){return this.values[s]},e.prototype.forEachInner=function(s,a,l,u){for(var d=a;d<l;d++)if(s(this.values[d],u+d)===!1)return!1},e.prototype.forEachInvertedInner=function(s,a,l,u){for(var d=a-1;d>=l;d--)if(s(this.values[d],u+d)===!1)return!1},e.prototype.leafAppend=function(s){if(this.length+s.length<=ih)return new e(this.values.concat(s.flatten()))},e.prototype.leafPrepend=function(s){if(this.length+s.length<=ih)return new e(s.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e})(ln);ln.empty=new VC([]);var S5=(function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,s,a,l){var u=this.left.length;if(s<u&&this.left.forEachInner(r,s,Math.min(a,u),l)===!1||a>u&&this.right.forEachInner(r,Math.max(s-u,0),Math.min(this.length,a)-u,l+u)===!1)return!1},e.prototype.forEachInvertedInner=function(r,s,a,l){var u=this.left.length;if(s>u&&this.right.forEachInvertedInner(r,s-u,Math.max(a,u)-u,l+u)===!1||a<u&&this.left.forEachInvertedInner(r,Math.min(s,u),a,l)===!1)return!1},e.prototype.sliceInner=function(r,s){if(r==0&&s==this.length)return this;var a=this.left.length;return s<=a?this.left.slice(r,s):r>=a?this.right.slice(r-a,s-a):this.left.slice(r,a).append(this.right.slice(0,s-a))},e.prototype.leafAppend=function(r){var s=this.right.leafAppend(r);if(s)return new e(this.left,s)},e.prototype.leafPrepend=function(r){var s=this.left.leafPrepend(r);if(s)return new e(s,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e})(ln);const x5=500;class Wr{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let s,a;n&&(s=this.remapping(r,this.items.length),a=s.maps.length);let l=e.tr,u,d,f=[],p=[];return this.items.forEach((m,v)=>{if(!m.step){s||(s=this.remapping(r,v+1),a=s.maps.length),a--,p.push(m);return}if(s){p.push(new ai(m.map));let b=m.step.map(s.slice(a)),w;b&&l.maybeStep(b).doc&&(w=l.mapping.maps[l.mapping.maps.length-1],f.push(new ai(w,void 0,void 0,f.length+p.length))),a--,w&&s.appendMap(w,a)}else l.maybeStep(m.step);if(m.selection)return u=s?m.selection.map(s.slice(a)):m.selection,d=new Wr(this.items.slice(0,r).append(p.reverse().concat(f)),this.eventCount-1),!1},this.items.length,0),{remaining:d,transform:l,selection:u}}addTransform(e,n,r,s){let a=[],l=this.eventCount,u=this.items,d=!s&&u.length?u.get(u.length-1):null;for(let p=0;p<e.steps.length;p++){let m=e.steps[p].invert(e.docs[p]),v=new ai(e.mapping.maps[p],m,n),b;(b=d&&d.merge(v))&&(v=b,p?a.pop():u=u.slice(0,u.length-1)),a.push(v),n&&(l++,n=void 0),s||(d=v)}let f=l-r.depth;return f>T5&&(u=E5(u,f),l-=f),new Wr(u.append(a),l)}remapping(e,n){let r=new Yc;return this.items.forEach((s,a)=>{let l=s.mirrorOffset!=null&&a-s.mirrorOffset>=e?r.maps.length-s.mirrorOffset:void 0;r.appendMap(s.map,l)},e,n),r}addMaps(e){return this.eventCount==0?this:new Wr(this.items.append(e.map(n=>new ai(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],s=Math.max(0,this.items.length-n),a=e.mapping,l=e.steps.length,u=this.eventCount;this.items.forEach(v=>{v.selection&&u--},s);let d=n;this.items.forEach(v=>{let b=a.getMirror(--d);if(b==null)return;l=Math.min(l,b);let w=a.maps[b];if(v.step){let x=e.steps[b].invert(e.docs[b]),S=v.selection&&v.selection.map(a.slice(d+1,b));S&&u++,r.push(new ai(w,x,S))}else r.push(new ai(w))},s);let f=[];for(let v=n;v<l;v++)f.push(new ai(a.maps[v]));let p=this.items.slice(0,s).append(f).append(r),m=new Wr(p,u);return m.emptyItemCount()>x5&&(m=m.compress(this.items.length-r.length)),m}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,s=[],a=0;return this.items.forEach((l,u)=>{if(u>=e)s.push(l),l.selection&&a++;else if(l.step){let d=l.step.map(n.slice(r)),f=d&&d.getMap();if(r--,f&&n.appendMap(f,r),d){let p=l.selection&&l.selection.map(n.slice(r));p&&a++;let m=new ai(f.invert(),d,p),v,b=s.length-1;(v=s.length&&s[b].merge(m))?s[b]=v:s.push(m)}}else l.map&&r--},this.items.length,0),new Wr(ln.from(s.reverse()),a)}}Wr.empty=new Wr(ln.empty,0);function E5(t,e){let n;return t.forEach((r,s)=>{if(r.selection&&e--==0)return n=s,!1}),t.slice(n)}class ai{constructor(e,n,r,s){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=s}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new ai(n.getMap().invert(),n,this.selection)}}}class Cs{constructor(e,n,r,s,a){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=s,this.prevComposition=a}}const T5=20;function k5(t,e,n,r){let s=n.getMeta(za),a;if(s)return s.historyState;n.getMeta(A5)&&(t=new Cs(t.done,t.undone,null,0,-1));let l=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(l&&l.getMeta(za))return l.getMeta(za).redo?new Cs(t.done.addTransform(n,void 0,r,of(e)),t.undone,AE(n.mapping.maps),t.prevTime,t.prevComposition):new Cs(t.done,t.undone.addTransform(n,void 0,r,of(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(l&&l.getMeta("addToHistory")===!1)){let u=n.getMeta("composition"),d=t.prevTime==0||!l&&t.prevComposition!=u&&(t.prevTime<(n.time||0)-r.newGroupDelay||!_5(n,t.prevRanges)),f=l?jg(t.prevRanges,n.mapping):AE(n.mapping.maps);return new Cs(t.done.addTransform(n,d?e.selection.getBookmark():void 0,r,of(e)),Wr.empty,f,n.time,u??t.prevComposition)}else return(a=n.getMeta("rebased"))?new Cs(t.done.rebased(n,a),t.undone.rebased(n,a),jg(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new Cs(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),jg(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function _5(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,s)=>{for(let a=0;a<e.length;a+=2)r<=e[a+1]&&s>=e[a]&&(n=!0)}),n}function AE(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,s,a,l)=>e.push(a,l));return e}function jg(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let s=e.map(t[r],1),a=e.map(t[r+1],-1);s<=a&&n.push(s,a)}return n}function C5(t,e,n){let r=of(e),s=za.get(e).spec.config,a=(n?t.undone:t.done).popEvent(e,r);if(!a)return null;let l=a.selection.resolve(a.transform.doc),u=(n?t.done:t.undone).addTransform(a.transform,e.selection.getBookmark(),s,r),d=new Cs(n?u:a.remaining,n?a.remaining:u,null,0,-1);return a.transform.setSelection(l).setMeta(za,{redo:n,historyState:d})}let Lg=!1,OE=null;function of(t){let e=t.plugins;if(OE!=e){Lg=!1,OE=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){Lg=!0;break}}return Lg}const za=new nn("history"),A5=new nn("closeHistory");function O5(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Ot({key:za,state:{init(){return new Cs(Wr.empty,Wr.empty,null,0,-1)},apply(e,n,r){return k5(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,s=r=="historyUndo"?GC:r=="historyRedo"?KC:null;return!s||!e.editable?!1:(n.preventDefault(),s(e.state,e.dispatch))}}}})}function FC(t,e){return(n,r)=>{let s=za.getState(n);if(!s||(t?s.undone:s.done).eventCount==0)return!1;if(r){let a=C5(s,n,t);a&&r(e?a.scrollIntoView():a)}return!0}}const GC=FC(!1,!0),KC=FC(!0,!0);qt.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=t?.node||this.editor.state.doc;if((t?.mode||this.options.mode)==="textSize"){const r=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(r)}return e.nodeSize},this.storage.words=t=>{const e=t?.node||this.editor.state.doc,n=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let t=!1;return[new Ot({key:new nn("characterCount"),appendTransaction:(e,n,r)=>{if(t)return;const s=this.options.limit;if(s==null||s===0){t=!0;return}const a=this.storage.characters({node:r.doc});if(a>s){const l=a-s,u=0,d=l;console.warn(`[CharacterCount] Initial content exceeded limit of ${s} characters. Content was automatically trimmed.`);const f=r.tr.deleteRange(u,d);return t=!0,f}t=!0},filterTransaction:(e,n)=>{const r=this.options.limit;if(!e.docChanged||r===0||r===null||r===void 0)return!0;const s=this.storage.characters({node:n.doc}),a=this.storage.characters({node:e.doc});if(a<=r||s>r&&a>r&&a<=s)return!0;if(s>r&&a>r&&a>s||!e.getMeta("paste"))return!1;const u=e.selection.$head.pos,d=a-r,f=u-d,p=u;return e.deleteRange(f,p),!(this.storage.characters({node:e.doc})>r)}})]}});var R5=qt.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[f5(this.options)]}});qt.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Ot({key:new nn("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:s}=e,a=[];if(!n||!r)return At.create(t,[]);let l=0;this.options.mode==="deepest"&&t.descendants((d,f)=>{if(d.isText)return;if(!(s>=f&&s<=f+d.nodeSize-1))return!1;l+=1});let u=0;return t.descendants((d,f)=>{if(d.isText||!(s>=f&&s<=f+d.nodeSize-1))return!1;if(u+=1,this.options.mode==="deepest"&&l-u>0||this.options.mode==="shallowest"&&u>1)return this.options.mode==="deepest";a.push(Dn.node(f,f+d.nodeSize,{class:this.options.className}))}),At.create(t,a)}}})]}});var M5=qt.create({name:"gapCursor",addProseMirrorPlugins(){return[g5()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=dt(Oe(t,"allowGapCursor",n)))!=null?e:null}}}),RE="placeholder";function N5(t){return t.replace(/\s+/g,"-").replace(/[^a-zA-Z0-9-]/g,"").replace(/^[0-9-]+/,"").replace(/^-+/,"").toLowerCase()}qt.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",dataAttribute:RE,placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){const t=this.options.dataAttribute?`data-${N5(this.options.dataAttribute)}`:`data-${RE}`;return[new Ot({key:new nn("placeholder"),props:{decorations:({doc:e,selection:n})=>{const r=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:s}=n,a=[];if(!r)return null;const l=this.editor.isEmpty;return e.descendants((u,d)=>{const f=s>=d&&s<=d+u.nodeSize,p=!u.isLeaf&&_h(u);if((f||!this.options.showOnlyCurrent)&&p){const m=[this.options.emptyNodeClass];l&&m.push(this.options.emptyEditorClass);const v=Dn.node(d,d+u.nodeSize,{class:m.join(" "),[t]:typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:u,pos:d,hasAnchor:f}):this.options.placeholder});a.push(v)}return this.options.includeChildren}),At.create(e,a)}}})]}});qt.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new Ot({key:new nn("selection"),props:{decorations(n){return n.selection.empty||t.isFocused||!t.isEditable||eC(n.selection)||t.view.dragging?null:At.create(n.doc,[Dn.inline(n.selection.from,n.selection.to,{class:e.className})])}}})]}});function ME({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||e?.type===t}var D5=qt.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var t;const e=new nn(this.name),n=this.options.node||((t=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:t.name)||"paragraph",r=Object.entries(this.editor.schema.nodes).map(([,s])=>s).filter(s=>(this.options.notAfter||[]).concat(n).includes(s.name));return[new Ot({key:e,appendTransaction:(s,a,l)=>{const{doc:u,tr:d,schema:f}=l,p=e.getState(l),m=u.content.size,v=f.nodes[n];if(p)return d.insert(m,v.create())},state:{init:(s,a)=>{const l=a.tr.doc.lastChild;return!ME({node:l,types:r})},apply:(s,a)=>{if(!s.docChanged||s.getMeta("__uniqueIDTransaction"))return a;const l=s.doc.lastChild;return!ME({node:l,types:r})}}})]}}),j5=qt.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>GC(t,e),redo:()=>({state:t,dispatch:e})=>KC(t,e)}},addProseMirrorPlugins(){return[O5(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),L5=qt.create({name:"starterKit",addExtensions(){var t,e,n,r;const s=[];return this.options.bold!==!1&&s.push(a4.configure(this.options.bold)),this.options.blockquote!==!1&&s.push(t4.configure(this.options.blockquote)),this.options.bulletList!==!1&&s.push(DC.configure(this.options.bulletList)),this.options.code!==!1&&s.push(c4.configure(this.options.code)),this.options.codeBlock!==!1&&s.push(f4.configure(this.options.codeBlock)),this.options.document!==!1&&s.push(h4.configure(this.options.document)),this.options.dropcursor!==!1&&s.push(R5.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&s.push(M5.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&s.push(p4.configure(this.options.hardBreak)),this.options.heading!==!1&&s.push(m4.configure(this.options.heading)),this.options.undoRedo!==!1&&s.push(j5.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&s.push(g4.configure(this.options.horizontalRule)),this.options.italic!==!1&&s.push(S4.configure(this.options.italic)),this.options.listItem!==!1&&s.push(jC.configure(this.options.listItem)),this.options.listKeymap!==!1&&s.push(PC.configure((t=this.options)==null?void 0:t.listKeymap)),this.options.link!==!1&&s.push(G4.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&s.push($C.configure(this.options.orderedList)),this.options.paragraph!==!1&&s.push(a5.configure(this.options.paragraph)),this.options.strike!==!1&&s.push(c5.configure(this.options.strike)),this.options.text!==!1&&s.push(u5.configure(this.options.text)),this.options.underline!==!1&&s.push(d5.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&s.push(D5.configure((r=this.options)==null?void 0:r.trailingNode)),s}}),z5=L5;const I5=({fun:t})=>{const[e,n]=L.useState(!0),r=JP({extensions:[z5],content:"My article is...",onUpdate({editor:a}){const l=a.isEmpty;n(l)}});if(!r)return null;function s(){const a=r.getHTML();t(a)}return A.jsx("div",{children:A.jsxs("div",{className:" max-h-[90vh] pb-1 pl-1 relative ",children:[A.jsx(bC,{className:"outline-0 overflow-y-auto overflow-x-clip  *:outline-0 pb-6 pl-2 *:required:true",editor:r}),A.jsxs("div",{className:"flex flex-row justify-between mr-1 sticky bottom-0",children:[A.jsxs("div",{className:"bg-gray-300 w-fit wrap-anywhere rounded-4xl px-2  *:mx-1 flex *:wrap-break-word",children:[A.jsx("button",{type:"button",onClick:()=>(event.preventDefault(),r.chain().focus().toggleBold().run()),disabled:!r.can().chain().focus().toggleBold().run(),className:"font-bold",children:"Bold"}),A.jsx("button",{type:"button",onClick:()=>r.chain().focus().toggleItalic().run(),className:"italic",children:"Italic"}),A.jsx("button",{type:"button",onClick:()=>r.chain().focus().toggleHeading({level:1}).run(),children:"H1"}),A.jsx("button",{type:"button",onClick:()=>r.chain().focus().toggleBulletList().run(),children:"Bullet-List"}),A.jsx("button",{type:"button",onClick:()=>r.chain().focus().undo().run(),children:""}),A.jsx("button",{type:"button",onClick:()=>r.chain().focus().redo().run(),children:""})]})," ",A.jsx("div",{children:A.jsx("button",{className:"bg-blue-600 w-fit  px-4 py-2 text-white rounded-4xl border-0 cursor-pointer disabled:bg-red-400",hidden:e,type:"button",onClick:s,children:"Done?"})})]})]})})};function B5(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}const U5=t=>{switch(t){case"success":return $5;case"info":return V5;case"warning":return q5;case"error":return F5;default:return null}},P5=Array(12).fill(0),H5=({visible:t,className:e})=>ae.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},ae.createElement("div",{className:"sonner-spinner"},P5.map((n,r)=>ae.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),$5=ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ae.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),q5=ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},ae.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),V5=ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ae.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),F5=ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ae.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),G5=ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},ae.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ae.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),K5=()=>{const[t,e]=ae.useState(document.hidden);return ae.useEffect(()=>{const n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t};let Oy=1;class W5{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;const{message:r,...s}=e,a=typeof e?.id=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:Oy++,l=this.toasts.find(d=>d.id===a),u=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),l?this.toasts=this.toasts.map(d=>d.id===a?(this.publish({...d,...e,id:a,title:r}),{...d,...e,id:a,dismissible:u,title:r}):d):this.addToast({title:r,...s,dismissible:u,id:a}),a},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:e,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const s=Promise.resolve(e instanceof Function?e():e);let a=r!==void 0,l;const u=s.then(async f=>{if(l=["resolve",f],ae.isValidElement(f))a=!1,this.create({id:r,type:"default",message:f});else if(J5(f)&&!f.ok){a=!1;const m=typeof n.error=="function"?await n.error(`HTTP error! status: ${f.status}`):n.error,v=typeof n.description=="function"?await n.description(`HTTP error! status: ${f.status}`):n.description,w=typeof m=="object"&&!ae.isValidElement(m)?m:{message:m};this.create({id:r,type:"error",description:v,...w})}else if(f instanceof Error){a=!1;const m=typeof n.error=="function"?await n.error(f):n.error,v=typeof n.description=="function"?await n.description(f):n.description,w=typeof m=="object"&&!ae.isValidElement(m)?m:{message:m};this.create({id:r,type:"error",description:v,...w})}else if(n.success!==void 0){a=!1;const m=typeof n.success=="function"?await n.success(f):n.success,v=typeof n.description=="function"?await n.description(f):n.description,w=typeof m=="object"&&!ae.isValidElement(m)?m:{message:m};this.create({id:r,type:"success",description:v,...w})}}).catch(async f=>{if(l=["reject",f],n.error!==void 0){a=!1;const p=typeof n.error=="function"?await n.error(f):n.error,m=typeof n.description=="function"?await n.description(f):n.description,b=typeof p=="object"&&!ae.isValidElement(p)?p:{message:p};this.create({id:r,type:"error",description:m,...b})}}).finally(()=>{a&&(this.dismiss(r),r=void 0),n.finally==null||n.finally.call(n)}),d=()=>new Promise((f,p)=>u.then(()=>l[0]==="reject"?p(l[1]):f(l[1])).catch(p));return typeof r!="string"&&typeof r!="number"?{unwrap:d}:Object.assign(r,{unwrap:d})},this.custom=(e,n)=>{const r=n?.id||Oy++;return this.create({jsx:e(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Gn=new W5,Y5=(t,e)=>{const n=e?.id||Oy++;return Gn.addToast({title:t,...e,id:n}),n},J5=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",X5=Y5,Q5=()=>Gn.toasts,Z5=()=>Gn.getActiveToasts(),eH=Object.assign(X5,{success:Gn.success,info:Gn.info,warning:Gn.warning,error:Gn.error,custom:Gn.custom,message:Gn.message,promise:Gn.promise,dismiss:Gn.dismiss,loading:Gn.loading},{getHistory:Q5,getToasts:Z5});B5("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Qd(t){return t.label!==void 0}const tH=3,nH="24px",rH="16px",NE=4e3,iH=356,sH=14,aH=45,oH=200;function ri(...t){return t.filter(Boolean).join(" ")}function lH(t){const[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}const cH=t=>{var e,n,r,s,a,l,u,d,f;const{invert:p,toast:m,unstyled:v,interacting:b,setHeights:w,visibleToasts:x,heights:S,index:T,toasts:O,expanded:M,removeToast:P,defaultRichColors:C,closeButton:R,style:k,cancelButtonStyle:z,actionButtonStyle:G,className:le="",descriptionClassName:he="",duration:ye,position:Ue,gap:ue,expandByDefault:re,classNames:I,icons:Q,closeButtonAriaLabel:Y="Close toast"}=t,[_e,Ce]=ae.useState(null),[j,J]=ae.useState(null),[W,te]=ae.useState(!1),[ce,we]=ae.useState(!1),[Se,Le]=ae.useState(!1),[Qe,cn]=ae.useState(!1),[Rn,st]=ae.useState(!1),[zr,zn]=ae.useState(0),[Ks,In]=ae.useState(0),fi=ae.useRef(m.duration||ye||NE),Ws=ae.useRef(null),En=ae.useRef(null),Ys=T===0,Js=T+1<=x,un=m.type,Xr=m.dismissible!==!1,_t=m.className||"",hi=m.descriptionClassName||"",Qr=ae.useMemo(()=>S.findIndex(ze=>ze.toastId===m.id)||0,[S,m.id]),Yi=ae.useMemo(()=>{var ze;return(ze=m.closeButton)!=null?ze:R},[m.closeButton,R]),dn=ae.useMemo(()=>m.duration||ye||NE,[m.duration,ye]),Mn=ae.useRef(0),fr=ae.useRef(0),Ja=ae.useRef(0),hr=ae.useRef(null),[pi,wt]=Ue.split("-"),Bn=ae.useMemo(()=>S.reduce((ze,yt,It)=>It>=Qr?ze:ze+yt.height,0),[S,Qr]),Qt=K5(),Xa=m.invert||p,Xs=un==="loading";fr.current=ae.useMemo(()=>Qr*ue+Bn,[Qr,Bn]),ae.useEffect(()=>{fi.current=dn},[dn]),ae.useEffect(()=>{te(!0)},[]),ae.useEffect(()=>{const ze=En.current;if(ze){const yt=ze.getBoundingClientRect().height;return In(yt),w(It=>[{toastId:m.id,height:yt,position:m.position},...It]),()=>w(It=>It.filter(Bt=>Bt.toastId!==m.id))}},[w,m.id]),ae.useLayoutEffect(()=>{if(!W)return;const ze=En.current,yt=ze.style.height;ze.style.height="auto";const It=ze.getBoundingClientRect().height;ze.style.height=yt,In(It),w(Bt=>Bt.find(vt=>vt.toastId===m.id)?Bt.map(vt=>vt.toastId===m.id?{...vt,height:It}:vt):[{toastId:m.id,height:It,position:m.position},...Bt])},[W,m.title,m.description,w,m.id,m.jsx,m.action,m.cancel]);const Yn=ae.useCallback(()=>{we(!0),zn(fr.current),w(ze=>ze.filter(yt=>yt.toastId!==m.id)),setTimeout(()=>{P(m)},oH)},[m,P,w,fr]);ae.useEffect(()=>{if(m.promise&&un==="loading"||m.duration===1/0||m.type==="loading")return;let ze;return M||b||Qt?(()=>{if(Ja.current<Mn.current){const Bt=new Date().getTime()-Mn.current;fi.current=fi.current-Bt}Ja.current=new Date().getTime()})():fi.current!==1/0&&(Mn.current=new Date().getTime(),ze=setTimeout(()=>{m.onAutoClose==null||m.onAutoClose.call(m,m),Yn()},fi.current)),()=>clearTimeout(ze)},[M,b,m,un,Qt,Yn]),ae.useEffect(()=>{m.delete&&(Yn(),m.onDismiss==null||m.onDismiss.call(m,m))},[Yn,m.delete]);function Ir(){var ze;if(Q?.loading){var yt;return ae.createElement("div",{className:ri(I?.loader,m==null||(yt=m.classNames)==null?void 0:yt.loader,"sonner-loader"),"data-visible":un==="loading"},Q.loading)}return ae.createElement(H5,{className:ri(I?.loader,m==null||(ze=m.classNames)==null?void 0:ze.loader),visible:un==="loading"})}const mi=m.icon||Q?.[un]||U5(un);var Br,pr;return ae.createElement("li",{tabIndex:0,ref:En,className:ri(le,_t,I?.toast,m==null||(e=m.classNames)==null?void 0:e.toast,I?.default,I?.[un],m==null||(n=m.classNames)==null?void 0:n[un]),"data-sonner-toast":"","data-rich-colors":(Br=m.richColors)!=null?Br:C,"data-styled":!(m.jsx||m.unstyled||v),"data-mounted":W,"data-promise":!!m.promise,"data-swiped":Rn,"data-removed":ce,"data-visible":Js,"data-y-position":pi,"data-x-position":wt,"data-index":T,"data-front":Ys,"data-swiping":Se,"data-dismissible":Xr,"data-type":un,"data-invert":Xa,"data-swipe-out":Qe,"data-swipe-direction":j,"data-expanded":!!(M||re&&W),"data-testid":m.testId,style:{"--index":T,"--toasts-before":T,"--z-index":O.length-T,"--offset":`${ce?zr:fr.current}px`,"--initial-height":re?"auto":`${Ks}px`,...k,...m.style},onDragEnd:()=>{Le(!1),Ce(null),hr.current=null},onPointerDown:ze=>{ze.button!==2&&(Xs||!Xr||(Ws.current=new Date,zn(fr.current),ze.target.setPointerCapture(ze.pointerId),ze.target.tagName!=="BUTTON"&&(Le(!0),hr.current={x:ze.clientX,y:ze.clientY})))},onPointerUp:()=>{var ze,yt,It;if(Qe||!Xr)return;hr.current=null;const Bt=Number(((ze=En.current)==null?void 0:ze.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Jn=Number(((yt=En.current)==null?void 0:yt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),vt=new Date().getTime()-((It=Ws.current)==null?void 0:It.getTime()),Tn=_e==="x"?Bt:Jn,gi=Math.abs(Tn)/vt;if(Math.abs(Tn)>=aH||gi>.11){zn(fr.current),m.onDismiss==null||m.onDismiss.call(m,m),J(_e==="x"?Bt>0?"right":"left":Jn>0?"down":"up"),Yn(),cn(!0);return}else{var N,U;(N=En.current)==null||N.style.setProperty("--swipe-amount-x","0px"),(U=En.current)==null||U.style.setProperty("--swipe-amount-y","0px")}st(!1),Le(!1),Ce(null)},onPointerMove:ze=>{var yt,It,Bt;if(!hr.current||!Xr||((yt=window.getSelection())==null?void 0:yt.toString().length)>0)return;const vt=ze.clientY-hr.current.y,Tn=ze.clientX-hr.current.x;var gi;const N=(gi=t.swipeDirections)!=null?gi:lH(Ue);!_e&&(Math.abs(Tn)>1||Math.abs(vt)>1)&&Ce(Math.abs(Tn)>Math.abs(vt)?"x":"y");let U={x:0,y:0};const F=ne=>1/(1.5+Math.abs(ne)/20);if(_e==="y"){if(N.includes("top")||N.includes("bottom"))if(N.includes("top")&&vt<0||N.includes("bottom")&&vt>0)U.y=vt;else{const ne=vt*F(vt);U.y=Math.abs(ne)<Math.abs(vt)?ne:vt}}else if(_e==="x"&&(N.includes("left")||N.includes("right")))if(N.includes("left")&&Tn<0||N.includes("right")&&Tn>0)U.x=Tn;else{const ne=Tn*F(Tn);U.x=Math.abs(ne)<Math.abs(Tn)?ne:Tn}(Math.abs(U.x)>0||Math.abs(U.y)>0)&&st(!0),(It=En.current)==null||It.style.setProperty("--swipe-amount-x",`${U.x}px`),(Bt=En.current)==null||Bt.style.setProperty("--swipe-amount-y",`${U.y}px`)}},Yi&&!m.jsx&&un!=="loading"?ae.createElement("button",{"aria-label":Y,"data-disabled":Xs,"data-close-button":!0,onClick:Xs||!Xr?()=>{}:()=>{Yn(),m.onDismiss==null||m.onDismiss.call(m,m)},className:ri(I?.closeButton,m==null||(r=m.classNames)==null?void 0:r.closeButton)},(pr=Q?.close)!=null?pr:G5):null,(un||m.icon||m.promise)&&m.icon!==null&&(Q?.[un]!==null||m.icon)?ae.createElement("div",{"data-icon":"",className:ri(I?.icon,m==null||(s=m.classNames)==null?void 0:s.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||Ir():null,m.type!=="loading"?mi:null):null,ae.createElement("div",{"data-content":"",className:ri(I?.content,m==null||(a=m.classNames)==null?void 0:a.content)},ae.createElement("div",{"data-title":"",className:ri(I?.title,m==null||(l=m.classNames)==null?void 0:l.title)},m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title),m.description?ae.createElement("div",{"data-description":"",className:ri(he,hi,I?.description,m==null||(u=m.classNames)==null?void 0:u.description)},typeof m.description=="function"?m.description():m.description):null),ae.isValidElement(m.cancel)?m.cancel:m.cancel&&Qd(m.cancel)?ae.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||z,onClick:ze=>{Qd(m.cancel)&&Xr&&(m.cancel.onClick==null||m.cancel.onClick.call(m.cancel,ze),Yn())},className:ri(I?.cancelButton,m==null||(d=m.classNames)==null?void 0:d.cancelButton)},m.cancel.label):null,ae.isValidElement(m.action)?m.action:m.action&&Qd(m.action)?ae.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||G,onClick:ze=>{Qd(m.action)&&(m.action.onClick==null||m.action.onClick.call(m.action,ze),!ze.defaultPrevented&&Yn())},className:ri(I?.actionButton,m==null||(f=m.classNames)==null?void 0:f.actionButton)},m.action.label):null)};function DE(){if(typeof window>"u"||typeof document>"u")return"ltr";const t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function uH(t,e){const n={};return[t,e].forEach((r,s)=>{const a=s===1,l=a?"--mobile-offset":"--offset",u=a?rH:nH;function d(f){["top","right","bottom","left"].forEach(p=>{n[`${l}-${p}`]=typeof f=="number"?`${f}px`:f})}typeof r=="number"||typeof r=="string"?d(r):typeof r=="object"?["top","right","bottom","left"].forEach(f=>{r[f]===void 0?n[`${l}-${f}`]=u:n[`${l}-${f}`]=typeof r[f]=="number"?`${r[f]}px`:r[f]}):d(u)}),n}const dH=ae.forwardRef(function(e,n){const{id:r,invert:s,position:a="bottom-right",hotkey:l=["altKey","KeyT"],expand:u,closeButton:d,className:f,offset:p,mobileOffset:m,theme:v="light",richColors:b,duration:w,style:x,visibleToasts:S=tH,toastOptions:T,dir:O=DE(),gap:M=sH,icons:P,containerAriaLabel:C="Notifications"}=e,[R,k]=ae.useState([]),z=ae.useMemo(()=>r?R.filter(W=>W.toasterId===r):R.filter(W=>!W.toasterId),[R,r]),G=ae.useMemo(()=>Array.from(new Set([a].concat(z.filter(W=>W.position).map(W=>W.position)))),[z,a]),[le,he]=ae.useState([]),[ye,Ue]=ae.useState(!1),[ue,re]=ae.useState(!1),[I,Q]=ae.useState(v!=="system"?v:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Y=ae.useRef(null),_e=l.join("+").replace(/Key/g,"").replace(/Digit/g,""),Ce=ae.useRef(null),j=ae.useRef(!1),J=ae.useCallback(W=>{k(te=>{var ce;return(ce=te.find(we=>we.id===W.id))!=null&&ce.delete||Gn.dismiss(W.id),te.filter(({id:we})=>we!==W.id)})},[]);return ae.useEffect(()=>Gn.subscribe(W=>{if(W.dismiss){requestAnimationFrame(()=>{k(te=>te.map(ce=>ce.id===W.id?{...ce,delete:!0}:ce))});return}setTimeout(()=>{yT.flushSync(()=>{k(te=>{const ce=te.findIndex(we=>we.id===W.id);return ce!==-1?[...te.slice(0,ce),{...te[ce],...W},...te.slice(ce+1)]:[W,...te]})})})}),[R]),ae.useEffect(()=>{if(v!=="system"){Q(v);return}if(v==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Q("dark"):Q("light")),typeof window>"u")return;const W=window.matchMedia("(prefers-color-scheme: dark)");try{W.addEventListener("change",({matches:te})=>{Q(te?"dark":"light")})}catch{W.addListener(({matches:ce})=>{try{Q(ce?"dark":"light")}catch(we){console.error(we)}})}},[v]),ae.useEffect(()=>{R.length<=1&&Ue(!1)},[R]),ae.useEffect(()=>{const W=te=>{var ce;if(l.every(Le=>te[Le]||te.code===Le)){var Se;Ue(!0),(Se=Y.current)==null||Se.focus()}te.code==="Escape"&&(document.activeElement===Y.current||(ce=Y.current)!=null&&ce.contains(document.activeElement))&&Ue(!1)};return document.addEventListener("keydown",W),()=>document.removeEventListener("keydown",W)},[l]),ae.useEffect(()=>{if(Y.current)return()=>{Ce.current&&(Ce.current.focus({preventScroll:!0}),Ce.current=null,j.current=!1)}},[Y.current]),ae.createElement("section",{ref:n,"aria-label":`${C} ${_e}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},G.map((W,te)=>{var ce;const[we,Se]=W.split("-");return z.length?ae.createElement("ol",{key:W,dir:O==="auto"?DE():O,tabIndex:-1,ref:Y,className:f,"data-sonner-toaster":!0,"data-sonner-theme":I,"data-y-position":we,"data-x-position":Se,style:{"--front-toast-height":`${((ce=le[0])==null?void 0:ce.height)||0}px`,"--width":`${iH}px`,"--gap":`${M}px`,...x,...uH(p,m)},onBlur:Le=>{j.current&&!Le.currentTarget.contains(Le.relatedTarget)&&(j.current=!1,Ce.current&&(Ce.current.focus({preventScroll:!0}),Ce.current=null))},onFocus:Le=>{Le.target instanceof HTMLElement&&Le.target.dataset.dismissible==="false"||j.current||(j.current=!0,Ce.current=Le.relatedTarget)},onMouseEnter:()=>Ue(!0),onMouseMove:()=>Ue(!0),onMouseLeave:()=>{ue||Ue(!1)},onDragEnd:()=>Ue(!1),onPointerDown:Le=>{Le.target instanceof HTMLElement&&Le.target.dataset.dismissible==="false"||re(!0)},onPointerUp:()=>re(!1)},z.filter(Le=>!Le.position&&te===0||Le.position===W).map((Le,Qe)=>{var cn,Rn;return ae.createElement(cH,{key:Le.id,icons:P,index:Qe,toast:Le,defaultRichColors:b,duration:(cn=T?.duration)!=null?cn:w,className:T?.className,descriptionClassName:T?.descriptionClassName,invert:s,visibleToasts:S,closeButton:(Rn=T?.closeButton)!=null?Rn:d,interacting:ue,position:W,style:T?.style,unstyled:T?.unstyled,classNames:T?.classNames,cancelButtonStyle:T?.cancelButtonStyle,actionButtonStyle:T?.actionButtonStyle,closeButtonAriaLabel:T?.closeButtonAriaLabel,removeToast:J,toasts:z.filter(st=>st.position==Le.position),heights:le.filter(st=>st.position==Le.position),setHeights:he,expandByDefault:u,gap:M,expanded:ye,swipeDirections:e.swipeDirections})})):null}))});function WC(){const[t]=L.useContext(ph),e=t?.user_id,[n,r]=L.useState(""),[s,a]=L.useState();function l(f){r(f)}async function u(){if(event.preventDefault(),!s||!n)return;const f=await ur.from("ArticleTable").insert({author_id:e,title:s,body:n}).select();let p=f?.error,m=f?.data;if(p)throw new Error(p);m&&(console.log(m),eH("Successfuly, Added."),document.getElementById("writerForm").reset())}let d=Fa();return A.jsx("div",{className:`w-[86vw] \r
		sticky\r
		top-80\r
		mx-auto\r
		sm:w-[60vw]\r
		\r
		`,children:A.jsxs("form",{onSubmit:u,id:"writerForm",children:[A.jsx("div",{className:"flex  justify-between ",children:A.jsxs("div",{className:"flex items-center",children:[A.jsx(VN,{size:24,className:"hover:bg-gray-200 rounded-full p-1 hidden hover:cursor-pointer",onClick:()=>{d("/home")}}),A.jsx("div",{className:"hidden",children:A.jsx("p",{className:"text-xl px-2",children:"Write article"})})]})}),A.jsxs("div",{className:"overflow-y-auto my-1 box-border border border-gray-300 rounded-xl shadow",children:[A.jsx("div",{className:"border-b  border-b-gray-100",children:A.jsx("input",{value:s,onChange:f=>a(f.target.value),type:"text",placeholder:"What is title ?",className:" p-2 pl-4  w-full text-lg outline-0 text-bold ",required:!0})}),A.jsx(I5,{fun:l})]}),A.jsx("div",{children:n&&s?.length>4&&A.jsx("div",{className:"bg-blue-600 w-fit  px-4 py-2 text-white rounded-4xl border-0 absolute bottom-1 right-1 cursor-pointer",onClick:u,children:A.jsx("button",{type:"submit",className:"cursor-pointer",children:"Publish"})})})]})})}function fH(){return A.jsxs("div",{className:"w-full box-border min-h-screen ",children:[A.jsx(RL,{}),A.jsx("div",{className:"mt-20 overflow-auto",id:"writer",children:A.jsx(WC,{})}),A.jsx("div",{className:"box-border",children:A.jsx(VL,{})})]})}const hH="media_pennat",jE="dmfy51165";function YC({cover:t,setCover:e,SetPopup:n,user_id:r}){const[s,a]=L.useState(),[l,u]=L.useState();async function d(){if(event.preventDefault(),l){const p=new FormData;p.append("file",l),p.append("upload_preset",hH),p.append("cloud_name",jE);try{let m=await fetch(`https://api.cloudinary.com/v1_1/${jE}/image/upload`,{method:"POST",body:p});console.log(m);let v=await m.json();if(m.ok&&r){let b=await ur.from("UserTable").update({cover_img:v.secure_url}).eq("user_id",r);if(b.error){console.log(b.error);return}else console.log(b?.data),e(s),a(null)}}catch(m){console.log(m)}}}function f(){let p=event.target.files[0];if(p){let m=URL.createObjectURL(p);a(m),console.log(p),u(p)}}return A.jsx("div",{className:"fixed inset-0  w-full h-fit bg-opacity-50 flex items-center justify-center box-border z-50 p-2 sm:p-4",children:A.jsxs("div",{className:"relative bg-gray-100 border border-gray-300 rounded-xl p-4 sm:p-8 md:p-12",children:[A.jsx(uf,{onClick:()=>{n(p=>!p)},size:20,className:"bg-white rounded-full cursor-pointer absolute -top-2 -right-2 p-1 hover:bg-gray-200 transition"}),A.jsx("div",{className:"w-full font-bold text-lg sm:text-xl md:text-2xl mb-3 sm:mb-4",children:"Edit cover photo"}),A.jsx("div",{children:A.jsx("img",{src:t,alt:"current cover",className:"rounded-xl my-2 max-h-32 sm:max-h-40 w-full object-cover"})}),A.jsxs("form",{onReset:()=>{a(null)},children:[A.jsxs("label",{htmlFor:"img-input",className:"w-full bg-gray-300 flex flex-row items-center gap-2 rounded-xl p-2 border hover:bg-gray-400 cursor-pointer text-sm sm:text-base",children:[A.jsx(ST,{className:"inline shrink-0",size:20}),A.jsx("span",{className:"truncate",children:"Choose Image"}),A.jsx("input",{type:"file",accept:"image/*",id:"img-input",onChange:f,className:"hidden"})]}),s&&A.jsxs("div",{className:"w-full mt-3 sm:mt-4",children:[A.jsxs("div",{className:"relative",children:[A.jsxs("label",{htmlFor:"reset",className:"absolute top-2 right-2 z-10",children:[A.jsx("input",{type:"reset",id:"reset",className:"hidden"}),A.jsx(uf,{size:18,className:"bg-white rounded-full cursor-pointer p-0.5 hover:bg-gray-200 transition"})]}),A.jsx("img",{src:s,alt:"preview",className:"rounded-xl w-full max-h-48 sm:max-h-60 object-cover"})]}),A.jsx("div",{className:"mt-3 sm:mt-4",children:A.jsx("button",{type:"submit",className:"w-full sm:w-auto bg-black cursor-pointer text-white px-4 sm:px-6 py-2 rounded-xl hover:bg-gray-800 transition text-sm sm:text-base",onClick:d,children:"Submit"})})]})]})]})})}const sh="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcThB0PTPX27wNANQCMsOdMUf_dhNc38kfOxmw&s",pH="media_pennat",LE="dmfy51165";function JC({setImgEditor:t,user_id:e,profileImg:n,setProfileImg:r}){const[s,a]=L.useState(),[l,u]=L.useState();console.log(e);async function d(){if(event.preventDefault(),l){const p=new FormData;p.append("file",l),p.append("upload_preset",pH),p.append("cloud_name",LE);try{let m=await fetch(`https://api.cloudinary.com/v1_1/${LE}/image/upload`,{method:"POST",body:p}),v=await m.json();if(m.ok&&e){console.log("url",v.secure_url),console.log("Calling supabase.");let b=await ur.from("UserTable").update({profile_img:v?.secure_url}).eq("user_id",e).select();if(console.log(b),b.error){console.log("We got error"),console.log(b.error);return}else console.log("We got data."),console.log(b.data),r(s),a(null)}}catch(m){console.log(m)}}}function f(){let p=event.target.files[0];if(p){let m=URL.createObjectURL(p);a(m),console.log(p),u(p)}}return A.jsx("div",{className:"fixed inset-0  w-full h-fit bg-opacity-50 flex items-center justify-center box-border z-50 p-2 sm:p-4",children:A.jsxs("div",{className:"relative bg-gray-100 border border-gray-300 rounded-xl p-4 sm:p-8 md:p-12",children:[A.jsx(uf,{onClick:()=>{t(p=>!p)},size:20,className:"bg-white rounded-full cursor-pointer absolute -top-2 -right-2 p-1 hover:bg-gray-200 transition"}),A.jsx("div",{className:"w-full font-bold text-lg sm:text-xl md:text-2xl mb-3 sm:mb-4",children:"Edit profile photo"}),A.jsx("div",{children:A.jsx("img",{src:n,alt:"current profile",className:"rounded-xl my-2 max-h-32 sm:max-h-40 w-full object-cover"})}),A.jsxs("form",{onReset:()=>{a(null)},children:[A.jsxs("label",{htmlFor:"img-input",className:"w-full bg-gray-300 flex flex-row items-center gap-2 rounded-xl p-2 border hover:bg-gray-400 cursor-pointer text-sm sm:text-base",children:[A.jsx(ST,{className:"inline shrink-0",size:20}),A.jsx("span",{className:"truncate",children:"Choose Image"}),A.jsx("input",{type:"file",accept:"image/*",id:"img-input",onChange:f,className:"hidden"})]}),s&&A.jsxs("div",{className:"w-full mt-3 sm:mt-4",children:[A.jsxs("div",{className:"relative",children:[A.jsxs("label",{htmlFor:"reset",className:"absolute top-2 right-2 z-10",children:[A.jsx("input",{type:"reset",id:"reset",className:"hidden"}),A.jsx(uf,{size:18,className:"bg-white rounded-full cursor-pointer p-0.5 hover:bg-gray-200 transition"})]}),A.jsx("img",{src:s,alt:"preview",className:"rounded-xl w-full max-h-48 sm:max-h-60 object-cover"})]}),A.jsx("div",{className:"mt-3 sm:mt-4",children:A.jsx("button",{type:"submit",className:"w-full sm:w-auto bg-black cursor-pointer text-white px-4 sm:px-6 py-2 rounded-xl hover:bg-gray-800 transition text-sm sm:text-base",onClick:d,children:"Submit"})})]})]})]})})}function mH({text:t}){return A.jsx("div",{className:" ",children:A.jsxs("div",{className:"flex items-center  h-full w-full bg-gray-200 border px-2 py-2 rounded-full  justify-self-center",children:[A.jsx(JD,{})," ",A.jsxs("span",{className:"ml-1",children:[t,!t&&"Please wait."]})]})})}function gH({article:t,setArticle:e}){const[n,r]=L.useState();if(!t)return;async function s(){console.log(t),r(!0),(await ur.from("ArticleTable").delete().eq("id",t.id)).error||(e(l=>l.filter(u=>u.id!=t.id)),r(!1))}return A.jsxs("div",{className:"border box-border px-4  hover:bg-gray-200 rounded-lg m-2   -bg-conic-120 shadow-inner min-h-30 min-w-40 flex items-center border-gray-300  max-w-[80%] sm:max-w-1/3",children:[n&&A.jsx(mH,{text:"Deleting.."}),!n&&A.jsxs("div",{children:[A.jsx("div",{className:"flex justify-end",children:A.jsxs("select",{name:"",id:"",className:"w-fit *:w-fit px-2 py-1 ",children:[A.jsx("option",{value:"",className:"hidden"}),A.jsx("option",{value:"",className:"bg-red-500 ",onClick:s,children:"Delete"}),A.jsx("option",{value:"",className:"",children:"Edit"})]})}),A.jsxs("div",{className:"",children:[A.jsx("p",{className:"font-bold pt-2  px-2",children:t.title}),A.jsx("p",{className:"text-sm px-2 text-wrap  max-h-60 overflow-y-clip",children:lk(t.body)})]})]})]})}function XC({ArticleTable:t}){console.log(t);const[e,n]=L.useState(t);return A.jsxs("div",{children:[A.jsx("p",{className:"text-xs  font-semibold uppercase tracking-wider text-gray-400 border-t pt-2 border-t-gray-200 mx-10 ",children:"My articles"}),A.jsx("div",{className:"flex flex-wrap flex-col  sm:flex-row justify-center sm:items-start items-center",children:e?.map(r=>A.jsx(gH,{article:r,setArticle:n},crypto.randomUUID()))})]})}function yH(){const[t]=L.useContext(ph),[e,n]=L.useState(!1),[r,s]=L.useState(!1),[a,l]=L.useState(!1),[u,d]=L.useState(!1),[f,p]=L.useState(sh),[m,v]=L.useState(Gc),[b,w]=L.useState("");L.useEffect(()=>{function T(){t!=null?(p(t.cover_img||sh),v(t.profile_img||Gc),w(t.about||""),s(!0),l(!1)):s(!1)}T()},[t]);const x=t?.name||"",S=t?.username||"";return t?.email,!r&&!a?A.jsx("div",{className:"min-h-screen flex items-center justify-center",children:A.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[A.jsx(cu,{size:24,className:"animate-spin"}),A.jsx("span",{children:"Loading profile..."})]})}):a?A.jsx("div",{className:"min-h-screen flex items-center justify-center",children:A.jsx("div",{className:"bg-orange-200 w-fit p-4 rounded-xl border border-red-400 text-red-700",children:"Something went wrong loading the profile."})}):A.jsxs("div",{className:"min-h-screen from-gray-50 to-gray-200 box-border max-w-[99%] ",children:[A.jsx("button",{onClick:()=>history.back(),className:`fixed top-5 left-5 z-10 cursor-pointer rounded-full bg-white/80 backdrop-blur \r
               p-2 shadow hover:scale-105 transition`,children:A.jsx(bT,{className:"text-gray-700"})}),A.jsx("button",{className:"fixed right-2 top-4 bg-gray-200 z-20 rounded-4xl py-3 px-2 ",children:A.jsx(cf,{height:"16px",onClick:()=>{d(T=>!T)},className:"hover:-rotate-8 cursor-pointer "})}),f&&A.jsxs("div",{className:"w-full overflow-x-hidden bg-gray-100 max-h-50 rounded-b-sm p-2 h-50 flex justify-center bg-cover overflow-clip",children:[" ",A.jsx("img",{src:f,className:" max-w-full w-fit  rounded-b-sm scale-200 sm:scale-300 md:scale-600 lg:scale-700 overflow-hidden "})]}),A.jsx("div",{className:"-mt-24 max-w-xl mx-auto px-4",children:A.jsxs("div",{className:"bg-transparent rounded p-6",children:[A.jsxs("div",{className:"flex relative [&>button]:hidden [&:hover>button]:block flex-col items-center",children:[m&&A.jsxs(A.Fragment,{children:[A.jsx("button",{className:"absolute ml-18 bg-white rounded-4xl py-1 px-1 ",children:A.jsx(cf,{height:"16px",onClick:()=>{n(T=>!T)},className:"hover:-rotate-8 cursor-pointer"})}),A.jsx("img",{src:m,alt:"user",className:"w-32 h-32 rounded-full ring-4 ring-white shadow-md object-cover"})]}),x&&A.jsx("h2",{className:"mt-4 text-2xl font-bold text-gray-900",children:x}),S&&A.jsxs("p",{className:"text-sm text-gray-500",children:["@",S]})]}),A.jsx("div",{className:"space-y-0",children:b&&A.jsxs("div",{children:[A.jsx("p",{className:"text-xs font-semibold uppercase tracking-wider text-gray-400",children:"About me"}),A.jsx("p",{className:"text-gray-700 mt-1 leading-relaxed    rounded",children:b})]})})]})}),u&&t&&A.jsx(YC,{setCover:p,SetPopup:d,cover:f,user_id:t.user_id}),e&&A.jsx(JC,{profileImg:m,setProfileImg:v,setImgEditor:n,user_id:t?.user_id}),t?.ArticleTable&&A.jsx(XC,{ArticleTable:t?.ArticleTable})]})}function zE(){const[t,e]=L.useState(!0),n=Fa(),[,r]=L.useContext(hh);return L.useEffect(()=>{async function s(){try{console.log("Load User called.");let{data:a,error:l}=await ur.auth.getSession();if(l||!a?.session)return e(!1),n("/login"),null;const u=await ur.from("ArticleTable").select("id,title,author_id,body,UserTable(name,username,profile_img,user_id)");if(u.error)return console.error("Database error:",u.error),alert("Error loading articles"),n("/login",{replace:!0}),e(!1),null;if(u.data)return r(u.data),n("/home",{replace:!0}),null}catch(a){return e(!1),n("/login"),console.log(a),null}return null}s()},[]),A.jsxs("div",{className:"max-w-screen min-h-screen  box-border overflow-x-hidden",children:[t&&A.jsx("div",{className:"bg-gray-10 relative h-screen w-screen flex  justify-center items-center ",children:A.jsxs("div",{className:"top-1/3 text-shadow-gray-800   right-[50%] left-[50%] text-3xl font-bold font-[verdana] ",children:["Pennat",A.jsxs("div",{className:"flex flex-row-reverse items-center",children:[" ",A.jsx("p",{className:"text-sm  font-normal text-shadow-none p-2 ",children:"loading.."}),A.jsx(cu,{size:24,className:" animate-spin  py-2 rounded-2xl w-fit h-fit text-xs ",children:"/"})]})]})}),!t&&A.jsx("div",{className:"bg-orange-200 w-fit m-auto p-4 rounded-xl border border-red-400 text-red-700",children:"something went wrong."})]})}function vH(){const{username:t}=jM();let[e,n]=L.useState();L.useEffect(()=>{async function M(){const P=await ur.from("UserTable").select("*,ArticleTable(*)").eq("username",t).single();P.error||P.data&&n(P.data)}M()},[n,t]);const[r,s]=L.useState(!1),[a,l]=L.useState(!1),[u,d]=L.useState(!1),[f,p]=L.useState(!1),[m,v]=L.useState(sh),[b,w]=L.useState(Gc),[x,S]=L.useState("");L.useEffect(()=>{function M(){e!=null?(v(e.cover_img||sh),w(e.profile_img||Gc),S(e.about||""),l(!0),d(!1)):l(!1)}M()},[e]);const T=e?.name||"",O=e?.username||"";return!a&&!u?A.jsx("div",{className:"min-h-screen flex items-center justify-center",children:A.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[A.jsx(cu,{size:24,className:"animate-spin"}),A.jsx("span",{children:"Loading profile..."})]})}):u?A.jsx("div",{className:"min-h-screen flex items-center justify-center",children:A.jsx("div",{className:"bg-orange-200 w-fit p-4 rounded-xl border border-red-400 text-red-700",children:"Something went wrong loading the profile."})}):A.jsxs("div",{className:"min-h-screen from-gray-50 to-gray-200 box-border max-w-[99%] ",children:[A.jsx("button",{onClick:()=>history.back(),className:`fixed top-5 left-5 z-10 cursor-pointer rounded-full bg-white/80 backdrop-blur \r
               p-2 shadow hover:scale-105 transition`,children:A.jsx(bT,{className:"text-gray-700"})}),A.jsx("button",{className:"fixed right-2 top-4 bg-gray-200 z-20 rounded-4xl py-3 px-2 ",children:A.jsx(cf,{height:"16px",onClick:()=>{p(M=>!M)},className:"hover:-rotate-8 cursor-pointer "})}),m&&A.jsxs("div",{className:"w-full overflow-x-hidden bg-gray-100 max-h-50 rounded-b-sm p-2 h-50 flex justify-center bg-cover overflow-clip",children:[" ",A.jsx("img",{src:m,className:" max-w-full w-fit  rounded-b-sm scale-200 sm:scale-300 md:scale-600 lg:scale-700 overflow-hidden "})]}),A.jsx("div",{className:"-mt-24 max-w-xl mx-auto px-4",children:A.jsxs("div",{className:"bg-transparent rounded p-6",children:[A.jsxs("div",{className:"flex relative [&>button]:hidden [&:hover>button]:block flex-col items-center",children:[b&&A.jsxs(A.Fragment,{children:[A.jsx("button",{className:"absolute ml-18 bg-white rounded-4xl py-1 px-1 ",children:A.jsx(cf,{height:"16px",onClick:()=>{s(M=>!M)},className:"hover:-rotate-8 cursor-pointer"})}),A.jsx("img",{src:b,alt:"user",className:"w-32 h-32 rounded-full ring-4 ring-white shadow-md object-cover"})]}),T&&A.jsx("h2",{className:"mt-4 text-2xl font-bold text-gray-900",children:T}),O&&A.jsxs("p",{className:"text-sm text-gray-500",children:["@",O]})]}),A.jsx("div",{className:"space-y-0",children:x&&A.jsxs("div",{children:[A.jsx("p",{className:"text-xs font-semibold uppercase tracking-wider text-gray-400",children:"About me"}),A.jsx("p",{className:"text-gray-700 mt-1 leading-relaxed    rounded",children:x})]})})]})}),f&&e&&A.jsx(YC,{setCover:v,SetPopup:p,cover:m,user_id:e.user_id}),r&&A.jsx(JC,{profileImg:b,setProfileImg:w,setImgEditor:s,user_id:e?.user_id}),e?.ArticleTable&&A.jsx(XC,{ArticleTable:e?.ArticleTable})]})}function bH(){console.log("SUPABASE URL:","https://qnxquvnewtbzdgywthlw.supabase.co");const t=_N([{path:"/",element:A.jsx(A.Fragment,{children:A.jsx(zE,{})})},{path:"/write",element:A.jsx(A.Fragment,{children:A.jsx(WC,{})}),errorElement:A.jsx("h2",{children:"Error Occurred."})},{path:"/:username",element:A.jsx(vH,{})},{path:"/auth",element:A.jsx(A.Fragment,{children:A.jsx(zE,{})})},{path:"/home",element:A.jsx(A.Fragment,{children:A.jsx(fH,{})})},{path:"/login",element:A.jsx(A.Fragment,{children:A.jsx(AL,{})})},{path:"/signup",element:A.jsx(A.Fragment,{children:A.jsx(OL,{})})},{path:"/profile",element:A.jsx(A.Fragment,{children:A.jsx(yH,{})})}]),[e,n]=L.useState([]),[r,s]=L.useState();return L.useEffect(()=>{async function a(){console.log("Calling profile page");let l=await ur.auth.getUser();if(l.data&&l.data.user){let{id:u}=l.data.user,{data:d,error:f}=await ur.from("UserTable").select("*,ArticleTable(*)").eq("user_id",u).single();!f&&d&&(s(d),console.log(d)),f&&console.log(f)}}return a(),()=>{}},[]),L.useEffect(()=>(console.log(e),()=>{}),[e]),A.jsxs("div",{children:[A.jsx(dH,{position:"top-center"}),A.jsx(hh.Provider,{value:[e,n],children:A.jsx(ph.Provider,{value:[r],children:A.jsx(IN,{router:t})})})]})}pR.createRoot(document.getElementById("root")).render(A.jsx(L.StrictMode,{children:A.jsx(bH,{})}));
